!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(203)},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){e.exports=n(414)},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,s,a],c=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[c++]}))}throw l.framesToPop=1,l}};e.exports=i},function(e,t){"use strict";t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){"use strict";var i=n(132)["default"];t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t.__esModule=!0},function(e,t,n){"use strict";var i=n(133)["default"];t["default"]=function(e,t,n){for(var r=!0;r;){var o=e,s=t,a=n;l=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var l=i(o,s);if(void 0!==l){if("value"in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=s,n=a,r=!0}},t.__esModule=!0},function(e,t,n){"use strict";var i=n(279)["default"],r=n(281)["default"];t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=i(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r?r(e,t):e.__proto__=t)},t.__esModule=!0},function(e,t){"use strict";function n(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),i=Object.prototype.hasOwnProperty,r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o){var s=Object(o);for(var a in s)i.call(s,a)&&(n[a]=s[a])}}return n}e.exports=n},function(e,t,n){"use strict";var i=n(105),r=n(20),o=n(8),s=(n(10),{key:!0,ref:!0}),a=function(e,t,n,i,r,o){this.type=e,this.key=t,this.ref=n,this._owner=i,this._context=r,this.props=o};a.prototype={_isReactElement:!0},a.createElement=function(e,t,n){var o,l={},u=null,c=null;if(null!=t){c=void 0===t.ref?null:t.ref,u=void 0===t.key?null:""+t.key;for(o in t)t.hasOwnProperty(o)&&!s.hasOwnProperty(o)&&(l[o]=t[o])}var d=arguments.length-2;if(1===d)l.children=n;else if(d>1){for(var h=Array(d),p=0;d>p;p++)h[p]=arguments[p+2];l.children=h}if(e&&e.defaultProps){var m=e.defaultProps;for(o in m)"undefined"==typeof l[o]&&(l[o]=m[o])}return new a(e,u,c,r.current,i.current,l)},a.createFactory=function(e){var t=a.createElement.bind(null,e);return t.type=e,t},a.cloneAndReplaceProps=function(e,t){var n=new a(e.type,e.key,e.ref,e._owner,e._context,t);return n},a.cloneElement=function(e,t,n){var i,l=o({},e.props),u=e.key,c=e.ref,d=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,d=r.current),void 0!==t.key&&(u=""+t.key);for(i in t)t.hasOwnProperty(i)&&!s.hasOwnProperty(i)&&(l[i]=t[i])}var h=arguments.length-2;if(1===h)l.children=n;else if(h>1){for(var p=Array(h),m=0;h>m;m++)p[m]=arguments[m+2];l.children=p}return new a(e.type,u,c,d,e._context,l)},a.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},e.exports=a},function(e,t,n){"use strict";var i=n(28),r=i;e.exports=r},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=i},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},t.__esModule=!0},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";var i=n(61),r=i({bubbled:null,captured:null}),o=i({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),s={topLevelTypes:o,PropagationPhases:r};e.exports=s},function(e,t,n){"use strict";function i(e,t){var n=S.hasOwnProperty(t)?S[t]:null;x.hasOwnProperty(t)&&v(n===w.OVERRIDE_BASE),e.hasOwnProperty(t)&&v(n===w.DEFINE_MANY||n===w.DEFINE_MANY_MERGED)}function r(e,t){if(t){v("function"!=typeof t),v(!h.isValidElement(t));var n=e.prototype;t.hasOwnProperty(C)&&E.mixins(e,t.mixins);for(var r in t)if(t.hasOwnProperty(r)&&r!==C){var o=t[r];if(i(n,r),E.hasOwnProperty(r))E[r](e,o);else{var s=S.hasOwnProperty(r),u=n.hasOwnProperty(r),c=o&&o.__reactDontBind,d="function"==typeof o,p=d&&!s&&!u&&!c;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=o,n[r]=o;else if(u){var m=S[r];v(s&&(m===w.DEFINE_MANY_MERGED||m===w.DEFINE_MANY)),m===w.DEFINE_MANY_MERGED?n[r]=a(n[r],o):m===w.DEFINE_MANY&&(n[r]=l(n[r],o))}else n[r]=o}}}}function o(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in E;v(!r);var o=n in e;v(!o),e[n]=i}}}function s(e,t){v(e&&t&&"object"==typeof e&&"object"==typeof t);for(var n in t)t.hasOwnProperty(n)&&(v(void 0===e[n]),e[n]=t[n]);return e}function a(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return s(r,n),s(r,i),r}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function u(e,t){var n=t.bind(e);return n}function c(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=u(e,p.guard(n,e.constructor.displayName+"."+t))}}var d=n(173),h=(n(20),n(9)),p=n(430),m=n(46),f=n(108),_=(n(109),n(77),n(110)),g=n(8),v=n(3),y=n(61),b=n(29),C=(n(10),b({mixins:null})),w=y({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),I=[],S={mixins:w.DEFINE_MANY,statics:w.DEFINE_MANY,propTypes:w.DEFINE_MANY,contextTypes:w.DEFINE_MANY,childContextTypes:w.DEFINE_MANY,getDefaultProps:w.DEFINE_MANY_MERGED,getInitialState:w.DEFINE_MANY_MERGED,getChildContext:w.DEFINE_MANY_MERGED,render:w.DEFINE_ONCE,componentWillMount:w.DEFINE_MANY,componentDidMount:w.DEFINE_MANY,componentWillReceiveProps:w.DEFINE_MANY,shouldComponentUpdate:w.DEFINE_ONCE,componentWillUpdate:w.DEFINE_MANY,componentDidUpdate:w.DEFINE_MANY,componentWillUnmount:w.DEFINE_MANY,updateComponent:w.OVERRIDE_BASE},E={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=g({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=g({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=a(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=g({},e.propTypes,t)},statics:function(e,t){o(e,t)}},x={replaceState:function(e,t){_.enqueueReplaceState(this,e),t&&_.enqueueCallback(this,t)},isMounted:function(){var e=m.get(this);return e&&e!==f.currentlyMountingInstance},setProps:function(e,t){_.enqueueSetProps(this,e),t&&_.enqueueCallback(this,t)},replaceProps:function(e,t){_.enqueueReplaceProps(this,e),t&&_.enqueueCallback(this,t)}},P=function(){};g(P.prototype,d.prototype,x);var k={createClass:function(e){var t=function(e,t){this.__reactAutoBindMap&&c(this),this.props=e,this.context=t,this.state=null;var n=this.getInitialState?this.getInitialState():null;v("object"==typeof n&&!Array.isArray(n)),this.state=n};t.prototype=new P,t.prototype.constructor=t,I.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),v(t.prototype.render);for(var n in S)t.prototype[n]||(t.prototype[n]=null);return t.type=t,t},injection:{injectMixin:function(e){I.push(e)}}};e.exports=k},function(e,t,n){"use strict";function i(){_(x.ReactReconcileTransaction&&b)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=x.ReactReconcileTransaction.getPooled()}function o(e,t,n,r,o){i(),b.batchedUpdates(e,t,n,r,o)}function s(e,t){return e._mountOrder-t._mountOrder}function a(e){var t=e.dirtyComponentsLength;_(t===g.length),g.sort(s);for(var n=0;t>n;n++){var i=g[n],r=i._pendingCallbacks;if(i._pendingCallbacks=null,p.performUpdateIfNecessary(i,e.reconcileTransaction),r)for(var o=0;o<r.length;o++)e.callbackQueue.enqueue(r[o],i.getPublicInstance())}}function l(e){return i(),b.isBatchingUpdates?void g.push(e):void b.batchedUpdates(l,e)}function u(e,t){_(b.isBatchingUpdates),v.enqueue(e,t),y=!0}var c=n(99),d=n(18),h=(n(20),n(37)),p=n(47),m=n(79),f=n(8),_=n(3),g=(n(10),[]),v=c.getPooled(),y=!1,b=null,C={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),S()):g.length=0}},w={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},I=[C,w];f(r.prototype,m.Mixin,{getTransactionWrappers:function(){return I},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,x.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),d.addPoolingTo(r);var S=function(){for(;g.length||y;){if(g.length){var e=r.getPooled();e.perform(a,null,e),r.release(e)}if(y){y=!1;var t=v;v=c.getPooled(),t.notifyAll(),c.release(t)}}};S=h.measure("ReactUpdates","flushBatchedUpdates",S);var E={injectReconcileTransaction:function(e){_(e),x.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){_(e),_("function"==typeof e.batchedUpdates),_("boolean"==typeof e.isBatchingUpdates),b=e}},x={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:l,flushBatchedUpdates:S,injection:E,asap:u};e.exports=x},function(e,t,n){var i=n(305)("wks"),r=n(25).Symbol;e.exports=function(e){return i[e]||(i[e]=r&&r[e]||(r||n(145))("Symbol."+e))}},function(e,t,n){"use strict";var i=n(3),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},o=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},s=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},a=function(e,t,n,i,r){var o=this;if(o.instancePool.length){var s=o.instancePool.pop();return o.call(s,e,t,n,i,r),s}return new o(e,t,n,i,r)},l=function(e){var t=this;i(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},u=10,c=r,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||c,n.poolSize||(n.poolSize=u),n.release=l,n},h={addPoolingTo:d,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:s,fiveArgumentPooler:a};e.exports=h},function(e,t,n){"use strict";var i=n(184),r={getDOMNode:function(){return i(this)}};e.exports=r},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";function i(e,t){for(var n=Math.min(e.length,t.length),i=0;n>i;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function r(e){var t=T(e);return t&&j.getID(t)}function o(e){var t=s(e);if(t)if(R.hasOwnProperty(t)){var n=R[t];n!==e&&(A(!c(n,t)),R[t]=e)}else R[t]=e;return t}function s(e){return e&&e.getAttribute&&e.getAttribute(B)||""}function a(e,t){var n=s(e);n!==t&&delete R[n],e.setAttribute(B,t),R[t]=e}function l(e){return R.hasOwnProperty(e)&&c(R[e],e)||(R[e]=j.findReactNodeByID(e)),R[e]}function u(e){var t=C.get(e)._rootNodeID;return y.isNullComponentID(t)?null:(R.hasOwnProperty(t)&&c(R[t],t)||(R[t]=j.findReactNodeByID(t)),R[t])}function c(e,t){if(e){A(s(e)===t);var n=j.findReactContainerForID(t);if(n&&k(n,e))return!0}return!1}function d(e){delete R[e]}function h(e){var t=R[e];return t&&c(t,e)?void(U=t):!1}function p(e){U=null,b.traverseAncestors(e,h);var t=U;return U=null,t}function m(e,t,n,i,r){var o=S.mountComponent(e,t,i,P);e._isTopLevel=!0,j._mountImageIntoNode(o,n,r)}function f(e,t,n,i){var r=x.ReactReconcileTransaction.getPooled();r.perform(m,null,e,t,n,r,i),x.ReactReconcileTransaction.release(r)}var _=n(43),g=n(44),v=(n(20),n(9)),y=(n(59),n(107)),b=n(45),C=n(46),w=n(177),I=n(37),S=n(47),E=n(110),x=n(16),P=n(80),k=n(183),T=n(462),M=n(116),A=n(3),O=n(118),D=n(119),L=(n(10),b.SEPARATOR),B=_.ID_ATTRIBUTE_NAME,R={},N=1,F=9,z={},H={},W=[],U=null,j={_instancesByReactRootID:z,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i){return j.scrollMonitor(n,function(){E.enqueueElementInternal(e,t),i&&E.enqueueCallbackInternal(e,i)}),e},_registerComponent:function(e,t){A(t&&(t.nodeType===N||t.nodeType===F)),g.ensureScrollValueMonitoring();var n=j.registerContainer(t);return z[n]=e,n},_renderNewRootComponent:function(e,t,n){var i=M(e,null),r=j._registerComponent(i,t);return x.batchedUpdates(f,i,r,t,n),i},render:function(e,t,n){A(v.isValidElement(e));var i=z[r(t)];if(i){var o=i._currentElement;if(D(o,e))return j._updateRootComponent(i,e,t,n).getPublicInstance();j.unmountComponentAtNode(t)}var s=T(t),a=s&&j.isRenderedByReact(s),l=a&&!i,u=j._renderNewRootComponent(e,t,l).getPublicInstance();return n&&n.call(u),u},constructAndRenderComponent:function(e,t,n){var i=v.createElement(e,t);return j.render(i,n)},constructAndRenderComponentByID:function(e,t,n){var i=document.getElementById(n);return A(i),j.constructAndRenderComponent(e,t,i)},registerContainer:function(e){var t=r(e);return t&&(t=b.getReactRootIDFromNodeID(t)),t||(t=b.createReactRootID()),H[t]=e,t},unmountComponentAtNode:function(e){A(e&&(e.nodeType===N||e.nodeType===F));var t=r(e),n=z[t];return n?(j.unmountComponentFromNode(n,e),delete z[t],delete H[t],!0):!1},unmountComponentFromNode:function(e,t){for(S.unmountComponent(e),t.nodeType===F&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=b.getReactRootIDFromNodeID(e),n=H[t];return n},findReactNodeByID:function(e){var t=j.findReactContainerForID(e);return j.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=j.getID(e);return t?t.charAt(0)===L:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(j.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=W,i=0,r=p(t)||e;for(n[0]=r.firstChild,n.length=1;i<n.length;){for(var o,s=n[i++];s;){var a=j.getID(s);a?t===a?o=s:b.isAncestorIDOf(a,t)&&(n.length=i=0,n.push(s.firstChild)):n.push(s.firstChild),s=s.nextSibling}if(o)return n.length=0,o}n.length=0,A(!1)},_mountImageIntoNode:function(e,t,n){if(A(t&&(t.nodeType===N||t.nodeType===F)),n){var r=T(t);if(w.canReuseMarkup(e,r))return;var o=r.getAttribute(w.CHECKSUM_ATTR_NAME);r.removeAttribute(w.CHECKSUM_ATTR_NAME);var s=r.outerHTML;r.setAttribute(w.CHECKSUM_ATTR_NAME,o);var a=i(e,s);" (client) "+e.substring(a-20,a+20)+"\n (server) "+s.substring(a-20,a+20);A(t.nodeType!==F)}A(t.nodeType!==F),O(t,e)},getReactRootID:r,getID:o,setID:a,getNode:l,getNodeFromInstance:u,purgeID:d};I.measureMethods(j,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),e.exports=j},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ADD_GROUP";t.ADD_GROUP=n;var i="REMOVE_GROUP";t.REMOVE_GROUP=i;var r="UPDATE_GROUP";t.UPDATE_GROUP=r;var o="ADD_USER";t.ADD_USER=o;var s="REMOVE_USER";t.REMOVE_USER=s;var a="UPDATE_USER";t.UPDATE_USER=a;var l="GET_GROUPS";t.GET_GROUPS=l;var u="SELECT_GROUP";t.SELECT_GROUP=u;var c="GET_USERS";t.GET_USERS=c;var d="SELECT_USER";t.SELECT_USER=d},function(e,t,n){"use strict";var i=n(280)["default"],r=n(133)["default"],o=n(132)["default"];t["default"]=function(e,t){for(var n=i(t),s=0;s<n.length;s++){var a=n[s],l=r(t,a);l&&l.configurable&&void 0===e[a]&&o(e,a,l)}return e},t.__esModule=!0},function(e,t){"use strict";t["default"]=function(e,t){var n=t({},e);return delete n["default"],n},t.__esModule=!0},function(e,t){var n="undefined",i=e.exports=typeof window!=n&&window.Math==Math?window:typeof self!=n&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,n){"use strict";function i(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function r(e){function t(t,n,i,r,o){if(r=r||p,null!=n[i])return e(n,i,r,o);var s=o;return t?new Error("Required "+s+" `"+i+"` was not specified in "+("`"+r+"`.")):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function o(e,t){function n(n,r,o,s){var a=n[r];if(!t(a)){var l=i(a);return new Error("Invalid "+s+" `"+r+"` of type `"+l+"` "+("supplied to `"+o+"`, expected `"+e+"`."))}return null}return r(n)}function s(e,t,n){function o(r,o,s,a){var l=r[o];if(!n(l)){var u=a,c=i(l);return new Error("Invalid "+u+" `"+o+"` of type "+("`"+c+"` supplied to `"+s+"`, expected an Immutable.js "+t+"."))}for(var d=l.toArray(),h=0,p=d.length;p>h;h++){if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+s+"` "+("for propType `"+o+"`, expected a function."));var m=e(d,h,s,a);if(m instanceof Error)return m}}return r(o)}function a(e){return s(e,"List",h.List.isList)}function l(e){return s(e,"Map",h.Map.isMap)}function u(e){return s(e,"Set",h.Set.isSet)}function c(e){return s(e,"Iterable",h.Iterable.isIterable)}function d(e){function t(t,n,r,o){var s=t[n],a=i(s);if(!h.Iterable.isIterable(s)){var l=o;return new Error("Invalid "+l+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected an Immutable.js Iterable."))}for(var u in e){var c=e[u];if(c){var d=s.toObject(),p=c(d,u,r,o);if(p)return p}}}return r(t)}var h=n(34),p="<<anonymous>>",m={listOf:a,mapOf:l,setOf:u,iterableOf:c,shape:d,contains:d,list:o("List",h.List.isList),map:o("Map",h.Map.isMap),orderedMap:o("OrderedMap",h.OrderedMap.isOrderedMap),set:o("Set",h.Set.isSet),orderedSet:o("OrderedSet",h.OrderedSet.isOrderedSet),stack:o("Stack",h.Stack.isStack),seq:o("Seq",h.Seq.isSeq),iterable:o("Iterable",h.Iterable.isIterable)};e.exports=m},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,s,a],c=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[c++]}))}throw l.framesToPop=1,l}};e.exports=i},function(e,t){function n(e){return function(){return e}}function i(){}i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t){var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t){"use strict";t["default"]=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},t.__esModule=!0},function(e,t){var n=e.exports={version:"1.2.1"};"number"==typeof __e&&(__e=n)},function(e,t){"use strict";t.__esModule=!0;var n="PUSH";t.PUSH=n;var i="REPLACE";t.REPLACE=i;var r="POP";t.POP=r,t["default"]={PUSH:n,REPLACE:i,POP:r}},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return e.value=!1,e}function n(e){e&&(e.value=!0)}function i(){}function r(e,t){t=t||0;for(var n=Math.max(0,e.length-t),i=new Array(n),r=0;n>r;r++)i[r]=e[r+t];return i}function o(e){return void 0===e.size&&(e.size=e.__iterate(a)),e.size}function s(e,t){if("number"!=typeof t){var n=+t;if(""+n!==t)return NaN;t=n}return 0>t?o(e)+t:t}function a(){return!0}function l(e,t,n){return(0===e||void 0!==n&&-n>=e)&&(void 0===t||void 0!==n&&t>=n)}function u(e,t){return d(e,t,0)}function c(e,t){return d(e,t,t)}function d(e,t,n){return void 0===e?n:0>e?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function h(e){return _(e)?e:T(e)}function p(e){return g(e)?e:M(e)}function m(e){return v(e)?e:A(e)}function f(e){return _(e)&&!y(e)?e:O(e)}function _(e){return!(!e||!e[fn])}function g(e){return!(!e||!e[_n])}function v(e){return!(!e||!e[gn])}function y(e){return g(e)||v(e)}function b(e){return!(!e||!e[vn])}function C(e){this.next=e}function w(e,t,n,i){var r=0===e?t:1===e?n:[t,n];return i?i.value=r:i={value:r,done:!1},i}function I(){return{value:void 0,done:!0}}function S(e){return!!P(e)}function E(e){return e&&"function"==typeof e.next}function x(e){var t=P(e);return t&&t.call(e)}function P(e){var t=e&&(wn&&e[wn]||e[In]);return"function"==typeof t?t:void 0}function k(e){return e&&"number"==typeof e.length}function T(e){return null===e||void 0===e?F():_(e)?e.toSeq():W(e)}function M(e){return null===e||void 0===e?F().toKeyedSeq():_(e)?g(e)?e.toSeq():e.fromEntrySeq():z(e)}function A(e){return null===e||void 0===e?F():_(e)?g(e)?e.entrySeq():e.toIndexedSeq():H(e)}function O(e){return(null===e||void 0===e?F():_(e)?g(e)?e.entrySeq():e:H(e)).toSetSeq()}function D(e){this._array=e,this.size=e.length}function L(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function B(e){this._iterable=e,this.size=e.length||e.size}function R(e){this._iterator=e,this._iteratorCache=[]}function N(e){return!(!e||!e[En])}function F(){return xn||(xn=new D([]))}function z(e){var t=Array.isArray(e)?new D(e).fromEntrySeq():E(e)?new R(e).fromEntrySeq():S(e)?new B(e).fromEntrySeq():"object"==typeof e?new L(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function H(e){var t=U(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function W(e){var t=U(e)||"object"==typeof e&&new L(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function U(e){return k(e)?new D(e):E(e)?new R(e):S(e)?new B(e):void 0}function j(e,t,n,i){var r=e._cache;if(r){for(var o=r.length-1,s=0;o>=s;s++){var a=r[n?o-s:s];if(t(a[1],i?a[0]:s,e)===!1)return s+1}return s}return e.__iterateUncached(t,n)}function V(e,t,n,i){var r=e._cache;if(r){var o=r.length-1,s=0;return new C(function(){var e=r[n?o-s:s];return s++>o?I():w(t,i?e[0]:s-1,e[1])})}return e.__iteratorUncached(t,n)}function q(){throw TypeError("Abstract")}function J(){}function K(){}function G(){}function Y(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return"function"==typeof e.equals&&"function"==typeof t.equals&&e.equals(t)?!0:!1}function X(e,t){return t?Z(t,e,"",{"":e}):Q(e)}function Z(e,t,n,i){return Array.isArray(t)?e.call(i,n,A(t).map(function(n,i){return Z(e,n,i,t)})):$(t)?e.call(i,n,M(t).map(function(n,i){return Z(e,n,i,t)})):t}function Q(e){return Array.isArray(e)?A(e).map(Q).toList():$(e)?M(e).map(Q).toMap():e}function $(e){return e&&(e.constructor===Object||void 0===e.constructor)}function ee(e){return e>>>1&1073741824|3221225471&e}function te(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(e=e.valueOf(),e===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return ee(n)}return"string"===t?e.length>Ln?ne(e):ie(e):"function"==typeof e.hashCode?e.hashCode():re(e)}function ne(e){var t=Nn[e];return void 0===t&&(t=ie(e),Rn===Bn&&(Rn=0,Nn={}),Rn++,Nn[e]=t),t}function ie(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ee(t)}function re(e){var t;if(An&&(t=Pn.get(e),void 0!==t))return t;if(t=e[Dn],void 0!==t)return t;if(!Mn){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Dn],void 0!==t)return t;if(t=oe(e),void 0!==t)return t}if(t=++On,1073741824&On&&(On=0),An)Pn.set(e,t);else{if(void 0!==Tn&&Tn(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Mn)Object.defineProperty(e,Dn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Dn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Dn]=t}}return t}function oe(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function se(e,t){if(!e)throw new Error(t)}function ae(e){se(e!==1/0,"Cannot perform this action with an infinite size.")}function le(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function ue(e){this._iter=e,this.size=e.size}function ce(e){this._iter=e,this.size=e.size}function de(e){this._iter=e,this.size=e.size}function he(e){var t=De(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Le,t.__iterateUncached=function(t,n){var i=this;return e.__iterate(function(e,n){return t(n,e,i)!==!1},n)},t.__iteratorUncached=function(t,n){if(t===Cn){var i=e.__iterator(t,n);return new C(function(){var e=i.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===bn?yn:bn,n)},t}function pe(e,t,n){var i=De(e);return i.size=e.size,i.has=function(t){return e.has(t)},i.get=function(i,r){var o=e.get(i,hn);return o===hn?r:t.call(n,o,i,e)},i.__iterateUncached=function(i,r){var o=this;return e.__iterate(function(e,r,s){return i(t.call(n,e,r,s),r,o)!==!1},r)},i.__iteratorUncached=function(i,r){var o=e.__iterator(Cn,r);return new C(function(){var r=o.next();if(r.done)return r;var s=r.value,a=s[0];return w(i,a,t.call(n,s[1],a,e),r)})},i}function me(e,t){var n=De(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=he(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,i){return e.get(t?n:-1-n,i)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Le,n.__iterate=function(t,n){var i=this;return e.__iterate(function(e,n){return t(e,n,i)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function fe(e,t,n,i){var r=De(e);return i&&(r.has=function(i){var r=e.get(i,hn);return r!==hn&&!!t.call(n,r,i,e)},r.get=function(i,r){var o=e.get(i,hn);return o!==hn&&t.call(n,o,i,e)?o:r}),r.__iterateUncached=function(r,o){var s=this,a=0;return e.__iterate(function(e,o,l){return t.call(n,e,o,l)?(a++,r(e,i?o:a-1,s)):void 0},o),a},r.__iteratorUncached=function(r,o){var s=e.__iterator(Cn,o),a=0;return new C(function(){for(;;){var o=s.next();if(o.done)return o;var l=o.value,u=l[0],c=l[1];if(t.call(n,c,u,e))return w(r,i?u:a++,c,o)}})},r}function _e(e,t,n){var i=Ne().asMutable();return e.__iterate(function(r,o){i.update(t.call(n,r,o,e),0,function(e){return e+1})}),i.asImmutable()}function ge(e,t,n){var i=g(e),r=(b(e)?It():Ne()).asMutable();e.__iterate(function(o,s){r.update(t.call(n,o,s,e),function(e){return e=e||[],e.push(i?[s,o]:o),e})});var o=Oe(e);return r.map(function(t){return Te(e,o(t))})}function ve(e,t,n,i){var r=e.size;if(void 0!==t&&(t=0|t),void 0!==n&&(n=0|n),l(t,n,r))return e;var o=u(t,r),a=c(n,r);if(o!==o||a!==a)return ve(e.toSeq().cacheResult(),t,n,i);var d,h=a-o;h===h&&(d=0>h?0:h);var p=De(e);return p.size=0===d?d:e.size&&d||void 0,!i&&N(e)&&d>=0&&(p.get=function(t,n){return t=s(this,t),t>=0&&d>t?e.get(t+o,n):n}),p.__iterateUncached=function(t,n){var r=this;if(0===d)return 0;if(n)return this.cacheResult().__iterate(t,n);var s=0,a=!0,l=0;return e.__iterate(function(e,n){return a&&(a=s++<o)?void 0:(l++,t(e,i?n:l-1,r)!==!1&&l!==d)}),l},p.__iteratorUncached=function(t,n){if(0!==d&&n)return this.cacheResult().__iterator(t,n);var r=0!==d&&e.__iterator(t,n),s=0,a=0;return new C(function(){for(;s++<o;)r.next();if(++a>d)return I();var e=r.next();return i||t===bn?e:t===yn?w(t,a-1,void 0,e):w(t,a-1,e.value[1],e)})},p}function ye(e,t,n){var i=De(e);return i.__iterateUncached=function(i,r){var o=this;if(r)return this.cacheResult().__iterate(i,r);var s=0;return e.__iterate(function(e,r,a){return t.call(n,e,r,a)&&++s&&i(e,r,o)}),s},i.__iteratorUncached=function(i,r){var o=this;if(r)return this.cacheResult().__iterator(i,r);var s=e.__iterator(Cn,r),a=!0;return new C(function(){if(!a)return I();var e=s.next();if(e.done)return e;var r=e.value,l=r[0],u=r[1];return t.call(n,u,l,o)?i===Cn?e:w(i,l,u,e):(a=!1,I())})},i}function be(e,t,n,i){var r=De(e);return r.__iterateUncached=function(r,o){var s=this;if(o)return this.cacheResult().__iterate(r,o);var a=!0,l=0;return e.__iterate(function(e,o,u){return a&&(a=t.call(n,e,o,u))?void 0:(l++,r(e,i?o:l-1,s))}),l},r.__iteratorUncached=function(r,o){var s=this;if(o)return this.cacheResult().__iterator(r,o);var a=e.__iterator(Cn,o),l=!0,u=0;return new C(function(){var e,o,c;do{if(e=a.next(),e.done)return i||r===bn?e:r===yn?w(r,u++,void 0,e):w(r,u++,e.value[1],e);var d=e.value;o=d[0],c=d[1],l&&(l=t.call(n,c,o,s))}while(l);return r===Cn?e:w(r,o,c,e)})},r}function Ce(e,t){var n=g(e),i=[e].concat(t).map(function(e){return _(e)?n&&(e=p(e)):e=n?z(e):H(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var r=i[0];if(r===e||n&&g(r)||v(e)&&v(r))return r}var o=new D(i);return n?o=o.toKeyedSeq():v(e)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),o}function we(e,t,n){var i=De(e);return i.__iterateUncached=function(i,r){function o(e,l){var u=this;e.__iterate(function(e,r){return(!t||t>l)&&_(e)?o(e,l+1):i(e,n?r:s++,u)===!1&&(a=!0),!a},r)}var s=0,a=!1;return o(e,0),s},i.__iteratorUncached=function(i,r){var o=e.__iterator(i,r),s=[],a=0;return new C(function(){for(;o;){var e=o.next();if(e.done===!1){var l=e.value;if(i===Cn&&(l=l[1]),t&&!(s.length<t)||!_(l))return n?e:w(i,a++,l,e);s.push(o),o=l.__iterator(i,r)}else o=s.pop()}return I()})},i}function Ie(e,t,n){var i=Oe(e);return e.toSeq().map(function(r,o){return i(t.call(n,r,o,e))}).flatten(!0)}function Se(e,t){var n=De(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,i){var r=this,o=0;return e.__iterate(function(e,i){return(!o||n(t,o++,r)!==!1)&&n(e,o++,r)!==!1},i),o},n.__iteratorUncached=function(n,i){var r,o=e.__iterator(bn,i),s=0;return new C(function(){return(!r||s%2)&&(r=o.next(),r.done)?r:s%2?w(n,s++,t):w(n,s++,r.value,r)})},n}function Ee(e,t,n){t||(t=Be);var i=g(e),r=0,o=e.toSeq().map(function(t,i){
return[i,t,r++,n?n(t,i,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(i?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),i?M(o):v(e)?A(o):O(o)}function xe(e,t,n){if(t||(t=Be),n){var i=e.toSeq().map(function(t,i){return[t,n(t,i,e)]}).reduce(function(e,n){return Pe(t,e[1],n[1])?n:e});return i&&i[0]}return e.reduce(function(e,n){return Pe(t,e,n)?n:e})}function Pe(e,t,n){var i=e(n,t);return 0===i&&n!==t&&(void 0===n||null===n||n!==n)||i>0}function ke(e,t,n){var i=De(e);return i.size=new D(n).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,i=this.__iterator(bn,t),r=0;!(n=i.next()).done&&e(n.value,r++,this)!==!1;);return r},i.__iteratorUncached=function(e,i){var r=n.map(function(e){return e=h(e),x(i?e.reverse():e)}),o=0,s=!1;return new C(function(){var n;return s||(n=r.map(function(e){return e.next()}),s=n.some(function(e){return e.done})),s?I():w(e,o++,t.apply(null,n.map(function(e){return e.value})))})},i}function Te(e,t){return N(e)?t:e.constructor(t)}function Me(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Ae(e){return ae(e.size),o(e)}function Oe(e){return g(e)?p:v(e)?m:f}function De(e){return Object.create((g(e)?M:v(e)?A:O).prototype)}function Le(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):T.prototype.cacheResult.call(this)}function Be(e,t){return e>t?1:t>e?-1:0}function Re(e){var t=x(e);if(!t){if(!k(e))throw new TypeError("Expected iterable or array-like: "+e);t=x(h(e))}return t}function Ne(e){return null===e||void 0===e?Ge():Fe(e)&&!b(e)?e:Ge().withMutations(function(t){var n=p(e);ae(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Fe(e){return!(!e||!e[Fn])}function ze(e,t){this.ownerID=e,this.entries=t}function He(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function We(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function Ue(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function je(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function Ve(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Je(e._root)}function qe(e,t){return w(e,t[0],t[1])}function Je(e,t){return{node:e,index:0,__prev:t}}function Ke(e,t,n,i){var r=Object.create(zn);return r.size=e,r._root=t,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function Ge(){return Hn||(Hn=Ke(0))}function Ye(e,n,i){var r,o;if(e._root){var s=t(pn),a=t(mn);if(r=Xe(e._root,e.__ownerID,0,void 0,n,i,s,a),!a.value)return e;o=e.size+(s.value?i===hn?-1:1:0)}else{if(i===hn)return e;o=1,r=new ze(e.__ownerID,[[n,i]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ke(o,r):Ge()}function Xe(e,t,i,r,o,s,a,l){return e?e.update(t,i,r,o,s,a,l):s===hn?e:(n(l),n(a),new je(t,r,[o,s]))}function Ze(e){return e.constructor===je||e.constructor===Ue}function Qe(e,t,n,i,r){if(e.keyHash===i)return new Ue(t,i,[e.entry,r]);var o,s=(0===n?e.keyHash:e.keyHash>>>n)&dn,a=(0===n?i:i>>>n)&dn,l=s===a?[Qe(e,t,n+un,i,r)]:(o=new je(t,i,r),a>s?[e,o]:[o,e]);return new He(t,1<<s|1<<a,l)}function $e(e,t,n,r){e||(e=new i);for(var o=new je(e,te(n),[n,r]),s=0;s<t.length;s++){var a=t[s];o=o.update(e,0,void 0,a[0],a[1])}return o}function et(e,t,n,i){for(var r=0,o=0,s=new Array(n),a=0,l=1,u=t.length;u>a;a++,l<<=1){var c=t[a];void 0!==c&&a!==i&&(r|=l,s[o++]=c)}return new He(e,r,s)}function tt(e,t,n,i,r){for(var o=0,s=new Array(cn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?t[o++]:void 0;return s[i]=r,new We(e,o+1,s)}function nt(e,t,n){for(var i=[],r=0;r<n.length;r++){var o=n[r],s=p(o);_(o)||(s=s.map(function(e){return X(e)})),i.push(s)}return rt(e,t,i)}function it(e){return function(t,n,i){return t&&t.mergeDeepWith&&_(n)?t.mergeDeepWith(e,n):e?e(t,n,i):n}}function rt(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var i=t?function(n,i){e.update(i,hn,function(e){return e===hn?n:t(e,n,i)})}:function(t,n){e.set(n,t)},r=0;r<n.length;r++)n[r].forEach(i)}):e.constructor(n[0])}function ot(e,t,n,i){var r=e===hn,o=t.next();if(o.done){var s=r?n:e,a=i(s);return a===s?e:a}se(r||e&&e.set,"invalid keyPath");var l=o.value,u=r?hn:e.get(l,hn),c=ot(u,t,n,i);return c===u?e:c===hn?e.remove(l):(r?Ge():e).set(l,c)}function st(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,127&e}function at(e,t,n,i){var o=i?e:r(e);return o[t]=n,o}function lt(e,t,n,i){var r=e.length+1;if(i&&t+1===r)return e[t]=n,e;for(var o=new Array(r),s=0,a=0;r>a;a++)a===t?(o[a]=n,s=-1):o[a]=e[a+s];return o}function ut(e,t,n){var i=e.length-1;if(n&&t===i)return e.pop(),e;for(var r=new Array(i),o=0,s=0;i>s;s++)s===t&&(o=1),r[s]=e[s+o];return r}function ct(e){var t=ft();if(null===e||void 0===e)return t;if(dt(e))return e;var n=m(e),i=n.size;return 0===i?t:(ae(i),i>0&&cn>i?mt(0,i,un,null,new ht(n.toArray())):t.withMutations(function(e){e.setSize(i),n.forEach(function(t,n){return e.set(n,t)})}))}function dt(e){return!(!e||!e[Vn])}function ht(e,t){this.array=e,this.ownerID=t}function pt(e,t){function n(e,t,n){return 0===t?i(e,n):r(e,t,n)}function i(e,n){var i=n===a?l&&l.array:e&&e.array,r=n>o?0:o-n,u=s-n;return u>cn&&(u=cn),function(){if(r===u)return Kn;var e=t?--u:r++;return i&&i[e]}}function r(e,i,r){var a,l=e&&e.array,u=r>o?0:o-r>>i,c=(s-r>>i)+1;return c>cn&&(c=cn),function(){for(;;){if(a){var e=a();if(e!==Kn)return e;a=null}if(u===c)return Kn;var o=t?--c:u++;a=n(l&&l[o],i-un,r+(o<<i))}}}var o=e._origin,s=e._capacity,a=wt(s),l=e._tail;return n(e._root,e._level,0)}function mt(e,t,n,i,r,o,s){var a=Object.create(qn);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=i,a._tail=r,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function ft(){return Jn||(Jn=mt(0,0,un))}function _t(e,n,i){if(n=s(e,n),n!==n)return e;if(n>=e.size||0>n)return e.withMutations(function(e){0>n?bt(e,n).set(0,i):bt(e,0,n+1).set(n,i)});n+=e._origin;var r=e._tail,o=e._root,a=t(mn);return n>=wt(e._capacity)?r=gt(r,e.__ownerID,0,n,i,a):o=gt(o,e.__ownerID,e._level,n,i,a),a.value?e.__ownerID?(e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e):mt(e._origin,e._capacity,e._level,o,r):e}function gt(e,t,i,r,o,s){var a=r>>>i&dn,l=e&&a<e.array.length;if(!l&&void 0===o)return e;var u;if(i>0){var c=e&&e.array[a],d=gt(c,t,i-un,r,o,s);return d===c?e:(u=vt(e,t),u.array[a]=d,u)}return l&&e.array[a]===o?e:(n(s),u=vt(e,t),void 0===o&&a===u.array.length-1?u.array.pop():u.array[a]=o,u)}function vt(e,t){return t&&e&&t===e.ownerID?e:new ht(e?e.array.slice():[],t)}function yt(e,t){if(t>=wt(e._capacity))return e._tail;if(t<1<<e._level+un){for(var n=e._root,i=e._level;n&&i>0;)n=n.array[t>>>i&dn],i-=un;return n}}function bt(e,t,n){void 0!==t&&(t=0|t),void 0!==n&&(n=0|n);var r=e.__ownerID||new i,o=e._origin,s=e._capacity,a=o+t,l=void 0===n?s:0>n?s+n:o+n;if(a===o&&l===s)return e;if(a>=l)return e.clear();for(var u=e._level,c=e._root,d=0;0>a+d;)c=new ht(c&&c.array.length?[void 0,c]:[],r),u+=un,d+=1<<u;d&&(a+=d,o+=d,l+=d,s+=d);for(var h=wt(s),p=wt(l);p>=1<<u+un;)c=new ht(c&&c.array.length?[c]:[],r),u+=un;var m=e._tail,f=h>p?yt(e,l-1):p>h?new ht([],r):m;if(m&&p>h&&s>a&&m.array.length){c=vt(c,r);for(var _=c,g=u;g>un;g-=un){var v=h>>>g&dn;_=_.array[v]=vt(_.array[v],r)}_.array[h>>>un&dn]=m}if(s>l&&(f=f&&f.removeAfter(r,0,l)),a>=p)a-=p,l-=p,u=un,c=null,f=f&&f.removeBefore(r,0,a);else if(a>o||h>p){for(d=0;c;){var y=a>>>u&dn;if(y!==p>>>u&dn)break;y&&(d+=(1<<u)*y),u-=un,c=c.array[y]}c&&a>o&&(c=c.removeBefore(r,u,a-d)),c&&h>p&&(c=c.removeAfter(r,u,p-d)),d&&(a-=d,l-=d)}return e.__ownerID?(e.size=l-a,e._origin=a,e._capacity=l,e._level=u,e._root=c,e._tail=f,e.__hash=void 0,e.__altered=!0,e):mt(a,l,u,c,f)}function Ct(e,t,n){for(var i=[],r=0,o=0;o<n.length;o++){var s=n[o],a=m(s);a.size>r&&(r=a.size),_(s)||(a=a.map(function(e){return X(e)})),i.push(a)}return r>e.size&&(e=e.setSize(r)),rt(e,t,i)}function wt(e){return cn>e?0:e-1>>>un<<un}function It(e){return null===e||void 0===e?xt():St(e)?e:xt().withMutations(function(t){var n=p(e);ae(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function St(e){return Fe(e)&&b(e)}function Et(e,t,n,i){var r=Object.create(It.prototype);return r.size=e?e.size:0,r._map=e,r._list=t,r.__ownerID=n,r.__hash=i,r}function xt(){return Gn||(Gn=Et(Ge(),ft()))}function Pt(e,t,n){var i,r,o=e._map,s=e._list,a=o.get(t),l=void 0!==a;if(n===hn){if(!l)return e;s.size>=cn&&s.size>=2*o.size?(r=s.filter(function(e,t){return void 0!==e&&a!==t}),i=r.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(i.__ownerID=r.__ownerID=e.__ownerID)):(i=o.remove(t),r=a===s.size-1?s.pop():s.set(a,void 0))}else if(l){if(n===s.get(a)[1])return e;i=o,r=s.set(a,[t,n])}else i=o.set(t,s.size),r=s.set(s.size,[t,n]);return e.__ownerID?(e.size=i.size,e._map=i,e._list=r,e.__hash=void 0,e):Et(i,r)}function kt(e){return null===e||void 0===e?At():Tt(e)?e:At().unshiftAll(e)}function Tt(e){return!(!e||!e[Yn])}function Mt(e,t,n,i){var r=Object.create(Xn);return r.size=e,r._head=t,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function At(){return Zn||(Zn=Mt(0))}function Ot(e){return null===e||void 0===e?Rt():Dt(e)&&!b(e)?e:Rt().withMutations(function(t){var n=f(e);ae(n.size),n.forEach(function(e){return t.add(e)})})}function Dt(e){return!(!e||!e[Qn])}function Lt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Bt(e,t){var n=Object.create($n);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Rt(){return ei||(ei=Bt(Ge()))}function Nt(e){return null===e||void 0===e?Ht():Ft(e)?e:Ht().withMutations(function(t){var n=f(e);ae(n.size),n.forEach(function(e){return t.add(e)})})}function Ft(e){return Dt(e)&&b(e)}function zt(e,t){var n=Object.create(ti);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Ht(){return ni||(ni=zt(xt()))}function Wt(e,t){var n,i=function(o){if(o instanceof i)return o;if(!(this instanceof i))return new i(o);if(!n){n=!0;var s=Object.keys(e);Vt(r,s),r.size=s.length,r._name=t,r._keys=s,r._defaultValues=e}this._map=Ne(o)},r=i.prototype=Object.create(ii);return r.constructor=i,i}function Ut(e,t,n){var i=Object.create(Object.getPrototypeOf(e));return i._map=t,i.__ownerID=n,i}function jt(e){return e._name||e.constructor.name||"Record"}function Vt(e,t){try{t.forEach(qt.bind(void 0,e))}catch(n){}}function qt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){se(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Jt(e,t){if(e===t)return!0;if(!_(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||g(e)!==g(t)||v(e)!==v(t)||b(e)!==b(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!y(e);if(b(e)){var i=e.entries();return t.every(function(e,t){var r=i.next().value;return r&&Y(r[1],e)&&(n||Y(r[0],t))})&&i.next().done}var r=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{r=!0;var o=e;e=t,t=o}var s=!0,a=t.__iterate(function(t,i){return(n?e.has(t):r?Y(t,e.get(i,hn)):Y(e.get(i,hn),t))?void 0:(s=!1,!1)});return s&&e.size===a}function Kt(e,t,n){if(!(this instanceof Kt))return new Kt(e,t,n);if(se(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),e>t&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(ri)return ri;ri=this}}function Gt(e,t){if(!(this instanceof Gt))return new Gt(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(oi)return oi;oi=this}}function Yt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Xt(e,t){return t}function Zt(e,t){return[t,e]}function Qt(e){return function(){return!e.apply(this,arguments)}}function $t(e){return function(){return-e.apply(this,arguments)}}function en(e){return"string"==typeof e?JSON.stringify(e):e}function tn(){return r(arguments)}function nn(e,t){return t>e?1:e>t?-1:0}function rn(e){if(e.size===1/0)return 0;var t=b(e),n=g(e),i=t?1:0,r=e.__iterate(n?t?function(e,t){i=31*i+sn(te(e),te(t))|0}:function(e,t){i=i+sn(te(e),te(t))|0}:t?function(e){i=31*i+te(e)|0}:function(e){i=i+te(e)|0});return on(r,i)}function on(e,t){return t=kn(t,3432918353),t=kn(t<<15|t>>>-15,461845907),t=kn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=kn(t^t>>>16,2246822507),t=kn(t^t>>>13,3266489909),t=ee(t^t>>>16)}function sn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var an=Array.prototype.slice,ln="delete",un=5,cn=1<<un,dn=cn-1,hn={},pn={value:!1},mn={value:!1};e(p,h),e(m,h),e(f,h),h.isIterable=_,h.isKeyed=g,h.isIndexed=v,h.isAssociative=y,h.isOrdered=b,h.Keyed=p,h.Indexed=m,h.Set=f;var fn="@@__IMMUTABLE_ITERABLE__@@",_n="@@__IMMUTABLE_KEYED__@@",gn="@@__IMMUTABLE_INDEXED__@@",vn="@@__IMMUTABLE_ORDERED__@@",yn=0,bn=1,Cn=2,wn="function"==typeof Symbol&&Symbol.iterator,In="@@iterator",Sn=wn||In;C.prototype.toString=function(){return"[Iterator]"},C.KEYS=yn,C.VALUES=bn,C.ENTRIES=Cn,C.prototype.inspect=C.prototype.toSource=function(){return this.toString()},C.prototype[Sn]=function(){return this},e(T,h),T.of=function(){return T(arguments)},T.prototype.toSeq=function(){return this},T.prototype.toString=function(){return this.__toString("Seq {","}")},T.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},T.prototype.__iterate=function(e,t){return j(this,e,t,!0)},T.prototype.__iterator=function(e,t){return V(this,e,t,!0)},e(M,T),M.prototype.toKeyedSeq=function(){return this},e(A,T),A.of=function(){return A(arguments)},A.prototype.toIndexedSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq [","]")},A.prototype.__iterate=function(e,t){return j(this,e,t,!1)},A.prototype.__iterator=function(e,t){return V(this,e,t,!1)},e(O,T),O.of=function(){return O(arguments)},O.prototype.toSetSeq=function(){return this},T.isSeq=N,T.Keyed=M,T.Set=O,T.Indexed=A;var En="@@__IMMUTABLE_SEQ__@@";T.prototype[En]=!0,e(D,A),D.prototype.get=function(e,t){return this.has(e)?this._array[s(this,e)]:t},D.prototype.__iterate=function(e,t){for(var n=this._array,i=n.length-1,r=0;i>=r;r++)if(e(n[t?i-r:r],r,this)===!1)return r+1;return r},D.prototype.__iterator=function(e,t){var n=this._array,i=n.length-1,r=0;return new C(function(){return r>i?I():w(e,r,n[t?i-r++:r++])})},e(L,M),L.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},L.prototype.has=function(e){return this._object.hasOwnProperty(e)},L.prototype.__iterate=function(e,t){for(var n=this._object,i=this._keys,r=i.length-1,o=0;r>=o;o++){var s=i[t?r-o:o];if(e(n[s],s,this)===!1)return o+1}return o},L.prototype.__iterator=function(e,t){var n=this._object,i=this._keys,r=i.length-1,o=0;return new C(function(){var s=i[t?r-o:o];return o++>r?I():w(e,s,n[s])})},L.prototype[vn]=!0,e(B,A),B.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,i=x(n),r=0;if(E(i))for(var o;!(o=i.next()).done&&e(o.value,r++,this)!==!1;);return r},B.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,i=x(n);if(!E(i))return new C(I);var r=0;return new C(function(){var t=i.next();return t.done?t:w(e,r++,t.value)})},e(R,A),R.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,i=this._iteratorCache,r=0;r<i.length;)if(e(i[r],r++,this)===!1)return r;for(var o;!(o=n.next()).done;){var s=o.value;if(i[r]=s,e(s,r++,this)===!1)break}return r},R.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,i=this._iteratorCache,r=0;return new C(function(){if(r>=i.length){var t=n.next();if(t.done)return t;i[r]=t.value}return w(e,r,i[r++])})};var xn;e(q,h),e(J,q),e(K,q),e(G,q),q.Keyed=J,q.Indexed=K,q.Set=G;var Pn,kn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e=0|e,t=0|t;var n=65535&e,i=65535&t;return n*i+((e>>>16)*i+n*(t>>>16)<<16>>>0)|0},Tn=Object.isExtensible,Mn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),An="function"==typeof WeakMap;An&&(Pn=new WeakMap);var On=0,Dn="__immutablehash__";"function"==typeof Symbol&&(Dn=Symbol(Dn));var Ln=16,Bn=255,Rn=0,Nn={};e(le,M),le.prototype.get=function(e,t){return this._iter.get(e,t)},le.prototype.has=function(e){return this._iter.has(e)},le.prototype.valueSeq=function(){return this._iter.valueSeq()},le.prototype.reverse=function(){var e=this,t=me(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},le.prototype.map=function(e,t){var n=this,i=pe(this,e,t);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().map(e,t)}),i},le.prototype.__iterate=function(e,t){var n,i=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,i)}:(n=t?Ae(this):0,function(r){return e(r,t?--n:n++,i)}),t)},le.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(bn,t),i=t?Ae(this):0;return new C(function(){var r=n.next();return r.done?r:w(e,t?--i:i++,r.value,r)})},le.prototype[vn]=!0,e(ue,A),ue.prototype.includes=function(e){return this._iter.includes(e)},ue.prototype.__iterate=function(e,t){var n=this,i=0;return this._iter.__iterate(function(t){return e(t,i++,n)},t)},ue.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t),i=0;return new C(function(){var t=n.next();return t.done?t:w(e,i++,t.value,t)})},e(ce,O),ce.prototype.has=function(e){return this._iter.includes(e)},ce.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},ce.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new C(function(){var t=n.next();return t.done?t:w(e,t.value,t.value,t)})},e(de,M),de.prototype.entrySeq=function(){return this._iter.toSeq()},de.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){Me(t);var i=_(t);return e(i?t.get(1):t[1],i?t.get(0):t[0],n)}},t)},de.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new C(function(){for(;;){var t=n.next();if(t.done)return t;var i=t.value;if(i){Me(i);var r=_(i);return w(e,r?i.get(0):i[0],r?i.get(1):i[1],t)}}})},ue.prototype.cacheResult=le.prototype.cacheResult=ce.prototype.cacheResult=de.prototype.cacheResult=Le,e(Ne,J),Ne.prototype.toString=function(){return this.__toString("Map {","}")},Ne.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ne.prototype.set=function(e,t){return Ye(this,e,t)},Ne.prototype.setIn=function(e,t){return this.updateIn(e,hn,function(){return t})},Ne.prototype.remove=function(e){return Ye(this,e,hn)},Ne.prototype.deleteIn=function(e){return this.updateIn(e,function(){return hn})},Ne.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Ne.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var i=ot(this,Re(e),t,n);return i===hn?void 0:i},Ne.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ge()},Ne.prototype.merge=function(){return nt(this,void 0,arguments)},Ne.prototype.mergeWith=function(e){var t=an.call(arguments,1);return nt(this,e,t)},Ne.prototype.mergeIn=function(e){var t=an.call(arguments,1);return this.updateIn(e,Ge(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},Ne.prototype.mergeDeep=function(){return nt(this,it(void 0),arguments)},Ne.prototype.mergeDeepWith=function(e){var t=an.call(arguments,1);return nt(this,it(e),t)},Ne.prototype.mergeDeepIn=function(e){var t=an.call(arguments,1);return this.updateIn(e,Ge(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},Ne.prototype.sort=function(e){return It(Ee(this,e))},Ne.prototype.sortBy=function(e,t){return It(Ee(this,t,e))},Ne.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ne.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new i)},Ne.prototype.asImmutable=function(){return this.__ensureOwner()},Ne.prototype.wasAltered=function(){return this.__altered},Ne.prototype.__iterator=function(e,t){return new Ve(this,e,t)},Ne.prototype.__iterate=function(e,t){var n=this,i=0;return this._root&&this._root.iterate(function(t){return i++,e(t[1],t[0],n)},t),i},Ne.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ke(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ne.isMap=Fe;var Fn="@@__IMMUTABLE_MAP__@@",zn=Ne.prototype;zn[Fn]=!0,zn[ln]=zn.remove,zn.removeIn=zn.deleteIn,ze.prototype.get=function(e,t,n,i){for(var r=this.entries,o=0,s=r.length;s>o;o++)if(Y(n,r[o][0]))return r[o][1];return i},ze.prototype.update=function(e,t,i,o,s,a,l){for(var u=s===hn,c=this.entries,d=0,h=c.length;h>d&&!Y(o,c[d][0]);d++);var p=h>d;if(p?c[d][1]===s:u)return this;if(n(l),(u||!p)&&n(a),!u||1!==c.length){if(!p&&!u&&c.length>=Wn)return $e(e,c,o,s);var m=e&&e===this.ownerID,f=m?c:r(c);return p?u?d===h-1?f.pop():f[d]=f.pop():f[d]=[o,s]:f.push([o,s]),m?(this.entries=f,this):new ze(e,f)}},He.prototype.get=function(e,t,n,i){void 0===t&&(t=te(n));var r=1<<((0===e?t:t>>>e)&dn),o=this.bitmap;return 0===(o&r)?i:this.nodes[st(o&r-1)].get(e+un,t,n,i)},He.prototype.update=function(e,t,n,i,r,o,s){void 0===n&&(n=te(i));var a=(0===t?n:n>>>t)&dn,l=1<<a,u=this.bitmap,c=0!==(u&l);if(!c&&r===hn)return this;var d=st(u&l-1),h=this.nodes,p=c?h[d]:void 0,m=Xe(p,e,t+un,n,i,r,o,s);if(m===p)return this;if(!c&&m&&h.length>=Un)return tt(e,h,u,a,m);if(c&&!m&&2===h.length&&Ze(h[1^d]))return h[1^d];if(c&&m&&1===h.length&&Ze(m))return m;var f=e&&e===this.ownerID,_=c?m?u:u^l:u|l,g=c?m?at(h,d,m,f):ut(h,d,f):lt(h,d,m,f);return f?(this.bitmap=_,this.nodes=g,this):new He(e,_,g)},We.prototype.get=function(e,t,n,i){void 0===t&&(t=te(n));var r=(0===e?t:t>>>e)&dn,o=this.nodes[r];return o?o.get(e+un,t,n,i):i},We.prototype.update=function(e,t,n,i,r,o,s){void 0===n&&(n=te(i));var a=(0===t?n:n>>>t)&dn,l=r===hn,u=this.nodes,c=u[a];if(l&&!c)return this;var d=Xe(c,e,t+un,n,i,r,o,s);if(d===c)return this;var h=this.count;if(c){if(!d&&(h--,jn>h))return et(e,u,h,a)}else h++;var p=e&&e===this.ownerID,m=at(u,a,d,p);return p?(this.count=h,this.nodes=m,this):new We(e,h,m)},Ue.prototype.get=function(e,t,n,i){for(var r=this.entries,o=0,s=r.length;s>o;o++)if(Y(n,r[o][0]))return r[o][1];return i},Ue.prototype.update=function(e,t,i,o,s,a,l){void 0===i&&(i=te(o));var u=s===hn;if(i!==this.keyHash)return u?this:(n(l),n(a),Qe(this,e,t,i,[o,s]));for(var c=this.entries,d=0,h=c.length;h>d&&!Y(o,c[d][0]);d++);var p=h>d;if(p?c[d][1]===s:u)return this;if(n(l),(u||!p)&&n(a),u&&2===h)return new je(e,this.keyHash,c[1^d]);var m=e&&e===this.ownerID,f=m?c:r(c);return p?u?d===h-1?f.pop():f[d]=f.pop():f[d]=[o,s]:f.push([o,s]),m?(this.entries=f,this):new Ue(e,this.keyHash,f)},je.prototype.get=function(e,t,n,i){return Y(n,this.entry[0])?this.entry[1]:i},je.prototype.update=function(e,t,i,r,o,s,a){var l=o===hn,u=Y(r,this.entry[0]);return(u?o===this.entry[1]:l)?this:(n(a),l?void n(s):u?e&&e===this.ownerID?(this.entry[1]=o,this):new je(e,this.keyHash,[r,o]):(n(s),Qe(this,e,t,te(r),[r,o])))},ze.prototype.iterate=Ue.prototype.iterate=function(e,t){for(var n=this.entries,i=0,r=n.length-1;r>=i;i++)if(e(n[t?r-i:i])===!1)return!1},He.prototype.iterate=We.prototype.iterate=function(e,t){for(var n=this.nodes,i=0,r=n.length-1;r>=i;i++){var o=n[t?r-i:i];if(o&&o.iterate(e,t)===!1)return!1}},je.prototype.iterate=function(e,t){return e(this.entry)},e(Ve,C),Ve.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,i=t.node,r=t.index++;if(i.entry){if(0===r)return qe(e,i.entry)}else if(i.entries){if(n=i.entries.length-1,n>=r)return qe(e,i.entries[this._reverse?n-r:r])}else if(n=i.nodes.length-1,n>=r){var o=i.nodes[this._reverse?n-r:r];if(o){if(o.entry)return qe(e,o.entry);t=this._stack=Je(o,t)}continue}t=this._stack=this._stack.__prev}return I()};var Hn,Wn=cn/4,Un=cn/2,jn=cn/4;e(ct,K),ct.of=function(){return this(arguments)},ct.prototype.toString=function(){return this.__toString("List [","]")},ct.prototype.get=function(e,t){if(e=s(this,e),e>=0&&e<this.size){e+=this._origin;var n=yt(this,e);return n&&n.array[e&dn]}return t},ct.prototype.set=function(e,t){return _t(this,e,t)},ct.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},ct.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=un,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ft()},ct.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){bt(n,0,t+e.length);for(var i=0;i<e.length;i++)n.set(t+i,e[i])})},ct.prototype.pop=function(){return bt(this,0,-1)},ct.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){bt(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},ct.prototype.shift=function(){return bt(this,1)},ct.prototype.merge=function(){return Ct(this,void 0,arguments)},ct.prototype.mergeWith=function(e){var t=an.call(arguments,1);return Ct(this,e,t)},ct.prototype.mergeDeep=function(){return Ct(this,it(void 0),arguments)},ct.prototype.mergeDeepWith=function(e){var t=an.call(arguments,1);return Ct(this,it(e),t)},ct.prototype.setSize=function(e){return bt(this,0,e)},ct.prototype.slice=function(e,t){var n=this.size;return l(e,t,n)?this:bt(this,u(e,n),c(t,n))},ct.prototype.__iterator=function(e,t){var n=0,i=pt(this,t);return new C(function(){var t=i();return t===Kn?I():w(e,n++,t)})},ct.prototype.__iterate=function(e,t){for(var n,i=0,r=pt(this,t);(n=r())!==Kn&&e(n,i++,this)!==!1;);return i},ct.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?mt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},ct.isList=dt;var Vn="@@__IMMUTABLE_LIST__@@",qn=ct.prototype;qn[Vn]=!0,qn[ln]=qn.remove,qn.setIn=zn.setIn,qn.deleteIn=qn.removeIn=zn.removeIn,qn.update=zn.update,qn.updateIn=zn.updateIn,qn.mergeIn=zn.mergeIn,qn.mergeDeepIn=zn.mergeDeepIn,qn.withMutations=zn.withMutations,qn.asMutable=zn.asMutable,qn.asImmutable=zn.asImmutable,qn.wasAltered=zn.wasAltered,ht.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var i=n>>>t&dn;if(i>=this.array.length)return new ht([],e);var r,o=0===i;if(t>0){var s=this.array[i];if(r=s&&s.removeBefore(e,t-un,n),r===s&&o)return this}if(o&&!r)return this;var a=vt(this,e);if(!o)for(var l=0;i>l;l++)a.array[l]=void 0;return r&&(a.array[i]=r),a},ht.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var i=n-1>>>t&dn;if(i>=this.array.length)return this;var r;if(t>0){var o=this.array[i];if(r=o&&o.removeAfter(e,t-un,n),r===o&&i===this.array.length-1)return this}var s=vt(this,e);return s.array.splice(i+1),r&&(s.array[i]=r),s};var Jn,Kn={};e(It,Ne),It.of=function(){return this(arguments)},It.prototype.toString=function(){return this.__toString("OrderedMap {","}")},It.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},It.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):xt()},It.prototype.set=function(e,t){return Pt(this,e,t)},It.prototype.remove=function(e){return Pt(this,e,hn)},It.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},It.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},It.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},It.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},It.isOrderedMap=St,It.prototype[vn]=!0,It.prototype[ln]=It.prototype.remove;var Gn;e(kt,K),kt.of=function(){return this(arguments)},kt.prototype.toString=function(){return this.__toString("Stack [","]")},kt.prototype.get=function(e,t){var n=this._head;for(e=s(this,e);n&&e--;)n=n.next;return n?n.value:t},kt.prototype.peek=function(){return this._head&&this._head.value},kt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Mt(e,t)},kt.prototype.pushAll=function(e){if(e=m(e),0===e.size)return this;ae(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Mt(t,n)},kt.prototype.pop=function(){return this.slice(1)},kt.prototype.unshift=function(){return this.push.apply(this,arguments)},kt.prototype.unshiftAll=function(e){return this.pushAll(e)},kt.prototype.shift=function(){return this.pop.apply(this,arguments)},kt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):At()},kt.prototype.slice=function(e,t){if(l(e,t,this.size))return this;var n=u(e,this.size),i=c(t,this.size);if(i!==this.size)return K.prototype.slice.call(this,e,t);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):Mt(r,o)},kt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Mt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},kt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,i=this._head;i&&e(i.value,n++,this)!==!1;)i=i.next;return n},kt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,i=this._head;return new C(function(){if(i){var t=i.value;return i=i.next,w(e,n++,t)}return I()})},kt.isStack=Tt;var Yn="@@__IMMUTABLE_STACK__@@",Xn=kt.prototype;Xn[Yn]=!0,Xn.withMutations=zn.withMutations,Xn.asMutable=zn.asMutable,Xn.asImmutable=zn.asImmutable,Xn.wasAltered=zn.wasAltered;var Zn;e(Ot,G),Ot.of=function(){return this(arguments)},Ot.fromKeys=function(e){return this(p(e).keySeq())},Ot.prototype.toString=function(){return this.__toString("Set {","}")},Ot.prototype.has=function(e){return this._map.has(e)},Ot.prototype.add=function(e){return Lt(this,this._map.set(e,!0))},Ot.prototype.remove=function(e){return Lt(this,this._map.remove(e))},Ot.prototype.clear=function(){return Lt(this,this._map.clear())},Ot.prototype.union=function(){var e=an.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)f(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Ot.prototype.intersect=function(){var e=an.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return f(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Ot.prototype.subtract=function(){var e=an.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return f(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Ot.prototype.merge=function(){return this.union.apply(this,arguments)},Ot.prototype.mergeWith=function(e){var t=an.call(arguments,1);return this.union.apply(this,t)},Ot.prototype.sort=function(e){return Nt(Ee(this,e))},Ot.prototype.sortBy=function(e,t){return Nt(Ee(this,t,e))},Ot.prototype.wasAltered=function(){return this._map.wasAltered();
},Ot.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,i){return e(i,i,n)},t)},Ot.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Ot.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Ot.isSet=Dt;var Qn="@@__IMMUTABLE_SET__@@",$n=Ot.prototype;$n[Qn]=!0,$n[ln]=$n.remove,$n.mergeDeep=$n.merge,$n.mergeDeepWith=$n.mergeWith,$n.withMutations=zn.withMutations,$n.asMutable=zn.asMutable,$n.asImmutable=zn.asImmutable,$n.__empty=Rt,$n.__make=Bt;var ei;e(Nt,Ot),Nt.of=function(){return this(arguments)},Nt.fromKeys=function(e){return this(p(e).keySeq())},Nt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Nt.isOrderedSet=Ft;var ti=Nt.prototype;ti[vn]=!0,ti.__empty=Ht,ti.__make=zt;var ni;e(Wt,J),Wt.prototype.toString=function(){return this.__toString(jt(this)+" {","}")},Wt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Wt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Wt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Ut(this,Ge()))},Wt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+jt(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:Ut(this,n)},Wt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Ut(this,t)},Wt.prototype.wasAltered=function(){return this._map.wasAltered()},Wt.prototype.__iterator=function(e,t){var n=this;return p(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},Wt.prototype.__iterate=function(e,t){var n=this;return p(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},Wt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Ut(this,t,e):(this.__ownerID=e,this._map=t,this)};var ii=Wt.prototype;ii[ln]=ii.remove,ii.deleteIn=ii.removeIn=zn.removeIn,ii.merge=zn.merge,ii.mergeWith=zn.mergeWith,ii.mergeIn=zn.mergeIn,ii.mergeDeep=zn.mergeDeep,ii.mergeDeepWith=zn.mergeDeepWith,ii.mergeDeepIn=zn.mergeDeepIn,ii.setIn=zn.setIn,ii.update=zn.update,ii.updateIn=zn.updateIn,ii.withMutations=zn.withMutations,ii.asMutable=zn.asMutable,ii.asImmutable=zn.asImmutable,e(Kt,A),Kt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Kt.prototype.get=function(e,t){return this.has(e)?this._start+s(this,e)*this._step:t},Kt.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},Kt.prototype.slice=function(e,t){return l(e,t,this.size)?this:(e=u(e,this.size),t=c(t,this.size),e>=t?new Kt(0,0):new Kt(this.get(e,this._end),this.get(t,this._end),this._step))},Kt.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},Kt.prototype.lastIndexOf=function(e){return this.indexOf(e)},Kt.prototype.__iterate=function(e,t){for(var n=this.size-1,i=this._step,r=t?this._start+n*i:this._start,o=0;n>=o;o++){if(e(r,o,this)===!1)return o+1;r+=t?-i:i}return o},Kt.prototype.__iterator=function(e,t){var n=this.size-1,i=this._step,r=t?this._start+n*i:this._start,o=0;return new C(function(){var s=r;return r+=t?-i:i,o>n?I():w(e,o++,s)})},Kt.prototype.equals=function(e){return e instanceof Kt?this._start===e._start&&this._end===e._end&&this._step===e._step:Jt(this,e)};var ri;e(Gt,A),Gt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Gt.prototype.get=function(e,t){return this.has(e)?this._value:t},Gt.prototype.includes=function(e){return Y(this._value,e)},Gt.prototype.slice=function(e,t){var n=this.size;return l(e,t,n)?this:new Gt(this._value,c(t,n)-u(e,n))},Gt.prototype.reverse=function(){return this},Gt.prototype.indexOf=function(e){return Y(this._value,e)?0:-1},Gt.prototype.lastIndexOf=function(e){return Y(this._value,e)?this.size:-1},Gt.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(e(this._value,n,this)===!1)return n+1;return n},Gt.prototype.__iterator=function(e,t){var n=this,i=0;return new C(function(){return i<n.size?w(e,i++,n._value):I()})},Gt.prototype.equals=function(e){return e instanceof Gt?Y(this._value,e._value):Jt(e)};var oi;h.Iterator=C,Yt(h,{toArray:function(){ae(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new ue(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new le(this,!0)},toMap:function(){return Ne(this.toKeyedSeq())},toObject:function(){ae(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return It(this.toKeyedSeq())},toOrderedSet:function(){return Nt(g(this)?this.valueSeq():this)},toSet:function(){return Ot(g(this)?this.valueSeq():this)},toSetSeq:function(){return new ce(this)},toSeq:function(){return v(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return kt(g(this)?this.valueSeq():this)},toList:function(){return ct(g(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var e=an.call(arguments,0);return Te(this,Ce(this,e))},includes:function(e){return this.some(function(t){return Y(t,e)})},entries:function(){return this.__iterator(Cn)},every:function(e,t){ae(this.size);var n=!0;return this.__iterate(function(i,r,o){return e.call(t,i,r,o)?void 0:(n=!1,!1)}),n},filter:function(e,t){return Te(this,fe(this,e,t,!0))},find:function(e,t,n){var i=this.findEntry(e,t);return i?i[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(i,r,o){return e.call(t,i,r,o)?(n=[r,i],!1):void 0}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return ae(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ae(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(i){n?n=!1:t+=e,t+=null!==i&&void 0!==i?i.toString():""}),t},keys:function(){return this.__iterator(yn)},map:function(e,t){return Te(this,pe(this,e,t))},reduce:function(e,t,n){ae(this.size);var i,r;return arguments.length<2?r=!0:i=t,this.__iterate(function(t,o,s){r?(r=!1,i=t):i=e.call(n,i,t,o,s)}),i},reduceRight:function(e,t,n){var i=this.toKeyedSeq().reverse();return i.reduce.apply(i,arguments)},reverse:function(){return Te(this,me(this,!0))},slice:function(e,t){return Te(this,ve(this,e,t,!0))},some:function(e,t){return!this.every(Qt(e),t)},sort:function(e){return Te(this,Ee(this,e))},values:function(){return this.__iterator(bn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return o(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return _e(this,e,t)},equals:function(e){return Jt(this,e)},entrySeq:function(){var e=this;if(e._cache)return new D(e._cache);var t=e.toSeq().map(Zt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Qt(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(a)},flatMap:function(e,t){return Te(this,Ie(this,e,t))},flatten:function(e){return Te(this,we(this,e,!0))},fromEntrySeq:function(){return new de(this)},get:function(e,t){return this.find(function(t,n){return Y(n,e)},void 0,t)},getIn:function(e,t){for(var n,i=this,r=Re(e);!(n=r.next()).done;){var o=n.value;if(i=i&&i.get?i.get(o,hn):hn,i===hn)return t}return i},groupBy:function(e,t){return ge(this,e,t)},has:function(e){return this.get(e,hn)!==hn},hasIn:function(e){return this.getIn(e,hn)!==hn},isSubset:function(e){return e="function"==typeof e.includes?e:h(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:h(e),e.isSubset(this)},keySeq:function(){return this.toSeq().map(Xt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return xe(this,e)},maxBy:function(e,t){return xe(this,t,e)},min:function(e){return xe(this,e?$t(e):nn)},minBy:function(e,t){return xe(this,t?$t(t):nn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Te(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Te(this,be(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Qt(e),t)},sortBy:function(e,t){return Te(this,Ee(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Te(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Te(this,ye(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Qt(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=rn(this))}});var si=h.prototype;si[fn]=!0,si[Sn]=si.values,si.__toJS=si.toArray,si.__toStringMapper=en,si.inspect=si.toSource=function(){return this.toString()},si.chain=si.flatMap,si.contains=si.includes,function(){try{Object.defineProperty(si,"length",{get:function(){if(!h.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Yt(p,{flip:function(){return Te(this,he(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return Y(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return Y(t,e)})},mapEntries:function(e,t){var n=this,i=0;return Te(this,this.toSeq().map(function(r,o){return e.call(t,[o,r],i++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Te(this,this.toSeq().flip().map(function(i,r){return e.call(t,i,r,n)}).flip())}});var ai=p.prototype;ai[_n]=!0,ai[Sn]=si.entries,ai.__toJS=si.toObject,ai.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+en(e)},Yt(m,{toKeyedSeq:function(){return new le(this,!1)},filter:function(e,t){return Te(this,fe(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){return this.toSeq().reverse().indexOf(e)},reverse:function(){return Te(this,me(this,!1))},slice:function(e,t){return Te(this,ve(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=u(e,0>e?this.count():this.size);var i=this.slice(0,e);return Te(this,1===n?i:i.concat(r(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return Te(this,we(this,e,!1))},get:function(e,t){return e=s(this,e),0>e||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return e=s(this,e),e>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Te(this,Se(this,e))},interleave:function(){var e=[this].concat(r(arguments)),t=ke(this.toSeq(),A.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Te(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Te(this,be(this,e,t,!1))},zip:function(){var e=[this].concat(r(arguments));return Te(this,ke(this,tn,e))},zipWith:function(e){var t=r(arguments);return t[0]=this,Te(this,ke(this,e,t))}}),m.prototype[gn]=!0,m.prototype[vn]=!0,Yt(f,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),f.prototype.has=si.includes,Yt(M,p.prototype),Yt(A,m.prototype),Yt(O,f.prototype),Yt(J,p.prototype),Yt(K,m.prototype),Yt(G,f.prototype);var li={Iterable:h,Seq:T,Collection:q,Map:Ne,OrderedMap:It,List:ct,Stack:kt,Set:Ot,OrderedSet:Nt,Record:Wt,Range:Kt,Repeat:Gt,is:Y,fromJS:X};return li})},function(e,t,n){"use strict";function i(e,t,n){return e[t]?new Error("<"+n+'> should not have a "'+t+'" prop'):void 0}t.__esModule=!0,t.falsy=i;var r=n(2),o=r.PropTypes.func,s=r.PropTypes.object,a=r.PropTypes.arrayOf,l=r.PropTypes.oneOfType,u=r.PropTypes.element,c=r.PropTypes.shape,d=r.PropTypes.string,h=c({listen:o.isRequired,pushState:o.isRequired,replaceState:o.isRequired,go:o.isRequired});t.history=h;var p=c({pathname:d.isRequired,search:d.isRequired,state:s,action:d.isRequired,key:d});t.location=p;var m=l([o,d]);t.component=m;var f=l([m,s]);t.components=f;var _=l([s,u]);t.route=_;var g=l([_,a(_)]);t.routes=g,t["default"]={falsy:i,history:h,location:p,component:m,components:f,route:_}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return null==e||p["default"].isValidElement(e)}function o(e){return r(e)||Array.isArray(e)&&e.every(r)}function s(e,t,n){e=e||"UnknownComponent";for(var i in t)if(t.hasOwnProperty(i)){var r=t[i](n,i,e);r instanceof Error&&f["default"](!1,r.message)}}function a(e,t){return d({},e,t)}function l(e){var t=e.type,n=a(t.defaultProps,e.props);if(t.propTypes&&s(t.displayName||t.name,t.propTypes,n),n.children){var i=u(n.children,n);i.length&&(n.childRoutes=i),delete n.children}return n}function u(e,t){var n=[];return p["default"].Children.forEach(e,function(e){if(p["default"].isValidElement(e))if(e.type.createRouteFromReactElement){var i=e.type.createRouteFromReactElement(e,t);i&&n.push(i)}else n.push(l(e))}),n}function c(e){return o(e)?e=u(e):e&&!Array.isArray(e)&&(e=[e]),e}t.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.isReactChildren=o,t.createRouteFromReactElement=l,t.createRoutesFromReactChildren=u,t.createRoutes=c;var h=n(2),p=i(h),m=n(42),f=i(m)},function(e,t,n){"use strict";function i(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:i,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){r.storedMeasure=e}}};e.exports=r},function(e,t,n){"use strict";function i(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];o?this[r]=o(n):this[r]=n[r]}var a=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;a?this.isDefaultPrevented=s.thatReturnsTrue:this.isDefaultPrevented=s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse}var r=n(18),o=n(8),s=n(28),a=n(115),l={type:null,target:a,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=s.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=s.thatReturnsTrue},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),i.Interface=l,i.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);o(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(i,r.threeArgumentPooler),e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(193),o=i(r),s=n(477),a=i(s),l=n(476),u=i(l),c=n(475),d=i(c),h=n(194),p=i(h);t.createStore=o["default"],t.combineReducers=a["default"],t.bindActionCreators=u["default"],t.applyMiddleware=d["default"],t.compose=p["default"]},function(e,t,n){"use strict";var i=n(278)["default"];t["default"]=i||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.__esModule=!0},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(2),o=i(r),s=n(380),a=i(s),l=a["default"](o["default"]),u=l.Provider,c=l.connect;t.Provider=u,t.connect=c},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){"use strict";function i(e,t){return(e&t)===t}var r=n(3),o={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},s=e.DOMPropertyNames||{},l=e.DOMMutationMethods||{};e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var u in t){r(!a.isStandardName.hasOwnProperty(u)),a.isStandardName[u]=!0;var c=u.toLowerCase();if(a.getPossibleStandardName[c]=u,n.hasOwnProperty(u)){var d=n[u];a.getPossibleStandardName[d]=u,a.getAttributeName[u]=d}else a.getAttributeName[u]=c;a.getPropertyName[u]=s.hasOwnProperty(u)?s[u]:u,l.hasOwnProperty(u)?a.getMutationMethod[u]=l[u]:a.getMutationMethod[u]=null;var h=t[u];a.mustUseAttribute[u]=i(h,o.MUST_USE_ATTRIBUTE),a.mustUseProperty[u]=i(h,o.MUST_USE_PROPERTY),a.hasSideEffects[u]=i(h,o.HAS_SIDE_EFFECTS),a.hasBooleanValue[u]=i(h,o.HAS_BOOLEAN_VALUE),a.hasNumericValue[u]=i(h,o.HAS_NUMERIC_VALUE),a.hasPositiveNumericValue[u]=i(h,o.HAS_POSITIVE_NUMERIC_VALUE),a.hasOverloadedBooleanValue[u]=i(h,o.HAS_OVERLOADED_BOOLEAN_VALUE),r(!a.mustUseAttribute[u]||!a.mustUseProperty[u]),r(a.mustUseProperty[u]||!a.hasSideEffects[u]),r(!!a.hasBooleanValue[u]+!!a.hasNumericValue[u]+!!a.hasOverloadedBooleanValue[u]<=1)}}},s={},a={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){var n=a._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,i=s[e];return i||(s[e]=i={}),t in i||(n=document.createElement(e),i[t]=n[t]),i[t]},injection:o};e.exports=a},function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,f)||(e[f]=p++,d[e[f]]={}),d[e[f]]}var r=n(14),o=n(57),s=n(172),a=n(431),l=n(182),u=n(8),c=n(117),d={},h=!1,p=0,m={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},f="_reactListenersID"+String(Math.random()).slice(2),_=u({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(_.handleTopLevel),_.ReactEventListener=e}},setEnabled:function(e){_.ReactEventListener&&_.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!_.ReactEventListener||!_.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=i(n),a=s.registrationNameDependencies[e],l=r.topLevelTypes,u=0,d=a.length;d>u;u++){var h=a[u];o.hasOwnProperty(h)&&o[h]||(h===l.topWheel?c("wheel")?_.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):c("mousewheel")?_.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):_.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):h===l.topScroll?c("scroll",!0)?_.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):_.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",_.ReactEventListener.WINDOW_HANDLE):h===l.topFocus||h===l.topBlur?(c("focus",!0)?(_.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),_.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):c("focusin")&&(_.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),_.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),o[l.topBlur]=!0,o[l.topFocus]=!0):m.hasOwnProperty(h)&&_.ReactEventListener.trapBubbledEvent(h,m[h],n),o[h]=!0)}},trapBubbledEvent:function(e,t,n){return _.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return _.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=l.refreshScrollValues;_.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:o.eventNameDispatchConfigs,registrationNameModules:o.registrationNameModules,putListener:o.putListener,getListener:o.getListener,deleteListener:o.deleteListener,deleteAllListeners:o.deleteAllListeners});e.exports=_},function(e,t,n){"use strict";function i(e){return p+e.toString(36)}function r(e,t){return e.charAt(t)===p||t===e.length}function o(e){return""===e||e.charAt(0)===p&&e.charAt(e.length-1)!==p}function s(e,t){return 0===t.indexOf(e)&&r(t,e.length)}function a(e){return e?e.substr(0,e.lastIndexOf(p)):""}function l(e,t){if(h(o(e)&&o(t)),h(s(e,t)),e===t)return e;var n,i=e.length+m;for(n=i;n<t.length&&!r(t,n);n++);return t.substr(0,n)}function u(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var i=0,s=0;n>=s;s++)if(r(e,s)&&r(t,s))i=s;else if(e.charAt(s)!==t.charAt(s))break;var a=e.substr(0,i);return h(o(a)),a}function c(e,t,n,i,r,o){e=e||"",t=t||"",h(e!==t);var u=s(t,e);h(u||s(e,t));for(var c=0,d=u?a:l,p=e;;p=d(p,t)){var m;if(r&&p===e||o&&p===t||(m=n(p,u,i)),m===!1||p===t)break;h(c++<f)}}var d=n(181),h=n(3),p=".",m=p.length,f=100,_={createReactRootID:function(){return i(d.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===p&&e.length>1){var t=e.indexOf(p,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,i,r){var o=u(e,t);o!==e&&c(e,o,n,i,!1,!0),o!==t&&c(o,t,n,r,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(c("",e,t,n,!0,!1),c(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){c("",e,t,n,!0,!1)},_getFirstCommonAncestorID:u,_getNextDescendantID:l,isAncestorIDOf:s,SEPARATOR:p};e.exports=_},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";function i(){r.attachRefs(this,this._currentElement)}var r=n(437),o=(n(59),{mountComponent:function(e,t,n,r){var o=e.mountComponent(t,n,r);return n.getReactMountReady().enqueue(i,e),o},unmountComponent:function(e){r.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,o){var s=e._currentElement;if(t!==s||null==t._owner){var a=r.shouldUpdateRefs(s,t);a&&r.detachRefs(e,s),e.receiveComponent(t,n,o),a&&n.getReactMountReady().enqueue(i,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}});e.exports=o},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(225),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){var i=n(25),r=n(31),o="prototype",s=function(e,t){return function(){return e.apply(t,arguments)}},a=function(e,t,n){var l,u,c,d,h=e&a.G,p=e&a.P,m=h?i:e&a.S?i[t]:(i[t]||{})[o],f=h?r:r[t]||(r[t]={});h&&(n=t);for(l in n)u=!(e&a.F)&&m&&l in m,u&&l in f||(c=u?m[l]:n[l],h&&"function"!=typeof m[l]?d=n[l]:e&a.B&&u?d=s(c,i):e&a.W&&m[l]==c?!function(e){d=function(t){return this instanceof e?new e(t):e(t)},d[o]=e[o]}(c):d=p&&"function"==typeof c?s(Function.call,c):c,f[l]=d,p&&((f[o]||(f[o]={}))[l]=c))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,e.exports=a},function(e,t){e.exports={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return function(){return s["default"](!1,"[history] "+t),e.apply(this,arguments)}}t.__esModule=!0;var o=n(33),s=i(o);t["default"]=r,e.exports=t["default"]},function(e,t,n){function r(e){return"o"===e[0]&&"n"===e[1]}function o(e,t){var n={};return Object.keys(e).forEach(function(i){var r=t(i,e[i]);void 0!==r&&(n[i]=r)}),n}function s(e){var t={};for(k in e)t[k]=e[k];return t}function a(){for(var e={},t=0,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(k in i)e[k]=i[k]}return e}function l(e,t){return e.length>=t.length&&e.substr(-t.length)===t}function u(e,t,n){var i=t.split("."),r=i.slice(0,i.length-1),o=i[i.length-1],s=r.reduce(function(e,t){return e[t]},e);s[o]=n}function c(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!1,null),e.dispatchEvent(n)}function h(e){var t={};return e&&e.split(" ").forEach(function(e){e&&(t[e]=!0)}),t}function p(e,t){var n=t.split(".");return n.reduce(function(e,t){return e&&e[t]},e)}function m(e){if("string"===e.type)return M.PropTypes.string;if("boolean"===e.type)return M.PropTypes.bool;if("number"===e.type)return M.PropTypes.number;if("enum"===e.type)return M.PropTypes.oneOf(e.values);if("any"===e.type)return M.PropTypes.any;if("reference"===e.type){if("Function"===e.name)return M.PropTypes.func;if("Array"===e.name){var t=m(e.typeArguments[0]);return t?M.PropTypes.arrayOf(t):M.PropTypes.array}if(p(window,e.name)){var n=p(window,e.name);return M.PropTypes.instanceOf(n)}}else console.warn("react-winjs typeToPropType: unable to find propType for type: "+JSON.stringify(e,null,2))}function f(e){var t={};return e.forEach(function(e,n){t[e.key]=n}),t}function _(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return n;return-1}function g(e,t){e=e.slice(0);var n=f(e),r=f(t),o=[];for(i=e.length-1;i>=0;i--){var s=e[i];r.hasOwnProperty(s.key)||(o.push({type:"delete",index:i}),e.splice(i,1))}for(i=0;i<t.length;i++){var s=t[i];if(n.hasOwnProperty(s.key)){if(e[i].key!==s.key){var a=_(e,s.key);o.push({type:"move",from:a,to:i}),e.splice(a,1),e.splice(i,0,s)}}else o.push({type:"insert",index:i,value:s}),e.splice(i,0,s)}return o}function v(e,t){t.forEach(function(t){if("delete"===t.type)e.splice(t.index,1);else if("insert"===t.type)e.splice(t.index,0,t.value.winControl);else{if("move"!==t.type)throw"Unsupported edit type: "+t.type;e.move(t.from,t.to)}},this)}function y(e,t,n){var i=[],r={};return M.Children.forEach(t,function(t){if(t)if(t.ref&&console.warn("ref prop ("+t.ref+") will not work on "+t.type.displayName+" component because it is inside of a "+e+" component"),null===t.key)console.error(t.type.displayName+" component requires a key when inside of a "+e+" component");else{var o=n[t.key];o?o.type===t.type?o.update(t):(o.dispose(),o=new S(t)):o=new S(t),i.push(o),r[t.key]=o}}),Object.keys(n).forEach(function(e){r.hasOwnProperty(e)||n[e].dispose()}),{childComponents:i,childComponentsMap:r}}function b(e,t){return e+t[0].toUpperCase()+t.substr(1)}function C(e,t){return"number"==typeof t?O[e]||0===t?""+t:t+"px":t?""+t:""}function w(e){function t(e,t,n){e.data={},e.displayName=d,e.element=t;var i=s(a);l(t,i,e.data,d),Object.keys(n).forEach(function(r){var o=u[r];o&&o.preCtorInit&&o.preCtorInit(t,i,e.data,d,r,n[r])}),e.winControl=new r(t,i),Object.keys(n).forEach(function(t){var i=u[t];i&&!i.preCtorInit&&i.update(e,t,void 0,n[t])})}function n(e,t,n){Object.keys(n).forEach(function(i){var r=u[i];r&&r.update(e,i,t[i],n[i])}),Object.keys(t).forEach(function(i){if(!n.hasOwnProperty(i)){var r=u[i];r&&r.update(e,i,t[i],void 0)}})}function i(e){e.winControl.dispose&&e.winControl.dispose(),Object.keys(u).forEach(function(t){var n=u[t];n.dispose&&n.dispose(e,t)})}var r=e.winjsControl,a=e.winControlOptions||{},l=e.preCtorInit||function(){},u=e.propHandlers||{},c=e.render||function(e){return M.DOM.div()},d=e.displayName;return M.createClass({displayName:d,statics:{initWinJSComponent:t,updateWinJSComponent:n,disposeWinJSComponent:i},propTypes:o(u,function(e,t){return t.propType}),shouldComponentUpdate:function(){return!1},componentDidMount:function(){t(this,M.findDOMNode(this),this.props)},componentWillUnmount:function(){i(this)},componentWillReceiveProps:function(e){n(this,this.props,e)},render:function(){return c(this)}})}function I(e){var t=M.renderToStaticMarkup(e);B.innerHTML=t;var n=B.firstElementChild;return B.removeChild(n),n}function S(e){var t=M.cloneElement(e,{ref:null}),n=I(t);e.type.initWinJSComponent(this,n,e.props),this.key=e.key,this.type=e.type,this._props=e.props,this._disposeWinJSComponent=e.type.disposeWinJSComponent}function E(e){return Object.keys(e).forEach(function(t){var n=e[t],i=n.underlyingControlName||t;n.winjsControl=n.winjsControl||T.UI[i],n.displayName=n.displayName||i,n.propHandlers=a(R,N[i],n.propHandlers)}),e}var x,P,T=n(120),M=n(2),A={AppBar:{closedDisplayMode:{type:"enum",values:["compact","full","minimal","none"]},data:{name:"WinJS.Binding.List",type:"reference",typeArguments:[{name:"WinJS.UI.ICommand",type:"reference",typeArguments:[]}]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},onAfterClose:{name:"Function",type:"reference",typeArguments:[]},onAfterOpen:{name:"Function",type:"reference",typeArguments:[]},onBeforeClose:{name:"Function",type:"reference",typeArguments:[]},onBeforeOpen:{name:"Function",type:"reference",typeArguments:[]},opened:{type:"boolean"},placement:{type:"enum",values:["bottom","top"]}},AppBarCommand:{disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},extraClass:{type:"string"},firstElementFocus:{name:"HTMLElement",type:"reference",typeArguments:[]},flyout:{name:"WinJS.UI.Flyout",type:"reference",typeArguments:[]},hidden:{type:"boolean"},icon:{type:"string"},id:{type:"string"},label:{type:"string"},lastElementFocus:{name:"HTMLElement",type:"reference",typeArguments:[]},onClick:{name:"Function",type:"reference",typeArguments:[]},priority:{type:"number"},section:{type:"string"},selected:{type:"boolean"},tooltip:{type:"string"},type:{type:"string"}},AutoSuggestBox:{chooseSuggestionOnEnter:{type:"boolean"},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},onQueryChanged:{name:"Function",type:"reference",typeArguments:[]},onQuerySubmitted:{name:"Function",type:"reference",typeArguments:[]},onResultSuggestionChosen:{name:"Function",type:"reference",typeArguments:[]},onSuggestionsRequested:{name:"Function",type:"reference",typeArguments:[]},placeholderText:{type:"string"},queryText:{type:"string"},searchHistoryContext:{type:"string"},searchHistoryDisabled:{
type:"boolean"}},BackButton:{element:{name:"HTMLElement",type:"reference",typeArguments:[]}},CellSpanningLayout:{groupHeaderPosition:{type:"enum",values:["left","top"]},groupInfo:{name:"Function",type:"reference",typeArguments:[]},itemInfo:{name:"Function",type:"reference",typeArguments:[]},maximumRowsOrColumns:{type:"number"},numberOfItemsPerItemsBlock:{type:"any"},orientation:{type:"enum",values:["horizontal","vertical"]}},Command:{disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},extraClass:{type:"string"},firstElementFocus:{name:"HTMLElement",type:"reference",typeArguments:[]},flyout:{name:"WinJS.UI.Flyout",type:"reference",typeArguments:[]},hidden:{type:"boolean"},icon:{type:"string"},id:{type:"string"},label:{type:"string"},lastElementFocus:{name:"HTMLElement",type:"reference",typeArguments:[]},onClick:{name:"Function",type:"reference",typeArguments:[]},priority:{type:"number"},section:{type:"string"},selected:{type:"boolean"},tooltip:{type:"string"},type:{type:"string"}},ContentDialog:{element:{name:"HTMLElement",type:"reference",typeArguments:[]},hidden:{type:"boolean"},onAfterHide:{name:"Function",type:"reference",typeArguments:[]},onAfterShow:{name:"Function",type:"reference",typeArguments:[]},onBeforeHide:{name:"Function",type:"reference",typeArguments:[]},onBeforeShow:{name:"Function",type:"reference",typeArguments:[]},primaryCommandDisabled:{type:"boolean"},primaryCommandText:{type:"string"},secondaryCommandDisabled:{type:"boolean"},secondaryCommandText:{type:"string"},title:{type:"string"}},DatePicker:{calendar:{type:"string"},current:{name:"Date",type:"reference",typeArguments:[]},datePattern:{type:"string"},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},maxYear:{type:"number"},minYear:{type:"number"},monthPattern:{type:"string"},onChange:{name:"Function",type:"reference",typeArguments:[]},yearPattern:{type:"string"}},FlipView:{currentPage:{type:"number"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},itemDataSource:{name:"WinJS.UI.IListDataSource",type:"reference",typeArguments:[{name:"T",type:"type-param"}]},itemSpacing:{type:"number"},itemTemplate:{type:"any"},onDataSourceCountChanged:{name:"Function",type:"reference",typeArguments:[]},onPageCompleted:{name:"Function",type:"reference",typeArguments:[]},onPageSelected:{name:"Function",type:"reference",typeArguments:[]},onPageVisibilityChanged:{name:"Function",type:"reference",typeArguments:[]},orientation:{type:"string"}},Flyout:{alignment:{type:"string"},anchor:{name:"HTMLElement",type:"reference",typeArguments:[]},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},hidden:{type:"boolean"},onAfterHide:{name:"Function",type:"reference",typeArguments:[]},onAfterShow:{name:"Function",type:"reference",typeArguments:[]},onBeforeHide:{name:"Function",type:"reference",typeArguments:[]},onBeforeShow:{name:"Function",type:"reference",typeArguments:[]},placement:{type:"string"}},GridLayout:{backdropColor:{type:"string"},disableBackdrop:{type:"boolean"},groupHeaderPosition:{type:"enum",values:["left","top"]},groupInfo:{name:"Function",type:"reference",typeArguments:[]},itemInfo:{name:"Function",type:"reference",typeArguments:[]},maxRows:{type:"number"},maximumRowsOrColumns:{type:"number"},numberOfItemsPerItemsBlock:{type:"any"},orientation:{type:"enum",values:["horizontal","vertical"]}},Hub:{element:{name:"HTMLElement",type:"reference",typeArguments:[]},headerTemplate:{type:"any"},indexOfFirstVisible:{type:"number"},indexOfLastVisible:{type:"number"},loadingState:{type:"enum",values:["complete","loading"]},onContentAnimating:{name:"Function",type:"reference",typeArguments:[]},onHeaderInvoked:{name:"Function",type:"reference",typeArguments:[]},onLoadingStateChanged:{name:"Function",type:"reference",typeArguments:[]},orientation:{type:"enum",values:["horizontal","vertical"]},scrollPosition:{type:"number"},sectionOnScreen:{type:"number"},sections:{name:"WinJS.Binding.List",type:"reference",typeArguments:[{name:"WinJS.UI.HubSection",type:"reference",typeArguments:[]}]},zoomableView:{name:"WinJS.UI.IZoomableView",type:"reference",typeArguments:[{type:"any"}]}},HubSection:{contentElement:{name:"HTMLElement",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},header:{type:"string"},isHeaderStatic:{type:"boolean"}},ItemContainer:{draggable:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},onInvoked:{name:"Function",type:"reference",typeArguments:[]},onSelectionChanged:{name:"Function",type:"reference",typeArguments:[]},onSelectionChanging:{name:"Function",type:"reference",typeArguments:[]},selected:{type:"boolean"},selectionDisabled:{type:"boolean"},swipeBehavior:{type:"enum",values:["none","select"]},swipeOrientation:{type:"enum",values:["horizontal","vertical"]},tapBehavior:{type:"enum",values:["directSelect","invokeOnly","none","toggleSelect"]}},ListLayout:{backdropColor:{type:"string"},disableBackdrop:{type:"boolean"},groupHeaderPosition:{type:"enum",values:["left","top"]},numberOfItemsPerItemsBlock:{type:"any"},orientation:{type:"enum",values:["horizontal","vertical"]}},ListView:{automaticallyLoadPages:{type:"boolean"},currentItem:{name:"WinJS.UI.IListViewItem",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},footer:{name:"HTMLElement",type:"reference",typeArguments:[]},groupDataSource:{name:"WinJS.UI.IListDataSource",type:"reference",typeArguments:[{name:"T",type:"type-param"}]},groupHeaderTapBehavior:{type:"enum",values:["invoke","none"]},groupHeaderTemplate:{type:"any"},header:{name:"HTMLElement",type:"reference",typeArguments:[]},indexOfFirstVisible:{type:"number"},indexOfLastVisible:{type:"number"},itemDataSource:{name:"WinJS.UI.IListDataSource",type:"reference",typeArguments:[{name:"T",type:"type-param"}]},itemTemplate:{type:"any"},itemsDraggable:{type:"boolean"},itemsReorderable:{type:"boolean"},layout:{name:"WinJS.UI.ILayout2",type:"reference",typeArguments:[]},loadingBehavior:{type:"string"},loadingState:{type:"string"},maxDeferredItemCleanup:{type:"number"},maxLeadingPages:{type:"number"},maxTrailingPages:{type:"number"},onAccessibilityAnnotationComplete:{name:"Function",type:"reference",typeArguments:[]},onContentAnimating:{name:"Function",type:"reference",typeArguments:[]},onFooterVisibilityChanged:{name:"Function",type:"reference",typeArguments:[]},onGroupHeaderInvoked:{name:"Function",type:"reference",typeArguments:[]},onHeaderVisibilityChanged:{name:"Function",type:"reference",typeArguments:[]},onItemDragBetween:{name:"Function",type:"reference",typeArguments:[]},onItemDragChanged:{name:"Function",type:"reference",typeArguments:[]},onItemDragDrop:{name:"Function",type:"reference",typeArguments:[]},onItemDragEnd:{name:"Function",type:"reference",typeArguments:[]},onItemDragEnter:{name:"Function",type:"reference",typeArguments:[]},onItemDragLeave:{name:"Function",type:"reference",typeArguments:[]},onItemDragStart:{name:"Function",type:"reference",typeArguments:[]},onItemInvoked:{name:"Function",type:"reference",typeArguments:[]},onKeyboardNavigating:{name:"Function",type:"reference",typeArguments:[]},onLoadingStateChanged:{name:"Function",type:"reference",typeArguments:[]},onSelectionChanged:{name:"Function",type:"reference",typeArguments:[]},onSelectionChanging:{name:"Function",type:"reference",typeArguments:[]},pagesToLoad:{type:"number"},pagesToLoadThreshold:{type:"number"},scrollPosition:{type:"number"},selection:{name:"WinJS.UI.ISelection",type:"reference",typeArguments:[{name:"T",type:"type-param"}]},selectionMode:{type:"enum",values:["multi","none","single"]},swipeBehavior:{type:"enum",values:["none","select"]},tapBehavior:{type:"enum",values:["directSelect","invokeOnly","none","toggleSelect"]},zoomableView:{name:"WinJS.UI.IZoomableView",type:"reference",typeArguments:[{name:"WinJS.UI.ListView",type:"reference",typeArguments:[{name:"T",type:"type-param"}]}]}},Menu:{alignment:{type:"string"},anchor:{name:"HTMLElement",type:"reference",typeArguments:[]},commands:{name:"Array",type:"reference",typeArguments:[{name:"WinJS.UI.MenuCommand",type:"reference",typeArguments:[]}]},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},hidden:{type:"boolean"},onAfterHide:{name:"Function",type:"reference",typeArguments:[]},onAfterShow:{name:"Function",type:"reference",typeArguments:[]},onBeforeHide:{name:"Function",type:"reference",typeArguments:[]},onBeforeShow:{name:"Function",type:"reference",typeArguments:[]},placement:{type:"string"}},MenuCommand:{disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},extraClass:{type:"string"},flyout:{name:"WinJS.UI.Flyout",type:"reference",typeArguments:[]},hidden:{type:"boolean"},id:{type:"string"},label:{type:"string"},onClick:{name:"Function",type:"reference",typeArguments:[]},selected:{type:"boolean"},type:{type:"string"}},NavBar:{closedDisplayMode:{type:"string"},commands:{name:"WinJS.UI.AppBarCommand",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},hidden:{type:"boolean"},onAfterClose:{name:"Function",type:"reference",typeArguments:[]},onAfterOpen:{name:"Function",type:"reference",typeArguments:[]},onBeforeClose:{name:"Function",type:"reference",typeArguments:[]},onBeforeOpen:{name:"Function",type:"reference",typeArguments:[]},onChildrenProcessed:{name:"Function",type:"reference",typeArguments:[]},opened:{type:"boolean"},placement:{type:"string"}},NavBarCommand:{element:{name:"HTMLElement",type:"reference",typeArguments:[]},icon:{type:"string"},label:{type:"string"},location:{type:"any"},onInvoked:{name:"Function",type:"reference",typeArguments:[]},splitButton:{type:"boolean"},splitOpened:{type:"boolean"},state:{type:"any"},tooltip:{type:"string"}},NavBarContainer:{currentIndex:{type:"number"},data:{name:"WinJS.Binding.List",type:"reference",typeArguments:[{name:"WinJS.UI.NavBarCommand",type:"reference",typeArguments:[]}]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},fixedSize:{type:"boolean"},layout:{type:"enum",values:["horizontal","vertical"]},maxRows:{type:"number"},onInvoked:{name:"Function",type:"reference",typeArguments:[]},onSplitToggle:{name:"Function",type:"reference",typeArguments:[]},template:{name:"WinJS.Binding.Template",type:"reference",typeArguments:[]}},Pivot:{customLeftHeader:{name:"HTMLElement",type:"reference",typeArguments:[]},customRightHeader:{name:"HTMLElement",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},items:{name:"WinJS.Binding.List",type:"reference",typeArguments:[{name:"WinJS.UI.PivotItem",type:"reference",typeArguments:[]}]},locked:{type:"boolean"},onItemAnimationEnd:{name:"Function",type:"reference",typeArguments:[]},onItemAnimationStart:{name:"Function",type:"reference",typeArguments:[]},onSelectionChanged:{name:"Function",type:"reference",typeArguments:[]},selectedIndex:{type:"number"},selectedItem:{name:"WinJS.UI.PivotItem",type:"reference",typeArguments:[]},title:{type:"string"}},PivotItem:{contentElement:{name:"HTMLElement",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},header:{type:"string"}},Rating:{averageRating:{type:"number"},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},enableClear:{type:"boolean"},maxRating:{type:"number"},onCancel:{name:"Function",type:"reference",typeArguments:[]},onChange:{name:"Function",type:"reference",typeArguments:[]},onPreviewChange:{name:"Function",type:"reference",typeArguments:[]},tooltipStrings:{name:"Array",type:"reference",typeArguments:[{type:"string"}]},userRating:{type:"number"}},SearchBox:{chooseSuggestionOnEnter:{type:"boolean"},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},focusOnKeyboardInput:{type:"boolean"},onQueryChanged:{name:"Function",type:"reference",typeArguments:[]},onQuerySubmitted:{name:"Function",type:"reference",typeArguments:[]},onResultSuggestionChosen:{name:"Function",type:"reference",typeArguments:[]},onSuggestionsRequested:{name:"Function",type:"reference",typeArguments:[]},placeholderText:{type:"string"},queryText:{type:"string"},searchHistoryContext:{type:"string"},searchHistoryDisabled:{type:"boolean"}},SemanticZoom:{element:{name:"HTMLElement",type:"reference",typeArguments:[]},enableButton:{type:"boolean"},locked:{type:"boolean"},onZoomChanged:{name:"Function",type:"reference",typeArguments:[]},zoomFactor:{type:"number"},zoomedOut:{type:"boolean"}},SplitView:{closedDisplayMode:{type:"enum",values:["inline","none"]},contentElement:{name:"HTMLElement",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},onAfterClose:{name:"Function",type:"reference",typeArguments:[]},onAfterOpen:{name:"Function",type:"reference",typeArguments:[]},onBeforeClose:{name:"Function",type:"reference",typeArguments:[]},onBeforeOpen:{name:"Function",type:"reference",typeArguments:[]},openedDisplayMode:{type:"enum",values:["inline","overlay"]},paneElement:{name:"HTMLElement",type:"reference",typeArguments:[]},paneOpened:{type:"boolean"},panePlacement:{type:"enum",values:["bottom","left","right","top"]}},SplitViewCommand:{element:{name:"HTMLElement",type:"reference",typeArguments:[]},icon:{type:"string"},label:{type:"string"},onInvoked:{name:"Function",type:"reference",typeArguments:[]},tooltip:{type:"string"}},SplitViewPaneToggle:{element:{name:"HTMLButtonElement",type:"reference",typeArguments:[]},onInvoked:{name:"Function",type:"reference",typeArguments:[]},splitView:{name:"HTMLElement",type:"reference",typeArguments:[]}},TimePicker:{clock:{type:"string"},current:{name:"Date",type:"reference",typeArguments:[]},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},hourPattern:{type:"string"},minuteIncrement:{type:"number"},minutePattern:{type:"string"},onChange:{name:"Function",type:"reference",typeArguments:[]},periodPattern:{type:"string"}},ToggleSwitch:{checked:{type:"boolean"},disabled:{type:"boolean"},element:{name:"HTMLElement",type:"reference",typeArguments:[]},labelOff:{type:"string"},labelOn:{type:"string"},onChange:{name:"Function",type:"reference",typeArguments:[]},title:{type:"string"}},ToolBar:{closedDisplayMode:{type:"enum",values:["compact","full"]},data:{name:"WinJS.Binding.List",type:"reference",typeArguments:[{name:"WinJS.UI.ICommand",type:"reference",typeArguments:[]}]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},onAfterClose:{name:"Function",type:"reference",typeArguments:[]},onAfterOpen:{name:"Function",type:"reference",typeArguments:[]},onBeforeClose:{name:"Function",type:"reference",typeArguments:[]},onBeforeOpen:{name:"Function",type:"reference",typeArguments:[]},opened:{type:"boolean"}},Tooltip:{contentElement:{name:"HTMLElement",type:"reference",typeArguments:[]},element:{name:"HTMLElement",type:"reference",typeArguments:[]},extraClass:{type:"string"},infotip:{type:"boolean"},innerHTML:{type:"string"},onBeforeClose:{name:"Function",type:"reference",typeArguments:[]},onBeforeOpen:{name:"Function",type:"reference",typeArguments:[]},onClosed:{name:"Function",type:"reference",typeArguments:[]},onOpened:{name:"Function",type:"reference",typeArguments:[]},placement:{type:"string"}}};window.setImmediate&&window.clearImmediate?(x=window.setImmediate,P=window.clearImmediate):(x=function(e){return setTimeout(e,0)},P=window.clearTimeout);var O={flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},D=["Moz","ms","Webkit"];Object.keys(O).forEach(function(e){D.forEach(function(t){O[b(t,e)]=!0})});var L={property:function(e){return{propType:e,preCtorInit:function(e,t,n,i,r,o){t[r]=o},update:function(e,t,n,i){n!==i&&(e.winControl[t]=i)}}},focusProperty:function(e){return{propType:e,preCtorInit:function(e,t,n,i,r,o){t[r]=o},update:function(e,t,n,i){if(n!==i){var r=e.data[t];r&&P(r),r=x(function(){e.data[t]=null,e.winControl[t]=i})}},dispose:function(e,t){var n=e.data[t];n&&P(n)}}},domProperty:function(e){return{propType:e,preCtorInit:function(e,t,n,i,r,o){e[r]=o},update:function(e,t,n,i){n!==i&&(e.element[t]=i)}}},domAttribute:function(e){return{propType:e,update:function(e,t,n,i){n!==i&&(null!==i&&void 0!==i?e.element.setAttribute(t,""+i):e.element.removeAttribute(t))}}},event:{propType:M.PropTypes.func,update:function(e,t,n,i){n!==i&&(e.winControl[t.toLowerCase()]=i)}},domEvent:{propType:M.PropTypes.func,preCtorInit:function(e,t,n,i,r,o){e[r.toLowerCase()]=o},update:function(e,t,n,i){n!==i&&(e.element[t.toLowerCase()]=i)}},winControlClassName:{propType:M.PropTypes.string,preCtorInit:function(e,t,n,i,r,o){o&&(e.className=o),n[r]=h(o)},update:function(e,t,n,i){if(n!==i){var r=e.data[t]||{},o=h(i),s=e.winControl.element.classList;for(var a in r)o[a]||s.remove(a);for(var a in o)r[a]||s.add(a);e.data[t]=o}}},winControlStyle:{propType:M.PropTypes.object,preCtorInit:function(e,t,n,i,r,o){var s=e.style;o=o||{};for(var a in o)s[a]=C(a,o[a])},update:function(e,t,n,i){if(n!==i){n=n||{},i=i||{};var r=e.winControl.element.style;for(var o in n)i.hasOwnProperty(o)||(r[o]="");for(var o in i)n[o]!==i[o]&&(r[o]=C(o,i[o]))}}},warn:function(e){return{update:function(t,n,i,r){console.warn(t.displayName+": "+e)}}},propertyWithMount:function(e){return{propType:M.PropTypes.element,preCtorInit:function(t,n,i,r,o,s){s&&(i[o]=document.createElement("div"),M.render(s,i[o]),n[e]=i[o])},update:function(t,n,i,r){var o=t.winControl,s=t.data[n];r?(s||(s=document.createElement("div"),t.data[n]=s),M.render(r,s),o[e]!==s&&(o[e]=s)):i&&(s&&M.unmountComponentAtNode(s),o[e]=null)},dispose:function(e,t){var n=e.data[t];n&&M.unmountComponentAtNode(n)}}},mountTo:function(e){return{propType:M.PropTypes.element,update:function(t,n,i,r){var o=t.data[n]||{},s=(o.version||0)+1;t.data[n]={version:s,element:o.element};var a=function(){if(s===t.data[n].version){var o=t.data[n].element;if(r){var a=e(t);o&&o!==a&&M.unmountComponentAtNode(o),M.render(r,a),t.data[n].element=a}else i&&(o&&M.unmountComponentAtNode(o),t.data[n].element=null)}},l=t.winControl,u=l.constructor.isDeclarativeControlContainer;u&&"function"==typeof u?u(l,a):a()},dispose:function(e,t){var n=e.data[t]||{},i=n.element;i&&M.unmountComponentAtNode(i)}}},syncChildrenWithBindingList:function(e){return{preCtorInit:function(t,n,i,r,o,s){var a=y(r,s,{});i[o]={winjsChildComponents:a.childComponents,winjsChildComponentsMap:a.childComponentsMap},n[e]=new T.Binding.List(a.childComponents.map(function(e){return e.winControl}))},update:function(t,n,i,r){var o=t.data[n]||{},s=o.winjsChildComponents||[],a=o.winjsChildComponentsMap||{},l=y(t.displayName,r,a),u=t.winControl[e];u?v(u,g(s,l.childComponents)):t.winControl[e]=new T.Binding.List(l.childComponents.map(function(e){return e.winControl})),t.data[n]={winjsChildComponents:l.childComponents,winjsChildComponentsMap:l.childComponentsMap}},dispose:function(e,t){var n=e.data[t]||{},i=n.winjsChildComponents||[];i.forEach(function(e){e.dispose()})}}}},B=document.createElement("div");S.prototype.update=function(e){e.type.updateWinJSComponent(this,this._props,e.props),this._props=e.props},S.prototype.dispose=function(){this._disposeWinJSComponent(this)};var R={className:L.winControlClassName,style:L.winControlStyle,id:L.domProperty(M.PropTypes.string),"aria-controls":L.domAttribute(M.PropTypes.any),"aria-expanded":L.domAttribute(M.PropTypes.any)},N=function(){var e=function(e){return!l(e.toLowerCase(),"element")};return o(A,function(t,n){var i={};return Object.keys(n).forEach(function(t){if(r(t))i[t]=L.event;else if(e(t)){var o=n[t],s=m(o);i[t]=L.property(s)}}),i})}(),F=L.warn("Invalid prop 'type'. Instead, the command type is determined by the component: Button, Toggle, Separator, ContentCommand, FlyoutCommand."),z={Button:{underlyingControlName:"AppBarCommand",winControlOptions:{type:"button"},render:function(e){return M.DOM.button()},propHandlers:{type:F}},Toggle:{underlyingControlName:"AppBarCommand",winControlOptions:{type:"toggle"},render:function(e){return M.DOM.button()},propHandlers:{type:F}},Separator:{underlyingControlName:"AppBarCommand",winControlOptions:{type:"separator"},render:function(e){return M.DOM.hr()},propHandlers:{type:F}},ContentCommand:{underlyingControlName:"AppBarCommand",winControlOptions:{type:"content"},propHandlers:{type:F,children:L.mountTo(function(e){return e.winControl.element})}},FlyoutCommand:{underlyingControlName:"AppBarCommand",winControlOptions:{type:"flyout"},render:function(e){return M.DOM.button()},propHandlers:{type:F,flyoutComponent:{propType:M.PropTypes.element,update:function(e,t,n,i){var r=e.data[t];if(!r){var o=document.createElement("div");o.className="win-react-flyout-host",document.body.appendChild(o),e.data[t]=r={flyoutHost:o,flyoutComponent:null}}var s=r.flyoutComponent&&r.flyoutComponent.winControl,a=M.render(i,r.flyoutHost);s!==a.winControl&&(e.winControl.flyout=a.winControl),e.data[t].flyoutComponent=a},dispose:function(e,t){var n=e.data[t];n&&n.flyoutHost&&(M.unmountComponentAtNode(n.flyoutHost),c(n.flyoutHost))}}}}},H=E({AppBar:{propHandlers:{opened:L.focusProperty(M.PropTypes.bool),children:L.syncChildrenWithBindingList("data")}},"AppBar.Button":z.Button,"AppBar.Toggle":z.Toggle,"AppBar.Separator":z.Separator,"AppBar.ContentCommand":z.ContentCommand,"AppBar.FlyoutCommand":z.FlyoutCommand,AutoSuggestBox:{},BackButton:{preCtorInit:function(e,t,n,i){e.addEventListener("click",function(e){e.stopPropagation()})},render:function(e){return M.DOM.button()}},ContentDialog:{propHandlers:{hidden:L.focusProperty(M.PropTypes.bool),children:L.mountTo(function(e){return e.winControl.element.querySelector(".win-contentdialog-content")})}},DatePicker:{},FlipView:{},Flyout:{render:function(e){return M.DOM.div(null,M.DOM.div({className:"win-react-flyout-mount-point"}))},propHandlers:{hidden:L.focusProperty(M.PropTypes.bool),children:L.mountTo(function(e){return e.winControl.element.querySelector(".win-react-flyout-mount-point")})}},Hub:{propHandlers:{children:L.syncChildrenWithBindingList("sections")}},"Hub.Section":{underlyingControlName:"HubSection",propHandlers:{children:L.mountTo(function(e){return e.winControl.contentElement})}},ItemContainer:{propHandlers:{children:L.mountTo(function(e){return e.winControl.element.querySelector(".win-item")})}},ListView:{propHandlers:{currentItem:L.focusProperty(M.PropTypes.any),headerComponent:L.propertyWithMount("header"),footerComponent:L.propertyWithMount("footer")}},Menu:{propHandlers:{hidden:L.focusProperty(M.PropTypes.bool),children:{update:function(e,t,n,i){M.render(M.DOM.div(null,i),e.winControl.element)}}}},"Menu.Button":a(z.Button,{underlyingControlName:"MenuCommand"}),"Menu.Toggle":a(z.Toggle,{underlyingControlName:"MenuCommand"}),"Menu.Separator":a(z.Separator,{underlyingControlName:"MenuCommand"}),"Menu.FlyoutCommand":a(z.FlyoutCommand,{underlyingControlName:"MenuCommand"}),Pivot:{propHandlers:{children:L.syncChildrenWithBindingList("items"),customLeftHeaderComponent:L.propertyWithMount("customLeftHeader"),customRightHeaderComponent:L.propertyWithMount("customRightHeader")}},"Pivot.Item":{underlyingControlName:"PivotItem",propHandlers:{children:L.mountTo(function(e){return e.winControl.contentElement})}},Rating:{},SemanticZoom:{propHandlers:{zoomedInComponent:{propType:M.PropTypes.element,preCtorInit:function(e,t,n,i,r,o){var s=new S(o);e.insertBefore(s.winControl.element,e.firstElementChild),n[r]=s},update:function(e,t,n,i){var r=e.data[t];r.type===i.type?r.update(i):console.warn("SemanticZoom: zoomedInComponent's component type can't change")},dispose:function(e,t){var n=e.data[t];n&&n.dispose()}},zoomedOutComponent:{propType:M.PropTypes.element,preCtorInit:function(e,t,n,i,r,o){var s=new S(o);e.appendChild(s.winControl.element),n[r]=s},update:function(e,t,n,i){var r=e.data[t];r.type===i.type?r.update(i):console.warn("SemanticZoom: zoomedOutComponent's component type can't change")},dispose:function(e,t){var n=e.data[t];n&&n.dispose()}}}},SplitView:{propHandlers:{paneOpened:L.focusProperty(M.PropTypes.bool),paneComponent:L.mountTo(function(e){return e.winControl.paneElement}),contentComponent:L.mountTo(function(e){return e.winControl.contentElement})}},"SplitView.Command":{underlyingControlName:"SplitViewCommand"},SplitViewPaneToggle:{render:function(e){return M.DOM.button()},propHandlers:{paneOpened:{propType:M.PropTypes.bool,update:function(e,t,n,i){var r=e.data[t];r||(r={ariaExpandedMutationObserver:new T.Utilities._MutationObserver(function(){var n=e.element,i="true"===n.getAttribute("aria-expanded");i!==e.data[t].value&&d(n,"invoked")}),observing:!1,value:i},e.data[t]=r),n!==i&&(null!==i&&void 0!==i?(e.element.setAttribute("aria-expanded",i?"true":"false"),r.observing||(r.observing=!0,r.ariaExpandedMutationObserver.observe(e.element,{attributes:!0,attributeFilter:["aria-expanded"]}))):(e.element.removeAttribute("aria-expanded"),r.observing&&(r.observing=!1,r.ariaExpandedMutationObserver.disconnect()))),r.value=i},dispose:function(e,t){var n=e.data[t];n&&n.observing&&n.ariaExpandedMutationObserver.disconnect()}}}},TimePicker:{},ToggleSwitch:{},ToolBar:{propHandlers:{opened:L.focusProperty(M.PropTypes.bool),children:L.syncChildrenWithBindingList("data")}},"ToolBar.Button":z.Button,"ToolBar.Toggle":z.Toggle,"ToolBar.Separator":z.Separator,"ToolBar.ContentCommand":z.ContentCommand,"ToolBar.FlyoutCommand":z.FlyoutCommand,Tooltip:{propHandlers:{children:L.mountTo(function(e){return e.winControl.element}),contentComponent:L.propertyWithMount("contentElement")}}}),W={};Object.keys(H).sort().forEach(function(e){u(W,e,w(H[e]))}),W.reactRenderer=function(e){var t,n=function(e){var n=document.createElement("div");return n.className="win-react-renderer-host",M.render(t(e),n),T.Utilities.markDisposable(n,function(){M.unmountComponentAtNode(n)}),n};return function(i){return t||(t=e.bind(this)),T.Promise.is(i)?i.then(n):n(i)}},W.defineControl=w,W.PropHandlers=L,W.defaultPropHandlers=R,e.exports=W},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return r(e).replace(/\/+/g,"/+")}function s(e){for(var t="",n=[],i=[],r=void 0,s=0,a=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*|\(|\)/g;r=a.exec(e);)r.index!==s&&(i.push(e.slice(s,r.index)),t+=o(e.slice(s,r.index))),r[1]?(t+="([^/?#]+)",n.push(r[1])):"*"===r[0]?(t+="([\\s\\S]*?)",n.push("splat")):"("===r[0]?t+="(?:":")"===r[0]&&(t+=")?"),i.push(r[0]),s=a.lastIndex;return s!==e.length&&(i.push(e.slice(s,e.length)),t+=o(e.slice(s,e.length))),{pattern:e,regexpSource:t,paramNames:n,tokens:i}}function a(e){return e in m||(m[e]=s(e)),m[e]}function l(e,t){var n=a(e),i=n.regexpSource,r=n.paramNames,o=n.tokens;i+="/*";var s="*"!==o[o.length-1];s&&(i+="([\\s\\S]*?)");var l=t.match(new RegExp("^"+i+"$","i")),u=void 0,c=void 0;return null!=l?(c=Array.prototype.slice.call(l,1).map(function(e){return null!=e?decodeURIComponent(e.replace(/\+/g,"%20")):e}),u=s?c.pop():t.replace(l[0],"")):u=c=null,{remainingPathname:u,paramNames:r,paramValues:c}}function u(e){return a(e).paramNames}function c(e,t){var n=l(e,t),i=n.paramNames,r=n.paramValues;return null!=r?i.reduce(function(e,t,n){return e[t]=r[n],e},{}):null}function d(e,t){t=t||{};for(var n=a(e),i=n.tokens,r=0,o="",s=0,l=void 0,u=void 0,c=void 0,d=0,h=i.length;h>d;++d)l=i[d],"*"===l?(c=Array.isArray(t.splat)?t.splat[s++]:t.splat,p["default"](null!=c||r>0,'Missing splat #%s for path "%s"',s,e),null!=c&&(o+=encodeURI(c).replace(/%20/g,"+"))):"("===l?r+=1:")"===l?r-=1:":"===l.charAt(0)?(u=l.substring(1),c=t[u],p["default"](null!=c||r>0,'Missing "%s" parameter for path "%s"',u,e),null!=c&&(o+=encodeURIComponent(c).replace(/%20/g,"+"))):o+=l;return o.replace(/\/+/g,"/")}t.__esModule=!0,t.compilePattern=a,t.matchPattern=l,t.getParamNames=u,t.getParams=c,t.formatPattern=d;var h=n(27),p=i(h),m={}},function(e,t,n){"use strict";function i(e,t){return null==t||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&1>t||r.hasOverloadedBooleanValue[e]&&t===!1}var r=n(43),o=n(470),s=(n(10),{createMarkupForID:function(e){return r.ID_ATTRIBUTE_NAME+"="+o(e)},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(i(e,t))return"";var n=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+o(t)}return r.isCustomAttribute(e)?null==t?"":e+"="+o(t):null},setValueForProperty:function(e,t,n){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var o=r.getMutationMethod[t];if(o)o(e,n);else if(i(t,n))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+n);else{var s=r.getPropertyName[t];r.hasSideEffects[t]&&""+e[s]==""+n||(e[s]=n)}}else r.isCustomAttribute(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,void 0);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],o=r.getDefaultValueForProperty(e.nodeName,i);r.hasSideEffects[t]&&""+e[i]===o||(e[i]=o)}}else r.isCustomAttribute(t)&&e.removeAttribute(t)}});e.exports=s},function(e,t,n){"use strict";var i=n(172),r=n(100),o=n(111),s=n(112),a=n(3),l={},u=null,c=function(e){if(e){var t=r.executeDispatch,n=i.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},d=null,h={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){d=e},getInstanceHandle:function(){return d},injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:function(e,t,n){a(!n||"function"==typeof n);var i=l[t]||(l[t]={});i[e]=n},getListener:function(e,t){var n=l[t];return n&&n[e]},deleteListener:function(e,t){var n=l[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in l)delete l[t][e]},extractEvents:function(e,t,n,r){for(var s,a=i.plugins,l=0,u=a.length;u>l;l++){var c=a[l];if(c){var d=c.extractEvents(e,t,n,r);d&&(s=o(s,d))}}return s},enqueueEvents:function(e){e&&(u=o(u,e))},processEventQueue:function(){var e=u;u=null,s(e,c),a(!u)},__purge:function(){l={}},__getListenerBank:function(){return l}};e.exports=h},function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return _(e,i)}function r(e,t,n){var r=t?f.bubbled:f.captured,o=i(e,n,r);o&&(n._dispatchListeners=p(n._dispatchListeners,o),n._dispatchIDs=p(n._dispatchIDs,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,r,e)}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=_(e,i);r&&(n._dispatchListeners=p(n._dispatchListeners,r),n._dispatchIDs=p(n._dispatchIDs,e))}}function a(e){e&&e.dispatchConfig.registrationName&&s(e.dispatchMarker,null,e)}function l(e){m(e,o)}function u(e,t,n,i){h.injection.getInstanceHandle().traverseEnterLeave(n,i,s,e,t)}function c(e){m(e,a)}var d=n(14),h=n(57),p=n(111),m=n(112),f=d.PropagationPhases,_=h.getListener,g={accumulateTwoPhaseDispatches:l,accumulateDirectDispatches:c,accumulateEnterLeaveDispatches:u};e.exports=g},function(e,t,n){"use strict";function i(){if(v.current){var e=v.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function r(e){
var t=e&&e.getPublicInstance();if(!t)return void 0;var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}function o(){var e=v.current;return e&&r(e)||void 0}function s(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,l('Each child in an array or iterator should have a unique "key" prop.',e,t))}function a(e,t,n){S.test(e)&&l("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function l(e,t,n){var i=o(),s="string"==typeof n?n:n.displayName||n.name,a=i||s,l=w[e]||(w[e]={});if(!l.hasOwnProperty(a)){l[a]=!0;var u="";if(t&&t._owner&&t._owner!==v.current){var c=r(t._owner);u=" It was passed a child from "+c+"."}}}function u(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];f.isValidElement(i)&&s(i,t)}else if(f.isValidElement(e))e._store.validated=!0;else if(e){var r=b(e);if(r){if(r!==e.entries)for(var o,l=r.call(e);!(o=l.next()).done;)f.isValidElement(o.value)&&s(o.value,t)}else if("object"==typeof e){var u=_.extractIfFragment(e);for(var c in u)u.hasOwnProperty(c)&&a(c,u[c],t)}}}function c(e,t,n,r){for(var o in t)if(t.hasOwnProperty(o)){var s;try{C("function"==typeof t[o]),s=t[o](n,o,e,r)}catch(a){s=a}if(s instanceof Error&&!(s.message in I)){I[s.message]=!0;i(this)}}}function d(e,t){var n=t.type,i="string"==typeof n?n:n.displayName,r=t._owner?t._owner.getPublicInstance().constructor.displayName:null,o=e+"|"+i+"|"+r;if(!E.hasOwnProperty(o)){E[o]=!0;var s="";i&&(s=" <"+i+" />");var a="";r&&(a=" The element was created by "+r+".")}}function h(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function p(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var i in n)n.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&h(t[i],n[i])||(d(i,e),t[i]=n[i]))}}function m(e){if(null!=e.type){var t=y.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&c(n,t.propTypes,e.props,g.prop),"function"==typeof t.getDefaultProps}}var f=n(9),_=n(75),g=n(109),v=(n(77),n(20)),y=n(76),b=n(187),C=n(3),w=(n(10),{}),I={},S=/^\d+$/,E={},x={checkAndWarnForMutatedProps:p,createElement:function(e,t,n){var i=f.createElement.apply(this,arguments);if(null==i)return i;for(var r=2;r<arguments.length;r++)u(arguments[r],e);return m(i),i},createFactory:function(e){var t=x.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var i=f.cloneElement.apply(this,arguments),r=2;r<arguments.length;r++)u(arguments[r],i.type);return m(i),i}};e.exports=x},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(38),o=n(115),s={view:function(e){if(e.view)return e.view;var t=o(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";var i=n(3),r=function(e){var t,n={};i(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=r},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(258),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(272);i(t,r(o,i))},function(e,t,n){var i=n(68);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(135);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(13),r=n(141);e.exports=n(86)?function(e,t,n){return i.setDesc(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function i(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function r(){return window.location.href.split("#")[1]||""}function o(e){window.location.replace(window.location.pathname+window.location.search+"#"+e)}function s(){return window.location.pathname+window.location.search+window.location.hash}function a(e){e&&window.history.go(e)}function l(e,t){t(window.confirm(e))}function u(){var e=navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1}function c(){var e=navigator.userAgent;return-1===e.indexOf("Firefox")}t.__esModule=!0,t.addEventListener=n,t.removeEventListener=i,t.getHashPath=r,t.replaceHashPath=o,t.getWindowPath=s,t.go=a,t.getUserConfirmation=l,t.supportsHistory=u,t.supportsGoWithoutReloadUsingHash=c},function(e,t){"use strict";t.__esModule=!0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.canUseDOM=n},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,s,a],c=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[c++]}))}throw l.framesToPop=1,l}};e.exports=i},function(e,t,n){function i(e){return null!=e&&o(r(e))}var r=n(367),o=n(73);e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;e.exports=n},function(e,t,n){"use strict";var i=n(185),r={componentDidMount:function(){this.props.autoFocus&&i(this.getDOMNode())}};e.exports=r},function(e,t,n){"use strict";var i=(n(9),n(10),{create:function(e){return e},extract:function(e){return e},extractIfFragment:function(e){return e}});e.exports=i},function(e,t,n){"use strict";function i(e){if("function"==typeof e.type)return e.type;var t=e.type,n=d[t];return null==n&&(d[t]=n=u(t)),n}function r(e){return l(c),new c(e.type,e.props)}function o(e){return new h(e)}function s(e){return e instanceof h}var a=n(8),l=n(3),u=null,c=null,d={},h=null,p={injectGenericComponentClass:function(e){c=e},injectTextComponentClass:function(e){h=e},injectComponentClasses:function(e){a(d,e)},injectAutoWrapper:function(e){u=e}},m={getComponentClassForElement:i,createInternalComponent:r,createInstanceForText:o,isTextComponent:s,injection:p};e.exports=m},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(60),o=n(182),s=n(114),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";var i=n(3),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,o,s,a,l){i(!this.isInTransaction());var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,r,o,s,a,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(d){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(r){}}}},closeAll:function(e){i(this.isInTransaction());for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r,s=t[n],a=this.wrapperInitData[n];try{r=!0,a!==o.OBSERVED_ERROR&&s.close&&s.close.call(this,a),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}},o={Mixin:r,OBSERVED_ERROR:{}};e.exports=o},function(e,t,n){"use strict";var i={};e.exports=i},function(e,t){"use strict";function n(e){return r[e]}function i(e){return(""+e).replace(o,n)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;e.exports=i},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(257),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){e.exports=!n(84)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(85),r=n(67),o=n(17)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,t)}},function(e,t,n){var i=n(137),r=n(83);e.exports=function(e){return i(r(e))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n){var i=e(t,n);e.length<2?n(i):s["default"](void 0===i,'You should not "return" in a transition hook with a callback argument; call the callback instead')}t.__esModule=!0;var o=n(33),s=i(o);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e){return c["default"].stringify(e,{arrayFormat:"brackets"})}function s(e){return c["default"].parse(e)}function a(e){return function(){function t(e){return null==e.query&&(e.query=g(e.search.substring(1))),e}function n(e,t){var n=void 0;return t&&""!==(n=_(t))?e+(-1===e.indexOf("?")?"?":"&")+n:e}function i(e){return y.listenBefore(function(n,i){h["default"](e,t(n),i)})}function a(e){return y.listen(function(n){e(t(n))})}function u(e,t,i){return y.pushState(e,n(t,i))}function c(e,t,i){return y.replaceState(e,n(t,i))}function d(e,t){return y.createPath(n(e,t))}function p(e,t){return y.createHref(n(e,t))}function m(){return t(y.createLocation.apply(y,arguments))}var f=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],_=f.stringifyQuery,g=f.parseQueryString,v=r(f,["stringifyQuery","parseQueryString"]),y=e(v);return"function"!=typeof _&&(_=o),"function"!=typeof g&&(g=s),l({},y,{listenBefore:i,listen:a,pushState:u,replaceState:c,createPath:d,createHref:p,createLocation:m})}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=n(351),c=i(u),d=n(89),h=i(d);t["default"]=a,e.exports=t["default"]},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;e.exports=n},function(e,t){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,r=9007199254740991;e.exports=n},function(e,t,n){function i(e){return o(e)&&r(e)&&a.call(e,"callee")&&!l.call(e,"callee")}var r=n(72),o=n(53),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){var i=n(158),r=n(73),o=n(53),s="[object Array]",a=Object.prototype,l=a.toString,u=i(Array,"isArray"),c=u||function(e){return o(e)&&r(e.length)&&l.call(e)==s};e.exports=c},function(e,t,n){var i=n(154),r=n(155),o=n(363),s=o(function(e,t,n){return n?i(e,t,n):r(e,t)});e.exports=s},function(e,t,n){var i=n(158),r=n(72),o=n(54),s=n(372),a=i(Object,"keys"),l=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?s(e):o(e)?a(e):[]}:s;e.exports=l},function(e,t){"use strict";function n(e,t,n){function i(){s=!0,n.apply(this,arguments)}function r(){s||(e>o?t.call(this,o++,r,i):i.apply(this,arguments))}var o=0,s=!1;r()}function i(e,t,n){function i(e,t,i){s||(t?(s=!0,n(t)):(o[e]=i,s=++a===r,s&&n(null,o)))}var r=e.length,o=[];if(0===r)return n(null,o);var s=!1,a=0;e.forEach(function(e,n){t(e,n,function(e,t){i(n,e,t)})})}t.__esModule=!0,t.loopAsync=n,t.mapAsync=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}function s(e){return function(){function t(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return g["default"](e,t,n,x.location,x.routes,x.params)}function n(e){var t=e.pathname,n=e.query,i=e.state;return E.createLocation(E.createPath(t,n),i,c.REPLACE)}function i(e,t){P&&P.location===e?s(P,t):C["default"](I,e,function(n,i){n?t(n):i?s(a({},i,{location:e}),t):t()})}function s(e,t){var i=m["default"](x,e),r=i.leaveRoutes,o=i.enterRoutes;f.runLeaveHooks(r),f.runEnterHooks(o,e,function(i,r){i?t(i):r?t(null,n(r)):y["default"](e,function(n,i){n?t(n):t(null,null,x=a({},e,{components:i}))})})}function l(e){return e.__id__||(e.__id__=k++)}function d(e){return e.reduce(function(e,t){return e.push.apply(e,T[l(t)]),e},[])}function p(e,t){C["default"](I,e,function(n,i){if(null==i)return void t();P=a({},i,{location:e});for(var r=d(m["default"](x,i).leaveRoutes),o=void 0,s=0,l=r.length;null==o&&l>s;++s)o=r[s](e);t(o)})}function _(){if(x.routes){for(var e=d(x.routes),t=void 0,n=0,i=e.length;"string"!=typeof t&&i>n;++n)t=e[n]();return t}}function v(e,t){var n=l(e),i=T[n];if(null==i){var r=!o(T);i=T[n]=[t],r&&(M=E.listenBefore(p),E.listenBeforeUnload&&(A=E.listenBeforeUnload(_)))}else-1===i.indexOf(t)&&i.push(t);return function(){var e=T[n];if(null!=e){var i=e.filter(function(e){return e!==t});0===i.length?(delete T[n],o(T)||(M&&(M(),M=null),A&&(A(),A=null))):T[n]=i}}}function b(e){return E.listen(function(t){x.location===t?e(null,x):i(t,function(n,i,r){n?e(n):i?E.transitionTo(i):r?e(null,r):u["default"](!1,'Location "%s" did not match any routes',t.pathname+t.search+t.hash)})})}var w=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],I=w.routes,S=r(w,["routes"]),E=h["default"](e)(S),x={},P=void 0,k=1,T={},M=void 0,A=void 0;return a({},E,{isActive:t,match:i,listenBeforeLeavingRoute:v,listen:b})}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n(42),u=i(l),c=n(32),d=n(90),h=i(d),p=n(397),m=i(p),f=n(396),_=n(400),g=i(_),v=n(398),y=i(v),b=n(402),C=i(b);t["default"]=s,e.exports=t["default"]},function(e,t,n){"use strict";function i(){this._callbacks=null,this._contexts=null}var r=n(18),o=n(8),s=n(3);o(i.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){s(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,i=e.length;i>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e){return e===_.topMouseUp||e===_.topTouchEnd||e===_.topTouchCancel}function r(e){return e===_.topMouseMove||e===_.topTouchMove}function o(e){return e===_.topMouseDown||e===_.topTouchStart}function s(e,t){var n=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)t(e,n[r],i[r]);else n&&t(e,n,i)}function a(e,t,n){e.currentTarget=f.Mount.getNode(n);var i=t(e,n);return e.currentTarget=null,i}function l(e,t){s(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function u(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function c(e){var t=u(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function d(e){var t=e._dispatchListeners,n=e._dispatchIDs;m(!Array.isArray(t));var i=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,i}function h(e){return!!e._dispatchListeners}var p=n(14),m=n(3),f={Mount:null,injectMount:function(e){f.Mount=e}},_=p.topLevelTypes,g={isEndish:i,isMoveish:r,isStartish:o,executeDirectDispatch:d,executeDispatch:a,executeDispatchesInOrder:l,executeDispatchesInOrderStopAtTrue:c,hasDispatches:h,injection:f,useTouchEvents:!1};e.exports=g},function(e,t,n){"use strict";function i(e){u(null==e.props.checkedLink||null==e.props.valueLink)}function r(e){i(e),u(null==e.props.value&&null==e.props.onChange)}function o(e){i(e),u(null==e.props.checked&&null==e.props.onChange)}function s(e){this.props.valueLink.requestChange(e.target.value)}function a(e){this.props.checkedLink.requestChange(e.target.checked)}var l=n(179),u=n(3),c={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},d={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||c[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func}},getValue:function(e){return e.props.valueLink?(r(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(o(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(r(e),s):e.props.checkedLink?(o(e),a):e.props.onChange}};e.exports=d},function(e,t,n){"use strict";function i(e){e.remove()}var r=n(44),o=n(111),s=n(112),a=n(3),l={trapBubbledEvent:function(e,t){a(this.isMounted());var n=this.getDOMNode();a(n);var i=r.trapBubbledEvent(e,t,n);this._localEventListeners=o(this._localEventListeners,i)},componentWillUnmount:function(){this._localEventListeners&&s(this._localEventListeners,i)}};e.exports=l},function(e,t,n){"use strict";var i=n(174),r=n(21),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:i.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){r.purgeID(e)}};e.exports=o},function(e,t,n){"use strict";var i=n(3),r=!1,o={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){i(!r),o.unmountIDFromEnvironment=e.unmountIDFromEnvironment,o.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,o.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};e.exports=o},function(e,t,n){"use strict";var i=n(8),r=n(80),o=(n(10),{current:r,withContext:function(e,t){var n,r=o.current;o.current=i({},r,e);try{n=t()}finally{o.current=r}return n}});e.exports=o},function(e,t,n){"use strict";function i(e){e&&(null!=e.dangerouslySetInnerHTML&&(g(null==e.children),g("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML)),g(null==e.style||"object"==typeof e.style))}function r(e,t,n,i){var r=h.findReactContainerForID(e);if(r){var o=r.nodeType===S?r.ownerDocument:r;b(t,o)}i.getPutListenerQueue().enqueuePutListener(e,t,n)}function o(e){T.call(k,e)||(g(P.test(e)),k[e]=!0)}function s(e){o(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var a=n(171),l=n(43),u=n(56),c=n(44),d=n(103),h=n(21),p=n(434),m=n(37),f=n(8),_=n(81),g=n(3),v=(n(117),n(29)),y=(n(10),c.deleteListener),b=c.listenTo,C=c.registrationNameModules,w={string:!0,number:!0},I=v({style:null}),S=1,E=null,x={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},P=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,k={},T={}.hasOwnProperty;s.displayName="ReactDOMComponent",s.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,i(this._currentElement.props);var r=x[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+r},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(null!=o)if(C.hasOwnProperty(i))r(this._rootNodeID,i,o,e);else{i===I&&(o&&(o=this._previousStyleCopy=f({},t.style)),o=a.createMarkupForStyles(o));var s=u.createMarkupForProperty(i,o);s&&(n+=" "+s)}}if(e.renderToStaticMarkup)return n+">";var l=u.createMarkupForID(this._rootNodeID);return n+" "+l+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var i=this._currentElement.props,r=i.dangerouslySetInnerHTML;if(null!=r){if(null!=r.__html)return n+r.__html}else{var o=w[typeof i.children]?i.children:null,s=null!=o?null:i.children;if(null!=o)return n+_(o);if(null!=s){var a=this.mountChildren(s,e,t);return n+a.join("")}}return n},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,r){i(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,r)},_updateDOMProperties:function(e,t){var n,i,o,s=this._currentElement.props;for(n in e)if(!s.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===I){var a=this._previousStyleCopy;for(i in a)a.hasOwnProperty(i)&&(o=o||{},o[i]="");this._previousStyleCopy=null}else C.hasOwnProperty(n)?y(this._rootNodeID,n):(l.isStandardName[n]||l.isCustomAttribute(n))&&E.deletePropertyByID(this._rootNodeID,n);for(n in s){var u=s[n],c=n===I?this._previousStyleCopy:e[n];if(s.hasOwnProperty(n)&&u!==c)if(n===I)if(u?u=this._previousStyleCopy=f({},u):this._previousStyleCopy=null,c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(o=o||{},o[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(o=o||{},o[i]=u[i])}else o=u;else C.hasOwnProperty(n)?r(this._rootNodeID,n,u,t):(l.isStandardName[n]||l.isCustomAttribute(n))&&E.updatePropertyByID(this._rootNodeID,n,u)}o&&E.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(e,t,n){var i=this._currentElement.props,r=w[typeof e.children]?e.children:null,o=w[typeof i.children]?i.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,a=i.dangerouslySetInnerHTML&&i.dangerouslySetInnerHTML.__html,l=null!=r?null:e.children,u=null!=o?null:i.children,c=null!=r||null!=s,d=null!=o||null!=a;null!=l&&null==u?this.updateChildren(null,t,n):c&&!d&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=a?s!==a&&E.updateInnerHTMLByID(this._rootNodeID,a):null!=u&&this.updateChildren(u,t,n)},unmountComponent:function(){this.unmountChildren(),c.deleteAllListeners(this._rootNodeID),d.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},m.measureMethods(s,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),f(s.prototype,s.Mixin,p.Mixin),s.injection={injectIDOperations:function(e){s.BackendIDOperations=E=e}},e.exports=s},function(e,t,n){"use strict";function i(e){c[e]=!0}function r(e){delete c[e]}function o(e){return!!c[e]}var s,a=n(9),l=n(46),u=n(3),c={},d={injectEmptyComponent:function(e){s=a.createFactory(e)}},h=function(){};h.prototype.componentDidMount=function(){var e=l.get(this);e&&i(e._rootNodeID)},h.prototype.componentWillUnmount=function(){var e=l.get(this);e&&r(e._rootNodeID)},h.prototype.render=function(){return u(s),s()};var p=a.createElement(h),m={emptyElement:p,injection:d,isNullComponentID:o};e.exports=m},function(e,t){"use strict";var n={currentlyMountingInstance:null,currentlyUnmountingInstance:null};e.exports=n},function(e,t,n){"use strict";var i=n(61),r=i({prop:null,context:null,childContext:null});e.exports=r},function(e,t,n){"use strict";function i(e){e!==o.currentlyMountingInstance&&u.enqueueUpdate(e)}function r(e,t){d(null==s.current);var n=l.get(e);return n?n===o.currentlyUnmountingInstance?null:n:null}var o=n(108),s=n(20),a=n(9),l=n(46),u=n(16),c=n(8),d=n(3),h=(n(10),{enqueueCallback:function(e,t){d("function"==typeof t);var n=r(e);return n&&n!==o.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void i(n)):null},enqueueCallbackInternal:function(e,t){d("function"==typeof t),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=r(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t){var n=r(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,i(n))},enqueueSetState:function(e,t){var n=r(e,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(t),i(n)}},enqueueSetProps:function(e,t){var n=r(e,"setProps");if(n){d(n._isTopLevel);var o=n._pendingElement||n._currentElement,s=c({},o.props,t);n._pendingElement=a.cloneAndReplaceProps(o,s),i(n)}},enqueueReplaceProps:function(e,t){var n=r(e,"replaceProps");if(n){d(n._isTopLevel);var o=n._pendingElement||n._currentElement;n._pendingElement=a.cloneAndReplaceProps(o,t),i(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,i(e)}});e.exports=h},function(e,t,n){"use strict";function i(e,t){if(r(null!=t),null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n&&i?(e.push.apply(e,t),e):n?(e.push(t),e):i?[e].concat(t):[e,t]}var r=n(3);e.exports=i},function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=n},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=r[e];return i?!!n[i]:!1}function i(e){return n}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=i},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";function i(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function r(e,t){var n;if((null===e||e===!1)&&(e=s.emptyElement),"object"==typeof e){var r=e;n=t===r.type&&"string"==typeof r.type?a.createInternalComponent(r):i(r.type)?new r.type(r):new c}else"string"==typeof e||"number"==typeof e?n=a.createInstanceForText(e):u(!1);return n.construct(e),n._mountIndex=0,n._mountImage=null,n}var o=n(417),s=n(107),a=n(76),l=n(8),u=n(3),c=(n(10),function(){});l(c.prototype,o.Mixin,{_instantiateReactComponent:r}),e.exports=r},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function i(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var s=document.createElement("div");s.setAttribute(n,"return;"),i="function"==typeof s[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,o=n(11);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=i},function(e,t,n){"use strict";var i=n(11),r=/^[ \r\n\t\f]/,o=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,s=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(s=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),i.canUseDOM){var a=document.createElement("div");a.innerHTML=" ",""===a.innerHTML&&(s=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),r.test(t)||"<"===t[0]&&o.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}e.exports=s},function(e,t,n){"use strict";function i(e,t){if(null!=e&&null!=t){var n=typeof e,i=typeof t;if("string"===n||"number"===n)return"string"===i||"number"===i;if("object"===i&&e.type===t.type&&e.key===t.key){var r=e._owner===t._owner;return r}}return!1}n(10);e.exports=i},function(e,t,n){var i,r,o;(function(s){/*! Copyright (c) Microsoft Corporation.  All Rights Reserved. Licensed under the MIT License. See License.txt in the project root for license information. */
!function(){var a="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof s?s:{};!function(s){r=[n(484)],i=s,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(function(t){var n=t.Utilities._require,i=t.Utilities._define;i("WinJS/VirtualizedDataSource/_VirtualizedDataSourceImpl",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Scheduler","../_Signal","../Utilities/_UI"],function(e,t,n,i,r,o,s,a,l,u,c,d,h){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{VirtualizedDataSource:n.Namespace._lazy(function(){function e(e,n){function o(e){var t="WinJS.UI.VirtualizedDataSource:"+_i+":"+e+",StartTM";l(t),s.log&&s.log(t,"winjs vds","perf")}function b(e){var t="WinJS.UI.VirtualizedDataSource:"+_i+":"+e+",StopTM";l(t),s.log&&s.log(t,"winjs vds","perf")}function C(e){return"number"==typeof e&&e>=0}function w(e){return C(e)&&e===Math.floor(e)}function I(e){if(null===e)e=void 0;else if(void 0!==e&&!w(e))throw new r("WinJS.UI.ListDataSource.InvalidIndexReturned",v.invalidIndexReturned);return e}function S(e){if(null===e)e=void 0;else if(void 0!==e&&!w(e)&&e!==f.unknown)throw new r("WinJS.UI.ListDataSource.InvalidCountReturned",v.invalidCountReturned);return e}function E(){var e=(mn++).toString(),t={handle:e,item:null,itemNew:null,fetchListeners:null,cursorCount:0,bindingMap:null};return Hn[e]=t,t}function x(){return E()}function P(e,t){e.prev=t.prev,e.next=t,e.prev.next=e,t.prev=e}function k(e){e.lastInSequence&&(delete e.lastInSequence,e.prev.lastInSequence=!0),e.firstInSequence&&(delete e.firstInSequence,e.next.firstInSequence=!0),e.prev.next=e.next,e.next.prev=e.prev}function T(e){for(;!e.firstInSequence;)e=e.prev;return e}function M(e){for(;!e.lastInSequence;)e=e.next;return e}function A(e,t,n){return t.prev.next=n.next,n.next.prev=t.prev,t.prev=e.prev,n.next=e,t.prev.next=t,e.prev=n,!0}function O(e,t,n){return t.prev.next=n.next,n.next.prev=t.prev,t.prev=e,n.next=e.next,e.next=t,n.next.prev=n,!0}function D(e){delete e.lastInSequence,delete e.next.firstInSequence}function L(e){var t=e.next;e.lastInSequence=!0,t.firstInSequence=!0,t===Fn&&pe(Fn,void 0)}function B(e,t,n,i){P(e,t);var r=e.prev;r.lastInSequence&&(n?delete r.lastInSequence:e.firstInSequence=!0,i?delete t.firstInSequence:e.lastInSequence=!0)}function R(e,t){e.key=t,Wn[e.key]=e}function N(e,t,n){+t===t&&(e.index=t,n[t]=e,Pn||(e.firstInSequence&&e.prev&&e.prev.index===t-1&&D(e.prev),e.lastInSequence&&e.next&&e.next.index===t+1&&D(e)))}function F(e,t){var n=t===Un?x():E();return P(n,e),n}function z(e,t,n){var i=F(e,n);return i.firstInSequence=!0,i.lastInSequence=!0,N(i,t,n),i}function H(e,t){return z(e,t,Un)}function W(e,t){var n=F(e,t);return delete e.firstInSequence,n.prev.index===n.index-1?delete n.prev.lastInSequence:n.firstInSequence=!0,N(n,e.index-1,t),n}function U(e,t){var n=F(e.next,t);return delete e.lastInSequence,n.next.index===n.index+1?delete n.next.firstInSequence:n.lastInSequence=!0,N(n,e.index+1,t),n}function j(e,t,n,i){B(e,t,n,i),Wn[e.key]=e,void 0!==e.index&&(Un[e.index]=e)}function V(e){k(e),e.key&&delete Wn[e.key],void 0!==e.index&&Un[e.index]===e&&delete Un[e.index];var t=e.bindingMap;for(var n in t){var i=t[n].handle;i&&Hn[i]===e&&delete Hn[i]}Hn[e.handle]===e&&delete Hn[e.handle]}function q(e){return!Hn[e.handle]}function J(e,t,n,i,r){var o=r?null:t[e-1];if(o&&(o.next!==i||i.firstInSequence))o=o.next;else if(o=t[e+1],!o){o=n.next;for(var s;;){if(o.firstInSequence&&(s=o),!(e>=o.index)||o===i)break;o=o.next}o!==i||i.firstInSequence||(o=s&&void 0===s.index?s:void 0)}return o}function K(e){return!e.item&&!e.itemNew&&e!==Fn}function G(e,t){Object.defineProperty(e,"handle",{value:t,writable:!1,enumerable:!1,configurable:!0})}function Y(e,t,n){G(e,n),Object.defineProperty(e,"index",{get:function(){for(;t.slotMergedWith;)t=t.slotMergedWith;return t.index},enumerable:!1,configurable:!0})}function X(e){if(void 0===e)return e;var t=JSON.stringify(e);if(void 0===t)throw new r("WinJS.UI.ListDataSource.ObjectIsNotValidJson",v.objectIsNotValidJson);return t}function Z(t){return e.itemSignature?e.itemSignature(t.data):X(t.data)}function Q(t){var n=t.itemNew;t.itemNew=null,n&&(n=Object.create(n),Y(n,t,t.handle),e.compareByIdentity||(t.signature=Z(n))),t.item=n,delete t.indexRequested,delete t.keyRequested}function $(e){return e.bindingMap||e.cursorCount>0}function ee(e){return $(e)||e.fetchListeners||e.directFetchListeners}function te(e){return ee(e)||!e.firstInSequence&&$(e.prev)||!e.lastInSequence&&$(e.next)||!ui&&(!e.firstInSequence&&e.prev!==Nn&&!(e.prev.item||e.prev.itemNew))|(!e.lastInSequence&&e.next!==Fn&&!(e.next.item||e.next.itemNew))}function ne(e){L(e),V(e)}function ie(){if(!wn){(!Vn||q(Vn))&&(Vn=Fn.prev);for(var e=Vn.prev,t=Vn.next,n=0,i=function(e){e===Fn||te(e)||(ln>=n?n++:ne(e))};e||t;){if(e){var r=e;e=r.prev,r!==Nn&&i(r)}if(t){var o=t;t=o.next,o!==zn&&i(o)}}jn=0}}function re(e){ee(e)||(jn++,wn||Kn||(Vn=e,jn>ln&&!qn&&(qn=!0,c.schedule(function(){qn=!1,ie()},c.Priority.idle,null,"WinJS.UI.VirtualizedDataSource.releaseSlotIfUnrequested"))))}function oe(e){for(var t in hn)e(hn[t])}function se(e,t){for(var n in e.bindingMap)t(e.bindingMap[n].bindingRecord,n)}function ae(e){return e.notificationsSent||(e.notificationsSent=!0,e.notificationHandler.beginNotifications&&e.notificationHandler.beginNotifications()),e.notificationHandler}function le(){yn||En||oe(function(e){e.notificationsSent&&(e.notificationsSent=!1,e.notificationHandler.endNotifications&&e.notificationHandler.endNotifications())})}function ue(e,t){var n=e.bindingMap;if(n){var i=n[t];if(i){var r=i.handle;if(r)return r}}return e.handle}function ce(e,t){return e&&e.handle!==t&&(e=Object.create(e),G(e,t)),e}function de(e){var t=Rn;Rn=e,oe(function(e){e.notificationHandler&&e.notificationHandler.countChanged&&ae(e).countChanged(Rn,t)})}function he(e,t){se(e,function(n,i){n.notificationHandler.indexChanged&&ae(n).indexChanged(ue(e,i),e.index,t)})}function pe(e,t){var n=e.index;if(void 0!==n&&Un[n]===e&&delete Un[n],+t===t)N(e,t,Un);else{if(+n!==n)return;delete e.index}he(e,n)}function me(e,t,n,i,r){var o={};if((i||!t.lastInSequence)&&(r||!n.firstInSequence))if(t===Nn)if(n===Fn)for(var s in hn)o[s]=hn[s];else for(var s in n.bindingMap)o[s]=hn[s];else if(n===Fn||n.bindingMap)for(var s in t.bindingMap)(n===Fn||n.bindingMap[s])&&(o[s]=hn[s]);for(var s in e.bindingMap)o[s]=hn[s];return o}function fe(e){var t,n=e.prev,i=e.next,r=me(e,n,i);for(t in r){var o=r[t];o.notificationHandler&&ae(o).inserted(o.itemPromiseFromKnownSlot(e),n.lastInSequence||n===Nn?null:ue(n,t),i.firstInSequence||i===Fn?null:ue(i,t))}}function _e(e){var t=e.item;Q(e),se(e,function(n,i){var r=ue(e,i);ae(n).changed(ce(e.item,r),ce(t,r))})}function ge(e,t,n,i,r){var o,s=t.prev;if(t===e){if(!e.firstInSequence||!n)return;t=e.next}else if(s===e){if(!e.lastInSequence||!i)return;s=e.prev}if(!r){var a=me(e,s,t,n,i);for(o in a){var l=a[o];ae(l).moved(l.itemPromiseFromKnownSlot(e),(s.lastInSequence||s===e.prev)&&!n||s===Nn?null:ue(s,o),(t.firstInSequence||t===e.next)&&!i||t===Fn?null:ue(t,o))}oe(function(t){t.adjustCurrentSlot(e)})}k(e),B(e,t,n,i)}function ve(e,t){Pe(e,!0),se(e,function(n,i){ae(n).removed(ue(e,i),t)}),oe(function(t){t.adjustCurrentSlot(e)}),V(e)}function ye(e){for(;!e.firstInSequence;)e=e.prev;var t;do{t=e.lastInSequence;var n=e.next;ve(e,!0),e=n}while(!t)}function be(e){var t;if(!e)return t;for(var n=0;!e.firstInSequence;)n++,e=e.prev;return"number"==typeof e.indexNew?e.indexNew+n:"number"==typeof e.index?e.index+n:t}function Ce(e,t){for(e=e.next;e;e=e.next)if(e.firstInSequence){var n=void 0!==e.indexNew?e.indexNew:e.index;void 0!==n&&(e.indexNew=n+t)}xn+=t,Pn=!0,Kn?wt():Tn++}function we(e,t){if(e.firstInSequence){var n;if(0>t)n=e.indexNew,void 0!==n?delete e.indexNew:n=e.index,e.lastInSequence||(e=e.next,void 0!==n&&(e.indexNew=n));else if(!e.lastInSequence){var i=e.next;n=i.indexNew,void 0!==n?delete i.indexNew:n=i.index,void 0!==n&&(e.indexNew=n)}}Ce(e,t)}function Ie(e,t){for(var n=Nn;n!==Fn;n=n.next){var i=n.indexNew;if(void 0!==i&&i>=e){Ce(n,t);break}}}function Se(){var e,t,n;for(e=Nn;;e=e.next){if(e.firstInSequence){if(t=e,void 0!==e.indexNew){if(n=e.indexNew,delete e.indexNew,isNaN(n))break}else n=e.index;e!==Nn&&e.prev.index===n-1&&D(e.prev)}if(e.lastInSequence)for(var i=n,r=t;r!==e.next;r=r.next)i!==r.index&&pe(r,i),+i===i&&i++;if(e===Fn)break}for(;e!==zn;e=e.next)void 0!==e.index&&e!==Fn&&pe(e,void 0);Pn=!1,xn&&+Rn===Rn&&(_n?_n.reset():de(Rn+xn),xn=0)}function Ee(e,t,n,i,r){if(e.item)return new u(function(t){r?r(t,e.item):t(e.item)});var o={listBindingID:i,retained:!1};return e[t]||(e[t]={}),e[t][n]=o,o.promise=new u(function(e,t){o.complete=r?function(t){r(e,t)}:e,o.error=t},function(){for(;e.slotMergedWith;)e=e.slotMergedWith;var i=e[t];if(i){if(delete i[n],Object.keys(i).length>0)return;delete e[t]}re(e)}),o.promise}function xe(e,t){for(var n in t)t[n].complete(e)}function Pe(e,t){var n=e.fetchListeners,i=e.directFetchListeners;if(n||i){Q(e);var r=e.item,o=function(e){t?xe(r,e):Dn.push(function(){xe(r,e)})};i&&(e.directFetchListeners=null,o(i)),n&&(e.fetchListeners=null,o(n)),re(e)}}function ke(){var e=Dn;Dn=[];for(var t=0,n=e.length;n>t;t++)e[t]()}function Te(e,t){var n=e.directFetchListeners;if(n){e.directFetchListeners=null;for(var i in n)n[i].error(t);re(e)}}function Me(e){return e.firstInSequence&&W(e,Un),e.lastInSequence&&U(e,Un),e.itemNew&&Q(e),et(),e}function Ae(e){if(!e.firstInSequence){var t=e.prev;return t===Nn?null:Me(t)}return Me(W(e,Un))}function Oe(e){if(!e.lastInSequence){var t=e.next;return t===Fn?null:Me(t)}return Me(U(e,Un))}function De(e){return e?Ee(e,"directFetchListeners",(fn++).toString()):u.wrap(null)}function Le(e){if("string"!=typeof e||!e)throw new r("WinJS.UI.ListDataSource.KeyIsInvalid",v.keyIsInvalid)}function Be(e){var t=H(zn);return R(t,e),t.keyRequested=!0,t}function Re(e,t){Le(e);var n=Wn[e];return n||(n=Be(e),n.hints=t),Me(n)}function Ne(e){if("number"!=typeof e||0>e)throw new r("WinJS.UI.ListDataSource.IndexIsInvalid",v.indexIsInvalid);if(Fn.index<=e)return null;var t=Un[e];if(!t){var n=J(e,Un,Nn,Fn);if(!n)return null;n===Fn&&e>=Fn&&pe(Fn,void 0),t=n.prev.index===e-1?U(n.prev,Un):n.index===e+1?W(n,Un):H(n,e)}return t.item||(t.indexRequested=!0),Me(t)}function Fe(e){var t=H(zn);return t.description=e,Me(t)}function ze(e){if(cn=e,un!==cn){var n=function(){dn=!1,un!==cn&&(un=cn,gi.dispatchEvent(y,un))};cn===m.failure?n():dn||(dn=!0,t.setTimeout(n,40))}}function He(e){var t=e.fetchID;return t&&On[t]}function We(e,t){e.fetchID=t}function Ue(){var e=An;return An++,On[e]=!0,e}function je(e,t,n){var i=Ue();We(e,i);for(var r=e;!r.firstInSequence&&t>0;)r=r.prev,t--,We(r,i);for(var o=e;!o.lastInSequence&&n>0;)o=o.next,n--,We(o,i);return i}function Ve(e){var t=e.items,n=e.offset,i=e.totalCount,r=e.absoluteIndex,o=e.atStart,s=e.atEnd;if(C(r)){if(C(i)){var a=t.length;r-n+a===i&&(s=!0)}n===r&&(o=!0)}o&&(t.unshift(Ln),e.offset++),s&&t.push(Bn)}function qe(e,t,n){return delete On[n],t!==Tn||q(e)?(et(),!1):!0}function Je(e,t,n,i){var s=Tn;n.then(function(n){if(!n.items||!n.items.length)return u.wrapError(new r(_.doesNotExist));var a="itemsFetched id="+t+" count="+n.items.length;o(a),qe(e,s,t)&&(+i===i&&(n.absoluteIndex=i),Ve(n),_t(e,n.items,n.offset,n.totalCount,n.absoluteIndex)),b(a)}).then(null,function(n){qe(e,s,t)&&gt(e,n)})}function Ke(e,t,n,i){var s=Tn;i.then(function(i){if(!i.items||!i.items.length)return u.wrapError(new r(_.doesNotExist));var a="itemsFetched id="+n+" count="+i.items.length;o(a),qe(t,s,n)&&(i.absoluteIndex=e,Ve(i),vt(e,t,i.items,i.offset,i.totalCount,i.absoluteIndex)),b(a)}).then(null,function(){qe(t,s,n)&&yt(e,t,s)})}function Ge(e,t){var n=je(e,0,t-1);ci?Je(e,n,ci(n,t),0):Je(e,n,ui(n,0,0,t-1),0)}function Ye(e,t){var n=je(e,t-1,0);Je(e,n,di(n,t))}function Xe(e,t,n){var i=je(e,t,n);Je(e,i,li(i,e.key,t,n,e.hints))}function Ze(e,t,n){var i=e.index;if(t>i&&(t=i),ui){var r=je(e,t,n);Je(e,r,ui(r,i,t,n),i)}else if(e.key)Xe(e,t,n);else{var o,s,a=Nn,l=i+1;for(o=e.prev;o!==Nn;o=o.prev)if(void 0!==o.index&&o.key){s=i-o.index,l>s&&(l=s,a=o);break}for(o=e.next;o!==Fn;o=o.next)if(void 0!==o.index&&o.key){s=o.index-i,l>s&&(l=s,a=o);break}if(a===Nn){var r=je(e,0,i+1);Ke(0,e,r,ci(r,i+1))}else{var u=Math.max(a.index-i,0),c=Math.max(i-a.index,0),r=je(a,u,c);Ke(a.index,e,r,li(r,a.key,u,c,e.hints))}}}function Qe(e,t,n){var i=je(e,t,n);Je(e,i,hi(i,e.description,t,n))}function $e(){if(!Kn){for(var e,t,n,i,r,o,s,a,l=!1,u=!1,c=Nn.next;c!==zn;){var d=c.next;if(c!==Fn&&K(c)&&(u=!0,e?t++:(e=c,t=1),He(c)&&(l=!0),c.keyRequested&&!n&&(n=c,i=t-1),void 0===c.description||r||(r=c,o=t-1),c.indexRequested&&!s&&(s=c,a=t-1),c.lastInSequence||d===zn||!K(d))){if(l)l=!1;else{if(gn=!1,!e.firstInSequence&&e.prev.key&&li?Xe(e.prev,0,t):!c.lastInSequence&&d.key&&li?Xe(d,t,0):e.prev!==Nn||e.firstInSequence||!ci&&!ui?d===Fn&&!c.lastInSequence&&di?Ye(c,t):n?Xe(n,i,t-1-i):r?Qe(r,o,t-1-o):s?Ze(s,a,t-1-a):"number"==typeof e.index?Ze(e,t-1,0):ye(e):Ge(e,t),gn)return void et();if(Kn)return}e=s=n=null}c=d}ze(u?m.waiting:m.ready)}}function et(){Mn||(Mn=!0,c.schedule(function(){Mn=!1,$e(),le()},c.Priority.max,null,"WinJS.UI.ListDataSource._fetch"))}function tt(t){var n=t.itemNew;if(!n)return!1;var i=t.item;for(var r in i)switch(r){case"data":break;default:if(i[r]!==n[r])return!0}return e.compareByIdentity?i.data!==n.data:t.signature!==Z(n)}function nt(e){ee(e)?tt(e)?_e(e):e.itemNew=null:e.item=null}function it(e){e.item?nt(e):Pe(e)}function rt(e,t){e.key||R(e,t.key),e.itemNew=t,it(e)}function ot(e,t,n){var i=t.bindingMap;if(i)for(var r in n)if(i[r]){var o=t.fetchListeners;for(var s in o){var a=o[s];a.listBindingID===r&&a.retained&&(delete o[s],a.complete(null))}var l=i[r].bindingRecord;ae(l).removed(ue(t,r),!0,ue(e,r)),t.bindingMap&&delete t.bindingMap[r]}}function st(e,t){if(e.index!==t.index){var n=t.index;t.index=e.index,he(t,n)}t.slotMergedWith=e;var i=t.bindingMap;for(var r in i){e.bindingMap||(e.bindingMap={});var o=i[r];o.handle||(o.handle=t.handle),Hn[o.handle]=e,e.bindingMap[r]=o}oe(function(n){n.adjustCurrentSlot(t,e)});var s=t.itemNew||t.item;if(s&&(s=Object.create(s),Y(s,e,e.handle),rt(e,s)),e.item)t.directFetchListeners&&Dn.push(function(){xe(e.item,t.directFetchListeners)}),t.fetchListeners&&Dn.push(function(){xe(e.item,t.fetchListeners)});else{var a;for(a in t.directFetchListeners)e.directFetchListeners||(e.directFetchListeners={}),e.directFetchListeners[a]=t.directFetchListeners[a];for(a in t.fetchListeners)e.fetchListeners||(e.fetchListeners={}),e.fetchListeners[a]=t.fetchListeners[a]}e.itemNew&&Pe(e),t.handle=(mn++).toString(),L(t),V(t)}function at(e,t,n){t&&t.key&&(n||(n=t.itemNew||t.item),delete t.key,delete Wn[n.key],t.itemNew=null,t.item=null),n&&rt(e,n),t&&st(e,t)}function lt(e){if("object"!=typeof e)throw new r("WinJS.UI.ListDataSource.InvalidItemReturned",v.invalidItemReturned);if(e===Ln)return Nn;if(e===Bn)return Fn;if(e.key)return i.validation&&Le(e.key),Wn[e.key];throw new r("WinJS.UI.ListDataSource.InvalidKeyReturned",v.invalidKeyReturned)}function ut(e,t){var n=lt(t);n===e&&(n=null),n&&ot(e,n,e.bindingMap),at(e,n,t)}function ct(e,t,n,i){if(t&&e.key&&e.key!==t.key)return wt(),!1;var r=Un[n];if(r)if(r===e)r=null;else{if(r.key&&(e.key||t&&r.key!==t.key))return wt(),!1;if(!e.key&&r.bindingMap)return!1}var o;if(t)if(o=Wn[t.key],o===e)o=null;else if(o&&o.bindingMap)return!1;return r?(ot(e,r,e.bindingMap),delete Un[n],pe(e,n),e.prev.index===n-1&&D(e.prev),e.next.index===n+1&&D(e),i.slotNext=r.slotNext,t||(t=r.itemNew||r.item,t&&(o=Wn[t.key]))):pe(e,n),o&&r!==o&&ot(e,o,e.bindingMap),at(e,o,t),r&&r!==o&&st(e,r),!0}function dt(e,t,n){if(t.key&&e.key&&t.key!==e.key)return wt(),!1;for(var i in e.bindingMap)n[i]=!0;return ot(e,t,n),at(e,t),!0}function ht(e,t){for(var n={};e;){var i=e.firstInSequence?null:e.prev;if(t.firstInSequence||t.prev!==Nn){if(t=t.firstInSequence?W(t,Un):t.prev,!dt(t,e,n))return}else ve(e,!0);e=i}}function pt(e,t){for(var n={};e;){var i=e.lastInSequence?null:e.next;if(t.lastInSequence||t.next!==Fn){if(t=t.lastInSequence?U(t,Un):t.next,!dt(t,e,n))return}else ve(e,!0);e=i}}function mt(e){for(var t=0;t<e.length;t++){var n=e[t];ht(n.slotBeforeSequence,n.slotFirstInSequence),pt(n.slotAfterSequence,n.slotLastInSequence)}}function ft(e,t){function n(t){for(var n=Fn.prev;!(n.index<e)&&n!==t;){var r=n.prev;void 0!==n.index&&ve(n,!0),n=r}i=0}for(var i=0,r=Fn.prev;!(r.index<e)||i>0;){var o=r.prev;if(r===Nn){n(Nn);break}if(r.key){if(r.index>=e)return wt(),!1;if(!(r.index>=t))return li?Xe(r,0,i):Ze(r,0,i),!1;n(r)}else r.indexRequested||r.firstInSequence?n(o):i++;r=o}return!0}function _t(e,t,n,i,r){var s="WinJS.UI.ListDataSource.processResults";return o(s),r=I(r),i=S(i),wn?void b(s):(Pn&&Se(),!C(i)&&i!==f.unknown||i===Rn||Fn.firstInSequence?(gn=!0,function(){var o,s,a,l,u=t.length;if("number"!=typeof r)for(o=0;u>o;o++)if(a=lt(t[o]),a&&void 0!==a.index){r=a.index+n-o;break}"number"==typeof r&&t[u-1]===Bn?i=r-n+u-1:!C(i)||void 0!==r&&null!==r||(r=i-(u-1)+n),C(i)&&!ft(i,r-n)&&(i=void 0);var c=new Array(u);for(o=0;u>o;o++){var d=null;if(a=lt(t[o])){if(o>0&&!a.firstInSequence&&a.prev.key&&a.prev.key!==t[o-1].key||"number"==typeof r&&void 0!==a.index&&a.index!==r-n+o)return void wt();(a===Nn||a===Fn||a.bindingMap)&&(d=a)}if("number"==typeof r&&(a=Un[r-n+o])){if(a.key&&a.key!==t[o].key)return void wt();!d&&a.bindingMap&&(d=a)}if(o===n){if(e.key&&e.key!==t[o].key||"number"==typeof e.index&&"number"==typeof r&&e.index!==r)return void wt();d||(d=e)}c[o]=d}for(o=0;u>o;o++)a=c[o],a&&void 0!==a.index&&a!==Nn&&a!==Fn&&ut(a,t[o]);var h,p,m=[],f=!0;for(o=0;u>o;o++)if(a=c[o],a&&a!==Fn){var _=o;if(void 0===a.index){var g={};ct(a,t[o],r-n+o,g);var v,y=a,b=a;for(s=o-1;!y.firstInSequence&&(v=t[s],v!==Ln);s--){var w=r-n+s;if(0>w)break;if(!ct(y.prev,v,w,g))break;y=y.prev,s>=0&&(c[s]=y)}for(s=o+1;!b.lastInSequence&&(v=t[s],v!==Bn&&s!==i||b.next===Fn)&&(b.next===Fn||ct(b.next,v,r-n+s,g))&&(b=b.next,u>s&&(c[s]=b),_=s,b!==Fn);s++);if(h=y.firstInSequence?null:y.prev,p=b.lastInSequence?null:b.next,h&&L(h),p&&L(b),"number"==typeof r){if(b===Fn)h&&O(Fn,T(h),h);else{var I=g.slotNext;I||(I=J(b.index,Un,Nn,Fn,!0)),A(I,y,b)}y.prev.index===y.index-1&&D(y.prev),b.next.index===b.index+1&&D(b)}else f||(l=c[o-1],l&&(y.prev!==l&&(b===Fn?(h&&O(Fn,T(h),h),A(y,T(l),l)):O(l,y,b)),D(l)));if(f=!1,Jn)return;m.push({slotBeforeSequence:h,slotFirstInSequence:y,slotLastInSequence:b,slotAfterSequence:p})}o!==n||a===e||q(e)||(h=e.firstInSequence?null:e.prev,p=e.lastInSequence?null:e.next,ot(a,e,a.bindingMap),st(a,e),m.push({slotBeforeSequence:h,slotFirstInSequence:a,slotLastInSequence:a,slotAfterSequence:p})),o=_}for(C(i)&&Fn.index!==i&&pe(Fn,i),mt(m),o=0;u>o;o++)if(a=c[o]){for(s=o-1;s>=0;s--){var S=c[s+1];ut(c[s]=S.firstInSequence?W(c[s+1],Un):S.prev,t[s])}for(s=o+1;u>s;s++)l=c[s-1],a=c[s],a?a.firstInSequence&&(a.prev!==l&&O(l,a,M(a)),D(l)):ut(c[s]=l.lastInSequence?U(l,Un):l.next,t[s]);break}delete e.description}(),Jn||(void 0!==i&&i!==Rn&&de(i),et()),le(),ke(),void b(s)):(wt(),void b(s)))}function gt(e,t){switch(t.name){case _.noResponse:ze(m.failure),Te(e,t);break;case _.doesNotExist:e.indexRequested?ft(e.index):(e.keyRequested||e.description)&&ye(e),le(),wt()}}function vt(e,t,n,i,o,s){s=I(s),o=S(o);var a=e-i,l=n.length;if(t.index>=a&&t.index<a+l)_t(t,n,t.index-a,o,t.index);else if(i===l-1&&e<t.index||C(o)&&o<=t.index)gt(t,new r(_.doesNotExist));else if(t.index<a){var u=je(t,0,a-t.index);Ke(a,t,u,li(u,n[0].key,a-t.index,0))}else{var c=a+l-1,u=je(t,t.index-c,0);Ke(c,t,u,li(u,n[l-1].key,0,t.index-c))}}function yt(e,t,n){switch(n.name){case _.doesNotExist:e===Nn.index?(ft(0),gt(t,n)):wt();break;default:gt(t,n)}}function bt(){for(var e=0;e<mi.length&&"beginRefresh"!==mi[e].kind;e++);for(var t=e;t<mi.length&&"beginRefresh"!==mi[t].kind;t++);if(t>e&&t+(t-e)<mi.length){for(var n=!0,i=t-e,r=0;i>r;r++)if(mi[e+r].kind!==mi[t+r].kind){n=!1;break}if(n&&s.log){s.log(v.refreshCycleIdentified,"winjs vds","error");for(var r=e;t>r;r++)s.log(""+(r-e)+": "+JSON.stringify(mi[r]),"winjs vds","error")}return n}}function Ct(){return++pi>a&&bt()?void ze(m.failure):(mi[++fi%mi.length]={kind:"beginRefresh"},Qn={firstInSequence:!0,lastInSequence:!0,index:-1},$n={firstInSequence:!0,lastInSequence:!0},Qn.next=$n,$n.prev=Qn,Xn=!1,Zn=void 0,ei={},ti={},ni={},ni[-1]=Qn,void(ii={}))}function wt(){if(!Jn){if(Jn=!0,ze(m.waiting),Sn)return Sn=!1,void Zt();if(!wn){var e=++Tn;Kn=!0,Yn=0,c.schedule(function(){if(Tn===e){Jn=!1,Ct();for(var t=Nn.next;t!==zn;){var n=t.next;te(t)||t===Fn||ne(t),t=n}Mt()}},c.Priority.high,null,"WinJS.VirtualizedDataSource.beginRefresh")}}}function It(){return Gn=Gn||new d,wt(),Gn.promise}function St(e,t){return delete On[t],e!==Tn?!1:(Yn--,!0)}function Et(e,t,n,i,s){var a=Tn;Yn++,i.then(function(t){if(!t.items||!t.items.length)return u.wrapError(new r(_.doesNotExist));var i="itemsFetched id="+n+" count="+t.items.length;o(i),St(a,n)&&(Ve(t),Rt(e,t.items,t.offset,t.totalCount,"number"==typeof s?s:t.absoluteIndex)),b(i)}).then(null,function(i){St(a,n)&&Nt(e,t,i)})}function xt(e,t,n,i){if(li)Et(e.key,!1,t,li(t,e.key,n,i,e.hints));else{var r=10,o=e.index;ni[o]&&ni[o].firstInSequence?Et(e.key,!1,t,ui(t,o-1,Math.min(n+r,o)-1,i+1+r),o-1):ni[o]&&ni[o].lastInSequence?Et(e.key,!1,t,ui(t,o+1,Math.min(n+r,o)+1,i-1+r),o+1):Et(e.key,!1,t,ui(t,o,Math.min(n+r,o),i+r),o)}}function Pt(e){ci?Et(null,!0,e,ci(e,1),0):ui&&Et(null,!0,e,ui(e,0,0,0),0)}function kt(e){return On[ei[e]]}function Tt(e,t){for(var n,i,r,o=3,s=Tn,a=0,l=e;l!==zn;l=l.next){if(!n&&l.key&&!ii[l.key]&&!kt(l.key)){var u=ti[l.key];(!u||u.firstInSequence||u.lastInSequence)&&(n=l,i=u,r=Ue())}if(n){var c=kt(l.key);if(ii[l.key]||ti[l.key]||c||(l.key&&(ei[l.key]=r),a++),l.lastInSequence||l.next===Fn||c){if(xt(n,r,!i||i.firstInSequence?o:0,a-1+o),!t)break;n=null,a=0}}else l.key&&K(l)&&!ii[l.key]&&(ti[l.key]||(r=Ue(),Et(l.key,!1,r,li(r,l.key,1,1,l.hints))))}0!==Yn||Xn||Tn!==s||Pt(Ue())}function Mt(){var e=Tn;do ri=!1,oi=!0,Tt(Nn.next,!0),oi=!1;while(0===Yn&&ri&&Tn===e&&Kn);0===Yn&&Tn===e&&Jt()}function At(e){var t=Tn;if(e){var n=Wn[e];n||(n=Nn.next);do si=!1,ai=!0,Tt(n,!1),ai=!1;while(si&&Tn===t&&Kn)}oi?ri=!0:0===Yn&&Tn===t&&Mt()}function Ot(e){if("object"==typeof e&&e){if(e===Ln)return Qn;if(e===Bn)return $n;if(e.key)return ti[e.key];throw new r("WinJS.UI.ListDataSource.InvalidKeyReturned",v.invalidKeyReturned)}throw new r("WinJS.UI.ListDataSource.InvalidItemReturned",v.invalidItemReturned)}function Dt(e,t){for(;void 0===e.index;){if(N(e,t,ni),e.firstInSequence)return!0;e=e.prev,t--}return e.index!==t?(wt(),!1):!0}function Lt(e,t){e.key=t.key,ti[e.key]=e,e.item=t}function Bt(){for(var e=$n;!e.firstInSequence;)if(e=e.prev,e===Qn)return null;return e}function Rt(e,t,n,i,r){r=I(r),i=S(i);var o=!1;Xn=!0;var s=r-n,a=t[0];a.key===e&&(o=!0);var l=Ot(a);if(l){if(+s===s&&!Dt(l,s))return}else{if(ni[s])return void wt();var u;if(void 0!==r&&(u=ni[s-1])){if(!u.lastInSequence)return void wt();l=U(u,ni)}else{var c=+s===s?J(s,ni,Qn,$n):Bt(Qn,$n);if(!c)return void wt();l=z(c,s,ni)}Lt(l,t[0])}for(var d=t.length,h=1;d>h;h++){a=t[h],a.key===e&&(o=!0);var p=Ot(a);if(p){if(void 0!==l.index&&!Dt(p,l.index+1))return;if(p!==l.next){if(!l.lastInSequence||!p.firstInSequence)return void wt();var m=M(p);if(m!==$n)O(l,p,m);else{var _=T(l);if(_===Qn)return void wt();A(p,_,l)}D(l)}else l.lastInSequence&&D(l)}else{if(!l.lastInSequence)return void wt();p=U(l,ni),Lt(p,a)}l=p}if(o||(ii[e]=!0),!C(i)&&!$n.firstInSequence){var g=$n.prev.index;void 0!==g&&(i=g+1)}if(C(i)||i===f.unknown){if(C(Zn)){if(i!==Zn)return void wt()}else Zn=i;C(Zn)&&!ni[Zn]&&N($n,Zn,ni)}ai?si=!0:At(e)}function Nt(e,t,n){switch(n.name){case _.noResponse:ze(m.failure);break;case _.doesNotExist:t?(N($n,0,ni),Zn=0,Jt()):(ii[e]=!0,ai?si=!0:At(e))}}function Ft(e){return e===Qn?Nn:e===$n?Fn:Wn[e.key]}function zt(e){return e===Nn?Qn:e===Fn?$n:ti[e.key]}function Ht(e){D(e),e.next.mergedForRefresh=!0}function Wt(e,t){R(t,e.key),t.itemNew=e.item}function Ut(e,t,n){var i=x();Wt(e,i),B(i,t,n,!n);var r=e.index;return+r!==r&&(r=n?i.prev.index+1:t.next.index-1),N(i,r,Un),i}function jt(e,t,n){e?(ot(e,t,e.bindingMap),at(e,t,n.item)):(Wt(n,t),t.indexRequested&&it(t))}function Vt(e,t,n){return t.key?!1:(e?(n.mergeWithPrev=!t.firstInSequence,n.mergeWithNext=!t.lastInSequence):n.stationary=!0,jt(e,t,n),!0)}function qt(e){var t;if(e.indexRequested)t=e.index;else{var n=zt(e);n&&(t=n.index)}return t}function Jt(){pi=0,mi=new Array(100),fi=-1,Pn=!0,ei={};var e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v=[],y=[];for(m=0,a=Qn;a;a=a.next)a.sequenceNumber=m,a.firstInSequence&&(u=a),a.lastInSequence&&(y[m]={first:u,last:a,matchingItems:0},m++);for(Vn=null,jn=0,n=Nn.next;n!==zn;)a=ti[n.key],r=n.next,n!==Fn&&(te(n)?n.key&&!a?ve(n,!1):0===Zn||n.indexRequested&&n.index>=Zn?ve(n,!0):n.item||n.keyRequested?n.itemNew=a.item:n.key&&(n.keyRequested||(delete Wn[n.key],delete n.key),n.itemNew=null):ne(n)),n=r;for(n=Nn.next;n!==Fn;)r=n.next,n.indexRequested&&(a=ni[n.index],a&&jt(Ft(a),n,a)),n=r;var b,C,w,I,S,E=0,x=[];for(c=0,n=Nn;n!==zn;n=n.next){if(n.firstInSequence)for(u=n,w=null,e=0;m>e;e++)x[e]=0;if(n.indexRequested&&(w=n),a=zt(n),a&&x[a.sequenceNumber]++,n.lastInSequence){for(C=0,e=E;m>e;e++)C<x[e]&&(C=x[e],b=e);d={first:u,last:n,sequenceNew:C>0?y[b]:void 0,matchingItems:C},w&&(d.indexRequested=!0,d.stationarySlot=w),v[c]=d,n===Fn&&(I=c,S=d),c++,void 0!==y[b].first.index&&(E=b)}}v[0].sequenceNew!==y[0]&&(L(Nn),v[0].first=Nn.next,v.unshift({first:Nn,last:Nn,sequenceNew:y[0],matchingItems:1}),I++,c++);var P=!Fn.firstInSequence;for(S.sequenceNew!==y[m-1]&&(L(Fn.prev),S.last=Fn.prev,I++,v.splice(I,0,{first:Fn,last:Fn,sequenceNew:y[m-1],matchingItems:1}),c++,S=v[I]),e=0;c>e;e++)f=v[e].sequenceNew,f&&f.matchingItems<v[e].matchingItems&&(f.matchingItems=v[e].matchingItems,f.sequenceOld=v[e]);for(y[m-1].sequenceOld=S,S.stationarySlot=Fn,y[0].sequenceOld=v[0],v[0].stationarySlot=Nn,e=0;I>=e;e++)d=v[e],d.sequenceNew&&(p=d.sequenceNew.sequenceOld)===h&&h.last!==Fn?(Ht(p.last),p.last=d.last,delete v[e]):h=d;for(h=null,e=I;e>=0;e--)d=v[e],d&&(d.sequenceNew&&(p=d.sequenceNew.sequenceOld)===h&&d.last!==Fn?(Ht(d.last),p.first=d.first,delete v[e]):h=d);P&&delete Fn.mergedForRefresh;var k=[];for(e=I+1;c>e;e++)if(d=v[e],d&&(!d.sequenceNew||d.sequenceNew.sequenceOld!==d)){var T=!0,M=null,B=null,R=0;for(a=zt(d.first),a&&(M=B=a,R=1),n=d.first;n!==d.last;n=n.next){var N=zt(n.next);if(a&&N&&(a.lastInSequence||a.next!==N)){T=!1;break}a&&!M&&(M=B=a),N&&M&&(B=N,R++),a=N}if(T&&M&&void 0!==M.index){var F;M.firstInSequence||(o=Ft(M.prev),o&&(F=o.index));var z;if(B.lastInSequence||(s=Ft(B.next),s&&(z=s.index)),(!s||s.lastInSequence||s.mergedForRefresh)&&(void 0===F||void 0===z||z-F-1>=R)){for(d.locationJustDetermined=!0,a=M;a.locationJustDetermined=!0,a!==B;a=a.next);var u=Ft(M),H=Ft(B);k.push({slotBeforeSequence:u.firstInSequence?null:u.prev,slotFirstInSequence:u,slotLastInSequence:H,slotAfterSequence:H.lastInSequence?null:H.next})}}}for(e=0;c>e;e++)if(d=v[e],d&&!d.indexRequested&&!d.locationJustDetermined&&(!d.sequenceNew||d.sequenceNew.sequenceOld!==d)){d.sequenceNew=null,n=d.first;var W;do{if(W=n===d.last,r=n.next,n!==Nn&&n!==Fn&&n!==zn&&!n.item&&!n.keyRequested)if(ve(n,!0),d.first===n){if(d.last===n){delete v[e];break}d.first=n.next}else d.last===n&&(d.last=n.prev);n=r}while(!W)}for(e=0;m>e;e++){for(f=y[e],a=f.first;!Ft(a)&&!a.lastInSequence;a=a.next);if(a.lastInSequence&&!Ft(a))f.firstInner=f.lastInner=null;else{for(f.firstInner=a,a=f.last;!Ft(a);a=a.prev);f.lastInner=a}}for(e=0;m>e;e++)if(f=y[e],f&&f.firstInner&&(d=f.sequenceOld)){var U=0;for(n=d.first;!0&&(a=zt(n),a&&a.sequenceNumber===f.firstInner.sequenceNumber&&(a.ordinal=U),!n.lastInSequence);n=n.next,U++);var j=[];for(a=f.firstInner;!0;a=a.next){if(U=a.ordinal,void 0!==U){for(var V=0,q=j.length-1;q>=V;){var J=Math.floor(.5*(V+q));j[J].ordinal<U?V=J+1:q=J-1}j[V]=a,V>0&&(a.predecessor=j[V-1])}if(a===f.lastInner)break}var G=[],Y=j.length;for(a=j[Y-1],t=Y;t--;)a.stationary=!0,G[t]=a,a=a.predecessor;d.stationarySlot=Ft(G[0]),a=G[0],n=Ft(a),i=n.prev;for(var X=n.firstInSequence;!a.firstInSequence;)if(a=a.prev,l=Ft(a),!l||a.locationJustDetermined)for(;!X&&i!==Nn&&(n=i,i=n.prev,X=n.firstInSequence,!Vt(l,n,a)););for(t=0;Y-1>t;t++){a=G[t],n=Ft(a);var l,Z=G[t+1],$=null,ee=Ft(Z);for(r=n.next,a=a.next;a!==Z&&!$&&n!==ee;a=a.next)if(l=Ft(a),!l||a.locationJustDetermined)for(;r!==ee;){if(r.mergedForRefresh){$=a.prev;break}if(n=r,r=n.next,Vt(l,n,a))break}if($)for(i=ee.prev,a=Z.prev;a!==$&&ee!==n;a=a.prev)if(l=Ft(a),!l||a.locationJustDetermined)for(;i!==n&&(ee=i,i=ee.prev,!Vt(l,ee,a)););for(;r!==ee;)n=r,r=n.next,n!==Nn&&K(n)&&!n.keyRequested&&ve(n)}for(a=G[Y-1],n=Ft(a),r=n.next,X=n.lastInSequence;!a.lastInSequence;)if(a=a.next,l=Ft(a),!l||a.locationJustDetermined)for(;!X&&r!==Fn&&(n=r,r=n.next,X=n.lastInSequence,!Vt(l,n,a)););}for(e=0;m>e;e++)if(f=y[e],f.firstInner)for(i=null,a=f.firstInner;!0;a=a.next){if(n=Ft(a)){if(!a.stationary){var ie,re=!1,oe=!1;if(i)ie=i.next,re=!0;else{var se;for(se=f.firstInner;!se.stationary&&se!==f.lastInner;se=se.next);if(se.stationary)ie=Ft(se),oe=!0;else if(_=a.index,0===_)ie=Nn.next,re=!0;else if(void 0===_)ie=zn;else{ie=Nn.next;for(var ae=null;;){if(ie.firstInSequence&&(ae=ie),_<ie.index&&ae||ie===Fn)break;ie=ie.next}!ie.firstInSequence&&ae&&(ie=ae)}}n.mergedForRefresh&&(delete n.mergedForRefresh,n.lastInSequence||(n.next.mergedForRefresh=!0)),re=re||a.mergeWithPrev,oe=oe||a.mergeWithNext;var ue=a.locationJustDetermined;ge(n,ie,re,oe,ue),ue&&oe&&(ie.mergedForRefresh=!0)}i=n}if(a===f.lastInner)break}for(e=0;m>e;e++)if(f=y[e],f.firstInner)for(i=null,a=f.firstInner;!0;a=a.next){if(n=Ft(a),!n){var ce;if(i)ce=i.next;else{var he;for(he=f.firstInner;!Ft(he);he=he.next);ce=Ft(he)}n=Ut(a,ce,!!i);var N=zt(ce);ce.mergedForRefresh||N&&N.locationJustDetermined||(Q(n),fe(n))}if(i=n,a===f.lastInner)break}Un=[];var me=-1;for(n=Nn,g=0;n!==zn;g++){var r=n.next;if(n.firstInSequence&&(u=n,g=0),void 0===me){var _e=qt(n);void 0!==_e&&(me=_e-g)}if(void 0!==me&&!n.lastInSequence){var ye=qt(n.next);if(void 0!==ye&&ye!==me+g+1){L(n);for(var be=!0,Ce=n.next,we=!1;!we&&Ce!==Fn;){var Ie=Ce.next;we=Ce.lastInSequence,ge(Ce,Ie,!be,!1),be=!1,Ce=Ie}}}if(n.lastInSequence){_=me;for(var Se=u;Se!==r;){var Ee=Se.next;if(_>=Zn&&Se!==Fn)ve(Se,!0);else{var xe=Un[_];_!==Se.index?(delete Un[_],pe(Se,_)):+_===_&&Un[_]!==Se&&(Un[_]=Se),Se.itemNew&&it(Se),xe&&(Se.key?(ot(Se,xe,Se.bindingMap),st(Se,xe),+_===_&&(Un[_]=Se)):(ot(xe,Se,xe.bindingMap),st(xe,Se),+_===_&&(Un[_]=xe))),+_===_&&_++}Se=Ee}me=void 0}n=r}var Pe,Te=-2;for(n=Nn,g=0;n!==zn;g++){var r=n.next;if(n.firstInSequence&&(u=n,g=0),delete n.mergedForRefresh,n.lastInSequence)if(void 0===u.index){o=u.prev;var Me;o&&(Me=zt(o))&&!Me.lastInSequence&&(a=zt(n))&&a.prev===Me?(O(o,u,n),D(o)):n===Fn||Pe||A(zn,u,n)}else{if(Te<n.index&&!Pe)Te=n.index;else{for(s=Nn.next;s.index<n.index;s=s.next);for(var Ce=u;Ce!==r;){var Ie=Ce.next;a=zt(Ce),ge(Ce,s,s.prev.index===Ce.index-1,s.index===Ce.index+1,a&&a.locationJustDetermined),Ce=Ie}}o=u.prev,o&&o.index===u.index-1&&D(o)}n===Fn&&(Pe=!0),n=r}Pn=!1,mt(k),void 0!==Zn&&Zn!==Rn&&de(Zn),le();var Ae=[];for(e=0;m>e;e++){f=y[e];var Oe=[];n=null,g=0;var De;for(a=f.first;!0&&(a===Qn?Oe.push(Ln):a===$n?Oe.push(Bn):(Oe.push(a.item),n||(n=Ft(a),De=g)),!a.lastInSequence);a=a.next,g++);n&&Ae.push({slot:n,results:Oe,offset:De})}for(Ct(),Kn=!1,ke(),e=0;e<Ae.length;e++){var Le=Ae[e];_t(Le.slot,Le.results,Le.offset,Rn,Le.slot.index)}if(Gn){var Be=Gn;Gn=null,Be.complete()}et()}function Kt(e,t,n,i,r,o,s){var a=Cn.prev,l={prev:a,next:Cn,applyEdit:e,editType:t,complete:n,error:i,keyUpdate:r};a.next=l,Cn.prev=l,wn=!0,(Jn||Kn)&&(Tn++,Kn=!1,Jn=!0),Cn.next===l&&Zt(),l.failed||(o(),l.undo=s),yn||Qt()}function Gt(){bn=!1;var e=Cn.next.next;Cn.next=e,e.prev=Cn}function Yt(){for(;Cn.prev!==Cn;){var e=Cn.prev;e.error&&e.error(new r(g.canceled)),e.undo&&!Jn&&e.undo(),Cn.prev=e.prev}Cn.next=Cn,yn=!1,Qt()}function Xt(t){function n(){Sn||(o?In=!0:Zt())}function i(e){
if(e){var i;if(s&&s.key!==e.key){var r=e.key;if(t.undo){if(i=s.slot){var a=i.key;a&&delete Wn[a],R(i,r),i.itemNew=e,i.item?(_e(i),le()):Pe(i)}}else s.key=r}else t.editType===vi.change&&(i.itemNew=e,o||nt(i))}Gt(),t.complete&&t.complete(e),n()}function r(e){switch(e.Name){case g.noResponse:return ze(m.failure),Sn=!0,void(bn=!1);case g.notPermitted:break;case g.noLongerMeaningful:wt()}t.failed=!0,Gt(),Yt(),t.error&&t.error(e),n()}if(!bn){var o=!0,s=t.keyUpdate;e.beginEdits&&!vn&&(vn=!0,e.beginEdits()),bn=!0,t.applyEdit().then(i,r),o=!1}}function Zt(){for(;Cn.next!==Cn;)if(In=!1,Xt(Cn.next),!In)return;$t()}function Qt(){Se(),le(),ke(),Cn.next===Cn&&$t()}function $t(){wn=!1,e.endEdits&&vn&&!yn&&(vn=!1,e.endEdits()),Jn?(Jn=!1,wt()):et()}function en(e){return Le(e),Wn[e]||Be(e)}function tn(e,t,n,i,r){var o=x();return B(o,n,i,r),e&&R(o,e),o.itemNew=t,we(o,1),yn||En||(o.firstInSequence||"number"!=typeof o.prev.index?o.lastInSequence||"number"!=typeof o.next.index||N(o,o.next.index-1,Un):N(o,o.prev.index+1,Un)),Q(o),fe(o),o}function nn(e,t,n,i,r){var o={key:e};return new u(function(e,s){Kt(r,vi.insert,e,s,o,function(){if(n){var e={key:o.key,data:t};o.slot=tn(o.key,e,n,i,!i)}},function(){var e=o.slot;e&&(we(e,-1),ve(e,!1))})})}function rn(e,t,n,i){return new u(function(r,o){var s,a,l,u;Kt(i,vi.move,r,o,null,function(){a=e.next,l=e.firstInSequence,u=e.lastInSequence;var i=e.prev;s="number"!=typeof e.index&&(l||!i.item)&&(u||!a.item),we(e,-1),ge(e,t,n,!n),we(e,1),s&&(L(i),l||ht(i,e),u||pt(a,e))},function(){s?wt():(we(e,-1),ge(e,a,!l,!u),we(e,1))})})}function on(){function e(){En||(Se(),le(),ke())}this.invalidateAll=function(){return 0===Rn?(this.reload(),u.wrap()):It()},this.reload=function(){_n&&_n.cancel(),Gn&&Gn.cancel();for(var e=Nn.next;e!==zn;e=e.next){var t=e.fetchListeners;for(var n in t)t[n].promise.cancel();var i=e.directFetchListeners;for(var n in i)i[n].promise.cancel()}sn(),oe(function(e){e.notificationHandler&&e.notificationHandler.reload()})},this.beginNotifications=function(){En=!0},this.inserted=function(t,n,i,r){if(wn)wt();else{var o=t.key,s=Wn[n],a=Wn[i],l="string"==typeof n,u="string"==typeof i;if(l?a&&!a.firstInSequence&&(s=a.prev):u&&s&&!s.lastInSequence&&(a=s.next),(l||u)&&!s&&!a&&Nn.next===Fn)return void wt();if(Wn[o])return void wt();if(s&&a&&(s.next!==a||s.lastInSequence||a.firstInSequence))return void wt();if(s&&(s.keyRequested||s.indexRequested)||a&&(a.keyRequested||a.indexRequested))return void wt();if(s||a)tn(o,t,a?a:s.next,!!s,!!a);else if(Nn.next===Fn)tn(o,t,Nn.next,!0,!0);else{if(void 0===r)return void wt();Ie(r,1)}e()}},this.changed=function(t){if(wn)wt();else{var n=t.key,i=Wn[n];i&&(i.keyRequested?wt():(i.itemNew=t,i.item&&(_e(i),e())))}},this.moved=function(t,n,i,r,o){if(wn)wt();else{var s=t.key,a=Wn[s],l=Wn[n],u=Wn[i];a&&a.keyRequested||l&&l.keyRequested||u&&u.keyRequested?wt():a?l&&u&&(l.next!==u||l.lastInSequence||u.firstInSequence)?wt():l||u?(we(a,-1),ge(a,u?u:l.next,!!l,!!u),we(a,1),e()):(we(a,-1),ve(a,!1),void 0!==r&&(o>r&&o--,Ie(o,1)),e()):l||u?(void 0!==r&&(Ie(r,-1),o>r&&o--),this.inserted(t,n,i,o)):void 0!==r&&(Ie(r,-1),o>r&&o--,Ie(o,1),e())}},this.removed=function(t,n){if(wn)wt();else{var i;i="string"==typeof t?Wn[t]:Un[n],i?i.keyRequested?wt():(we(i,-1),ve(i,!1),e()):void 0!==n&&(Ie(n,-1),e())}},this.endNotifications=function(){En=!1,e()}}function sn(){ze(m.ready),_n=null,vn=!1,yn=!1,bn=!1,Cn={},Cn.next=Cn,Cn.prev=Cn,wn=!1,Sn=!1,xn=0,Pn=!1,kn=0,On={},Dn=[],Rn=f.unknown,Nn={firstInSequence:!0,lastInSequence:!0,index:-1},Fn={firstInSequence:!0,lastInSequence:!0},zn={firstInSequence:!0,lastInSequence:!0},Nn.next=Fn,Fn.prev=Nn,Fn.next=zn,zn.prev=Fn,Hn={},Wn={},Un={},Un[-1]=Nn,jn=0,Vn=null,qn=!1,Jn=!1,Kn=!1,Gn=null}var an,ln,un,cn,dn,hn,pn,mn,fn,_n,gn,vn,yn,bn,Cn,wn,In,Sn,En,xn,Pn,kn,Tn,Mn,An,On,Dn,Ln,Bn,Rn,Nn,Fn,zn,Hn,Wn,Un,jn,Vn,qn,Jn,Kn,Gn,Yn,Xn,Zn,Qn,$n,ei,ti,ni,ii,ri,oi,si,ai,li,ui,ci,di,hi,pi=0,mi=new Array(100),fi=-1;e.itemsFromKey&&(li=function(t,n,i,r,s){var a="fetchItemsFromKey id="+t+" key="+n+" countBefore="+i+" countAfter="+r;o(a),mi[++fi%mi.length]={kind:"itemsFromKey",key:n,countBefore:i,countAfter:r};var l=e.itemsFromKey(n,i,r,s);return b(a),l}),e.itemsFromIndex&&(ui=function(t,n,i,r){var s="fetchItemsFromIndex id="+t+" index="+n+" countBefore="+i+" countAfter="+r;o(s),mi[++fi%mi.length]={kind:"itemsFromIndex",index:n,countBefore:i,countAfter:r};var a=e.itemsFromIndex(n,i,r);return b(s),a}),e.itemsFromStart&&(ci=function(t,n){var i="fetchItemsFromStart id="+t+" count="+n;o(i),mi[++fi%mi.length]={kind:"itemsFromStart",count:n};var r=e.itemsFromStart(n);return b(i),r}),e.itemsFromEnd&&(di=function(t,n){var i="fetchItemsFromEnd id="+t+" count="+n;o(i),mi[++fi%mi.length]={kind:"itemsFromEnd",count:n};var r=e.itemsFromEnd(n);return b(i),r}),e.itemsFromDescription&&(hi=function(t,n,i,r){var s="fetchItemsFromDescription id="+t+" desc="+n+" countBefore="+i+" countAfter="+r;o(s),mi[++fi%mi.length]={kind:"itemsFromDescription",description:n,countBefore:i,countAfter:r};var a=e.itemsFromDescription(n,i,r);return b(s),a});var _i=++p,gi=this,vi={insert:"insert",change:"change",move:"move",remove:"remove"};if(!e)throw new r("WinJS.UI.ListDataSource.ListDataAdapterIsInvalid",v.listDataAdapterIsInvalid);ln=e.compareByIdentity?0:200,n&&"number"==typeof n.cacheSize&&(ln=n.cacheSize),e.setNotificationHandler&&(an=new on,e.setNotificationHandler(an)),un=m.ready,dn=!1,hn={},pn=0,mn=1,fn=0,Tn=0,Mn=!1,An=1,Ln={},Bn={},sn(),this.createListBinding=function(e){function t(e){e&&e.cursorCount++}function n(e){e&&0===--e.cursorCount&&re(e)}function i(e){t(e),n(h),h=e}function r(e,t){e===h&&(t||(t=!h||h.lastInSequence||h.next===Fn?null:h.next),i(t))}function o(e){var t=e.bindingMap,n=t[d].handle;delete e.bindingMap[d];var i=!0,r=!0;for(var o in t)if(i=!1,n&&t[o].handle===n){r=!1;break}n&&r&&delete Hn[n],i&&(e.bindingMap=null,re(e))}function s(e,t){e.bindingMap||(e.bindingMap={});var n=e.bindingMap[d];if(n?n.count++:e.bindingMap[d]={bindingRecord:hn[d],count:1},e.fetchListeners){var i=e.fetchListeners[t];i&&(i.retained=!0)}}function a(e){var t=Hn[e];if(t){var n=t.bindingMap[d];if(0===--n.count){var i=t.fetchListeners;for(var r in i){var s=i[r];s.listBindingID===d&&(s.retained=!1)}o(t)}}}function l(t){var n=ue(t,d),i=(fn++).toString(),r=Ee(t,"fetchListeners",i,d,function(e,t){e(ce(t,n))});return Y(r,t,n),e&&(r.retain=function(){return m._retainItem(t,i),r},r.release=function(){m._releaseItem(n)}),r}function c(t){var n;return!p&&t?n=l(t):(p?(n=new u(function(){}),n.cancel()):n=u.wrap(null),G(n,null),e&&(n.retain=function(){return n},n.release=function(){})),i(t),n}var d=(pn++).toString(),h=null,p=!1;hn[d]={notificationHandler:e,notificationsSent:!1,adjustCurrentSlot:r,itemPromiseFromKnownSlot:l};var m={_retainItem:function(e,t){s(e,t)},_releaseItem:function(e){a(e)},jumpToItem:function(e){return c(e?Hn[e.handle]:null)},current:function(){return c(h)},previous:function(){return c(h?Ae(h):null)},next:function(){return c(h?Oe(h):null)},releaseItem:function(e){this._releaseItem(e.handle)},release:function(){p=!0,n(h),h=null;for(var e=Nn.next;e!==zn;){var t=e.next,i=e.fetchListeners;for(var r in i){var s=i[r];s.listBindingID===d&&(s.promise.cancel(),delete i[r])}e.bindingMap&&e.bindingMap[d]&&o(e),e=t}delete hn[d]}};return(ci||ui)&&(m.first=function(){return c(Oe(Nn))}),di&&(m.last=function(){return c(Ae(Fn))}),li&&(m.fromKey=function(e,t){return c(Re(e,t))}),(ui||ci&&li)&&(m.fromIndex=function(e){return c(Ne(e))}),hi&&(m.fromDescription=function(e){return c(Fe(e))}),m},this.invalidateAll=function(){return It()};var yi=function(e,t){var n=new d;e.then(function(e){n.complete(e)},function(e){n.error(e)});var i=n.promise.then(null,function(n){return"WinJS.UI.VirtualizedDataSource.resetCount"===n.name?(_n=null,e=t.getCount()):u.wrapError(n)}),o=0,s={get:function(){return o++,new u(function(e,t){i.then(e,t)},function(){0===--o&&(n.promise.cancel(),e.cancel(),s===_n&&(_n=null))})},reset:function(){n.error(new r("WinJS.UI.VirtualizedDataSource.resetCount"))},cancel:function(){n.promise.cancel(),e.cancel(),s===_n&&(_n=null)}};return s};this.getCount=function(){if(e.getCount){var t=this;return u.wrap().then(function(){if(yn||wn)return Rn;var n;if(!_n){var i;n=e.getCount();var r;n.then(function(){_n===i&&(_n=null),r=!0},function(){_n===i&&(_n=null),r=!0}),xn=0,r||(i=_n=yi(n,t))}return _n?_n.get():n}).then(function(e){if(!w(e)&&void 0!==e)throw new r("WinJS.UI.ListDataSource.InvalidRequestedCountReturned",v.invalidRequestedCountReturned);return e!==Rn&&(Rn===f.unknown?Rn=e:(de(e),le())),0===e&&(Nn.next!==Fn||Fn.next!==zn?wt():Nn.lastInSequence&&(D(Nn),Fn.index=0)),e}).then(null,function(e){return e.name===h.CountError.noResponse?(ze(m.failure),Rn):u.wrapError(e)})}return u.wrap(Rn)},li&&(this.itemFromKey=function(e,t){return De(Re(e,t))}),(ui||ci&&li)&&(this.itemFromIndex=function(e){return De(Ne(e))}),hi&&(this.itemFromDescription=function(e){return De(Fe(e))}),this.beginEdits=function(){yn=!0},e.insertAtStart&&(this.insertAtStart=function(t,n){return nn(t,n,Nn.lastInSequence?null:Nn.next,!0,function(){return e.insertAtStart(t,n)})}),e.insertBefore&&(this.insertBefore=function(t,n,i){var r=en(i);return nn(t,n,r,!1,function(){return e.insertBefore(t,n,i,be(r))})}),e.insertAfter&&(this.insertAfter=function(t,n,i){var r=en(i);return nn(t,n,r?r.next:null,!0,function(){return e.insertAfter(t,n,i,be(r))})}),e.insertAtEnd&&(this.insertAtEnd=function(t,n){return nn(t,n,Fn.firstInSequence?null:Fn,!1,function(){return e.insertAtEnd(t,n)})}),e.change&&(this.change=function(t,n){var i=en(t);return new u(function(r,o){var s;Kt(function(){return e.change(t,n,be(i))},vi.change,r,o,null,function(){s=i.item,i.itemNew={key:t,data:n},s?_e(i):Pe(i)},function(){s?(i.itemNew=s,_e(i)):wt()})})}),e.moveToStart&&(this.moveToStart=function(t){var n=en(t);return rn(n,Nn.next,!0,function(){return e.moveToStart(t,be(n))})}),e.moveBefore&&(this.moveBefore=function(t,n){var i=en(t),r=en(n);return rn(i,r,!1,function(){return e.moveBefore(t,n,be(i),be(r))})}),e.moveAfter&&(this.moveAfter=function(t,n){var i=en(t),r=en(n);return rn(i,r.next,!0,function(){return e.moveAfter(t,n,be(i),be(r))})}),e.moveToEnd&&(this.moveToEnd=function(t){var n=en(t);return rn(n,Fn,!1,function(){return e.moveToEnd(t,be(n))})}),e.remove&&(this.remove=function(t){Le(t);var n=Wn[t];return new u(function(i,r){var o,s,a;Kt(function(){return e.remove(t,be(n))},vi.remove,i,r,null,function(){n&&(o=n.next,s=n.firstInSequence,a=n.lastInSequence,we(n,-1),ve(n,!1))},function(){n&&(j(n,o,!s,!a),we(n,1),fe(n))})})}),this.endEdits=function(){yn=!1,Qt()}}var a=100,p=1,m=h.DataSourceStatus,f=h.CountResult,_=h.FetchError,g=h.EditError,v={get listDataAdapterIsInvalid(){return"Invalid argument: listDataAdapter must be an object or an array."},get indexIsInvalid(){return"Invalid argument: index must be a non-negative integer."},get keyIsInvalid(){return"Invalid argument: key must be a string."},get invalidItemReturned(){return"Error: data adapter returned item that is not an object."},get invalidKeyReturned(){return"Error: data adapter returned item with undefined or null key."},get invalidIndexReturned(){return"Error: data adapter should return undefined, null or a non-negative integer for the index."},get invalidCountReturned(){return"Error: data adapter should return undefined, null, CountResult.unknown, or a non-negative integer for the count."},get invalidRequestedCountReturned(){return"Error: data adapter should return CountResult.unknown, CountResult.failure, or a non-negative integer for the count."},get refreshCycleIdentified(){return"refresh cycle found, likely data inconsistency"}},y="statuschanged",b=n.Class.define(function(){},{_baseDataSourceConstructor:e,_isVirtualizedDataSource:!0},{supportedForProcessing:!1});return n.Class.mix(b,o.eventMixin),b})})}),i("WinJS/VirtualizedDataSource/_GroupDataSource",["exports","../Core/_Base","../Core/_ErrorFromName","../Promise","../Scheduler","../Utilities/_UI","./_VirtualizedDataSourceImpl"],function(e,t,n,i,r,o,s){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_GroupDataSource:t.Namespace._lazy(function(){function e(){return new n(o.FetchError.doesNotExist)}function a(e){return e&&e.firstReached&&e.lastReached}var l=101,u=t.Class.define(function(e){this._groupDataAdapter=e},{beginNotifications:function(){},inserted:function(e,t,n){this._groupDataAdapter._inserted(e,t,n)},changed:function(e,t){this._groupDataAdapter._changed(e,t)},moved:function(e,t,n){this._groupDataAdapter._moved(e,t,n)},removed:function(e,t){this._groupDataAdapter._removed(e,t)},countChanged:function(e,t){0===e&&0!==t&&this._groupDataAdapter.invalidateGroups()},indexChanged:function(e,t,n){this._groupDataAdapter._indexChanged(e,t,n)},endNotifications:function(){this._groupDataAdapter._endNotifications()},reload:function(){this._groupDataAdapter._reload()}},{supportedForProcessing:!1}),c=t.Class.define(function(e,t,n,i){this._listBinding=e.createListBinding(new u(this)),this._groupKey=t,this._groupData=n,this._initializeState(),this._batchSize=l,this._count=null,i&&("number"==typeof i.groupCountEstimate&&(this._count=i.groupCountEstimate<0?null:Math.max(i.groupCountEstimate,1)),"number"==typeof i.batchSize&&(this._batchSize=i.batchSize+1)),this._listBinding.last&&(this.itemsFromEnd=function(e){var t=this;return this._fetchItems(function(){return t._lastGroup},function(e){if(e)return!1;var n=t._count;return+n!==n?!0:n>0?!0:void 0},function(){t._fetchBatch(t._listBinding.last(),t._batchSize-1,0)},e-1,0)})},{setNotificationHandler:function(e){this._listDataNotificationHandler=e},compareByIdentity:!0,itemsFromKey:function(e,t,n,i){var r=this;return this._fetchItems(function(){return r._keyMap[e]},function(){var e=r._lastGroup;return e?+e.index!==e.index?!0:void 0:!0},function(){i=i||{};var e="string"==typeof i.groupMemberKey&&r._listBinding.fromKey?r._listBinding.fromKey(i.groupMemberKey):"number"==typeof i.groupMemberIndex&&r._listBinding.fromIndex?r._listBinding.fromIndex(i.groupMemberIndex):void 0!==i.groupMemberDescription&&r._listBinding.fromDescription?r._listBinding.fromDescription(i.groupMemberDescription):r._listBinding.first(),t=Math.floor(.5*(r._batchSize-1));r._fetchBatch(e,t,r._batchSize-1-t)},t,n)},itemsFromIndex:function(e,t,n){var i=this;return this._fetchItems(function(){return i._indexMap[e]},function(){var t=i._lastGroup;return t?+t.index!==t.index?!0:e<=t.index?!0:void 0:!0},function(){i._fetchNextIndex()},t,n)},getCount:function(){if(this._lastGroup&&"number"==typeof this._lastGroup.index)return i.wrap(this._count);var e=this,t=new i(function(t){var n={initialBatch:function(){e._fetchNextIndex()},getGroup:function(){return null},countBefore:0,countAfter:0,complete:function(n){n&&(e._count=0);var i=e._count;return"number"==typeof i?(t(i),!0):!1}};e._fetchQueue.push(n),e._itemBatch||e._continueFetch(n)});return"number"==typeof this._count?i.wrap(this._count):t},invalidateGroups:function(){this._beginRefresh(),this._initializeState()},_initializeState:function(){this._count=null,this._indexMax=null,this._keyMap={},this._indexMap={},this._lastGroup=null,this._handleMap={},this._fetchQueue=[],this._itemBatch=null,this._itemsToFetch=0,this._indicesChanged=!1},_releaseItem:function(e){delete this._handleMap[e.handle],this._listBinding.releaseItem(e)},_processBatch:function(){for(var e=null,t=null,n=null,i=0,o=!0,s=0;s<this._batchSize;s++){var a=this._itemBatch[s],l=a?this._groupKey(a):null;if(a&&(o=!1),t&&null!==l&&l===t.key)i++,t.lastItem===e?(t.lastItem.handle!==t.firstItem.handle&&this._releaseItem(t.lastItem),t.lastItem=a,this._handleMap[a.handle]=t,t.size++):t.firstItem===a&&(t.firstItem.handle!==t.lastItem.handle&&this._releaseItem(t.firstItem),t.firstItem=n,this._handleMap[n.handle]=t,t.size+=i);else{var u=null;if(t&&(t.lastReached=!0,"number"==typeof t.index&&(u=t.index+1)),a){var c=this._keyMap[l];if(c||(c={key:l,data:this._groupData(a),firstItem:a,lastItem:a,size:1},this._keyMap[c.key]=c,this._handleMap[a.handle]=c),s>0&&(c.firstReached=!0,t||(u=0)),"number"!=typeof c.index&&"number"==typeof u){for(var d=c;d;d=this._nextGroup(d))d.index=u,this._indexMap[u]=d,u++;this._indexMax=u,"number"==typeof this._count&&!this._lastGroup&&this._count<=this._indexMax&&(this._count=this._indexMax+1)}n=a,i=0,t=c}else t&&(this._lastGroup=t,"number"==typeof t.index&&(this._count=t.index+1),this._listDataNotificationHandler.invalidateAll(),t=null)}e=a}var h;for(h=this._fetchQueue[0];h&&h.complete(o);h=this._fetchQueue[0])this._fetchQueue.splice(0,1);if(h){var p=this;r.schedule(function(){p._continueFetch(h)},r.Priority.normal,null,"WinJS.UI._GroupDataSource._continueFetch")}else this._itemBatch=null},_processPromise:function(e,t){e.retain(),this._itemBatch[t]=e;var n=this;e.then(function(e){n._itemBatch[t]=e,0===--n._itemsToFetch&&n._processBatch()})},_fetchBatch:function(e,t){this._itemBatch=new Array(this._batchSize),this._itemsToFetch=this._batchSize,this._processPromise(e,t);var n;for(this._listBinding.jumpToItem(e),n=t-1;n>=0;n--)this._processPromise(this._listBinding.previous(),n);for(this._listBinding.jumpToItem(e),n=t+1;n<this._batchSize;n++)this._processPromise(this._listBinding.next(),n)},_fetchAdjacent:function(e,t){this._fetchBatch(this._listBinding.fromKey?this._listBinding.fromKey(e.key):this._listBinding.fromIndex(e.index),t?0:this._batchSize-1,t?this._batchSize-1:0)},_fetchNextIndex:function(){var e=this._indexMap[this._indexMax-1];e?this._fetchAdjacent(e.lastItem,!0):this._fetchBatch(this._listBinding.first(),1,this._batchSize-2)},_continueFetch:function(e){if(e.initialBatch)e.initialBatch(),e.initialBatch=null;else{var t=e.getGroup();if(t){var n,i;t.firstReached?t.lastReached?e.countBefore>0&&0!==t.index&&!a(n=this._previousGroup(t))?this._fetchAdjacent(n&&n.lastReached?n.firstItem:t.firstItem,!1):(i=this._nextGroup(t),this._fetchAdjacent(i&&i.firstReached?i.lastItem:t.lastItem,!0)):this._fetchAdjacent(t.lastItem,!0):this._fetchAdjacent(t.firstItem,!1)}else this._fetchNextIndex()}},_fetchComplete:function(e,t,n,i,r){if(a(e)){var s=this._previousGroup(e);if(i||a(s)||0===e.index||0===t){var l=this._nextGroup(e);if(i||a(l)||this._lastGroup===e||0===n){for(var u=0,c=e;t>u&&(s=this._previousGroup(c),a(s));)c=s,u++;for(var d=0,h=e;n>d&&(l=this._nextGroup(h),a(l));)h=l,d++;for(var p=u+1+d,m=new Array(p),f=0;p>f;f++){var _={key:c.key,data:c.data,firstItemKey:c.firstItem.key,groupSize:c.size},g=c.firstItem.index;"number"==typeof g&&(_.firstItemIndexHint=g),m[f]=_,c=this._nextGroup(c)}var v={items:m,offset:u};return v.totalCount="number"==typeof this._count?this._count:o.CountResult.unknown,"number"==typeof e.index&&(v.absoluteIndex=e.index),h===this._lastGroup&&(v.atEnd=!0),r(v),!0}}}return!1},_fetchItems:function(t,n,r,o,s){var a=this;return new i(function(i,l){function u(r){var u=t();return u?a._fetchComplete(u,o,s,d,i,l):d&&!n(r)?(l(e()),!0):h>2?(l(e()),!0):(r?h++:h=0,!1)}var c=t(),d=!c,h=0;if(!u()){var p={initialBatch:d?r:null,getGroup:t,countBefore:o,countAfter:s,complete:u};a._fetchQueue.push(p),a._itemBatch||a._continueFetch(p)}})},_previousGroup:function(e){return e&&e.firstReached?(this._listBinding.jumpToItem(e.firstItem),this._handleMap[this._listBinding.previous().handle]):null},_nextGroup:function(e){return e&&e.lastReached?(this._listBinding.jumpToItem(e.lastItem),this._handleMap[this._listBinding.next().handle]):null},_invalidateIndices:function(e){this._count=null,this._lastGroup=null,"number"==typeof e.index&&(this._indexMax=e.index>0?e.index:null);for(var t=e;t&&"number"==typeof t.index;t=this._nextGroup(t))delete this._indexMap[t.index],t.index=null},_releaseGroup:function(e){this._invalidateIndices(e),delete this._keyMap[e.key],this._lastGroup===e&&(this._lastGroup=null),e.firstItem!==e.lastItem&&this._releaseItem(e.firstItem),this._releaseItem(e.lastItem)},_beginRefresh:function(){if(this._fetchQueue=[],this._itemBatch){for(var e=0;e<this._batchSize;e++){var t=this._itemBatch[e];t&&(t.cancel&&t.cancel(),this._listBinding.releaseItem(t))}this._itemBatch=null}this._itemsToFetch=0,this._listDataNotificationHandler.invalidateAll()},_processInsertion:function(e,t,n){var i=this._handleMap[t],r=this._handleMap[n],o=null;i&&(i.lastReached&&t===i.lastItem.handle&&(o=this._groupKey(e))!==i.key?this._lastGroup===i&&(this._lastGroup=null,this._count=null):this._releaseGroup(i),this._beginRefresh()),r&&r!==i&&(this._invalidateIndices(r),r.firstReached&&n===r.firstItem.handle&&(null!==o?o:this._groupKey(e))!==r.key||this._releaseGroup(r),this._beginRefresh())},_processRemoval:function(e){var t=this._handleMap[e];if(!t||e!==t.firstItem.handle&&e!==t.lastItem.handle){if(this._itemBatch)for(var n=0;n<this._batchSize;n++){var i=this._itemBatch[n];if(i&&i.handle===e){this._beginRefresh();break}}}else this._releaseGroup(t),this._beginRefresh()},_inserted:function(e,t,n){var i=this;e.then(function(e){i._processInsertion(e,t,n)})},_changed:function(e,t){var n=this._handleMap[e.handle];if(n&&e.handle===n.firstItem.handle&&(this._releaseGroup(n),this._beginRefresh()),this._groupKey(e)!==this._groupKey(t)){this._listBinding.jumpToItem(e);var i=this._listBinding.previous().handle;this._listBinding.jumpToItem(e);var r=this._listBinding.next().handle;this._processRemoval(e.handle),this._processInsertion(e,i,r)}},_moved:function(e,t,n){this._processRemoval(e.handle);var i=this;e.then(function(e){i._processInsertion(e,t,n)})},_removed:function(e,t){t||this._processRemoval(e)},_indexChanged:function(e,t,n){"number"==typeof n&&(this._indicesChanged=!0)},_endNotifications:function(){if(this._indicesChanged){this._indicesChanged=!1;for(var e in this._keyMap){var t=this._keyMap[e];if(t.firstReached&&t.lastReached){var n=t.lastItem.index+1-t.firstItem.index;isNaN(n)||(t.size=n)}}this._beginRefresh()}},_reload:function(){this._initializeState(),this._listDataNotificationHandler.reload()}},{supportedForProcessing:!1});return t.Class.derive(s.VirtualizedDataSource,function(e,t,n,i){var r=new c(e,t,n,i);this._baseDataSourceConstructor(r),this.extensions={invalidateGroups:function(){r.invalidateGroups()}}},{},{supportedForProcessing:!1})})})}),i("WinJS/VirtualizedDataSource/_GroupedItemDataSource",["../Core/_Base","./_GroupDataSource"],function(e,t){"use strict";e.Namespace.define("WinJS.UI",{computeDataSourceGroups:function(e,n,i,r){function o(e){if(e){var t=Object.create(e);return t.groupKey=n(e),i&&(t.groupData=i(e)),t}return null}function s(e){var t=Object.create(e);return t.then=function(t,n,i){return e.then(function(e){return t(o(e))},n,i)},t}var a=Object.create(e);a.createListBinding=function(t){var n;t?(n=Object.create(t),n.inserted=function(e,n,i){return t.inserted(s(e),n,i)},n.changed=function(e,n){return t.changed(o(e),o(n))},n.moved=function(e,n,i){return t.moved(s(e),n,i)}):n=null;for(var i=e.createListBinding(n),r=Object.create(i),a=["first","last","fromDescription","jumpToItem","current"],l=0,u=a.length;u>l;l++)!function(e){i[e]&&(r[e]=function(){return s(i[e].apply(i,arguments))})}(a[l]);return i.fromKey&&(r.fromKey=function(e){return s(i.fromKey(e))}),i.fromIndex&&(r.fromIndex=function(e){return s(i.fromIndex(e))}),r.prev=function(){return s(i.prev())},r.next=function(){return s(i.next())},r};for(var l=["itemFromKey","itemFromIndex","itemFromDescription","insertAtStart","insertBefore","insertAfter","insertAtEnd","change","moveToStart","moveBefore","moveAfter","moveToEnd"],u=0,c=l.length;c>u;u++)!function(t){e[t]&&(a[t]=function(){return s(e[t].apply(e,arguments))})}(l[u]);["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){e[t]&&(a[t]=function(){return e[t].apply(e,arguments)})});var d=null;return Object.defineProperty(a,"groups",{get:function(){return d||(d=new t._GroupDataSource(e,n,i,r)),d},enumerable:!0,configurable:!0}),a}})}),i("WinJS/VirtualizedDataSource/_StorageDataSource",["exports","../Core/_WinRT","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_WriteProfilerMark","../Animations","../Promise","../Utilities/_UI","./_VirtualizedDataSourceImpl"],function(e,t,n,i,r,o,s,a,l,u){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{StorageDataSource:i.Namespace._lazy(function(){var e=i.Class.define(function(e,n){o("WinJS.UI.StorageDataSource:constructor,StartTM");var i,r=t.Windows.Storage.FileProperties.ThumbnailMode.singleItem,s=256,a=t.Windows.Storage.FileProperties.ThumbnailOptions.useCurrentScale,l=!0;if("Pictures"===e?(r=t.Windows.Storage.FileProperties.ThumbnailMode.picturesView,i=t.Windows.Storage.KnownFolders.picturesLibrary,s=190):"Music"===e?(r=t.Windows.Storage.FileProperties.ThumbnailMode.musicView,i=t.Windows.Storage.KnownFolders.musicLibrary,s=256):"Documents"===e?(r=t.Windows.Storage.FileProperties.ThumbnailMode.documentsView,i=t.Windows.Storage.KnownFolders.documentsLibrary,s=40):"Videos"===e&&(r=t.Windows.Storage.FileProperties.ThumbnailMode.videosView,i=t.Windows.Storage.KnownFolders.videosLibrary,s=190),i){var u=new t.Windows.Storage.Search.QueryOptions;u.folderDepth=t.Windows.Storage.Search.FolderDepth.deep,u.indexerOption=t.Windows.Storage.Search.IndexerOption.useIndexerWhenAvailable,this._query=i.createFileQueryWithOptions(u)}else this._query=e;if(n){if("number"==typeof n.mode&&(r=n.mode),"number"==typeof n.requestedThumbnailSize)s=Math.max(1,Math.min(n.requestedThumbnailSize,1024));else switch(r){case t.Windows.Storage.FileProperties.ThumbnailMode.picturesView:case t.Windows.Storage.FileProperties.ThumbnailMode.videosView:s=190;break;case t.Windows.Storage.FileProperties.ThumbnailMode.documentsView:case t.Windows.Storage.FileProperties.ThumbnailMode.listView:s=40;break;case t.Windows.Storage.FileProperties.ThumbnailMode.musicView:case t.Windows.Storage.FileProperties.ThumbnailMode.singleItem:s=256}"number"==typeof n.thumbnailOptions&&(a=n.thumbnailOptions),"boolean"==typeof n.waitForFileLoad&&(l=!n.waitForFileLoad)}this._loader=new t.Windows.Storage.BulkAccess.FileInformationFactory(this._query,r,s,a,l),this.compareByIdentity=!1,this.firstDataRequest=!0,o("WinJS.UI.StorageDataSource:constructor,StopTM")},{setNotificationHandler:function(e){this._notificationHandler=e,this._query.addEventListener("contentschanged",function(){e.invalidateAll()}),this._query.addEventListener("optionschanged",function(){e.invalidateAll()})},itemsFromEnd:function(e){var t=this;return o("WinJS.UI.StorageDataSource:itemsFromEnd,info"),this.getCount().then(function(n){return 0===n?a.wrapError(new r(l.FetchError.doesNotExist)):t.itemsFromIndex(n-1,Math.min(n-1,e-1),1)})},itemsFromIndex:function(e,t,n){function i(e){c._notificationHandler.changed(c._item(e.target))}t+n>64&&(t=Math.min(t,32),n=64-(t+1));var s=e-t,u=t+1+n,c=this;c.firstDataRequest&&(c.firstDataRequest=!1,u=Math.max(u,32));var d="WinJS.UI.StorageDataSource:itemsFromIndex("+s+"-"+(s+u-1)+")";return o(d+",StartTM"),this._loader.getItemsAsync(s,u).then(function(n){var h=n.size;if(t>=h)return a.wrapError(new r(l.FetchError.doesNotExist));var p=new Array(h),m=new Array(h);n.getMany(0,m);for(var f=0;h>f;f++)p[f]=c._item(m[f]),m[f].addEventListener("propertiesupdated",i);var _={items:p,offset:t,absoluteIndex:e};return u>h&&(_.totalCount=s+h),o(d+",StopTM"),_})},itemsFromDescription:function(e,t,n){var i=this;return o("WinJS.UI.StorageDataSource:itemsFromDescription,info"),this._query.findStartIndexAsync(e).then(function(e){return i.itemsFromIndex(e,t,n)})},getCount:function(){return o("WinJS.UI.StorageDataSource:getCount,info"),this._query.getItemCountAsync()},itemSignature:function(e){return e.folderRelativeId},_item:function(e){return{key:e.path||e.folderRelativeId,data:e}}},{supportedForProcessing:!1});return i.Class.derive(u.VirtualizedDataSource,function(t,n){this._baseDataSourceConstructor(new e(t,n))},{},{loadThumbnail:function(e,i){var r,l,u=!1;return new a(function(c){var d=i?!0:!1,h=function(h){if(h){var p=n.URL.createObjectURL(h,{oneTimeOnly:!0});l=l?l.then(function(t){return e.loadImage(p,t)}):e.loadImage(p,i).then(function(t){return e.isOnScreen().then(function(e){var n;return e&&d?n=s.fadeIn(t).then(function(){return t}):(t.style.opacity=1,n=a.wrap(t)),n})}),h.type===t.Windows.Storage.FileProperties.ThumbnailType.icon||h.returnedSmallerCachedSize||(o("WinJS.UI.StorageDataSource:loadThumbnail complete,info"),e.data.removeEventListener("thumbnailupdated",r),u=!1,l=l.then(function(e){r=null,l=null,c(e)}))}};r=function(e){u&&h(e.target.thumbnail)},e.data.addEventListener("thumbnailupdated",r),u=!0,h(e.data.thumbnail)},function(){e.data.removeEventListener("thumbnailupdated",r),u=!1,r=null,l&&(l.cancel(),l=null)})},supportedForProcessing:!1})})})}),i("WinJS/VirtualizedDataSource",["./VirtualizedDataSource/_VirtualizedDataSourceImpl","./VirtualizedDataSource/_GroupDataSource","./VirtualizedDataSource/_GroupedItemDataSource","./VirtualizedDataSource/_StorageDataSource"],function(){}),i("WinJS/Vui",["require","exports","./Core/_Global","./Utilities/_ElementUtilities"],function(e,t,n,i){function r(e){if(!e.defaultPrevented){var t=e.target,n=o[t.tagName];if(n)switch(e.state){case u.active:t[s.vuiData]||i.hasClass(t,a.active)?(i.removeClass(t,a.disambiguation),n.reactivate(t,e.label)):(i.addClass(t,a.active),n.activate(t,e.label));break;case u.disambiguation:i.addClass(t,a.active),i.addClass(t,a.disambiguation),n.disambiguate(t,e.label);break;case u.inactive:i.removeClass(t,a.active),i.removeClass(t,a.disambiguation),n.deactivate(t)}}}var o,s={vuiData:"_winVuiData"},a={active:"win-vui-active",disambiguation:"win-vui-disambiguation"},l={ListeningModeStateChanged:"ListeningStateChanged"},u={active:"active",disambiguation:"disambiguation",inactive:"inactive"};!function(e){e.BUTTON={activate:function(e,t){var n={nodes:[],width:e.style.width,height:e.style.height},r=i._getComputedStyle(e);for(e.style.width=r.width,e.style.height=r.height;e.childNodes.length;)n.nodes.push(e.removeChild(e.childNodes[0]));e[s.vuiData]=n,e.textContent=t},disambiguate:function(e,t){e.textContent=t},reactivate:function(e,t){e.textContent=t},deactivate:function(e){e.innerHTML="";var t=e[s.vuiData];e.style.width=t.width,e.style.height=t.height,t.nodes.forEach(function(t){return e.appendChild(t)}),delete e[s.vuiData]}}}(o||(o={})),n.document&&n.document.addEventListener(l.ListeningModeStateChanged,r)}),i("WinJS/_Accents",["require","exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s){function a(e,t){y.push({selector:e,props:t}),l()}function l(){0!==y.length&&-1===b&&(b=o._setImmediate(function(){b=-1,h();var e=v?m.lightThemeSelector:m.darkThemeSelector,t=m.hoverSelector+" "+e,i=n.document.createElement("style");i.id=m.accentStyleId,i.textContent=y.map(function(n){var i="  "+n.props.map(function(e){return e.name+": "+g[e.value]+";"}).join("\n  "),r=n.selector.split(",").map(function(e){return d(e)}),o=r.join(",\n"),s=o+" {\n"+i+"\n}",a=n.props.some(function(e){return 0!==e.value});if(a){var l="  "+n.props.map(function(e){return e.name+": "+g[e.value?e.value+3:e.value]+";"}).join("\n  "),u=[];r.forEach(function(n){if(-1!==n.indexOf(m.hoverSelector)&&-1===n.indexOf(t)){u.push(n.replace(m.hoverSelector,t));var i=n.replace(m.hoverSelector,"").trim();-1!==f.indexOf(i[0])&&u.push(n.replace(m.hoverSelector+" ",t))}else u.push(e+" "+n),-1!==f.indexOf(n[0])&&u.push(e+n);s+="\n"+u.join(",\n")+" {\n"+l+"\n}"})}return s}).join("\n"),n.document.head.appendChild(i)}))}function u(){var e=(i.Windows.UI.ViewManagement.UIColorType,_.getColorValue(i.Windows.UI.ViewManagement.UIColorType.accent)),t=c(e,1);g[0]!==t&&(g.length=0,g.push(t,c(e,v?.6:.4),c(e,v?.8:.6),c(e,v?.9:.7),c(e,v?.4:.6),c(e,v?.6:.8),c(e,v?.7:.9)),l())}function c(e,t){return"rgba("+e.r+","+e.g+","+e.b+","+t+")"}function d(e){return e.replace(/  /g," ").replace(/  /g," ").trim()}function h(){var e=n.document.head.querySelector("#"+m.accentStyleId);e&&e.parentNode.removeChild(e)}function p(){y.length=0,h()}var m={accentStyleId:"WinJSAccentsStyle",themeDetectionTag:"winjs-themedetection-tag",hoverSelector:"html.win-hoverable",
lightThemeSelector:".win-ui-light",darkThemeSelector:".win-ui-dark"},f=[".","#",":"],_=null,g=[],v=!1,y=[],b=-1;!function(e){e[e.accent=0]="accent",e[e.listSelectRest=1]="listSelectRest",e[e.listSelectHover=2]="listSelectHover",e[e.listSelectPress=3]="listSelectPress",e[e._listSelectRestInverse=4]="_listSelectRestInverse",e[e._listSelectHoverInverse=5]="_listSelectHoverInverse",e[e._listSelectPressInverse=6]="_listSelectPressInverse"}(t.ColorTypes||(t.ColorTypes={}));var C=t.ColorTypes;t.createAccentRule=a;var w=n.document.createElement(m.themeDetectionTag);n.document.head.appendChild(w);var I=s._getComputedStyle(w);v="0"===I.opacity,w.parentElement.removeChild(w);try{_=new i.Windows.UI.ViewManagement.UISettings,_.addEventListener("colorvalueschanged",u),u()}catch(S){g.push("rgb(0, 120, 215)","rgba(0, 120, 215, "+(v?"0.6":"0.4")+")","rgba(0, 120, 215, "+(v?"0.8":"0.6")+")","rgba(0, 120, 215, "+(v?"0.9":"0.7")+")","rgba(0, 120, 215, "+(v?"0.4":"0.6")+")","rgba(0, 120, 215, "+(v?"0.6":"0.8")+")","rgba(0, 120, 215, "+(v?"0.7":"0.9")+")")}var E={ColorTypes:C,createAccentRule:a,_colors:g,_reset:p,_isDarkTheme:v};r.Namespace.define("WinJS.UI._Accents",E)}),i("require-style",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),i("require-style!less/styles-intrinsic",[],function(){}),i("require-style!less/colors-intrinsic",[],function(){}),i("WinJS/Controls/IntrinsicControls",["../Utilities/_Hoverable","../_Accents","require-style!less/styles-intrinsic","require-style!less/colors-intrinsic"],function(e,t){"use strict";t.createAccentRule(".win-link,	         .win-progress-bar,	         .win-progress-ring,	         .win-ring",[{name:"color",value:t.ColorTypes.accent}]),t.createAccentRule("::selection,	         .win-button.win-button-primary,	         .win-dropdown option:checked,	         select[multiple].win-dropdown option:checked",[{name:"background-color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-textbox:focus,	         .win-textarea:focus,	         .win-textbox:focus:hover,	         .win-textarea:focus:hover",[{name:"border-color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-textbox::-ms-clear:hover:not(:active),	         .win-textbox::-ms-reveal:hover:not(:active)",[{name:"color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-checkbox:checked::-ms-check,	         .win-textbox::-ms-clear:active,	         .win-textbox::-ms-reveal:active",[{name:"background-color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-progress-bar::-webkit-progress-value,	         .win-progress-ring::-webkit-progress-value,	         .win-ring::-webkit-progress-value",[{name:"background-color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-progress-bar:not(:indeterminate)::-moz-progress-bar,	         .win-progress-ring:not(:indeterminate)::-moz-progress-bar,	         .win-ring:not(:indeterminate)::-moz-progress-bar",[{name:"background-color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-checkbox:indeterminate::-ms-check,	         .win-checkbox:hover:indeterminate::-ms-check,	         .win-radio:checked::-ms-check",[{name:"border-color",value:t.ColorTypes.accent}]),t.createAccentRule(".win-slider::-ms-thumb,	         .win-slider::-ms-fill-lower",[{name:"background",value:t.ColorTypes.accent}]),t.createAccentRule(".win-slider::-webkit-slider-thumb",[{name:"background",value:t.ColorTypes.accent}]),t.createAccentRule(".win-slider::-moz-range-thumb",[{name:"background",value:t.ColorTypes.accent}])}),i("WinJS/Controls/ElementResizeInstrument/_ElementResizeInstrument",["require","exports","../../Core/_BaseUtils","../../Core/_Base","../../Core/_Global","../../Core/_Log","../../Core/_ErrorFromName","../../Core/_Events","../../Promise","../../Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a,l,u){"use strict";var c="display: block;position:absolute;top: 0;left: 0;height: 100%;width: 100%;overflow: hidden;pointer-events: none;z-index: -1;",d="win-resizeinstrument",h="about:blank",p={resize:"resize",_ready:"_ready"},m="resize",f="msHighContrastAdjust"in document.documentElement.style,_=function(){function e(){var e=this;this._disposed=!1,this._elementLoaded=!1,this._running=!1,this._objectWindowResizeHandlerBound=this._objectWindowResizeHandler.bind(this);var t=r.document.createElement("OBJECT");t.setAttribute("style",c),f?t.style.visibility="hidden":t.data=h,t.type="text/html",t.winControl=this,u.addClass(t,d),u.addClass(t,"win-disposable"),this._element=t,this._elementLoadPromise=new l(function(n){t.onload=function(){e._disposed||(e._elementLoaded=!0,e._objWindow.addEventListener(m,e._objectWindowResizeHandlerBound),n())}})}return Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_objWindow",{get:function(){return this._elementLoaded&&this._element.contentDocument&&this._element.contentDocument.defaultView||null},enumerable:!0,configurable:!0}),e.prototype.addedToDom=function(){var e=this;if(!this._disposed){var t=this.element;if(!r.document.body.contains(t))throw new s("WinJS.UI._ElementResizeInstrument","ElementResizeInstrument initialization failed");o.log&&"static"===u._getComputedStyle(t.parentElement).position&&o.log("_ElementResizeInstrument can only detect size changes that are made to it's nearest positioned ancestor. Its parent element is not currently positioned."),!this._elementLoaded&&f&&(t.data="about:blank"),this._elementLoadPromise.then(function(){e._running=!0,e.dispatchEvent(p._ready,null);var t=l.timeout(50),n=function(){e.removeEventListener(p.resize,n),t.cancel()};e.addEventListener(p.resize,n),t.then(function(){e._objectWindowResizeHandler()})})}},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._elementLoadPromise.cancel(),this._objWindow&&this._objWindow.removeEventListener.call(this._objWindow,m,this._objectWindowResizeHandlerBound),this._running=!1)},e.prototype.addEventListener=function(e,t,n){},e.prototype.dispatchEvent=function(e,t){return!1},e.prototype.removeEventListener=function(e,t,n){},e.prototype._objectWindowResizeHandler=function(){var e=this;this._running&&this._batchResizeEvents(function(){e._fireResizeEvent()})},e.prototype._batchResizeEvents=function(e){this._pendingResizeAnimationFrameId&&n._cancelAnimationFrame(this._pendingResizeAnimationFrameId),this._pendingResizeAnimationFrameId=n._requestAnimationFrame(function(){e()})},e.prototype._fireResizeEvent=function(){this._disposed||this.dispatchEvent(p.resize,null)},e.EventNames=p,e}();t._ElementResizeInstrument=_,i.Class.mix(_,a.eventMixin)}),i("WinJS/Controls/ElementResizeInstrument",["require","exports"],function(e,t){function n(){return i||e(["./ElementResizeInstrument/_ElementResizeInstrument"],function(e){i=e}),i._ElementResizeInstrument}var i=null,r=Object.create({},{_ElementResizeInstrument:{get:function(){return n()}}});return r}),i("WinJS/Controls/ItemContainer/_Constants",["exports","../../Core/_Base"],function(e,t){"use strict";var n={};n._listViewClass="win-listview",n._viewportClass="win-viewport",n._rtlListViewClass="win-rtl",n._horizontalClass="win-horizontal",n._verticalClass="win-vertical",n._scrollableClass="win-surface",n._itemsContainerClass="win-itemscontainer",n._listHeaderContainerClass="win-headercontainer",n._listFooterContainerClass="win-footercontainer",n._padderClass="win-itemscontainer-padder",n._proxyClass="_win-proxy",n._itemClass="win-item",n._itemBoxClass="win-itembox",n._itemsBlockClass="win-itemsblock",n._containerClass="win-container",n._containerEvenClass="win-container-even",n._containerOddClass="win-container-odd",n._backdropClass="win-backdrop",n._footprintClass="win-footprint",n._groupsClass="win-groups",n._selectedClass="win-selected",n._selectionBorderClass="win-selectionborder",n._selectionBackgroundClass="win-selectionbackground",n._selectionCheckmarkClass="win-selectioncheckmark",n._selectionCheckmarkBackgroundClass="win-selectioncheckmarkbackground",n._pressedClass="win-pressed",n._headerClass="win-groupheader",n._headerContainerClass="win-groupheadercontainer",n._groupLeaderClass="win-groupleader",n._progressClass="win-progress",n._revealedClass="win-revealed",n._itemFocusClass="win-focused",n._itemFocusOutlineClass="win-focusedoutline",n._zoomingXClass="win-zooming-x",n._zoomingYClass="win-zooming-y",n._listLayoutClass="win-listlayout",n._gridLayoutClass="win-gridlayout",n._headerPositionTopClass="win-headerpositiontop",n._headerPositionLeftClass="win-headerpositionleft",n._structuralNodesClass="win-structuralnodes",n._singleItemsBlockClass="win-single-itemsblock",n._uniformGridLayoutClass="win-uniformgridlayout",n._uniformListLayoutClass="win-uniformlistlayout",n._cellSpanningGridLayoutClass="win-cellspanninggridlayout",n._laidOutClass="win-laidout",n._nonDraggableClass="win-nondraggable",n._nonSelectableClass="win-nonselectable",n._dragOverClass="win-dragover",n._dragSourceClass="win-dragsource",n._clipClass="win-clip",n._selectionModeClass="win-selectionmode",n._noCSSGrid="win-nocssgrid",n._hidingSelectionMode="win-hidingselectionmode",n._hidingSelectionModeAnimationTimeout=250,n._INVALID_INDEX=-1,n._UNINITIALIZED=-1,n._LEFT_MSPOINTER_BUTTON=0,n._RIGHT_MSPOINTER_BUTTON=2,n._TAP_END_THRESHOLD=10,n._DEFAULT_PAGES_TO_LOAD=5,n._DEFAULT_PAGE_LOAD_THRESHOLD=2,n._MIN_AUTOSCROLL_RATE=150,n._MAX_AUTOSCROLL_RATE=1500,n._AUTOSCROLL_THRESHOLD=100,n._AUTOSCROLL_DELAY=50,n._DEFERRED_ACTION=250,n._DEFERRED_SCROLL_END=250,n._SELECTION_CHECKMARK="",n._LISTVIEW_PROGRESS_DELAY=2e3;var i={uninitialized:0,low:1,medium:2,high:3},r={rebuild:0,remeasure:1,relayout:2,realize:3};n._ScrollToPriority=i,n._ViewChange=r,t.Namespace._moduleDefine(e,"WinJS.UI",n)}),i("WinJS/Controls/ItemContainer/_ItemEventsHandler",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_WriteProfilerMark","../../Animations","../../Animations/_TransitionAnimation","../../Promise","../../Utilities/_ElementUtilities","../../Utilities/_UI","./_Constants"],function(e,t,n,i,r,o,s,a,l,u,c,d){"use strict";var h=r._browserStyleEquivalents.transform;i.Namespace._moduleDefine(e,"WinJS.UI",{_ItemEventsHandler:i.Namespace._lazy(function(){function e(e,n){var i=t.document.createElement("div");return i.className=e,n||i.setAttribute("aria-hidden",!0),i}var s=u._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",a=i.Class.define(function(e){this._site=e,this._work=[],this._animations={}},{dispose:function(){this._disposed||(this._disposed=!0,u._removeEventListener(t,"pointerup",this._resetPointerDownStateBound),u._removeEventListener(t,"pointercancel",this._resetPointerDownStateBound))},onPointerDown:function(e){o("WinJS.UI._ItemEventsHandler:MSPointerDown,StartTM");var i,a,l=this._site,h=e.pointerType===s;if(l.pressedElement=e.target,n.Windows.UI.Input.PointerPoint){var p=this._getCurrentPoint(e),m=p.properties;h||m.isInverted||m.isEraser||m.isMiddleButtonPressed?i=a=!1:(a=m.isRightButtonPressed,i=!a&&m.isLeftButtonPressed)}else i=e.button===d._LEFT_MSPOINTER_BUTTON,a=e.button===d._RIGHT_MSPOINTER_BUTTON;this._DragStartBound=this._DragStartBound||this.onDragStart.bind(this),this._PointerEnterBound=this._PointerEnterBound||this.onPointerEnter.bind(this),this._PointerLeaveBound=this._PointerLeaveBound||this.onPointerLeave.bind(this);var f=this._isInteractive(e.target),_=l.indexForItemElement(e.target),g=l.indexForHeaderElement(e.target),v=!f&&_!==d._INVALID_INDEX;if((h||i)&&this._site.pressedEntity.index===d._INVALID_INDEX&&!f&&(g===d._INVALID_INDEX?this._site.pressedEntity={type:c.ObjectType.item,index:_}:this._site.pressedEntity={type:c.ObjectType.groupHeader,index:g},this._site.pressedEntity.index!==d._INVALID_INDEX)){this._site.pressedPosition=u._getCursorPos(e);var y=l.verifySelectionAllowed(this._site.pressedEntity);this._canSelect=y.canSelect,this._canTapSelect=y.canTapSelect,this._site.pressedEntity.type===c.ObjectType.item?(this._site.pressedItemBox=l.itemBoxAtIndex(this._site.pressedEntity.index),this._site.pressedContainer=l.containerAtIndex(this._site.pressedEntity.index),this._site.animatedElement=this._site.pressedContainer,this._site.pressedHeader=null,this._togglePressed(!0,e),this._site.pressedContainer.addEventListener("dragstart",this._DragStartBound),h||(u._addEventListener(this._site.pressedContainer,"pointerenter",this._PointerEnterBound,!1),u._addEventListener(this._site.pressedContainer,"pointerleave",this._PointerLeaveBound,!1))):(this._site.pressedHeader=this._site.headerFromElement(e.target),r.isPhone?(this._site.animatedElement=this._site.pressedHeader,this._togglePressed(!0,e)):(this._site.pressedItemBox=null,this._site.pressedContainer=null,this._site.animatedElement=null)),this._resetPointerDownStateBound||(this._resetPointerDownStateBound=this._resetPointerDownStateForPointerId.bind(this)),h||(u._addEventListener(t,"pointerup",this._resetPointerDownStateBound,!1),u._addEventListener(t,"pointercancel",this._resetPointerDownStateBound,!1)),this._pointerId=e.pointerId,this._pointerRightButton=a}if(v&&h)try{u._setPointerCapture(l.canvasProxy,e.pointerId)}catch(b){return void o("WinJS.UI._ItemEventsHandler:MSPointerDown,StopTM")}this._site.pressedEntity.type===c.ObjectType.item&&this._selectionAllowed()&&this._multiSelection()&&this._site.pressedEntity.index!==d._INVALID_INDEX&&l.selection._getFocused().index!==d._INVALID_INDEX&&l.selection._pivot===d._INVALID_INDEX&&(l.selection._pivot=l.selection._getFocused().index),o("WinJS.UI._ItemEventsHandler:MSPointerDown,StopTM")},onPointerEnter:function(e){this._site.pressedContainer&&this._pointerId===e.pointerId&&this._togglePressed(!0,e)},onPointerLeave:function(e){this._site.pressedContainer&&this._pointerId===e.pointerId&&this._togglePressed(!1,e)},onDragStart:function(){this._resetPressedContainer()},_resetPressedContainer:function(){(this._site.pressedContainer||this._site.pressedHeader)&&this._site.animatedElement&&(this._togglePressed(!1),this._site.pressedContainer&&(this._site.pressedContainer.style[h.scriptName]="",this._site.pressedContainer.removeEventListener("dragstart",this._DragStartBound),u._removeEventListener(this._site.pressedContainer,"pointerenter",this._PointerEnterBound,!1),u._removeEventListener(this._site.pressedContainer,"pointerleave",this._PointerLeaveBound,!1)))},onClick:function(e){if(!this._skipClick){var t={type:c.ObjectType.item,index:this._site.indexForItemElement(e.target)};if(t.index===d._INVALID_INDEX&&(t.index=this._site.indexForHeaderElement(e.target),t.index!==d._INVALID_INDEX&&(t.type=c.ObjectType.groupHeader)),t.index!==d._INVALID_INDEX&&(u.hasClass(e.target,this._site.accessibleItemClass)||u.hasClass(e.target,d._headerClass))){var n=this._site.verifySelectionAllowed(t);n.canTapSelect&&this.handleTap(t),this._site.fireInvokeEvent(t,e.target)}}},onPointerUp:function(e){o("WinJS.UI._ItemEventsHandler:MSPointerUp,StartTM");var t=this._site;this._skipClick=!0;var n=this;r._yieldForEvents(function(){n._skipClick=!1});try{u._releasePointerCapture(t.canvasProxy,e.pointerId)}catch(i){}var a=e.pointerType===s,l=this._releasedElement(e),h=t.indexForItemElement(l),p=l&&u.hasClass(l,d._headerContainerClass)?t.indexForHeaderElement(t.pressedHeader):t.indexForHeaderElement(l);if(this._pointerId===e.pointerId){var m;if(m=p===d._INVALID_INDEX?{type:c.ObjectType.item,index:h}:{type:c.ObjectType.groupHeader,index:p},this._resetPressedContainer(),this._site.pressedEntity.type===c.ObjectType.item&&m.type===c.ObjectType.item&&this._site.pressedContainer&&this._site.pressedEntity.index===m.index)if(e.shiftKey||(t.selection._pivot=d._INVALID_INDEX),e.shiftKey){if(this._selectionAllowed()&&this._multiSelection()&&t.selection._pivot!==d._INVALID_INDEX){var f=Math.min(this._site.pressedEntity.index,t.selection._pivot),_=Math.max(this._site.pressedEntity.index,t.selection._pivot),g=this._pointerRightButton||e.ctrlKey||t.tapBehavior===c.TapBehavior.toggleSelect;t.selectRange(f,_,g)}}else e.ctrlKey&&this.toggleSelectionIfAllowed(this._site.pressedEntity.index);if(this._site.pressedHeader||this._site.pressedContainer){var v=u._getCursorPos(e),y=Math.abs(v.left-this._site.pressedPosition.left)<=d._TAP_END_THRESHOLD&&Math.abs(v.top-this._site.pressedPosition.top)<=d._TAP_END_THRESHOLD;this._pointerRightButton||e.ctrlKey||e.shiftKey||!(a&&y||!a&&this._site.pressedEntity.index===m.index&&this._site.pressedEntity.type===m.type)||(m.type===c.ObjectType.groupHeader?(this._site.pressedHeader=t.headerAtIndex(m.index),this._site.pressedItemBox=null,this._site.pressedContainer=null):(this._site.pressedItemBox=t.itemBoxAtIndex(m.index),this._site.pressedContainer=t.containerAtIndex(m.index),this._site.pressedHeader=null),this._canTapSelect&&this.handleTap(this._site.pressedEntity),this._site.fireInvokeEvent(this._site.pressedEntity,this._site.pressedItemBox||this._site.pressedHeader))}this._site.pressedEntity.index!==d._INVALID_INDEX&&t.changeFocus(this._site.pressedEntity,!0,!1,!0),this.resetPointerDownState()}o("WinJS.UI._ItemEventsHandler:MSPointerUp,StopTM")},onPointerCancel:function(e){this._pointerId===e.pointerId&&(o("WinJS.UI._ItemEventsHandler:MSPointerCancel,info"),this.resetPointerDownState())},onLostPointerCapture:function(e){this._pointerId===e.pointerId&&(o("WinJS.UI._ItemEventsHandler:MSLostPointerCapture,info"),this.resetPointerDownState())},onContextMenu:function(e){this._shouldSuppressContextMenu(e.target)&&e.preventDefault()},onMSHoldVisual:function(e){this._shouldSuppressContextMenu(e.target)&&e.preventDefault()},onDataChanged:function(){this.resetPointerDownState()},toggleSelectionIfAllowed:function(e){this._selectionAllowed(e)&&this._toggleItemSelection(e)},handleTap:function(e){if(e.type!==c.ObjectType.groupHeader){var t=this._site,n=t.selection;this._selectionAllowed(e.index)&&this._selectOnTap()&&(t.tapBehavior===c.TapBehavior.toggleSelect?this._toggleItemSelection(e.index):t.selectionMode!==c.SelectionMode.multi&&n._isIncluded(e.index)||n.set(e.index))}},_toggleItemSelection:function(e){var t=this._site,n=t.selection,i=n._isIncluded(e);t.selectionMode===c.SelectionMode.single?i?n.clear():n.set(e):i?n.remove(e):n.add(e)},_getCurrentPoint:function(e){return n.Windows.UI.Input.PointerPoint.getCurrentPoint(e.pointerId)},_containedInElementWithClass:function(e,t){if(e.parentNode)for(var n=e.parentNode.querySelectorAll("."+t+", ."+t+" *"),i=0,r=n.length;r>i;i++)if(n[i]===e)return!0;return!1},_isSelected:function(e){return this._site.selection._isIncluded(e)},_isInteractive:function(e){return this._containedInElementWithClass(e,"win-interactive")},_shouldSuppressContextMenu:function(e){var t=this._site.containerFromElement(e);return this._selectionAllowed()&&t&&!this._isInteractive(e)},_togglePressed:function(e,t){var n=this._site.pressedEntity.type===c.ObjectType.groupHeader;(n||!u.hasClass(this._site.pressedItemBox,d._nonSelectableClass))&&(this._staticMode(n)||(e?u.addClass(this._site.animatedElement,d._pressedClass):u.removeClass(this._site.animatedElement,d._pressedClass)))},_resetPointerDownStateForPointerId:function(e){this._pointerId===e.pointerId&&this.resetPointerDownState()},resetPointerDownState:function(){this._site.pressedElement=null,u._removeEventListener(t,"pointerup",this._resetPointerDownStateBound),u._removeEventListener(t,"pointercancel",this._resetPointerDownStateBound),this._resetPressedContainer(),this._site.pressedContainer=null,this._site.animatedElement=null,this._site.pressedHeader=null,this._site.pressedItemBox=null,this._site.pressedEntity={type:c.ObjectType.item,index:d._INVALID_INDEX},this._pointerId=null},_releasedElement:function(e){return t.document.elementFromPoint(e.clientX,e.clientY)},_applyUIInBatches:function(e){function t(){n._work.length>0?(n._flushUIBatches(),n._paintedThisFrame=r._requestAnimationFrame(t.bind(n))):n._paintedThisFrame=null}var n=this;this._work.push(e),this._paintedThisFrame||t()},_flushUIBatches:function(){if(this._work.length>0){var e=this._work;this._work=[];for(var t=0;t<e.length;t++)e[t]()}},_selectionAllowed:function(e){var t=void 0!==e?this._site.itemAtIndex(e):null,n=!(t&&u.hasClass(t,d._nonSelectableClass));return n&&this._site.selectionMode!==c.SelectionMode.none},_multiSelection:function(){return this._site.selectionMode===c.SelectionMode.multi},_selectOnTap:function(){return this._site.tapBehavior===c.TapBehavior.toggleSelect||this._site.tapBehavior===c.TapBehavior.directSelect},_staticMode:function(e){return e?this._site.headerTapBehavior===c.GroupHeaderTapBehavior.none:this._site.tapBehavior===c.TapBehavior.none&&this._site.selectionMode===c.SelectionMode.none}},{setAriaSelected:function(e,t){var n="true"===e.getAttribute("aria-selected");t!==n&&e.setAttribute("aria-selected",t)},renderSelection:function(t,n,i,r,o){if(!a._selectionTemplate){a._selectionTemplate=[],a._selectionTemplate.push(e(d._selectionBackgroundClass)),a._selectionTemplate.push(e(d._selectionBorderClass)),a._selectionTemplate.push(e(d._selectionCheckmarkBackgroundClass));var s=e(d._selectionCheckmarkClass);s.textContent=d._SELECTION_CHECKMARK,a._selectionTemplate.push(s)}if(i!==u._isSelectionRendered(t)){if(i){t.insertBefore(a._selectionTemplate[0].cloneNode(!0),t.firstElementChild);for(var l=1,c=a._selectionTemplate.length;c>l;l++)t.appendChild(a._selectionTemplate[l].cloneNode(!0))}else for(var h=t.querySelectorAll(u._selectionPartsSelector),l=0,c=h.length;c>l;l++)t.removeChild(h[l]);u[i?"addClass":"removeClass"](t,d._selectedClass),o&&u[i?"addClass":"removeClass"](o,d._selectedClass)}r&&a.setAriaSelected(n,i)}});return a})})}),i("WinJS/Controls/ListView/_SelectionManager",["exports","../../Core/_Global","../../Core/_Base","../../Promise","../../_Signal","../../Utilities/_UI","../ItemContainer/_Constants"],function(e,t,n,i,r,o,s){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_ItemSet:n.Namespace._lazy(function(){var t=n.Class.define(function(e,t,n){this._listView=e,this._ranges=t,this._itemsCount=n});return t.prototype={getRanges:function(){for(var e=[],t=0,n=this._ranges.length;n>t;t++){var i=this._ranges[t];e.push({firstIndex:i.firstIndex,lastIndex:i.lastIndex,firstKey:i.firstKey,lastKey:i.lastKey})}return e},getItems:function(){return e.getItemsFromRanges(this._listView._itemsManager.dataSource,this._ranges)},isEverything:function(){return this.count()===this._itemsCount},count:function(){for(var e=0,t=0,n=this._ranges.length;n>t;t++){var i=this._ranges[t];e+=i.lastIndex-i.firstIndex+1}return e},getIndices:function(){for(var e=[],t=0,n=this._ranges.length;n>t;t++)for(var i=this._ranges[t],r=i.firstIndex;r<=i.lastIndex;r++)e.push(r);return e}},t}),getItemsFromRanges:function(e,t){function n(){for(var e=[],n=0,r=t.length;r>n;n++)for(var o=t[n],s=o.firstIndex;s<=o.lastIndex;s++)e.push(s);return i.wrap(e)}var r=e.createListBinding(),o=[];return n().then(function(e){for(var t=0;t<e.length;t++)o.push(r.fromIndex(e[t]));return i.join(o).then(function(e){return r.release(),e})})},_Selection:n.Namespace._lazy(function(){function t(e){return e&&0===e.firstIndex&&e.lastIndex===Number.MAX_VALUE}return n.Class.derive(e._ItemSet,function(e,t){this._listView=e,this._itemsCount=-1,this._ranges=[],t&&this.set(t)},{clear:function(){return this._releaseRanges(this._ranges),this._ranges=[],i.wrap()},set:function(e){if(t(e))return this.selectAll();this._releaseRanges(this._ranges),this._ranges=[];var n=this;return this._execute("_set",e).then(function(){return n._ranges.sort(function(e,t){return e.firstIndex-t.firstIndex}),n._ensureKeys()}).then(function(){return n._ensureCount()})},add:function(e){if(t(e))return this.selectAll();var n=this;return this._execute("_add",e).then(function(){return n._ensureKeys()}).then(function(){return n._ensureCount()})},remove:function(e){var t=this;return this._execute("_remove",e).then(function(){return t._ensureKeys()})},selectAll:function(){var e=this;return e._ensureCount().then(function(){if(e._itemsCount){var t={firstIndex:0,lastIndex:e._itemsCount-1};return e._retainRange(t),e._releaseRanges(e._ranges),e._ranges=[t],e._ensureKeys()}})},_execute:function(e,t){function n(e,t,n){var i={};return i["first"+e]=t,i["last"+e]=n,i}function r(t){var n=o._getListBinding(),r=i.join([n.fromKey(t.firstKey),n.fromKey(t.lastKey)]).then(function(n){return n[0]&&n[1]&&(t.firstIndex=n[0].index,t.lastIndex=n[1].index,o[e](t)),t});l.push(r)}for(var o=this,s=!!o._getListBinding().fromKey,a=Array.isArray(t)?t:[t],l=[i.wrap()],u=0,c=a.length;c>u;u++){var d=a[u];"number"==typeof d?this[e](n("Index",d,d)):d&&(s&&void 0!==d.key?r(n("Key",d.key,d.key)):s&&void 0!==d.firstKey&&void 0!==d.lastKey?r(n("Key",d.firstKey,d.lastKey)):void 0!==d.index&&"number"==typeof d.index?this[e](n("Index",d.index,d.index)):void 0!==d.firstIndex&&void 0!==d.lastIndex&&"number"==typeof d.firstIndex&&"number"==typeof d.lastIndex&&this[e](n("Index",d.firstIndex,d.lastIndex)))}return i.join(l)},_set:function(e){this._retainRange(e),this._ranges.push(e)},_add:function(e){for(var t,n,i,r=this,o=null,s=function(e,t){t.lastIndex>e.lastIndex&&(e.lastIndex=t.lastIndex,e.lastKey=t.lastKey,e.lastPromise&&e.lastPromise.release(),e.lastPromise=r._getListBinding().fromIndex(e.lastIndex).retain())},a=0,l=this._ranges.length;l>a;a++){if(t=this._ranges[a],e.firstIndex<t.firstIndex){i=o&&e.firstIndex<o.lastIndex+1,i?(n=a-1,s(o,e)):(this._insertRange(a,e),n=a);break}if(e.firstIndex===t.firstIndex){s(t,e),n=a;break}o=t}if(void 0===n){var u=this._ranges.length?this._ranges[this._ranges.length-1]:null,c=u&&e.firstIndex<u.lastIndex+1;c?s(u,e):(this._retainRange(e),this._ranges.push(e))}else{for(o=null,a=n+1,l=this._ranges.length;l>a;a++){if(t=this._ranges[a],e.lastIndex<t.firstIndex){i=o&&o.lastIndex>e.lastIndex,i&&s(this._ranges[n],o),this._removeRanges(n+1,a-n-1);break}if(e.lastIndex===t.firstIndex){s(this._ranges[n],t),this._removeRanges(n+1,a-n);break}o=t}a>=l&&(s(this._ranges[n],this._ranges[l-1]),this._removeRanges(n+1,l-n-1))}},_remove:function(e){function t(e){return n._getListBinding().fromIndex(e).retain()}for(var n=this,i=[],r=0,o=this._ranges.length;o>r;r++){var s=this._ranges[r];s.lastIndex<e.firstIndex||s.firstIndex>e.lastIndex?i.push(s):s.firstIndex<e.firstIndex&&s.lastIndex>=e.firstIndex&&s.lastIndex<=e.lastIndex?(i.push({firstIndex:s.firstIndex,firstKey:s.firstKey,firstPromise:s.firstPromise,lastIndex:e.firstIndex-1,lastPromise:t(e.firstIndex-1)}),s.lastPromise.release()):s.lastIndex>e.lastIndex&&s.firstIndex>=e.firstIndex&&s.firstIndex<=e.lastIndex?(i.push({firstIndex:e.lastIndex+1,firstPromise:t(e.lastIndex+1),lastIndex:s.lastIndex,lastKey:s.lastKey,lastPromise:s.lastPromise}),s.firstPromise.release()):s.firstIndex<e.firstIndex&&s.lastIndex>e.lastIndex?(i.push({firstIndex:s.firstIndex,firstKey:s.firstKey,firstPromise:s.firstPromise,lastIndex:e.firstIndex-1,lastPromise:t(e.firstIndex-1)}),i.push({firstIndex:e.lastIndex+1,firstPromise:t(e.lastIndex+1),lastIndex:s.lastIndex,lastKey:s.lastKey,lastPromise:s.lastPromise})):(s.firstPromise.release(),s.lastPromise.release())}this._ranges=i},_ensureKeys:function(){for(var e=[i.wrap()],t=this,n=function(e,t){var n=e+"Key";if(t[n])return i.wrap();var r=t[e+"Promise"];return r.then(function(e){e&&(t[n]=e.key)}),r},r=0,o=this._ranges.length;o>r;r++){var s=this._ranges[r];e.push(n("first",s)),e.push(n("last",s))}return i.join(e).then(function(){t._ranges=t._ranges.filter(function(e){return e.firstKey&&e.lastKey})}),i.join(e)},_mergeRanges:function(e,t){e.lastIndex=t.lastIndex,e.lastKey=t.lastKey},_isIncluded:function(e){if(this.isEverything())return!0;for(var t=0,n=this._ranges.length;n>t;t++){var i=this._ranges[t];if(i.firstIndex<=e&&e<=i.lastIndex)return!0}return!1},_ensureCount:function(){var e=this;return this._listView._itemsCount().then(function(t){e._itemsCount=t})},_insertRange:function(e,t){this._retainRange(t),this._ranges.splice(e,0,t)},_removeRanges:function(e,t){for(var n=0;t>n;n++)this._releaseRange(this._ranges[e+n]);this._ranges.splice(e,t)},_retainRange:function(e){e.firstPromise||(e.firstPromise=this._getListBinding().fromIndex(e.firstIndex).retain()),e.lastPromise||(e.lastPromise=this._getListBinding().fromIndex(e.lastIndex).retain())},_retainRanges:function(){for(var e=0,t=this._ranges.length;t>e;e++)this._retainRange(this._ranges[e])},_releaseRange:function(e){e.firstPromise.release(),e.lastPromise.release()},_releaseRanges:function(e){for(var t=0,n=e.length;n>t;++t)this._releaseRange(e[t])},_getListBinding:function(){return this._listView._itemsManager._listBinding}},{supportedForProcessing:!1})}),_SelectionManager:n.Namespace._lazy(function(){var n=function(t){this._listView=t,this._selected=new e._Selection(this._listView),this._pivot=s._INVALID_INDEX,this._focused={type:o.ObjectType.item,index:0},this._pendingChange=i.wrap()};return n.prototype={count:function(){return this._selected.count()},getIndices:function(){return this._selected.getIndices()},getItems:function(){return this._selected.getItems()},getRanges:function(){return this._selected.getRanges()},isEverything:function(){return this._selected.isEverything()},set:function(t){var n=this,o=new r;return this._synchronize(o).then(function(){var r=new e._Selection(n._listView);return r.set(t).then(function(){n._set(r),o.complete()},function(e){return r.clear(),o.complete(),i.wrapError(e)})})},clear:function(){var t=this,n=new r;return this._synchronize(n).then(function(){var r=new e._Selection(t._listView);return r.clear().then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},add:function(e){var t=this,n=new r;return this._synchronize(n).then(function(){var r=t._cloneSelection();return r.add(e).then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},remove:function(e){var t=this,n=new r;return this._synchronize(n).then(function(){var r=t._cloneSelection();return r.remove(e).then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},selectAll:function(){var t=this,n=new r;return this._synchronize(n).then(function(){var r=new e._Selection(t._listView);return r.selectAll().then(function(){t._set(r),n.complete()},function(e){return r.clear(),n.complete(),i.wrapError(e)})})},_synchronize:function(e){var t=this;return this._listView._versionManager.unlocked.then(function(){var n=t._pendingChange;return t._pendingChange=i.join([n,e.promise]).then(function(){}),n})},_reset:function(){this._pivot=s._INVALID_INDEX,this._setFocused({type:o.ObjectType.item,index:0},this._keyboardFocused()),this._pendingChange.cancel(),this._pendingChange=i.wrap(),this._selected.clear(),this._selected=new e._Selection(this._listView)},_dispose:function(){this._selected.clear(),this._selected=null,this._listView=null},_set:function(e){var t=this;return this._fireSelectionChanging(e).then(function(n){return n?(t._selected.clear(),t._selected=e,t._listView._updateSelection(),t._fireSelectionChanged()):e.clear(),n})},_fireSelectionChanging:function(e){var n=t.document.createEvent("CustomEvent"),r=i.wrap();n.initCustomEvent("selectionchanging",!0,!0,{newSelection:e,preventTapBehavior:function(){},setPromise:function(e){r=e}});var o=this._listView._element.dispatchEvent(n);return r.then(function(){return o})},_fireSelectionChanged:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent("selectionchanged",!0,!1,null),this._listView._element.dispatchEvent(e)},_getFocused:function(){return{type:this._focused.type,index:this._focused.index}},_setFocused:function(e,t){this._focused={type:e.type,index:e.index},this._focusedByKeyboard=t},_keyboardFocused:function(){return this._focusedByKeyboard},_updateCount:function(e){this._selected._itemsCount=e},_isIncluded:function(e){return this._selected._isIncluded(e)},_cloneSelection:function(){var t=new e._Selection(this._listView);return t._ranges=this._selected.getRanges(),t._itemsCount=this._selected._itemsCount,t._retainRanges(),t}},n.supportedForProcessing=!1,n})})}),i("WinJS/Controls/ListView/_BrowseMode",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Animations","../../Promise","../../Utilities/_ElementUtilities","../../Utilities/_UI","../ItemContainer/_Constants","../ItemContainer/_ItemEventsHandler","./_SelectionManager"],function(e,t,n,i,r,o,s,a,l,u,c){
"use strict";var d=i._browserStyleEquivalents.transform.scriptName;n.Namespace._moduleDefine(e,"WinJS.UI",{_SelectionMode:n.Namespace._lazy(function(){function e(e,t,n){return Math.max(e,Math.min(t,n))}function r(e,n,i){var r=t.document.createEvent("CustomEvent");return r.initCustomEvent("keyboardnavigating",!0,!0,{oldFocus:n.index,oldFocusType:n.type,newFocus:i.index,newFocusType:i.type}),e.dispatchEvent(r)}var h=n.Class.define(function(e){this.inboundFocusHandled=!1,this._pressedContainer=null,this._pressedItemBox=null,this._pressedHeader=null,this._pressedEntity={type:a.ObjectType.item,index:l._INVALID_INDEX},this._pressedPosition=null,this.initialize(e)},{_dispose:function(){this._itemEventsHandler&&this._itemEventsHandler.dispose(),this._setNewFocusItemOffsetPromise&&this._setNewFocusItemOffsetPromise.cancel()},initialize:function(e){function t(t,n){var i=function(n){return e._view.getAdjacent(n,t)};return i.clampToBounds=n,i}this.site=e,this._keyboardNavigationHandlers={},this._keyboardAcceleratorHandlers={};var n=this.site,i=this;this._itemEventsHandler=new u._ItemEventsHandler(Object.create({containerFromElement:function(e){return n._view.items.containerFrom(e)},indexForItemElement:function(e){return n._view.items.index(e)},indexForHeaderElement:function(e){return n._groups.index(e)},itemBoxAtIndex:function(e){return n._view.items.itemBoxAt(e)},itemAtIndex:function(e){return n._view.items.itemAt(e)},headerAtIndex:function(e){return n._groups.group(e).header},headerFromElement:function(e){return n._groups.headerFrom(e)},containerAtIndex:function(e){return n._view.items.containerAt(e)},isZombie:function(){return n._isZombie()},getItemPosition:function(e){return n._getItemPosition(e)},rtl:function(){return n._rtl()},fireInvokeEvent:function(e,t){return i._fireInvokeEvent(e,t)},verifySelectionAllowed:function(e){return i._verifySelectionAllowed(e)},changeFocus:function(e,t,i,r,o){return n._changeFocus(e,t,i,r,o)},selectRange:function(e,t,n){return i._selectRange(e,t,n)}},{pressedEntity:{enumerable:!0,get:function(){return i._pressedEntity},set:function(e){i._pressedEntity=e}},pressedContainerScaleTransform:{enumerable:!0,get:function(){return i._pressedContainerScaleTransform},set:function(e){i._pressedContainerScaleTransform=e}},pressedContainer:{enumerable:!0,get:function(){return i._pressedContainer},set:function(e){i._pressedContainer=e}},pressedItemBox:{enumerable:!0,get:function(){return i._pressedItemBox},set:function(e){i._pressedItemBox=e}},pressedHeader:{enumerable:!0,get:function(){return i._pressedHeader},set:function(e){return i._pressedHeader=e}},pressedPosition:{enumerable:!0,get:function(){return i._pressedPosition},set:function(e){i._pressedPosition=e}},pressedElement:{enumerable:!0,set:function(e){i._pressedElement=e}},eventHandlerRoot:{enumerable:!0,get:function(){return n._viewport}},selectionMode:{enumerable:!0,get:function(){return n._selectionMode}},accessibleItemClass:{enumerable:!0,get:function(){return l._itemClass}},canvasProxy:{enumerable:!0,get:function(){return n._canvasProxy}},tapBehavior:{enumerable:!0,get:function(){return n._tap}},headerTapBehavior:{enumerable:!0,get:function(){return n._groupHeaderTap}},draggable:{enumerable:!0,get:function(){return n.itemsDraggable||n.itemsReorderable}},selection:{enumerable:!0,get:function(){return n._selection}},customFootprintParent:{enumerable:!0,get:function(){return null}}}));var r=s.Key;this._keyboardNavigationHandlers[r.upArrow]=t(r.upArrow),this._keyboardNavigationHandlers[r.downArrow]=t(r.downArrow),this._keyboardNavigationHandlers[r.leftArrow]=t(r.leftArrow),this._keyboardNavigationHandlers[r.rightArrow]=t(r.rightArrow),this._keyboardNavigationHandlers[r.pageUp]=t(r.pageUp,!0),this._keyboardNavigationHandlers[r.pageDown]=t(r.pageDown,!0),this._keyboardNavigationHandlers[r.home]=function(e){return!i.site._header||e.type!==a.ObjectType.groupHeader&&e.type!==a.ObjectType.footer?o.wrap({type:e.type!==a.ObjectType.footer?e.type:a.ObjectType.groupHeader,index:0}):o.wrap({type:a.ObjectType.header,index:0})},this._keyboardNavigationHandlers[r.end]=function(e){if(!i.site._footer||e.type!==a.ObjectType.groupHeader&&e.type!==a.ObjectType.header){if(e.type===a.ObjectType.groupHeader||e.type===a.ObjectType.header)return o.wrap({type:a.ObjectType.groupHeader,index:n._groups.length()-1});var t=i.site._view.lastItemIndex();return t>=0?o.wrap({type:e.type,index:t}):o.cancel}return o.wrap({type:a.ObjectType.footer,index:0})},this._keyboardAcceleratorHandlers[r.a]=function(){i.site._multiSelection()&&i._selectAll()}},staticMode:function(){return this.site._tap===a.TapBehavior.none&&this.site._selectionMode===a.SelectionMode.none},itemUnrealized:function(e,t){if(this._pressedEntity.type!==a.ObjectType.groupHeader&&(this._pressedEntity.index===e&&this._resetPointerDownState(),this._itemBeingDragged(e)))for(var n=this._draggedItemBoxes.length-1;n>=0;n--)this._draggedItemBoxes[n]===t&&(s.removeClass(t,l._dragSourceClass),this._draggedItemBoxes.splice(n,1))},_fireInvokeEvent:function(e,n){function i(i,o){var s=i.createListBinding(),a=s.fromIndex(e.index),l=o?"groupheaderinvoked":"iteminvoked";a.done(function(){s.release()});var u=t.document.createEvent("CustomEvent");u.initCustomEvent(l,!0,!0,o?{groupHeaderPromise:a,groupHeaderIndex:e.index}:{itemPromise:a,itemIndex:e.index}),n.dispatchEvent(u)&&r.site._defaultInvoke(e)}if(n){var r=this;e.type===a.ObjectType.groupHeader?this.site._groupHeaderTap===a.GroupHeaderTapBehavior.invoke&&e.index!==l._INVALID_INDEX&&i(this.site.groupDataSource,!0):this.site._tap===a.TapBehavior.none||e.index===l._INVALID_INDEX||this.site._isInSelectionMode()||i(this.site.itemDataSource,!1)}},_verifySelectionAllowed:function(e){if(e.type===a.ObjectType.groupHeader)return{canSelect:!1,canTapSelect:!1};var n=e.index,i=this.site,r=this.site._view.items.itemAt(n);if(!i._selectionAllowed()||!i._selectOnTap()||r&&s.hasClass(r,l._nonSelectableClass))return{canSelect:!1,canTapSelect:!1};var u=i._selection._isIncluded(n),c=!i._multiSelection(),d=i._selection._cloneSelection();u?c?d.clear():d.remove(n):c?d.set(n):d.add(n);var h,p=t.document.createEvent("CustomEvent"),m=o.wrap(),f=!1,_=!1;p.initCustomEvent("selectionchanging",!0,!0,{newSelection:d,preventTapBehavior:function(){_=!0},setPromise:function(e){m=e}});var g=i._element.dispatchEvent(p);m.then(function(){f=!0,h=d._isIncluded(n),d.clear()});var v=g&&f&&(u||h);return{canSelect:v,canTapSelect:v&&!_}},_containedInElementWithClass:function(e,t){if(e.parentNode)for(var n=e.parentNode.querySelectorAll("."+t+", ."+t+" *"),i=0,r=n.length;r>i;i++)if(n[i]===e)return!0;return!1},_isDraggable:function(e){return!this._containedInElementWithClass(e,l._nonDraggableClass)},_isInteractive:function(e){return this._containedInElementWithClass(e,"win-interactive")},_resetPointerDownState:function(){this._itemEventsHandler.resetPointerDownState()},onPointerDown:function(e){this._itemEventsHandler.onPointerDown(e)},onclick:function(e){this._itemEventsHandler.onClick(e)},onPointerUp:function(e){this._itemEventsHandler.onPointerUp(e)},onPointerCancel:function(e){this._itemEventsHandler.onPointerCancel(e)},onLostPointerCapture:function(e){this._itemEventsHandler.onLostPointerCapture(e)},onContextMenu:function(e){this._itemEventsHandler.onContextMenu(e)},onMSHoldVisual:function(e){this._itemEventsHandler.onMSHoldVisual(e)},onDataChanged:function(e){this._itemEventsHandler.onDataChanged(e)},_removeTransform:function(e,t){t&&-1!==e.style[d].indexOf(t)&&(e.style[d]=e.style[d].replace(t,""))},_selectAll:function(){var e=[];this.site._view.items.each(function(t,n){n&&s.hasClass(n,l._nonSelectableClass)&&e.push(t)}),this.site._selection.selectAll(),e.length>0&&this.site._selection.remove(e)},_selectRange:function(e,t,n){for(var i=[],r=-1,o=e;t>=o;o++){var a=this.site._view.items.itemAt(o);a&&s.hasClass(a,l._nonSelectableClass)?-1!==r&&(i.push({firstIndex:r,lastIndex:o-1}),r=-1):-1===r&&(r=o)}-1!==r&&i.push({firstIndex:r,lastIndex:t}),i.length>0&&this.site._selection[n?"add":"set"](i)},onDragStart:function(e){if(this._pressedEntity={type:a.ObjectType.item,index:this.site._view.items.index(e.target)},this.site._selection._pivot=l._INVALID_INDEX,this._pressedEntity.index===l._INVALID_INDEX||!this.site.itemsDraggable&&!this.site.itemsReorderable||this.site._view.animating||!this._isDraggable(e.target)||this._pressedElement&&this._isInteractive(this._pressedElement))e.preventDefault();else{this._dragging=!0,this._dragDataTransfer=e.dataTransfer,this._pressedPosition=s._getCursorPos(e),this._dragInfo=null,this._lastEnteredElement=e.target,this.site._selection._isIncluded(this._pressedEntity.index)?this._dragInfo=this.site.selection:(this._draggingUnselectedItem=!0,this._dragInfo=new c._Selection(this.site,[{firstIndex:this._pressedEntity.index,lastIndex:this._pressedEntity.index}]));var n=this.site.itemsReorderable,r=t.document.createEvent("CustomEvent");if(r.initCustomEvent("itemdragstart",!0,!1,{dataTransfer:e.dataTransfer,dragInfo:this._dragInfo}),e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage){var o=this.site._view.items.itemDataAt(this._pressedEntity.index);if(o&&o.container){var u=o.container.getBoundingClientRect();e.dataTransfer.setDragImage(o.container,e.clientX-u.left,e.clientY-u.top)}}this.site.element.dispatchEvent(r),this.site.itemsDraggable&&!this.site.itemsReorderable&&(this._firedDragEnter||this._fireDragEnterEvent(e.dataTransfer)&&(n=!0,this._dragUnderstood=!0)),n&&(this._addedDragOverClass=!0,s.addClass(this.site._element,l._dragOverClass)),this._draggedItemBoxes=[];var d=this,h=e.target;h.addEventListener("dragend",function p(e){h.removeEventListener("dragend",p),d.onDragEnd(e)}),i._yieldForDomModification(function(){if(d._dragging)for(var e=d._dragInfo.getIndices(),t=0,n=e.length;n>t;t++){var i=d.site._view.items.itemDataAt(e[t]);i&&i.itemBox&&d._addDragSourceClass(i.itemBox)}})}},onDragEnter:function(e){var n=this._dragUnderstood;this._lastEnteredElement=e.target,this._exitEventTimer&&(t.clearTimeout(this._exitEventTimer),this._exitEventTimer=0),this._firedDragEnter||this._fireDragEnterEvent(e.dataTransfer)&&(n=!0),(n||this._dragging&&this.site.itemsReorderable)&&(e.preventDefault(),this._dragUnderstood=!0,this._addedDragOverClass||(this._addedDragOverClass=!0,s.addClass(this.site._element,l._dragOverClass))),this._pointerLeftRegion=!1},onDragLeave:function(e){e.target===this._lastEnteredElement&&(this._pointerLeftRegion=!0,this._handleExitEvent())},fireDragUpdateEvent:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent("itemdragchanged",!0,!1,{dataTransfer:this._dragDataTransfer,dragInfo:this._dragInfo}),this.site.element.dispatchEvent(e)},_fireDragEnterEvent:function(e){var n=t.document.createEvent("CustomEvent");n.initCustomEvent("itemdragenter",!0,!0,{dataTransfer:e});var i=!this.site.element.dispatchEvent(n);return this._firedDragEnter=!0,i},_fireDragBetweenEvent:function(e,n,i){var r=t.document.createEvent("CustomEvent");return r.initCustomEvent("itemdragbetween",!0,!0,{index:e,insertAfterIndex:n,dataTransfer:i}),this.site.element.dispatchEvent(r)},_fireDropEvent:function(e,n,i){var r=t.document.createEvent("CustomEvent");return r.initCustomEvent("itemdragdrop",!0,!0,{index:e,insertAfterIndex:n,dataTransfer:i}),this.site.element.dispatchEvent(r)},_handleExitEvent:function(){this._exitEventTimer&&(t.clearTimeout(this._exitEventTimer),this._exitEventTimer=0);var e=this;this._exitEventTimer=t.setTimeout(function(){if(!e.site._disposed&&e._pointerLeftRegion){if(e.site._layout.dragLeave&&e.site._layout.dragLeave(),e._pointerLeftRegion=!1,e._dragUnderstood=!1,e._lastEnteredElement=null,e._lastInsertPoint=null,e._dragBetweenDisabled=!1,e._firedDragEnter){var n=t.document.createEvent("CustomEvent");n.initCustomEvent("itemdragleave",!0,!1,{}),e.site.element.dispatchEvent(n),e._firedDragEnter=!1}e._addedDragOverClass&&(e._addedDragOverClass=!1,s.removeClass(e.site._element,l._dragOverClass)),e._exitEventTimer=0,e._stopAutoScroll()}},40)},_getEventPositionInElementSpace:function(e,t){var n={left:0,top:0};try{n=e.getBoundingClientRect()}catch(i){}var r=s._getComputedStyle(e,null),o=parseInt(r.paddingLeft),a=parseInt(r.paddingTop),l=parseInt(r.borderLeftWidth),u=parseInt(r.borderTopWidth),c=t.clientX,d=t.clientY,h={x:+c===c?c-n.left-o-l:0,y:+d===d?d-n.top-a-u:0};return this.site._rtl()&&(h.x=n.right-n.left-h.x),h},_getPositionInCanvasSpace:function(e){var t=this.site._horizontal()?this.site.scrollPosition:0,n=this.site._horizontal()?0:this.site.scrollPosition,i=this._getEventPositionInElementSpace(this.site.element,e);return{x:i.x+t,y:i.y+n}},_itemBeingDragged:function(e){return this._dragging?this._draggingUnselectedItem&&this._dragInfo._isIncluded(e)||!this._draggingUnselectedItem&&this.site._isSelected(e):!1},_addDragSourceClass:function(e){this._draggedItemBoxes.push(e),s.addClass(e,l._dragSourceClass),e.parentNode&&s.addClass(e.parentNode,l._footprintClass)},renderDragSourceOnRealizedItem:function(e,t){this._itemBeingDragged(e)&&this._addDragSourceClass(t)},onDragOver:function(t){if(this._dragUnderstood){this._pointerLeftRegion=!1,t.preventDefault();var n=this._getPositionInCanvasSpace(t),i=this._getEventPositionInElementSpace(this.site.element,t);if(this._checkAutoScroll(i.x,i.y),this.site._layout.hitTest)if(this._autoScrollFrame)this._lastInsertPoint&&(this.site._layout.dragLeave(),this._lastInsertPoint=null);else{var r=this.site._view.hitTest(n.x,n.y);r.insertAfterIndex=e(-1,this.site._cachedCount-1,r.insertAfterIndex),this._lastInsertPoint&&this._lastInsertPoint.insertAfterIndex===r.insertAfterIndex&&this._lastInsertPoint.index===r.index||(this._dragBetweenDisabled=!this._fireDragBetweenEvent(r.index,r.insertAfterIndex,t.dataTransfer),this._dragBetweenDisabled?this.site._layout.dragLeave():this.site._layout.dragOver(n.x,n.y,this._dragInfo)),this._lastInsertPoint=r}}},_clearDragProperties:function(){if(this._addedDragOverClass&&(this._addedDragOverClass=!1,s.removeClass(this.site._element,l._dragOverClass)),this._draggedItemBoxes){for(var e=0,t=this._draggedItemBoxes.length;t>e;e++)s.removeClass(this._draggedItemBoxes[e],l._dragSourceClass),this._draggedItemBoxes[e].parentNode&&s.removeClass(this._draggedItemBoxes[e].parentNode,l._footprintClass);this._draggedItemBoxes=[]}this.site._layout.dragLeave(),this._dragging=!1,this._dragInfo=null,this._draggingUnselectedItem=!1,this._dragDataTransfer=null,this._lastInsertPoint=null,this._resetPointerDownState(),this._lastEnteredElement=null,this._dragBetweenDisabled=!1,this._firedDragEnter=!1,this._dragUnderstood=!1,this._stopAutoScroll()},onDragEnd:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent("itemdragend",!0,!1,{}),this.site.element.dispatchEvent(e),this._clearDragProperties()},_findFirstAvailableInsertPoint:function(e,t,n){for(var i=e.getIndices(),r=-1,o=this.site._cachedCount,s=i.length,a=-1,l=t,u=0;s>u;u++)if(i[u]===l){r=u,a=u;break}for(;r>=0&&l>=0;)n?(l++,s>r&&i[r+1]===l&&o>l?r++:l>=o?(n=!1,l=t,r=a):r=-1):(l--,r>0&&i[r-1]===l?r--:r=-1);return l},_reorderItems:function(e,t,n,i,r){var o=this.site,s=function(e){n?o._selection.remove({key:e[0].key}):o._selection.set({firstKey:e[0].key,lastKey:e[e.length-1].key}),r&&o.ensureVisible(o._selection._getFocused())};t.getItems().then(function(t){var n=o.itemDataSource;if(-1===e){n.beginEdits();for(var r=t.length-1;r>=0;r--)n.moveToStart(t[r].key);n.endEdits(),s(t)}else{var a=n.createListBinding();a.fromIndex(e).then(function(e){if(a.release(),n.beginEdits(),i)for(var r=0,o=t.length;o>r;r++)n.moveBefore(t[r].key,e.key);else for(var r=t.length-1;r>=0;r--)n.moveAfter(t[r].key,e.key);n.endEdits(),s(t)})}})},onDrop:function(t){if(this._draggedItemBoxes)for(var n=0,i=this._draggedItemBoxes.length;i>n;n++)this._draggedItemBoxes[n].parentNode&&s.removeClass(this._draggedItemBoxes[n].parentNode,l._footprintClass);if(!this._dragBetweenDisabled){var r=this._getPositionInCanvasSpace(t),o=this.site._view.hitTest(r.x,r.y),a=e(-1,this.site._cachedCount-1,o.insertAfterIndex),u=!0;if(this._lastInsertPoint&&this._lastInsertPoint.insertAfterIndex===a&&this._lastInsertPoint.index===o.index||(u=this._fireDragBetweenEvent(o.index,a,t.dataTransfer)),u&&(this._lastInsertPoint=null,this.site._layout.dragLeave(),this._fireDropEvent(o.index,a,t.dataTransfer)&&this._dragging&&this.site.itemsReorderable)){if(this._dragInfo.isEverything()||this.site._groupsEnabled())return;a=this._findFirstAvailableInsertPoint(this._dragInfo,a,!1),this._reorderItems(a,this._dragInfo,this._draggingUnselectedItem)}}this._clearDragProperties(),t.preventDefault()},_checkAutoScroll:function(e,n){var r=this.site._getViewportLength(),o=this.site._horizontal(),a=o?e:n,u=this.site._viewport[o?"scrollWidth":"scrollHeight"],c=Math.floor(this.site.scrollPosition),d=0;if(a<l._AUTOSCROLL_THRESHOLD?d=a-l._AUTOSCROLL_THRESHOLD:a>r-l._AUTOSCROLL_THRESHOLD&&(d=a-(r-l._AUTOSCROLL_THRESHOLD)),d=Math.round(d/l._AUTOSCROLL_THRESHOLD*(l._MAX_AUTOSCROLL_RATE-l._MIN_AUTOSCROLL_RATE)),(0===c&&0>d||c>=u-r&&d>0)&&(d=0),0===d)this._autoScrollDelay&&(t.clearTimeout(this._autoScrollDelay),this._autoScrollDelay=0);else if(!this._autoScrollDelay&&!this._autoScrollFrame){var h=this;this._autoScrollDelay=t.setTimeout(function(){if(h._autoScrollRate){h._lastDragTimeout=i._now();var e=function(){if(!h._autoScrollRate&&h._autoScrollFrame||h.site._disposed)h._stopAutoScroll();else{var t=i._now(),n=h._autoScrollRate*((t-h._lastDragTimeout)/1e3);n=0>n?Math.min(-1,n):Math.max(1,n);var r={};r[h.site._scrollProperty]=h.site._viewportScrollPosition+n,s.setScrollPosition(h.site._viewport,r),h._lastDragTimeout=t,h._autoScrollFrame=i._requestAnimationFrame(e)}};h._autoScrollFrame=i._requestAnimationFrame(e)}},l._AUTOSCROLL_DELAY)}this._autoScrollRate=d},_stopAutoScroll:function(){this._autoScrollDelay&&(t.clearTimeout(this._autoScrollDelay),this._autoScrollDelay=0),this._autoScrollRate=0,this._autoScrollFrame=0},onKeyDown:function(e){function t(e,t,s){function c(u){var c=!0,h=!1;if(s?e.index=Math.max(0,Math.min(u,e.index)):(e.index<0||e.index>u)&&(h=!0),!h&&(d.index!==e.index||d.type!==e.type)){var m=r(i._element,d,e);m&&(c=!1,n._setNewFocusItemOffsetPromise&&n._setNewFocusItemOffsetPromise.cancel(),i._batchViewUpdates(l._ViewChange.realize,l._ScrollToPriority.high,function(){return n._setNewFocusItemOffsetPromise=i._getItemOffset(d,!0).then(function(r){r=i._convertFromCanvasCoordinates(r);var s=r.end<=i.scrollPosition||r.begin>=i.scrollPosition+i._getViewportLength()-1;return n._setNewFocusItemOffsetPromise=i._getItemOffset(e).then(function(r){n._setNewFocusItemOffsetPromise=null;var a={position:i.scrollPosition,direction:"right"};return s&&(i._selection._setFocused(e,!0),r=i._convertFromCanvasCoordinates(r),e.index>d.index?(a.direction="right",a.position=r.end-i._getViewportLength()):(a.direction="left",a.position=r.begin)),i._changeFocus(e,t,p,s,!0),s?a:o.cancel},function(n){return i._changeFocus(e,t,p,!0,!0),o.wrapError(n)}),n._setNewFocusItemOffsetPromise},function(n){return i._changeFocus(e,t,p,!0,!0),o.wrapError(n)}),n._setNewFocusItemOffsetPromise},!0))}return c&&(i._selection._setFocused(d,!0),i.ensureVisible(d)),h?{type:a.ObjectType.item,index:l._INVALID_INDEX}:e}return e.type===a.ObjectType.item?o.wrap(u.lastItemIndex()).then(c):e.type===a.ObjectType.groupHeader?o.wrap(i._groups.length()-1).then(c):o.wrap(0).then(c)}var n=this,i=this.site,u=i._view,d=i._selection._getFocused(),h=!0,p=e.ctrlKey,m=s.Key,f=e.keyCode,_=i._rtl();if(!this._isInteractive(e.target)){if(e.ctrlKey&&!e.altKey&&!e.shiftKey&&this._keyboardAcceleratorHandlers[f]&&this._keyboardAcceleratorHandlers[f](),i.itemsReorderable&&!e.ctrlKey&&e.altKey&&e.shiftKey&&d.type===a.ObjectType.item&&(f===m.leftArrow||f===m.rightArrow||f===m.upArrow||f===m.downArrow)){var g=i._selection,v=d.index,y=!1,b=!0;if(!g.isEverything()){if(!g._isIncluded(v)){var C=i._view.items.itemAt(v);C&&s.hasClass(C,l._nonDraggableClass)?b=!1:(y=!0,g=new c._Selection(this.site,[{firstIndex:v,lastIndex:v}]))}if(b){var w=v;f===m.rightArrow?w+=_?-1:1:f===m.leftArrow?w+=_?1:-1:f===m.upArrow?w--:w++;var I=w>v,S=I;I&&w>=this.site._cachedCount&&(S=!1,w=this.site._cachedCount-1),w=this._findFirstAvailableInsertPoint(g,w,S),w=Math.min(Math.max(-1,w),this.site._cachedCount-1);var E=w-(I||-1===w?0:1),x=w,P=this.site._groupsEnabled();if(P){var k=this.site._groups,T=w>-1?k.groupFromItem(w):0;I?k.group(T).startIndex===w&&E--:T<k.length()-1&&w===k.group(T+1).startIndex-1&&E++}if(this._fireDragBetweenEvent(x,E,null)&&this._fireDropEvent(x,E,null)){if(P)return;this._reorderItems(w,g,y,!I,!0)}}}}else if(e.altKey)h=!1;else if(this._keyboardNavigationHandlers[f])this._keyboardNavigationHandlers[f](d).then(function(r){if(r.index!==d.index||r.type!==d.type){var o=n._keyboardNavigationHandlers[f].clampToBounds;r.type!==a.ObjectType.groupHeader&&e.shiftKey&&i._selectionAllowed()&&i._multiSelection()?(i._selection._pivot===l._INVALID_INDEX&&(i._selection._pivot=d.index),t(r,!0,o).then(function(t){if(t.index!==l._INVALID_INDEX){var r=Math.min(t.index,i._selection._pivot),o=Math.max(t.index,i._selection._pivot),s=e.ctrlKey||i._tap===a.TapBehavior.toggleSelect;n._selectRange(r,o,s)}})):(i._selection._pivot=l._INVALID_INDEX,t(r,!1,o))}else h=!1});else if(e.ctrlKey||f!==m.enter)d.type!==a.ObjectType.groupHeader&&(e.ctrlKey&&f===m.enter||f===m.space)?(this._itemEventsHandler.toggleSelectionIfAllowed(d.index),i._changeFocus(d,!0,p,!1,!0)):f===m.escape&&i._selection.count()>0?(i._selection._pivot=l._INVALID_INDEX,i._selection.clear()):h=!1;else{var M=d.type===a.ObjectType.groupHeader?i._groups.group(d.index).header:i._view.items.itemBoxAt(d.index);if(M){d.type===a.ObjectType.groupHeader?(this._pressedHeader=M,this._pressedItemBox=null,this._pressedContainer=null):(this._pressedItemBox=M,this._pressedContainer=i._view.items.containerAt(d.index),this._pressedHeader=null);var A=this._verifySelectionAllowed(d);A.canTapSelect&&this._itemEventsHandler.handleTap(d),this._fireInvokeEvent(d,M)}}this._keyDownHandled=h,h&&(e.stopPropagation(),e.preventDefault())}f===m.tab&&(this.site._keyboardFocusInbound=!0)},onKeyUp:function(e){this._keyDownHandled&&(e.stopPropagation(),e.preventDefault())},onTabEntered:function(e){if(0!==this.site._groups.length()||this.site._hasHeaderOrFooter){var t=this.site,n=t._selection._getFocused(),i=e.detail,o=!t._hasKeyboardFocus||e.target===t._viewport;if(o)if(this.inboundFocusHandled=!0,n.index=n.index===l._INVALID_INDEX?0:n.index,i||!this.site._supportsGroupHeaderKeyboarding&&!this.site._hasHeaderOrFooter){var s={type:a.ObjectType.item};n.type===a.ObjectType.groupHeader?(s.index=t._groupFocusCache.getIndexForGroup(n.index),r(t._element,n,s)?t._changeFocus(s,!0,!1,!1,!0):t._changeFocus(n,!0,!1,!1,!0)):(s.index=n.type!==a.ObjectType.item?t._groupFocusCache.getLastFocusedItemIndex():n.index,t._changeFocus(s,!0,!1,!1,!0)),e.preventDefault()}else{var s={type:a.ObjectType.groupHeader};this.site._hasHeaderOrFooter?this.site._lastFocusedElementInGroupTrack.type===a.ObjectType.groupHeader&&this.site._supportsGroupHeaderKeyboarding?(s.index=t._groups.groupFromItem(n.index),r(t._element,n,s)?t._changeFocus(s,!0,!1,!1,!0):t._changeFocus(n,!0,!1,!1,!0)):(s.type=this.site._lastFocusedElementInGroupTrack.type,s.index=0,t._changeFocus(s,!0,!1,!1,!0)):n.type!==a.ObjectType.groupHeader&&this.site._supportsGroupHeaderKeyboarding?(s.index=t._groups.groupFromItem(n.index),r(t._element,n,s)?t._changeFocus(s,!0,!1,!1,!0):t._changeFocus(n,!0,!1,!1,!0)):(s.index=n.index,t._changeFocus(s,!0,!1,!1,!0)),e.preventDefault()}}},onTabExiting:function(e){if(this.site._hasHeaderOrFooter||this.site._supportsGroupHeaderKeyboarding&&0!==this.site._groups.length()){var t=this.site,n=t._selection._getFocused(),i=e.detail;if(i){var o=null;if(n.type===a.ObjectType.item){var s=this.site._lastFocusedElementInGroupTrack.type;if(s!==a.ObjectType.header&&s!==a.ObjectType.footer&&this.site._supportsGroupHeaderKeyboarding)var o={type:a.ObjectType.groupHeader,index:t._groups.groupFromItem(n.index)};else var o={type:s===a.ObjectType.item?a.ObjectType.header:s,index:0}}o&&r(t._element,n,o)&&(t._changeFocus(o,!0,!1,!1,!0),e.preventDefault())}else if(!i&&n.type!==a.ObjectType.item){var l=0;l=n.type===a.ObjectType.groupHeader?t._groupFocusCache.getIndexForGroup(n.index):n.type===a.ObjectType.header?0:t._view.lastItemIndex();var o={type:a.ObjectType.item,index:l};r(t._element,n,o)&&(t._changeFocus(o,!0,!1,!1,!0),e.preventDefault())}}}});return h})})}),i("WinJS/Controls/ListView/_ErrorMessages",["exports","../../Core/_Base","../../Core/_Resources"],function(e,t,n){"use strict";t.Namespace._moduleDefine(e,null,{modeIsInvalid:{get:function(){return"Invalid argument: mode must be one of following values: 'none', 'single' or 'multi'."}},loadingBehaviorIsDeprecated:{get:function(){return"Invalid configuration: loadingBehavior is deprecated. The control will default this property to 'randomAccess'. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},pagesToLoadIsDeprecated:{get:function(){return"Invalid configuration: pagesToLoad is deprecated. The control will not use this property. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},pagesToLoadThresholdIsDeprecated:{get:function(){return"Invalid configuration: pagesToLoadThreshold is deprecated.  The control will not use this property. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},automaticallyLoadPagesIsDeprecated:{get:function(){return"Invalid configuration: automaticallyLoadPages is deprecated. The control will default this property to false. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},invalidTemplate:{get:function(){return"Invalid template: Templates must be created before being passed to the ListView, and must contain a valid tree of elements."}},loadMorePagesIsDeprecated:{get:function(){return"loadMorePages is deprecated. Invoking this function will not have any effect. Please refer to the 'ListView loading behaviors' SDK Sample for guidance on how to implement incremental load behavior."}},disableBackdropIsDeprecated:{get:function(){return"Invalid configuration: disableBackdrop is deprecated. Style: .win-listview .win-container.win-backdrop { background-color:transparent; } instead."}},backdropColorIsDeprecated:{get:function(){return"Invalid configuration: backdropColor is deprecated. Style: .win-listview .win-container.win-backdrop { rgba(155,155,155,0.23); } instead."}},itemInfoIsDeprecated:{get:function(){return"GridLayout.itemInfo may be altered or unavailable in future versions. Instead, use CellSpanningLayout."}},groupInfoIsDeprecated:{get:function(){return"GridLayout.groupInfo may be altered or unavailable in future versions. Instead, use CellSpanningLayout."}},resetItemIsDeprecated:{get:function(){return"resetItem may be altered or unavailable in future versions. Instead, mark the element as disposable using WinJS.Utilities.markDisposable."}},resetGroupHeaderIsDeprecated:{get:function(){return"resetGroupHeader may be altered or unavailable in future versions. Instead, mark the header element as disposable using WinJS.Utilities.markDisposable."}},maxRowsIsDeprecated:{get:function(){return"GridLayout.maxRows may be altered or unavailable in future versions. Instead, use the maximumRowsOrColumns property."}},swipeOrientationDeprecated:{get:function(){return"Invalid configuration: swipeOrientation is deprecated. The control will default this property to 'none'"}},swipeBehaviorDeprecated:{get:function(){return"Invalid configuration: swipeBehavior is deprecated. The control will default this property to 'none'"}}})}),i("WinJS/Controls/ListView/_GroupFocusCache",["exports","../../Core/_Base"],function(e,t){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_GroupFocusCache:t.Namespace._lazy(function(){return t.Class.define(function(e){this._listView=e,this.clear()},{updateCache:function(e,t,n){this._lastFocusedItemKey=t,this._lastFocusedItemIndex=n,n=""+n,this._itemToIndex[t]=n,this._groupToItem[e]=t},deleteItem:function(e){if(e===this._lastFocusedItemKey&&(this._lastFocusedItemKey=null,this._lastFocusedItemIndex=0),this._itemToIndex[e])for(var t=this,n=Object.keys(this._groupToItem),i=0,r=n.length;r>i;i++){var o=n[i];if(t._groupToItem[o]===e){t.deleteGroup(o);break}}},deleteGroup:function(e){var t=this._groupToItem[e];t&&delete this._itemToIndex[t],delete this._groupToItem[e]},updateItemIndex:function(e,t){e===this._lastFocusedItemKey&&(this._lastFocusedItemIndex=t),this._itemToIndex[e]&&(this._itemToIndex[e]=""+t)},getIndexForGroup:function(e){var t=this._listView._groups.group(e).key,n=this._groupToItem[t];return n&&this._itemToIndex[n]?+this._itemToIndex[n]:this._listView._groups.fromKey(t).group.startIndex},clear:function(){this._groupToItem={},this._itemToIndex={},this._lastFocusedItemIndex=0,this._lastFocusedItemKey=null},getLastFocusedItemIndex:function(){return this._lastFocusedItemIndex}})}),_UnsupportedGroupFocusCache:t.Namespace._lazy(function(){return t.Class.define(null,{updateCache:function(e,t,n){this._lastFocusedItemKey=t,this._lastFocusedItemIndex=n},deleteItem:function(e){e===this._lastFocusedItemKey&&(this._lastFocusedItemKey=null,this._lastFocusedItemIndex=0)},deleteGroup:function(){},updateItemIndex:function(e,t){e===this._lastFocusedItemKey&&(this._lastFocusedItemIndex=t)},getIndexForGroup:function(){return 0},clear:function(){this._lastFocusedItemIndex=0,this._lastFocusedItemKey=null},getLastFocusedItemIndex:function(){return this._lastFocusedItemIndex}})})})}),i("WinJS/Controls/ListView/_GroupsContainer",["exports","../../Core/_Base","../../Promise","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_ItemsManager","../../Utilities/_UI","../ItemContainer/_Constants"],function(e,t,n,i,r,o,s,a){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_GroupsContainerBase:t.Namespace._lazy(function(){return t.Class.define(function(){},{index:function(e){var t=this.headerFrom(e);if(t)for(var n=0,i=this.groups.length;i>n;n++)if(t===this.groups[n].header)return n;return a._INVALID_INDEX},headerFrom:function(e){for(;e&&!r.hasClass(e,a._headerClass);)e=e.parentNode;return e},requestHeader:function(e){this._waitingHeaderRequests=this._waitingHeaderRequests||{},this._waitingHeaderRequests[e]||(this._waitingHeaderRequests[e]=[]);var t=this;return new n(function(n){var i=t.groups[e];i&&i.header?n(i.header):t._waitingHeaderRequests[e].push(n)})},notify:function(e,t){if(this._waitingHeaderRequests&&this._waitingHeaderRequests[e]){for(var n=this._waitingHeaderRequests[e],i=0,r=n.length;r>i;i++)n[i](t);this._waitingHeaderRequests[e]=[]}},groupFromImpl:function(e,t,n){if(e>t)return null;var i=e+Math.floor((t-e)/2),r=this.groups[i];return n(r,i)?this.groupFromImpl(e,i-1,n):t>i&&!n(this.groups[i+1],i+1)?this.groupFromImpl(i+1,t,n):i},groupFrom:function(e){if(this.groups.length>0){var t=this.groups.length-1,n=this.groups[t];return e(n,t)?this.groupFromImpl(0,this.groups.length-1,e):t}return null},groupFromItem:function(e){return this.groupFrom(function(t){return e<t.startIndex})},groupFromOffset:function(e){return this.groupFrom(function(t){return e<t.offset})},group:function(e){return this.groups[e]},length:function(){return this.groups.length},cleanUp:function(){if(this.listBinding){for(var e=0,t=this.groups.length;t>e;e++){var n=this.groups[e];n.userData&&this.listBinding.releaseItem(n.userData)}this.listBinding.release()}},_dispose:function(){this.cleanUp()},synchronizeGroups:function(){var e=this;return this.pendingChanges=[],this.ignoreChanges=!0,this.groupDataSource.invalidateAll().then(function(){return n.join(e.pendingChanges)}).then(function(){return e._listView._ifZombieDispose()?n.cancel:void 0}).then(function(){e.ignoreChanges=!1},function(t){return e.ignoreChanges=!1,
n.wrapError(t)})},fromKey:function(e){for(var t=0,n=this.groups.length;n>t;t++){var i=this.groups[t];if(i.key===e)return{group:i,index:t}}return null},fromHandle:function(e){for(var t=0,n=this.groups.length;n>t;t++){var i=this.groups[t];if(i.handle===e)return{group:i,index:t}}return null}})}),_UnvirtualizedGroupsContainer:t.Namespace._lazy(function(){return t.Class.derive(e._GroupsContainerBase,function(e,t){this._listView=e,this.groupDataSource=t,this.groups=[],this.pendingChanges=[],this.dirty=!0;var n=this,o={beginNotifications:function(){n._listView._versionManager.beginNotifications()},endNotifications:function(){n._listView._versionManager.endNotifications(),n._listView._ifZombieDispose()||!n.ignoreChanges&&n._listView._groupsChanged&&n._listView._scheduleUpdate()},indexChanged:function(){n._listView._versionManager.receivedNotification(),n._listView._ifZombieDispose()||this.scheduleUpdate()},itemAvailable:function(){},countChanged:function(e){n._listView._versionManager.receivedNotification(),n._listView._writeProfilerMark("groupCountChanged("+e+"),info"),n._listView._ifZombieDispose()||this.scheduleUpdate()},changed:function(e){if(n._listView._versionManager.receivedNotification(),!n._listView._ifZombieDispose()){var t=n.fromKey(e.key);t&&(n._listView._writeProfilerMark("groupChanged("+t.index+"),info"),t.group.userData=e,t.group.startIndex=e.firstItemIndexHint,this.markToRemove(t.group)),this.scheduleUpdate()}},removed:function(e){if(n._listView._versionManager.receivedNotification(),n._listView._groupRemoved(e),!n._listView._ifZombieDispose()){var t=n.fromHandle(e);if(t){n._listView._writeProfilerMark("groupRemoved("+t.index+"),info"),n.groups.splice(t.index,1);var i=n.groups.indexOf(t.group,t.index);i>-1&&n.groups.splice(i,1),this.markToRemove(t.group)}this.scheduleUpdate()}},inserted:function(e,t,i){if(n._listView._versionManager.receivedNotification(),!n._listView._ifZombieDispose()){n._listView._writeProfilerMark("groupInserted,info");var r=this;e.retain().then(function(o){var s;if(s=t||i||n.groups.length?r.findIndex(t,i):0,-1!==s){var a={key:o.key,startIndex:o.firstItemIndexHint,userData:o,handle:e.handle};n.groups.splice(s,0,a)}r.scheduleUpdate()}),n.pendingChanges.push(e)}},moved:function(e,t,i){if(n._listView._versionManager.receivedNotification(),!n._listView._ifZombieDispose()){n._listView._writeProfilerMark("groupMoved,info");var r=this;e.then(function(o){var s=r.findIndex(t,i),a=n.fromKey(o.key);if(a)n.groups.splice(a.index,1),-1!==s&&(a.index<s&&s--,a.group.key=o.key,a.group.userData=o,a.group.startIndex=o.firstItemIndexHint,n.groups.splice(s,0,a.group));else if(-1!==s){var l={key:o.key,startIndex:o.firstItemIndexHint,userData:o,handle:e.handle};n.groups.splice(s,0,l),e.retain()}r.scheduleUpdate()}),n.pendingChanges.push(e)}},reload:function(){n._listView._versionManager.receivedNotification(),n._listView._ifZombieDispose()||n._listView._processReload()},markToRemove:function(e){if(e.header){var t=e.header;e.header=null,e.left=-1,e.width=-1,e.decorator=null,e.tabIndex=-1,t.tabIndex=-1,n._listView._groupsToRemove[r._uniqueID(t)]={group:e,header:t}}},scheduleUpdate:function(){n.dirty=!0,n.ignoreChanges||(n._listView._groupsChanged=!0)},findIndex:function(e,t){var i,r=-1;return e&&(i=n.fromHandle(e),i&&(r=i.index+1)),-1===r&&t&&(i=n.fromHandle(t),i&&(r=i.index)),r},removeElements:function(e){if(e.header){var t=e.header.parentNode;t&&(i.disposeSubTree(e.header),t.removeChild(e.header)),e.header=null,e.left=-1,e.width=-1}}};this.listBinding=this.groupDataSource.createListBinding(o)},{initialize:function(){this.initializePromise&&this.initializePromise.cancel(),this._listView._writeProfilerMark("GroupsContainer_initialize,StartTM");var e=this;return this.initializePromise=this.groupDataSource.getCount().then(function(t){for(var i=[],r=0;t>r;r++)i.push(e.listBinding.fromIndex(r).retain());return n.join(i)}).then(function(t){e.groups=[];for(var n=0,i=t.length;i>n;n++){var r=t[n];e.groups.push({key:r.key,startIndex:r.firstItemIndexHint,handle:r.handle,userData:r})}e._listView._writeProfilerMark("GroupsContainer_initialize groups("+t.length+"),info"),e._listView._writeProfilerMark("GroupsContainer_initialize,StopTM")},function(t){return e._listView._writeProfilerMark("GroupsContainer_initialize,StopTM"),n.wrapError(t)}),this.initializePromise},renderGroup:function(e){if(this._listView.groupHeaderTemplate){var t=this.groups[e];return n.wrap(this._listView._groupHeaderRenderer(n.wrap(t.userData))).then(o._normalizeRendererReturn)}return n.wrap(null)},setDomElement:function(e,t){this.groups[e].header=t,this.notify(e,t)},removeElements:function(){for(var e=this._listView._groupsToRemove||{},t=Object.keys(e),n=!1,r=this._listView._selection._getFocused(),o=0,a=t.length;a>o;o++){var l=e[t[o]],u=l.header,c=l.group;if(n||r.type!==s.ObjectType.groupHeader||c.userData.index!==r.index||(this._listView._unsetFocusOnItem(),n=!0),u){var d=u.parentNode;d&&(i._disposeElement(u),d.removeChild(u))}}n&&this._listView._setFocusOnItem(r),this._listView._groupsToRemove={}},resetGroups:function(){for(var e=this.groups.slice(0),t=0,n=e.length;n>t;t++){var i=e[t];this.listBinding&&i.userData&&this.listBinding.releaseItem(i.userData)}this.groups.length=0,this.dirty=!0}})}),_NoGroups:t.Namespace._lazy(function(){return t.Class.derive(e._GroupsContainerBase,function(e){this._listView=e,this.groups=[{startIndex:0}],this.dirty=!0},{synchronizeGroups:function(){return n.wrap()},addItem:function(){return n.wrap(this.groups[0])},resetGroups:function(){this.groups=[{startIndex:0}],delete this.pinnedItem,delete this.pinnedOffset,this.dirty=!0},renderGroup:function(){return n.wrap(null)},ensureFirstGroup:function(){return n.wrap(this.groups[0])},groupOf:function(){return n.wrap(this.groups[0])},removeElements:function(){}})})})}),i("WinJS/Controls/ListView/_Helpers",["exports","../../Core/_Base","../ItemContainer/_Constants"],function(e,t,n){"use strict";function i(e){return Array.prototype.slice.call(e)}function r(e,t){if("string"==typeof e)return r([e],t);var n=new Array(Math.floor(t/e.length)+1).join(e.join(""));return n+=e.slice(0,t%e.length).join("")}function o(e,t){var i,o=n._containerEvenClass,s=n._containerOddClass,a=t%2===0?[o,s]:[s,o],l=["<div class='win-container "+a[0]+" win-backdrop'></div>","<div class='win-container "+a[1]+" win-backdrop'></div>"];return i=r(l,e)}t.Namespace._moduleDefine(e,"WinJS.UI",{_nodeListToArray:i,_repeat:r,_stripedContainers:o})}),i("WinJS/Controls/ListView/_ItemsContainer",["exports","../../Core/_Base","../../Promise","../../Utilities/_ElementUtilities","../ItemContainer/_Constants"],function(e,t,n,i,r){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_ItemsContainer:t.Namespace._lazy(function(){var e=function(e){this.site=e,this._itemData={},this.waitingItemRequests={}};return e.prototype={requestItem:function(e){this.waitingItemRequests[e]||(this.waitingItemRequests[e]=[]);var t=this,i=new n(function(n){var i=t._itemData[e];i&&!i.detached&&i.element?n(i.element):t.waitingItemRequests[e].push(n)});return i},removeItem:function(e){delete this._itemData[e]},removeItems:function(){this._itemData={},this.waitingItemRequests={}},setItemAt:function(e,t){this._itemData[e]=t,t.detached||this.notify(e,t)},notify:function(e,t){if(this.waitingItemRequests[e]){for(var n=this.waitingItemRequests[e],i=0;i<n.length;i++)n[i](t.element);this.waitingItemRequests[e]=[]}},elementAvailable:function(e){var t=this._itemData[e];t.detached=!1,this.notify(e,t)},itemAt:function(e){var t=this._itemData[e];return t?t.element:null},itemDataAt:function(e){return this._itemData[e]},containerAt:function(e){var t=this._itemData[e];return t?t.container:null},itemBoxAt:function(e){var t=this._itemData[e];return t?t.itemBox:null},itemBoxFrom:function(e){for(;e&&!i.hasClass(e,r._itemBoxClass);)e=e.parentNode;return e},containerFrom:function(e){for(;e&&!i.hasClass(e,r._containerClass);)e=e.parentNode;return e},index:function(e){var t=this.containerFrom(e);if(t)for(var n in this._itemData)if(this._itemData[n].container===t)return parseInt(n,10);return r._INVALID_INDEX},each:function(e){for(var t in this._itemData)if(this._itemData.hasOwnProperty(t)){var n=this._itemData[t];e(parseInt(t,10),n.element,n)}},eachIndex:function(e){for(var t in this._itemData)if(e(parseInt(t,10)))break},count:function(){return Object.keys(this._itemData).length}},e})})}),i("WinJS/Controls/ListView/_Layouts",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations/_TransitionAnimation","../../Promise","../../Scheduler","../../_Signal","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_SafeHtml","../../Utilities/_UI","../ItemContainer/_Constants","./_ErrorMessages"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_){"use strict";function g(e){return"_win-dynamic-"+e+"-"+N++}function v(){var e,t,n,i=R.sheet.cssRules,r=F.length;for(e=0;r>e;e++)for(n="."+F[e]+" ",t=i.length-1;t>=0;t--)-1!==i[t].selectorText.indexOf(n)&&R.sheet.deleteRule(t);F=[]}function y(e,t,n,i){v();var r="."+f._listViewClass+" ."+e+" "+n+" { "+i+"}",o="_addDynamicCssRule:"+e+",info";t?t._writeProfilerMark(o):s("WinJS.UI.ListView:Layout"+o),R.sheet.insertRule(r,0)}function b(e){F.push(e)}function C(e,t,n){return Math.max(e,Math.min(t,n))}function w(e,t){return h.convertToPixels(e,h._getComputedStyle(e,null)[t])}function I(e,t){return w(t,"margin"+e)+w(t,"border"+e+"Width")+w(t,"padding"+e)}function S(e){return I("Top",e)+I("Bottom",e)}function E(e){return I("Left",e)+I("Right",e)}function x(e,t){if(e.items)for(var n=0,i=e.items.length;i>n;n++)t(e.items[n],n);else for(var r=0,o=0;r<e.itemsBlocks.length;r++)for(var s=e.itemsBlocks[r],n=0,i=s.items.length;i>n;n++)t(s.items[n],o++)}function P(e,t){if(0>t)return null;if(e.items)return t<e.items.length?e.items[t]:null;var n=e.itemsBlocks[0].items.length,i=Math.floor(t/n),r=t%n;return i<e.itemsBlocks.length&&r<e.itemsBlocks[i].items.length?e.itemsBlocks[i].items[r]:null}function k(e,t){for(var n,i=0,r=t.length;r>i;i++)if(t[i].itemsContainer.element===e){n=t[i].itemsContainer;break}return n}function T(e){var t,n;return e.itemsBlocks?(t=e.itemsBlocks.length,n=t>0?e.itemsBlocks[0].items.length*(t-1)+e.itemsBlocks[t-1].items.length:0):n=e.items.length,n}function M(e){if(!V){var n=t.document.createElement("div");n.style.width="500px",n.style.visibility="hidden";var i=t.document.createElement("div");i.style.cssText+="width: 500px; height: 200px; display: -webkit-flex; display: flex",p.setInnerHTMLUnsafe(i,"<div style='height: 100%; display: -webkit-flex; display: flex; flex-flow: column wrap; align-content: flex-start; -webkit-flex-flow: column wrap; -webkit-align-content: flex-start'><div style='width: 100px; height: 100px'></div><div style='width: 100px; height: 100px'></div><div style='width: 100px; height: 100px'></div></div>"),n.appendChild(i),e.viewport.insertBefore(n,e.viewport.firstChild);var r=n.offsetWidth>0,o=200;r&&(V={supportsCSSGrid:!!("-ms-grid-row"in t.document.documentElement.style),nestedFlexTooLarge:i.firstElementChild.offsetWidth>o,nestedFlexTooSmall:i.firstElementChild.offsetWidth<o}),e.readyToMeasure(),e.viewport.removeChild(n)}return V}function A(e){return l.is(e)?{realizedRangeComplete:e,layoutComplete:e}:"object"==typeof e&&e&&e.layoutComplete?e:{realizedRangeComplete:l.wrap(),layoutComplete:l.wrap()}}function O(e){return{left:w(e,"marginLeft"),right:w(e,"marginRight"),top:w(e,"marginTop"),bottom:w(e,"marginBottom")}}var D=h.Key,L=h._uniqueID,B={get itemInfoIsInvalid(){return"Invalid argument: An itemInfo function must be provided which returns an object with numeric width and height properties."},get groupInfoResultIsInvalid(){return"Invalid result: groupInfo result for cell spanning groups must include the following numeric properties: cellWidth and cellHeight."}},R=t.document.createElement("style");t.document.head.appendChild(R);var N=0,F=[],z=i._browserStyleEquivalents,H=z.transform,W=i._browserStyleEquivalents.transition.scriptName,U=H.cssName+" cubic-bezier(0.1, 0.9, 0.2, 1) 167ms",j=12,V=null;n.Namespace._moduleDefine(e,"WinJS.UI",{Layout:n.Class.define(function(){}),_LayoutCommon:n.Namespace._lazy(function(){return n.Class.derive(e.Layout,null,{groupHeaderPosition:{enumerable:!0,get:function(){return this._groupHeaderPosition},set:function(e){this._groupHeaderPosition=e,this._invalidateLayout()}},initialize:function(e,t){e._writeProfilerMark("Layout:initialize,info"),this._inListMode||h.addClass(e.surface,f._gridLayoutClass),this._backdropColorClassName&&h.addClass(e.surface,this._backdropColorClassName),this._disableBackdropClassName&&h.addClass(e.surface,this._disableBackdropClassName),this._groups=[],this._groupMap={},this._oldGroupHeaderPosition=null,this._usingStructuralNodes=!1,this._site=e,this._groupsEnabled=t,this._resetAnimationCaches(!0)},orientation:{enumerable:!0,get:function(){return this._orientation},set:function(e){this._orientation=e,this._horizontal="horizontal"===e,this._invalidateLayout()}},uninitialize:function(){function e(e){var t,n=e.length;for(t=0;n>t;t++)e[t].cleanUp(!0)}var t="Layout:uninitialize,info";this._elementsToMeasure={},this._site?(this._site._writeProfilerMark(t),h.removeClass(this._site.surface,f._gridLayoutClass),h.removeClass(this._site.surface,f._headerPositionTopClass),h.removeClass(this._site.surface,f._headerPositionLeftClass),h.removeClass(this._site.surface,f._structuralNodesClass),h.removeClass(this._site.surface,f._singleItemsBlockClass),h.removeClass(this._site.surface,f._noCSSGrid),this._site.surface.style.cssText="",this._groups&&(e(this._groups),this._groups=null,this._groupMap=null),this._layoutPromise&&(this._layoutPromise.cancel(),this._layoutPromise=null),this._resetMeasurements(),this._oldGroupHeaderPosition=null,this._usingStructuralNodes=!1,this._envInfo=null,this._backdropColorClassName&&(h.removeClass(this._site.surface,this._backdropColorClassName),b(this._backdropColorClassName),this._backdropColorClassName=null),this._disableBackdropClassName&&(h.removeClass(this._site.surface,this._disableBackdropClassName),b(this._disableBackdropClassName),this._disableBackdropClassName=null),this._site=null,this._groupsEnabled=null,this._animationsRunning&&this._animationsRunning.cancel(),this._animatingItemsBlocks={}):s("WinJS.UI.ListView:"+t)},numberOfItemsPerItemsBlock:{get:function(){function t(){var e,t=n._site.groupCount;for(e=0;t>e;e++)if(n._isCellSpanning(e))return!1;return!0}var n=this;return n._measureItem(0).then(function(){return n._sizes.viewportContentSize!==n._getViewportCrossSize()&&n._viewportSizeChanged(n._getViewportCrossSize()),t()?n._envInfo.nestedFlexTooLarge||n._envInfo.nestedFlexTooSmall?(n._usingStructuralNodes=!0,Number.MAX_VALUE):(n._usingStructuralNodes=e._LayoutCommon._barsPerItemsBlock>0,e._LayoutCommon._barsPerItemsBlock*n._itemsPerBar):(n._usingStructuralNodes=!1,null)})}},layout:function(e,t,n,i){function r(e){function t(e){if(d._usingStructuralNodes){var t=[];return e.itemsBlocks.forEach(function(e){t=t.concat(e.items.slice(0))}),t}return e.items.slice(0)}return{element:e.element,items:t(e)}}function o(){function n(e,t){var n=e.enableCellSpanning?q.CellSpanningGroup:q.UniformGroup;return new n(d,t)}var i,o=d._groups.length>0?d._getRealizationRange():null,s=[],a=[],u={},c={},h=0,p=e.length;for(i=0;p>i;i++){var m=null,f=d._getGroupInfo(i),_=d._site.groupFromIndex(i).key,g=d._groupMap[_],v=g instanceof q.CellSpanningGroup,y=f.enableCellSpanning;if(g)if(v!==y)u[_]=!0;else{var b=Math.max(0,t.firstIndex-g.startIndex),C=d._rangeForGroup(g,o);C&&b<=C.lastIndex&&(m={firstIndex:Math.max(b,C.firstIndex),lastIndex:C.lastIndex})}var w,I=n(f,e[i].itemsContainer.element);w=I.prepareLayoutWithCopyOfTree?I.prepareLayoutWithCopyOfTree(r(e[i].itemsContainer),m,g,{groupInfo:f,startIndex:h}):I.prepareLayout(T(e[i].itemsContainer),m,g,{groupInfo:f,startIndex:h}),a.push(w),h+=I.count,s.push(I),c[_]=I}return l.join(a).then(function(){for(var e=0,t=0,n=s.length;n>t;t++){var i=s[t];i.offset=e,e+=d._getGroupSize(i)}Object.keys(d._groupMap).forEach(function(e){var t=!u[e];d._groupMap[e].cleanUp(t)}),d._groups=s,d._groupMap=c})}function s(e,n,i){var r,o=d._groups[e],s=Math.max(0,t.firstIndex-o.startIndex),a=d._rangeForGroup(o,n);return i?void o.layoutRealizedRange(s,a):(a||(r=o.startIndex+o.count-1<n.firstIndex),o.layoutUnrealizedRange(s,a,r))}function a(){if(0!==d._groups.length){var n,i=d._getRealizationRange(),r=e.length,o=p.groupIndexFromItemIndex(t.firstIndex);for(n=o;r>n;n++)s(n,i,!0),d._layoutGroup(n)}}function u(){if(0===d._groups.length)return l.wrap();var e=d._getRealizationRange(),n=p.groupIndexFromItemIndex(e.firstIndex-1),i=p.groupIndexFromItemIndex(e.lastIndex+1),r=p.groupIndexFromItemIndex(t.firstIndex),o=[],a=d._groups.length,u=!1,c=n,h=Math.max(r,i);for(h=Math.max(c+1,h);!u;)u=!0,c>=r&&(o.push(s(c,e,!1)),u=!1,c--),a>h&&(o.push(s(h,e,!1)),u=!1,h++);return l.join(o)}var c,d=this,p=d._site,m="Layout.layout",_=m+":realizedRange";return d._site._writeProfilerMark(m+",StartTM"),d._site._writeProfilerMark(_+",StartTM"),c=d._measureItem(0).then(function(){return h[d._usingStructuralNodes?"addClass":"removeClass"](d._site.surface,f._structuralNodesClass),h[d._envInfo.nestedFlexTooLarge||d._envInfo.nestedFlexTooSmall?"addClass":"removeClass"](d._site.surface,f._singleItemsBlockClass),d._sizes.viewportContentSize!==d._getViewportCrossSize()&&d._viewportSizeChanged(d._getViewportCrossSize()),d._cacheRemovedElements(n,d._cachedItemRecords,d._cachedInsertedItemRecords,d._cachedRemovedItems,!1),d._cacheRemovedElements(i,d._cachedHeaderRecords,d._cachedInsertedHeaderRecords,d._cachedRemovedHeaders,!0),o()}).then(function(){d._syncDomWithGroupHeaderPosition(e);var t=0;if(d._groups.length>0){var r=d._groups[d._groups.length-1];t=r.offset+d._getGroupSize(r)}d._horizontal?(d._groupsEnabled&&d._groupHeaderPosition===J.left?p.surface.style.cssText+=";height:"+d._sizes.surfaceContentSize+"px;-ms-grid-columns: ("+d._sizes.headerContainerWidth+"px auto)["+e.length+"]":p.surface.style.height=d._sizes.surfaceContentSize+"px",(d._envInfo.nestedFlexTooLarge||d._envInfo.nestedFlexTooSmall)&&(p.surface.style.width=t+"px")):(d._groupsEnabled&&d._groupHeaderPosition===J.top?p.surface.style.cssText+=";width:"+d._sizes.surfaceContentSize+"px;-ms-grid-rows: ("+d._sizes.headerContainerHeight+"px auto)["+e.length+"]":p.surface.style.width=d._sizes.surfaceContentSize+"px",(d._envInfo.nestedFlexTooLarge||d._envInfo.nestedFlexTooSmall)&&(p.surface.style.height=t+"px")),a(),d._layoutAnimations(n,i),d._site._writeProfilerMark(_+":complete,info"),d._site._writeProfilerMark(_+",StopTM")},function(e){return d._site._writeProfilerMark(_+":canceled,info"),d._site._writeProfilerMark(_+",StopTM"),l.wrapError(e)}),d._layoutPromise=c.then(function(){return u().then(function(){d._site._writeProfilerMark(m+":complete,info"),d._site._writeProfilerMark(m+",StopTM")},function(e){return d._site._writeProfilerMark(m+":canceled,info"),d._site._writeProfilerMark(m+",StopTM"),l.wrapError(e)})}),{realizedRangeComplete:c,layoutComplete:d._layoutPromise}},itemsFromRange:function(e,t){return this._rangeContainsItems(e,t)?{firstIndex:this._firstItemFromRange(e),lastIndex:this._lastItemFromRange(t)}:{firstIndex:0,lastIndex:-1}},getAdjacent:function(t,n){function i(){var e={type:t.type,index:t.index-s.startIndex},n=s.getAdjacent(e,a);if("boundary"===n){var i=r._groups[o-1],l=r._groups[o+1],u=r._groups.length-1;if(a===D.leftArrow){if(0===o)return t;if(i instanceof q.UniformGroup&&s instanceof q.UniformGroup){var c=r._indexToCoordinate(e.index),d=r._horizontal?c.row:c.column,h=Math.floor((i.count-1)/r._itemsPerBar),p=h*r._itemsPerBar;return{type:m.ObjectType.item,index:i.startIndex+Math.min(i.count-1,p+d)}}return{type:m.ObjectType.item,index:s.startIndex-1}}if(a===D.rightArrow){if(o===u)return t;if(s instanceof q.UniformGroup&&l instanceof q.UniformGroup){var c=r._indexToCoordinate(e.index),d=r._horizontal?c.row:c.column;return{type:m.ObjectType.item,index:l.startIndex+Math.min(l.count-1,d)}}return{type:m.ObjectType.item,index:l.startIndex}}return t}return n.index+=s.startIndex,n}var r=this,o=r._site.groupIndexFromItemIndex(t.index),s=r._groups[o],a=r._adjustedKeyForOrientationAndBars(r._adjustedKeyForRTL(n),s instanceof q.CellSpanningGroup);if(t.type||(t.type=m.ObjectType.item),t.type===m.ObjectType.item||n!==D.pageUp&&n!==D.pageDown){if(t.type===m.ObjectType.header&&a===D.rightArrow)return{type:r._groupsEnabled?m.ObjectType.groupHeader:m.ObjectType.footer,index:0};if(t.type===m.ObjectType.footer&&a===D.leftArrow)return{type:r._groupsEnabled?m.ObjectType.groupHeader:m.ObjectType.header,index:0};if(t.type===m.ObjectType.groupHeader){if(a===D.leftArrow){var l=t.index-1;return l=r._site.header?l:Math.max(0,l),{type:l>-1?m.ObjectType.groupHeader:m.ObjectType.header,index:l>-1?l:0}}if(a===D.rightArrow){var l=t.index+1;return l=r._site.header?l:Math.min(r._groups.length-1,t.index+1),{type:l>=r._groups.length?m.ObjectType.header:m.ObjectType.groupHeader,index:l>=r._groups.length?0:l}}return t}}else{var u=0;u=t.type===m.ObjectType.groupHeader?r._groups[t.index].startIndex:t.type===m.ObjectType.header?0:r._groups[r._groups.length-1].count-1,t={type:m.ObjectType.item,index:u}}switch(r._adjustedKeyForRTL(n)){case D.upArrow:case D.leftArrow:case D.downArrow:case D.rightArrow:return i();default:return e._LayoutCommon.prototype._getAdjacentForPageKeys.call(r,t,n)}},hitTest:function(e,t){var n,i=this._sizes;e-=i.layoutOriginX,t-=i.layoutOriginY;var r=this._groupFromOffset(this._horizontal?e:t),o=this._groups[r];return this._horizontal?e-=o.offset:t-=o.offset,this._groupsEnabled&&(this._groupHeaderPosition===J.left?e-=i.headerContainerWidth:t-=i.headerContainerHeight),n=o.hitTest(e,t),n.index+=o.startIndex,n.insertAfterIndex+=o.startIndex,n},setupAnimations:function(){if(0===this._groups.length)return void this._resetAnimationCaches();if(!Object.keys(this._cachedItemRecords).length){this._site._writeProfilerMark("Animation:setupAnimations,StartTM");for(var e=this._getRealizationRange(),t=this._site.tree,n=0,i="horizontal"===this.orientation,r=0,o=t.length;o>r;r++){var s=t[r],a=!1,l=this._groups[r],u=l instanceof q.CellSpanningGroup,c=l?l.offset:0;if(x(s.itemsContainer,function(t,i){if(e.firstIndex<=n&&e.lastIndex>=n&&(a=!0,!this._cachedItemRecords[n])){var o=this._getItemPositionForAnimations(n,r,i),s=o.row,l=o.column,c=o.left,d=o.top;this._cachedItemRecords[n]={oldRow:s,oldColumn:l,oldLeft:c,oldTop:d,width:o.width,height:o.height,element:t,inCellSpanningGroup:u}}n++}.bind(this)),a){var d=r;if(!this._cachedHeaderRecords[d]){var h=this._getHeaderPositionForAnimations(d);this._cachedHeaderRecords[d]={oldLeft:h.left,oldTop:h.top,width:h.width,height:h.height,element:s.header}}this._cachedGroupRecords[L(s.itemsContainer.element)]||(this._cachedGroupRecords[L(s.itemsContainer.element)]={oldLeft:i?c:0,left:i?c:0,oldTop:i?0:c,top:i?0:c,element:s.itemsContainer.element})}}this._site._writeProfilerMark("Animation:setupAnimations,StopTM")}},_layoutAnimations:function(e,t){if(Object.keys(this._cachedItemRecords).length||Object.keys(this._cachedGroupRecords).length||Object.keys(this._cachedHeaderRecords).length){this._site._writeProfilerMark("Animation:layoutAnimation,StartTM"),this._updateAnimationCache(e,t);for(var n=this._getRealizationRange(),i=this._site.tree,r=0,o="horizontal"===this.orientation,s=0,a=i.length;a>s;s++){var l=i[s],u=this._groups[s],c=u instanceof q.CellSpanningGroup,d=u?u.offset:0,p=0,m=0,_=this._cachedGroupRecords[L(l.itemsContainer.element)];_&&(o?p=_.oldLeft-d:m=_.oldTop-d),x(l.itemsContainer,function(e,t){if(n.firstIndex<=r&&n.lastIndex>=r){var i=this._cachedItemRecords[r];if(i){var o=this._getItemPositionForAnimations(r,s,t),a=o.row,l=o.column,u=o.left,d=o.top;if(i.inCellSpanningGroup=i.inCellSpanningGroup||c,i.oldRow!==a||i.oldColumn!==l||i.oldTop!==d||i.oldLeft!==u){i.row=a,i.column=l,i.left=u,i.top=d;var _=i.oldLeft-i.left-p,g=i.oldTop-i.top-m;if(_=(this._site.rtl?-1:1)*_,i.xOffset=_,i.yOffset=g,0!==_||0!==g){var v=i.element;i.needsToResetTransform=!0,v.style[W]="",v.style[H.scriptName]="translate("+_+"px,"+g+"px)"}var y=e.parentNode;h.hasClass(y,f._itemsBlockClass)&&(this._animatingItemsBlocks[L(y)]=y)}}else this._cachedInsertedItemRecords[r]=e,e.style[W]="",e.style.opacity=0}r++}.bind(this));var g=s,v=this._cachedHeaderRecords[g];if(v){var y=this._getHeaderPositionForAnimations(g);if(v.height=y.height,v.width=y.width,v.oldLeft!==y.left||v.oldTop!==y.top){v.left=y.left,v.top=y.top;var b=v.oldLeft-v.left,C=v.oldTop-v.top;if(b=(this._site.rtl?-1:1)*b,0!==b||0!==C){v.needsToResetTransform=!0;var w=v.element;w.style[W]="",w.style[H.scriptName]="translate("+b+"px,"+C+"px)"}}}if(_&&(o&&_.left!==d||!o&&_.top!==d)){var I=_.element;if(0===p&&0===m)_.needsToResetTransform&&(_.needsToResetTransform=!1,I.style[H.scriptName]="");else{var S=(this._site.rtl?-1:1)*p,E=m;_.needsToResetTransform=!0,I.style[W]="",I.style[H.scriptName]="translate("+S+"px, "+E+"px)"}}}if(this._inListMode||1===this._itemsPerBar)for(var P=Object.keys(this._animatingItemsBlocks),k=0,T=P.length;T>k;k++)this._animatingItemsBlocks[P[k]].style.overflow="visible";this._site._writeProfilerMark("Animation:layoutAnimation,StopTM")}},executeAnimations:function(){function t(){if(r(),D)o();else{if(te._itemsPerBar>1)for(var e=te._itemsPerBar*te._sizes.containerCrossSize+te._getHeaderSizeContentAdjustment()+te._sizes.containerMargins[J?"top":C.rtl?"right":"left"]+(J?te._sizes.layoutOriginY:te._sizes.layoutOriginX),t=0,n=S.length;n>t;t++){var i=S[t];i[K]>i[G]?(z=Math.max(z,i[Y]+i[J?"height":"width"]),j=Math.max(j,e-i[X]),B=!0,q.push(i)):i[K]<i[G]&&(U=Math.max(U,e-i[Y]),V=Math.max(V,i[X]+i[J?"height":"width"]),q.push(i),B=!0)}C.rtl&&!J&&(z*=-1,j*=-1,U*=-1,V*=-1),B?u(te._itemsPerBar):_()}}function n(t){A=l.join(O),A.done(function(){O=[],y&&(e.Layout._debugAnimations?i._requestAnimationFrame(function(){t()}):t())})}function r(){if(I.length){C._writeProfilerMark("Animation:setupRemoveAnimation,StartTM"),P+=60,M+=60;var e=120;b&&(e*=10),O.push(a.executeTransition(I,[{property:"opacity",delay:x,duration:e,timing:"linear",to:0,skipStylesReset:!0}])),C._writeProfilerMark("Animation:setupRemoveAnimation,StopTM")}}function o(){C._writeProfilerMark("Animation:cellSpanningFadeOutMove,StartTM");for(var e=[],t=0,i=S.length;i>t;t++){var r=S[t],o=r.element;e.push(o)}for(var t=0,i=E.length;i>t;t++){var r=E[t],o=r.element;e.push(o)}var l=120;b&&(l*=10),O.push(a.executeTransition(e,{property:"opacity",delay:x,duration:l,timing:"linear",to:0})),n(s),C._writeProfilerMark("Animation:cellSpanningFadeOutMove,StopTM")}function s(){C._writeProfilerMark("Animation:cellSpanningFadeInMove,StartTM"),M=0;for(var e=[],t=0,n=S.length;n>t;t++){var i=S[t],r=i.element;r.style[H.scriptName]="",e.push(r)}for(var t=0,n=E.length;n>t;t++){var i=E[t],r=i.element;r.style[H.scriptName]="",e.push(r)}var o=120;b&&(o*=10),O.push(a.executeTransition(e,{property:"opacity",delay:M,duration:o,timing:"linear",to:1})),C._writeProfilerMark("Animation:cellSpanningFadeInMove,StopTM"),g()}function u(e){C._writeProfilerMark("Animation:setupReflowAnimation,StartTM");for(var t={},i=0,r=q.length;r>i;i++){var o=q[i],s=o.xOffset,l=o.yOffset;o[K]>o[G]?J?l-=z:s-=z:o[K]<o[G]&&(J?l+=U:s+=U);var u=o.element;R=Math.min(R,J?s:l),N=Math.max(N,J?s:l);var c=u.parentNode;h.hasClass(c,"win-itemscontainer")||(c=c.parentNode);var d=t[L(c)];if(!d){var p=T(k(c,C.tree));t[L(c)]=d=Math.ceil(p/e)-1}q[i][J?"column":"row"]===d&&(F[L(c)]=c);var _=80;b&&(_*=10),O.push(a.executeTransition(u,{property:H.cssName,delay:P,duration:_,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"translate("+s+"px,"+l+"px)"}))}for(var g=Object.keys(F),i=0,r=g.length;r>i;i++){var v=F[g[i]];C.rtl&&J?(v.style.paddingLeft=-1*R+"px",v.style.marginLeft=R+"px"):(v.style[J?"paddingRight":"paddingBottom"]=N+"px",v.style[J?"marginRight":"marginBottom"]="-"+N+"px")}for(var y=Object.keys(Z),i=0,r=y.length;r>i;i++)Z[y[i]].classList.add(f._clipClass);n(m),C._writeProfilerMark("Animation:setupReflowAnimation,StopTM")}function p(){for(var e=Object.keys(F),t=0,n=e.length;n>t;t++){var i=F[e[t]];C.rtl&&J?(i.style.paddingLeft="",i.style.marginLeft=""):(i.style[J?"paddingRight":"paddingBottom"]="",i.style[J?"marginRight":"marginBottom"]="")}F={};for(var r=Object.keys(Z),t=0,n=r.length;n>t;t++){var o=Z[r[t]];o.style.overflow="",o.classList.remove(f._clipClass)}}function m(){C._writeProfilerMark("Animation:prepareReflowedItems,StartTM");for(var t=0,n=q.length;n>t;t++){var r=q[t],o=0,s=0;r[K]>r[G]?J?s=j:o=j:r[K]<r[G]&&(J?s=-1*V:o=-1*V),r.element.style[W]="",r.element.style[H.scriptName]="translate("+o+"px,"+s+"px)"}C._writeProfilerMark("Animation:prepareReflowedItems,StopTM"),e.Layout._debugAnimations?i._requestAnimationFrame(function(){_(!0)}):_(!0)}function _(e){var t=200;if(e&&(t=150,P=0,M=0),b&&(t*=10),S.length>0||E.length>0){C._writeProfilerMark("Animation:setupMoveAnimation,StartTM");for(var n=[],i=0,r=E.length;r>i;i++){var o=E[i].element;n.push(o)}for(var i=0,r=S.length;r>i;i++){var o=S[i].element;n.push(o)}O.push(a.executeTransition(n,{property:H.cssName,delay:P,duration:t,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""})),M+=80,C._writeProfilerMark("Animation:setupMoveAnimation,StopTM")}g()}function g(){if(w.length>0){C._writeProfilerMark("Animation:setupInsertAnimation,StartTM");var e=120;b&&(e*=10),O.push(a.executeTransition(w,[{property:"opacity",delay:M,duration:e,timing:"linear",to:1}])),C._writeProfilerMark("Animation:setupInsertAnimation,StopTM")}n(v)}function v(){C._writeProfilerMark("Animation:cleanupAnimations,StartTM"),p();for(var e=0,t=I.length;t>e;e++){var n=I[e];n.parentNode&&(d._disposeElement(n),n.parentNode.removeChild(n))}C._writeProfilerMark("Animation:cleanupAnimations,StopTM"),te._animationsRunning=null,y.complete()}var y=new c;if(this._filterInsertedElements(),this._filterMovedElements(),this._filterRemovedElements(),0===this._insertedElements.length&&0===this._removedElements.length&&0===this._itemMoveRecords.length&&0===this._moveRecords.length)return this._resetAnimationCaches(!0),y.complete(),y.promise;this._animationsRunning=y.promise;for(var b=e.Layout._debugAnimations||e.Layout._slowAnimations,C=this._site,w=this._insertedElements,I=this._removedElements,S=this._itemMoveRecords,E=this._moveRecords,x=0,P=0,M=0,A=null,O=[],D=!1,B=!1,R=0,N=0,F={},z=0,U=0,j=0,V=0,q=[],J="horizontal"===this.orientation,K=J?"oldColumn":"oldRow",G=J?"column":"row",Y=J?"oldTop":"oldLeft",X=J?"top":"left",Z=this._animatingItemsBlocks,Q=0,$=S.length;$>Q;Q++){var ee=S[Q];if(ee.inCellSpanningGroup){D=!0;break}}var te=this;return e.Layout._debugAnimations?i._requestAnimationFrame(function(){t()}):t(),this._resetAnimationCaches(!0),y.promise.then(null,function(){p();for(var e=0,t=E.length;t>e;e++){var n=E[e].element;n.style[H.scriptName]="",n.style.opacity=1}for(var e=0,t=S.length;t>e;e++){var n=S[e].element;n.style[H.scriptName]="",n.style.opacity=1}for(var e=0,t=w.length;t>e;e++)w[e].style.opacity=1;for(var e=0,t=I.length;t>e;e++){var n=I[e];n.parentNode&&(d._disposeElement(n),n.parentNode.removeChild(n))}this._animationsRunning=null,y=null,A&&A.cancel()}.bind(this)),y.promise},dragOver:function(e,t,n){var i=this.hitTest(e,t),r=this._groups?this._site.groupIndexFromItemIndex(i.index):0,o=this._site.tree[r].itemsContainer,s=T(o),a=this._groups?this._groups[r].startIndex:0,l=this._getVisibleRange();i.index-=a,i.insertAfterIndex-=a,l.firstIndex=Math.max(l.firstIndex-a-1,0),l.lastIndex=Math.min(l.lastIndex-a+1,s);var u=Math.max(Math.min(s-1,i.insertAfterIndex),-1),c=Math.min(u+1,s);if(n){for(var d=u;d>=l.firstIndex;d--){if(!n._isIncluded(d+a)){u=d;break}d===l.firstIndex&&(u=-1)}for(var d=c;d<l.lastIndex;d++){if(!n._isIncluded(d+a)){c=d;break}d===l.lastIndex-1&&(c=s)}}var h=P(o,c),p=P(o,u);if(this._animatedDragItems)for(var d=0,m=this._animatedDragItems.length;m>d;d++){var f=this._animatedDragItems[d];f&&(f.style[W]=this._site.animationsDisabled?"":U,
f.style[H.scriptName]="")}this._animatedDragItems=[];var _="horizontal"===this.orientation,g=this._inListMode||1===this._itemsPerBar;this._groups&&this._groups[r]instanceof q.CellSpanningGroup&&(g=1===this._groups[r]._slotsPerColumn);var v=0,y=0;!_&&!g||_&&g?v=this._site.rtl?-j:j:y=j,h&&(h.style[W]=this._site.animationsDisabled?"":U,h.style[H.scriptName]="translate("+v+"px, "+y+"px)",this._animatedDragItems.push(h)),p&&(p.style[W]=this._site.animationsDisabled?"":U,p.style[H.scriptName]="translate("+-v+"px, -"+y+"px)",this._animatedDragItems.push(p))},dragLeave:function(){if(this._animatedDragItems)for(var e=0,t=this._animatedDragItems.length;t>e;e++)this._animatedDragItems[e].style[W]=this._site.animationsDisabled?"":U,this._animatedDragItems[e].style[H.scriptName]="";this._animatedDragItems=[]},_setMaxRowsOrColumns:function(e){e===this._maxRowsOrColumns||this._inListMode||(this._sizes&&this._sizes.containerSizeLoaded&&(this._itemsPerBar=Math.floor(this._sizes.maxItemsContainerContentSize/this._sizes.containerCrossSize),e&&(this._itemsPerBar=Math.min(this._itemsPerBar,e)),this._itemsPerBar=Math.max(1,this._itemsPerBar)),this._maxRowsOrColumns=e,this._invalidateLayout())},_getItemPosition:function(e){if(this._groupsEnabled){var t=Math.min(this._groups.length-1,this._site.groupIndexFromItemIndex(e)),n=this._groups[t],i=e-n.startIndex;return this._getItemPositionForAnimations(e,t,i)}return this._getItemPositionForAnimations(e,0,e)},_getRealizationRange:function(){var e=this._site.realizedRange;return{firstIndex:this._firstItemFromRange(e.firstPixel),lastIndex:this._lastItemFromRange(e.lastPixel)}},_getVisibleRange:function(){var e=this._site.visibleRange;return{firstIndex:this._firstItemFromRange(e.firstPixel),lastIndex:this._lastItemFromRange(e.lastPixel)}},_resetAnimationCaches:function(e){if(!e){this._resetStylesForRecords(this._cachedGroupRecords),this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords),this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords),this._resetStylesForRemovedRecords(this._cachedRemovedItems),this._resetStylesForRemovedRecords(this._cachedRemovedHeaders);for(var t=Object.keys(this._animatingItemsBlocks),n=0,i=t.length;i>n;n++){var r=this._animatingItemsBlocks[t[n]];r.style.overflow="",r.classList.remove(f._clipClass)}}this._cachedGroupRecords={},this._cachedItemRecords={},this._cachedHeaderRecords={},this._cachedInsertedItemRecords={},this._cachedInsertedHeaderRecords={},this._cachedRemovedItems=[],this._cachedRemovedHeaders=[],this._animatingItemsBlocks={}},_cacheRemovedElements:function(e,t,n,i,r){var o="left";this._site.rtl&&(o="right");var s,a;r?(s=this._sizes.headerContainerOuterX,a=this._sizes.headerContainerOuterY):(s=this._sizes.containerMargins[o],a=this._sizes.containerMargins.top);for(var l=0,u=e.length;u>l;l++){var c=e[l];if(-1===c.newIndex){var d=c.element,h=t[c.oldIndex];h&&(h.element=d,delete t[c.oldIndex],d.style.position="absolute",d.style[W]="",d.style.top=h.oldTop-a+"px",d.style[o]=h.oldLeft-s+"px",d.style.width=h.width+"px",d.style.height=h.height+"px",d.style[H.scriptName]="",this._site.surface.appendChild(d),i.push(h)),n[c.oldIndex]&&delete n[c.oldIndex]}}},_cacheInsertedElements:function(e,t,n){for(var i={},r=0,o=e.length;o>r;r++){var s=e[r],a=t[s.oldIndex];if(a&&delete t[s.oldIndex],a||-1===s.oldIndex||s.moved){var l=n[s.newIndex];l&&delete n[s.newIndex];var u=s.element;i[s.newIndex]=u,u.style[W]="",u.style[H.scriptName]="",u.style.opacity=0}}for(var c=Object.keys(t),r=0,o=c.length;o>r;r++)i[c[r]]=t[c[r]];return i},_resetStylesForRecords:function(e){for(var t=Object.keys(e),n=0,i=t.length;i>n;n++){var r=e[t[n]];r.needsToResetTransform&&(r.element.style[H.scriptName]="",r.needsToResetTransform=!1)}},_resetStylesForInsertedRecords:function(e){for(var t=Object.keys(e),n=0,i=t.length;i>n;n++){var r=e[t[n]];r.style.opacity=1}},_resetStylesForRemovedRecords:function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t].element;i.parentNode&&(d._disposeElement(i),i.parentNode.removeChild(i))}},_updateAnimationCache:function(e,t){function n(e,t){for(var n={},r=0,o=e.length;o>r;r++){var s=e[r],a=t[s.oldIndex];a&&(n[s.newIndex]=a,a.element=s.element,delete t[s.oldIndex])}for(var l=Object.keys(t),r=0,o=l.length;o>r;r++){var u=l[r],c=t[u];(!c.element||i[L(c.element)])&&(n[u]=c)}return n}this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords),this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords);for(var i={},r=this._getRealizationRange(),o=this._site.tree,s=0,a=0,l=o.length;l>s;s++)x(o[s].itemsContainer,function(e){r.firstIndex<=a&&r.lastIndex>=a&&(i[L(e)]=!0),a++});this._cachedItemRecords=n(e,this._cachedItemRecords),this._cachedHeaderRecords=n(t,this._cachedHeaderRecords),this._cachedInsertedItemRecords=this._cacheInsertedElements(e,this._cachedInsertedItemRecords,this._cachedItemRecords),this._cachedInsertedHeaderRecords=this._cacheInsertedElements(t,this._cachedInsertedHeaderRecords,this._cachedHeaderRecords)},_filterRemovedElements:function(){function e(e,s){for(var a=0,l=e.length;l>a;a++){var u=e[a],c=u.element;u[n]+u[i]-1<r||u[n]>o||!t._site.viewport.contains(c)?c.parentNode&&(d._disposeElement(c),c.parentNode.removeChild(c)):s.push(c)}}if(this._removedElements=[],this._site.animationsDisabled)return this._resetStylesForRemovedRecords(this._cachedRemovedItems),void this._resetStylesForRemovedRecords(this._cachedRemovedHeaders);var t=this,n="horizontal"===this.orientation?"oldLeft":"oldTop",i="horizontal"===this.orientation?"width":"height",r=this._site.scrollbarPos,o=r+this._site.viewportSize[i]-1;e(this._cachedRemovedItems,this._removedElements),e(this._cachedRemovedHeaders,this._removedElements)},_filterInsertedElements:function(){function e(e,i){for(var r=Object.keys(e),o=0,s=r.length;s>o;o++){var a=r[o],l=e[a];a<n.firstIndex||a>n.lastIndex||t._site.viewport.contains(l.element)?l.style.opacity=1:i.push(l)}}if(this._insertedElements=[],this._site.animationsDisabled)return this._resetStylesForInsertedRecords(this._cachedInsertedItemRecords),void this._resetStylesForInsertedRecords(this._cachedInsertedHeaderRecords);var t=this,n=this._getVisibleRange();e(this._cachedInsertedItemRecords,this._insertedElements),e(this._cachedInsertedHeaderRecords,this._insertedElements)},_filterMovedElements:function(){var e=this,t="horizontal"===this.orientation?"oldLeft":"oldTop",n="horizontal"===this.orientation?"left":"top",i="horizontal"===this.orientation?"width":"height",r=this._getRealizationRange(),o=this._site.scrollbarPos,s=o+this._site.viewportSize[i]-1;if(this._itemMoveRecords=[],this._moveRecords=[],!this._site.animationsDisabled)for(var a=this._site.tree,l=0,u=0,c=a.length;c>u;u++){var d=a[u],h=!1;x(d.itemsContainer,function(){if(r.firstIndex<=l&&r.lastIndex>=l){var a=this._cachedItemRecords[l];if(a){var u=(a[t]+a[i]-1>=o&&a[t]<=s||a[n]+a[i]-1>=o&&a[n]<=s)&&e._site.viewport.contains(a.element);u&&(h=!0,a.needsToResetTransform&&(this._itemMoveRecords.push(a),delete this._cachedItemRecords[l]))}}l++}.bind(this));var p=u,m=this._cachedHeaderRecords[p];m&&h&&m.needsToResetTransform&&(this._moveRecords.push(m),delete this._cachedHeaderRecords[p]);var f=this._cachedGroupRecords[L(d.itemsContainer.element)];f&&h&&f.needsToResetTransform&&(this._moveRecords.push(f),delete this._cachedGroupRecords[L(d.itemsContainer.element)])}this._resetStylesForRecords(this._cachedGroupRecords),this._resetStylesForRecords(this._cachedItemRecords),this._resetStylesForRecords(this._cachedHeaderRecords)},_getItemPositionForAnimations:function(e,t,n){var i=this._groups[t],r=i.getItemPositionForAnimations(n),o=this._groups[t]?this._groups[t].offset:0,s=this._groupsEnabled&&this._groupHeaderPosition===J.left?this._sizes.headerContainerWidth:0,a=this._groupsEnabled&&this._groupHeaderPosition===J.top?this._sizes.headerContainerHeight:0;return r.left+=this._sizes.layoutOriginX+s+this._sizes.itemsContainerOuterX,r.top+=this._sizes.layoutOriginY+a+this._sizes.itemsContainerOuterY,r[this._horizontal?"left":"top"]+=o,r},_getHeaderPositionForAnimations:function(e){var t;if(this._groupsEnabled){var n=this._sizes.headerContainerWidth-this._sizes.headerContainerOuterWidth,i=this._sizes.headerContainerHeight-this._sizes.headerContainerOuterHeight;this._groupHeaderPosition!==J.left||this._horizontal?this._groupHeaderPosition===J.top&&this._horizontal&&(n=this._groups[e].getItemsContainerSize()-this._sizes.headerContainerOuterWidth):i=this._groups[e].getItemsContainerSize()-this._sizes.headerContainerOuterHeight;var r=this._horizontal?this._groups[e].offset:0,o=this._horizontal?0:this._groups[e].offset;t={top:this._sizes.layoutOriginY+o+this._sizes.headerContainerOuterY,left:this._sizes.layoutOriginX+r+this._sizes.headerContainerOuterX,height:i,width:n}}else t={top:0,left:0,height:0,width:0};return t},_rangeContainsItems:function(e,t){if(0===this._groups.length)return!1;var n=this._groups[this._groups.length-1],i=this._sizes.layoutOrigin+n.offset+this._getGroupSize(n)-1;return t>=0&&i>=e},_itemFromOffset:function(e,t){function n(e){if(!t.wholeItem){var n=r._horizontal?r._site.rtl?"right":"left":"top",i=r._horizontal?r._site.rtl?"left":"right":"bottom";return t.last?e-r._sizes.containerMargins[n]:e+r._sizes.containerMargins[i]}return e}function i(e){return t.last?e-r._getHeaderSizeGroupAdjustment()-r._sizes.itemsContainerOuterStart:e}var r=this;if(0===this._groups.length)return 0;t=t||{},e-=this._sizes.layoutOrigin,e=n(e);var o=this._groupFromOffset(i(e)),s=this._groups[o];return e-=s.offset,e-=this._getHeaderSizeGroupAdjustment(),s.startIndex+s.itemFromOffset(e,t)},_firstItemFromRange:function(e,t){return t=t||{},t.last=0,this._itemFromOffset(e,t)},_lastItemFromRange:function(e,t){return t=t||{},t.last=1,this._itemFromOffset(e,t)},_adjustedKeyForRTL:function(e){return this._site.rtl&&(e===D.leftArrow?e=D.rightArrow:e===D.rightArrow&&(e=D.leftArrow)),e},_adjustedKeyForOrientationAndBars:function(e,t){var n=e;if(t)return e;if(!this._horizontal)switch(n){case D.leftArrow:n=D.upArrow;break;case D.rightArrow:n=D.downArrow;break;case D.upArrow:n=D.leftArrow;break;case D.downArrow:n=D.rightArrow}return 1===this._itemsPerBar&&(n===D.upArrow?n=D.leftArrow:n===D.downArrow&&(n=D.rightArrow)),n},_getAdjacentForPageKeys:function(e,t){var n,i=this._sizes.containerMargins,r="horizontal"===this.orientation?i.left+i.right:i.top+i.bottom,o=this._site.viewportSize["horizontal"===this.orientation?"width":"height"],s=this._site.scrollbarPos,a=s+o-1-i["horizontal"===this.orientation?"right":"bottom"],l=this._firstItemFromRange(s,{wholeItem:!0}),u=this._lastItemFromRange(a,{wholeItem:!1}),c=this._getItemPosition(e.index),d=!1;if((e.index<l||e.index>u)&&(d=!0,s="horizontal"===this.orientation?c.left-r:c.top-r,a=s+o-1,l=this._firstItemFromRange(s,{wholeItem:!0}),u=this._lastItemFromRange(a,{wholeItem:!1})),t===D.pageUp){if(!d&&l!==e.index)return{type:m.ObjectType.item,index:l};var h;h="horizontal"===this.orientation?c.left+c.width+r+i.left:c.top+c.height+r+i.bottom;var p=this._firstItemFromRange(h-o,{wholeItem:!0});n=e.index===p?Math.max(0,e.index-this._itemsPerBar):p}else{if(!d&&u!==e.index)return{type:m.ObjectType.item,index:u};var f;f="horizontal"===this.orientation?c.left-r-i.right:c.top-r-i.bottom;var _=Math.max(0,this._lastItemFromRange(f+o-1,{wholeItem:!0}));n=e.index===_?e.index+this._itemsPerBar:_}return{type:m.ObjectType.item,index:n}},_isCellSpanning:function(e){var t=this._site.groupFromIndex(e),n=this._groupInfo;return n?!!("function"==typeof n?n(t):n).enableCellSpanning:!1},_getGroupInfo:function(e){var t=this._site.groupFromIndex(e),n=this._groupInfo,i=this._sizes.containerMargins,o={enableCellSpanning:!1};if(n="function"==typeof n?n(t):n){if(n.enableCellSpanning&&(+n.cellWidth!==n.cellWidth||+n.cellHeight!==n.cellHeight))throw new r("WinJS.UI.GridLayout.GroupInfoResultIsInvalid",B.groupInfoResultIsInvalid);o={enableCellSpanning:!!n.enableCellSpanning,cellWidth:n.cellWidth+i.left+i.right,cellHeight:n.cellHeight+i.top+i.bottom}}return o},_getItemInfo:function(e){var t;if(this._itemInfo&&"function"==typeof this._itemInfo)t=this._itemInfo(e);else{if(!this._useDefaultItemInfo)throw new r("WinJS.UI.GridLayout.ItemInfoIsInvalid",B.itemInfoIsInvalid);t=this._defaultItemInfo(e)}return l.as(t).then(function(e){if(!e||+e.width!==e.width||+e.height!==e.height)throw new r("WinJS.UI.GridLayout.ItemInfoIsInvalid",B.itemInfoIsInvalid);return e})},_defaultItemInfo:function(e){var t=this;return this._site.renderItem(this._site.itemFromIndex(e)).then(function(n){return t._elementsToMeasure[e]={element:n},t._measureElements()}).then(function(){var n=t._elementsToMeasure[e],i={width:n.width,height:n.height};return delete t._elementsToMeasure[e],i},function(n){return delete t._elementsToMeasure[e],l.wrapError(n)})},_getGroupSize:function(e){var t=0;return this._groupsEnabled&&(this._horizontal&&this._groupHeaderPosition===J.top?t=this._sizes.headerContainerMinWidth:this._horizontal||this._groupHeaderPosition!==J.left||(t=this._sizes.headerContainerMinHeight)),Math.max(t,e.getItemsContainerSize()+this._getHeaderSizeGroupAdjustment())},_groupFromOffset:function(e){return e<this._groups[0].offset?0:this._groupFrom(function(t){return e<t.offset})},_groupFromImpl:function(e,t,n){if(e>t)return null;var i=e+Math.floor((t-e)/2),r=this._groups[i];return n(r,i)?this._groupFromImpl(e,i-1,n):t>i&&!n(this._groups[i+1],i+1)?this._groupFromImpl(i+1,t,n):i},_groupFrom:function(e){if(this._groups.length>0){var t=this._groups.length-1,n=this._groups[t];return e(n,t)?this._groupFromImpl(0,this._groups.length-1,e):t}return null},_invalidateLayout:function(){this._site&&this._site.invalidateLayout()},_resetMeasurements:function(){this._measuringPromise&&(this._measuringPromise.cancel(),this._measuringPromise=null),this._containerSizeClassName&&(h.removeClass(this._site.surface,this._containerSizeClassName),b(this._containerSizeClassName),this._containerSizeClassName=null),this._sizes=null,this._resetAnimationCaches()},_measureElements:function(){if(!this._measuringElements){var e=this;e._measuringElements=u.schedulePromiseHigh(null,"WinJS.UI.GridLayout._measuringElements").then(function(){e._site._writeProfilerMark("_measureElements,StartTM");var n=e._createMeasuringSurface(),i=t.document.createElement("div"),r=e._site,o=e._measuringElements,s=e._elementsToMeasure,a=!1;i.className=f._itemsContainerClass+" "+f._laidOutClass,i.style.cssText+=";display: -ms-grid;-ms-grid-column: 1;-ms-grid-row: 1";var l,u,c=Object.keys(s);for(u=0,l=c.length;l>u;u++){var d=s[c[u]].element;d.style["-ms-grid-column"]=u+1,d.style["-ms-grid-row"]=u+1,i.appendChild(d)}for(n.appendChild(i),r.viewport.insertBefore(n,r.viewport.firstChild),o.then(null,function(){a=!0}),u=0,l=c.length;l>u&&!a;u++){var p=s[c[u]],m=p.element.querySelector("."+f._itemClass);p.width=h.getTotalWidth(m),p.height=h.getTotalHeight(m)}n.parentNode&&n.parentNode.removeChild(n),o===e._measuringElements&&(e._measuringElements=null),r._writeProfilerMark("_measureElements,StopTM")},function(t){return e._measuringElements=null,l.wrapError(t)})}return this._measuringElements},_ensureEnvInfo:function(){return this._envInfo||(this._envInfo=M(this._site),this._envInfo&&!this._envInfo.supportsCSSGrid&&h.addClass(this._site.surface,f._noCSSGrid)),!!this._envInfo},_createMeasuringSurface:function(){var e=t.document.createElement("div");return e.style.cssText="visibility: hidden;-ms-grid-columns: auto;-ms-grid-rows: auto;-ms-flex-align: start;-webkit-align-items: flex-start;align-items: flex-start",e.className=f._scrollableClass+" "+(this._inListMode?f._listLayoutClass:f._gridLayoutClass),this._envInfo.supportsCSSGrid||h.addClass(e,f._noCSSGrid),this._groupsEnabled&&(this._groupHeaderPosition===J.top?h.addClass(e,f._headerPositionTopClass):h.addClass(e,f._headerPositionLeftClass)),e},_measureItem:function(e){function n(e,r){var r,a=!!r,u={},c=o.rtl?"right":"left";return o.itemCount.then(function(t){return!t||i._groupsEnabled&&!o.groupCount?l.cancel:(r=r||o.itemFromIndex(e),u.container=o.renderItem(r),i._groupsEnabled&&(u.headerContainer=o.renderHeader(i._site.groupFromIndex(o.groupIndexFromItemIndex(e)))),l.join(u))}).then(function(u){function d(){var e=i._horizontal,t=i._groupsEnabled,n=!1;s.then(null,function(){n=!0});var r=O(k),a=o.rtl?o.viewport.offsetWidth-(k.offsetLeft+k.offsetWidth):k.offsetLeft,l=k.offsetTop,d={viewportContentSize:0,surfaceContentSize:0,maxItemsContainerContentSize:0,surfaceOuterHeight:S(m),surfaceOuterWidth:E(m),layoutOriginX:a-r[c],layoutOriginY:l-r.top,itemsContainerOuterHeight:S(_),itemsContainerOuterWidth:E(_),itemsContainerOuterX:I(o.rtl?"Right":"Left",_),itemsContainerOuterY:I("Top",_),itemsContainerMargins:O(_),itemBoxOuterHeight:S(v),itemBoxOuterWidth:E(v),containerOuterHeight:S(u.container),containerOuterWidth:E(u.container),emptyContainerContentHeight:h.getContentHeight(g),emptyContainerContentWidth:h.getContentWidth(g),containerMargins:O(u.container),containerWidth:0,containerHeight:0,containerSizeLoaded:!1};o.header&&(d[e?"layoutOriginX":"layoutOriginY"]+=h[e?"getTotalWidth":"getTotalHeight"](o.header)),t&&(d.headerContainerOuterX=I(o.rtl?"Right":"Left",u.headerContainer),d.headerContainerOuterY=I("Top",u.headerContainer),d.headerContainerOuterWidth=E(u.headerContainer),d.headerContainerOuterHeight=S(u.headerContainer),d.headerContainerWidth=h.getTotalWidth(u.headerContainer),d.headerContainerHeight=h.getTotalHeight(u.headerContainer),d.headerContainerMinWidth=w(u.headerContainer,"minWidth")+d.headerContainerOuterWidth,d.headerContainerMinHeight=w(u.headerContainer,"minHeight")+d.headerContainerOuterHeight);var p={sizes:d,viewportContentWidth:h.getContentWidth(o.viewport),viewportContentHeight:h.getContentHeight(o.viewport),containerContentWidth:h.getContentWidth(u.container),containerContentHeight:h.getContentHeight(u.container),containerWidth:h.getTotalWidth(u.container),containerHeight:h.getTotalHeight(u.container)};return p.viewportCrossSize=p[e?"viewportContentHeight":"viewportContentWidth"],o.readyToMeasure(),n?null:p}function p(){m.parentNode&&m.parentNode.removeChild(m)}var m=i._createMeasuringSurface(),_=t.document.createElement("div"),g=t.document.createElement("div"),v=u.container.querySelector("."+f._itemBoxClass),y=o.groupIndexFromItemIndex(e);g.className=f._containerClass,_.className=f._itemsContainerClass+" "+f._laidOutClass;var b=1,C=1,x=2,P=2,k=_,T=!1;i._inListMode&&i._groupsEnabled&&(i._horizontal&&i._groupHeaderPosition===J.top?(b=2,P=1,x=1,k=u.headerContainer,T=!0):i._horizontal||i._groupHeaderPosition!==J.left||(C=2,P=1,x=1,k=u.headerContainer,T=!0)),_.style.cssText+=";display: "+(i._inListMode?(i._horizontal?"flex":"block")+"; overflow: hidden":"inline-block")+";vertical-align:top;-ms-grid-column: "+C+";-ms-grid-row: "+b,i._inListMode||(u.container.style.display="inline-block"),i._groupsEnabled&&(u.headerContainer.style.cssText+=";display: inline-block;-ms-grid-column: "+P+";-ms-grid-row: "+x,h.addClass(u.headerContainer,f._laidOutClass+" "+f._groupLeaderClass),(i._groupHeaderPosition===J.top&&i._horizontal||i._groupHeaderPosition===J.left&&!i._horizontal)&&h.addClass(_,f._groupLeaderClass)),T&&m.appendChild(u.headerContainer),_.appendChild(u.container),_.appendChild(g),m.appendChild(_),!T&&i._groupsEnabled&&m.appendChild(u.headerContainer),o.viewport.insertBefore(m,o.viewport.firstChild);var M=d();if(!M)return p(),l.cancel;if(i._horizontal&&0===M.viewportContentHeight||!i._horizontal&&0===M.viewportContentWidth)return p(),l.cancel;if(!(a||i._isCellSpanning(y)||0!==M.containerContentWidth&&0!==M.containerContentHeight))return p(),r.then(function(){return n(e,r)});var A=i._sizes=M.sizes;if(Object.defineProperties(A,{surfaceOuterCrossSize:{get:function(){return i._horizontal?A.surfaceOuterHeight:A.surfaceOuterWidth},enumerable:!0},layoutOrigin:{get:function(){return i._horizontal?A.layoutOriginX:A.layoutOriginY},enumerable:!0},itemsContainerOuterSize:{get:function(){return i._horizontal?A.itemsContainerOuterWidth:A.itemsContainerOuterHeight},enumerable:!0},itemsContainerOuterCrossSize:{get:function(){return i._horizontal?A.itemsContainerOuterHeight:A.itemsContainerOuterWidth},enumerable:!0},itemsContainerOuterStart:{get:function(){return i._horizontal?A.itemsContainerOuterX:A.itemsContainerOuterY},enumerable:!0},itemsContainerOuterCrossStart:{get:function(){return i._horizontal?A.itemsContainerOuterY:A.itemsContainerOuterX},enumerable:!0},containerCrossSize:{get:function(){return i._horizontal?A.containerHeight:A.containerWidth},enumerable:!0},containerSize:{get:function(){return i._horizontal?A.containerWidth:A.containerHeight},enumerable:!0}}),!i._isCellSpanning(y)){if(i._inListMode){var D=M.viewportCrossSize-A.surfaceOuterCrossSize-i._getHeaderSizeContentAdjustment()-A.itemsContainerOuterCrossSize;i._horizontal?(A.containerHeight=D,A.containerWidth=M.containerWidth):(A.containerHeight=M.containerHeight,A.containerWidth=D)}else A.containerWidth=M.containerWidth,A.containerHeight=M.containerHeight;A.containerSizeLoaded=!0}i._createContainerStyleRule(),i._viewportSizeChanged(M.viewportCrossSize),p()})}var i=this,r="Layout:measureItem",o=i._site,s=i._measuringPromise;if(!s){o._writeProfilerMark(r+",StartTM");var a=new c;i._measuringPromise=s=a.promise.then(function(){return i._ensureEnvInfo()?n(e):l.cancel}).then(function(){o._writeProfilerMark(r+":complete,info"),o._writeProfilerMark(r+",StopTM")},function(e){return i._measuringPromise=null,o._writeProfilerMark(r+":canceled,info"),o._writeProfilerMark(r+",StopTM"),l.wrapError(e)}),a.complete()}return s},_getHeaderSizeGroupAdjustment:function(){if(this._groupsEnabled){if(this._horizontal&&this._groupHeaderPosition===J.left)return this._sizes.headerContainerWidth;if(!this._horizontal&&this._groupHeaderPosition===J.top)return this._sizes.headerContainerHeight}return 0},_getHeaderSizeContentAdjustment:function(){if(this._groupsEnabled){if(this._horizontal&&this._groupHeaderPosition===J.top)return this._sizes.headerContainerHeight;if(!this._horizontal&&this._groupHeaderPosition===J.left)return this._sizes.headerContainerWidth}return 0},_getViewportCrossSize:function(){return this._site.viewportSize[this._horizontal?"height":"width"]},_viewportSizeChanged:function(e){var t=this._sizes;t.viewportContentSize=e,t.surfaceContentSize=e-t.surfaceOuterCrossSize,t.maxItemsContainerContentSize=t.surfaceContentSize-t.itemsContainerOuterCrossSize-this._getHeaderSizeContentAdjustment(),t.containerSizeLoaded&&!this._inListMode?(this._itemsPerBar=Math.floor(t.maxItemsContainerContentSize/t.containerCrossSize),this.maximumRowsOrColumns&&(this._itemsPerBar=Math.min(this._itemsPerBar,this.maximumRowsOrColumns)),this._itemsPerBar=Math.max(1,this._itemsPerBar)):(this._inListMode&&(t[this._horizontal?"containerHeight":"containerWidth"]=t.maxItemsContainerContentSize),this._itemsPerBar=1),this._resetAnimationCaches()},_createContainerStyleRule:function(){var e=this._sizes;if(!this._containerSizeClassName&&e.containerSizeLoaded&&(0===e.emptyContainerContentHeight||0===e.emptyContainerContentWidth)){var t=e.containerWidth-e.containerOuterWidth+"px",n=e.containerHeight-e.containerOuterHeight+"px";this._inListMode&&(this._horizontal?n="calc(100% - "+(e.containerMargins.top+e.containerMargins.bottom)+"px)":t="auto"),this._containerSizeClassName||(this._containerSizeClassName=g("containersize"),h.addClass(this._site.surface,this._containerSizeClassName));var i="."+f._containerClass,r="width:"+t+";height:"+n+";";y(this._containerSizeClassName,this._site,i,r)}},_ensureContainerSize:function(e){var t=this._sizes;if(t.containerSizeLoaded||this._ensuringContainerSize)return this._ensuringContainerSize?this._ensuringContainerSize:l.wrap();var n;if(this._itemInfo&&"function"==typeof this._itemInfo||!this._useDefaultItemInfo)n=this._getItemInfo();else{var i=t.containerMargins;n=l.wrap({width:e.groupInfo.cellWidth-i.left-i.right,height:e.groupInfo.cellHeight-i.top-i.bottom})}var r=this;return this._ensuringContainerSize=n.then(function(e){t.containerSizeLoaded=!0,t.containerWidth=e.width+t.itemBoxOuterWidth+t.containerOuterWidth,t.containerHeight=e.height+t.itemBoxOuterHeight+t.containerOuterHeight,r._inListMode?r._itemsPerBar=1:(r._itemsPerBar=Math.floor(t.maxItemsContainerContentSize/t.containerCrossSize),r.maximumRowsOrColumns&&(r._itemsPerBar=Math.min(r._itemsPerBar,r.maximumRowsOrColumns)),r._itemsPerBar=Math.max(1,r._itemsPerBar)),r._createContainerStyleRule()}),n.done(function(){r._ensuringContainerSize=null},function(){r._ensuringContainerSize=null}),n},_indexToCoordinate:function(e,t){t=t||this._itemsPerBar;var n=Math.floor(e/t);return this._horizontal?{column:n,row:e-n*t}:{row:n,column:e-n*t}},_rangeForGroup:function(e,t){var n=e.startIndex,i=n+e.count-1;return!t||t.firstIndex>i||t.lastIndex<n?null:{firstIndex:Math.max(0,t.firstIndex-n),lastIndex:Math.min(e.count-1,t.lastIndex-n)}},_syncDomWithGroupHeaderPosition:function(e){if(this._groupsEnabled&&this._oldGroupHeaderPosition!==this._groupHeaderPosition){var t,n=e.length;if(this._oldGroupHeaderPosition===J.top)if(h.removeClass(this._site.surface,f._headerPositionTopClass),this._horizontal)for(t=0;n>t;t++)e[t].header.style.maxWidth="",h.removeClass(e[t].itemsContainer.element,f._groupLeaderClass);else this._site.surface.style.msGridRows="";else if(this._oldGroupHeaderPosition===J.left){if(h.removeClass(this._site.surface,f._headerPositionLeftClass),!this._horizontal)for(t=0;n>t;t++)e[t].header.style.maxHeight="",h.removeClass(e[t].itemsContainer.element,f._groupLeaderClass);this._site.surface.style.msGridColumns=""}if(this._groupHeaderPosition===J.top){if(h.addClass(this._site.surface,f._headerPositionTopClass),this._horizontal)for(t=0;n>t;t++)h.addClass(e[t].itemsContainer.element,f._groupLeaderClass)}else if(h.addClass(this._site.surface,f._headerPositionLeftClass),!this._horizontal)for(t=0;n>t;t++)h.addClass(e[t].itemsContainer.element,f._groupLeaderClass);this._oldGroupHeaderPosition=this._groupHeaderPosition}},_layoutGroup:function(e){var t=this._groups[e],n=this._site.tree[e],i=n.header,r=n.itemsContainer.element,o=this._sizes,s=t.getItemsContainerCrossSize();if(this._groupsEnabled){if(this._horizontal)if(this._groupHeaderPosition===J.top){var a=o.headerContainerMinWidth-o.headerContainerOuterWidth,l=t.getItemsContainerSize()-o.headerContainerOuterWidth;i.style.maxWidth=Math.max(a,l)+"px",this._envInfo.supportsCSSGrid?(i.style.msGridColumn=e+1,r.style.msGridColumn=e+1):(i.style.height=o.headerContainerHeight-o.headerContainerOuterHeight+"px",r.style.height=s-o.itemsContainerOuterHeight+"px",r.style.marginBottom=o.itemsContainerMargins.bottom+(o.maxItemsContainerContentSize-s+o.itemsContainerOuterHeight)+"px"),h.addClass(r,f._groupLeaderClass)}else this._envInfo.supportsCSSGrid?(i.style.msGridColumn=2*e+1,r.style.msGridColumn=2*e+2):(i.style.width=o.headerContainerWidth-o.headerContainerOuterWidth+"px",i.style.height=s-o.headerContainerOuterHeight+"px",r.style.height=s-o.itemsContainerOuterHeight+"px");else if(this._groupHeaderPosition===J.left){var u=o.headerContainerMinHeight-o.headerContainerOuterHeight,c=t.getItemsContainerSize()-o.headerContainerOuterHeight;i.style.maxHeight=Math.max(u,c)+"px",this._envInfo.supportsCSSGrid?(i.style.msGridRow=e+1,r.style.msGridRow=e+1):(i.style.width=o.headerContainerWidth-o.headerContainerOuterWidth+"px",r.style.width=s-o.itemsContainerOuterWidth+"px",r.style["margin"+(this._site.rtl?"Left":"Right")]=o.itemsContainerMargins[this._site.rtl?"left":"right"]+(o.maxItemsContainerContentSize-s+o.itemsContainerOuterWidth)+"px"),h.addClass(r,f._groupLeaderClass)}else i.style.msGridRow=2*e+1,this._inListMode?i.style.height=o.headerContainerHeight-o.headerContainerOuterHeight+"px":this._envInfo.supportsCSSGrid?r.style.msGridRow=2*e+2:(i.style.height=o.headerContainerHeight-o.headerContainerOuterHeight+"px",i.style.width=s-o.headerContainerOuterWidth+"px",r.style.width=s-o.itemsContainerOuterWidth+"px");h.addClass(i,f._laidOutClass+" "+f._groupLeaderClass)}h.addClass(r,f._laidOutClass)}},{_barsPerItemsBlock:4})}),_LegacyLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LayoutCommon,null,{disableBackdrop:{get:function(){return this._backdropDisabled||!1},set:function(e){if(h._deprecated(_.disableBackdropIsDeprecated),e=!!e,this._backdropDisabled!==e&&(this._backdropDisabled=e,this._disableBackdropClassName&&(b(this._disableBackdropClassName),this._site&&h.removeClass(this._site.surface,this._disableBackdropClassName),this._disableBackdropClassName=null),this._disableBackdropClassName=g("disablebackdrop"),this._site&&h.addClass(this._site.surface,this._disableBackdropClassName),e)){var t=".win-container.win-backdrop",n="background-color:transparent;";y(this._disableBackdropClassName,this._site,t,n)}}},backdropColor:{get:function(){return this._backdropColor||"rgba(155,155,155,0.23)"},set:function(e){if(h._deprecated(_.backdropColorIsDeprecated),e&&this._backdropColor!==e){this._backdropColor=e,this._backdropColorClassName&&(b(this._backdropColorClassName),this._site&&h.removeClass(this._site.surface,this._backdropColorClassName),this._backdropColorClassName=null),this._backdropColorClassName=g("backdropcolor"),this._site&&h.addClass(this._site.surface,this._backdropColorClassName);var t=".win-container.win-backdrop",n="background-color:"+e+";";y(this._backdropColorClassName,this._site,t,n)}}}})}),GridLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LegacyLayout,function(e){e=e||{},this.itemInfo=e.itemInfo,this.groupInfo=e.groupInfo,this._maxRowsOrColumns=0,this._useDefaultItemInfo=!0,this._elementsToMeasure={},this._groupHeaderPosition=e.groupHeaderPosition||J.top,this.orientation=e.orientation||"horizontal",e.maxRows&&(this.maxRows=+e.maxRows),e.maximumRowsOrColumns&&(this.maximumRowsOrColumns=+e.maximumRowsOrColumns)},{maximumRowsOrColumns:{get:function(){return this._maxRowsOrColumns},set:function(e){this._setMaxRowsOrColumns(e)}},maxRows:{get:function(){return this.maximumRowsOrColumns},set:function(e){h._deprecated(_.maxRowsIsDeprecated),this.maximumRowsOrColumns=e}},itemInfo:{enumerable:!0,get:function(){return this._itemInfo},set:function(e){e&&h._deprecated(_.itemInfoIsDeprecated),this._itemInfo=e,this._invalidateLayout()}},groupInfo:{enumerable:!0,get:function(){return this._groupInfo},set:function(e){e&&h._deprecated(_.groupInfoIsDeprecated),this._groupInfo=e,this._invalidateLayout()}}})})});var q=n.Namespace.defineWithParent(null,null,{UniformGroupBase:n.Namespace._lazy(function(){return n.Class.define(null,{cleanUp:function(){},itemFromOffset:function(e,t){t=t||{};var n=this._layout._sizes;e-=n.itemsContainerOuterStart,t.wholeItem&&(e+=(t.last?-1:1)*(n.containerSize-1));var i=this.count-1,r=Math.floor(i/this._layout._itemsPerBar),o=C(0,r,Math.floor(e/n.containerSize)),s=(o+t.last)*this._layout._itemsPerBar-t.last;return C(0,this.count-1,s)},hitTest:function(e,t){var n=this._layout._horizontal,i=this._layout._itemsPerBar,r=this._layout._inListMode||1===i,o=n?e:t,s=n?t:e,a=this._layout._sizes;o-=a.itemsContainerOuterStart,s-=a.itemsContainerOuterCrossStart;var l,u=Math.floor(o/a.containerSize),c=C(0,i-1,Math.floor(s/a.containerCrossSize)),d=Math.max(-1,u*i+c);if(l=!n&&r||n&&!r?(t-a.containerHeight/2)/a.containerHeight:(e-a.containerWidth/2)/a.containerWidth,r)return l=Math.floor(l),{index:d,insertAfterIndex:l>=0&&d>=0?l:-1};l=C(-1,i-1,l);var h;return h=0>l?u*i-1:u*i+Math.floor(l),{index:C(-1,this.count-1,d),insertAfterIndex:C(-1,this.count-1,h)}},getAdjacent:function(e,t){var n,i=e.index,r=Math.floor(i/this._layout._itemsPerBar),o=i%this._layout._itemsPerBar;switch(t){case D.upArrow:n=0===o?"boundary":i-1;break;case D.downArrow:var s=i===this.count-1,a=this._layout._itemsPerBar>1&&o===this._layout._itemsPerBar-1;n=s||a?"boundary":i+1;break;case D.leftArrow:
n=0===r&&this._layout._itemsPerBar>1?"boundary":i-this._layout._itemsPerBar;break;case D.rightArrow:var l=this.count-1,u=Math.floor(l/this._layout._itemsPerBar);n=r===u?"boundary":Math.min(i+this._layout._itemsPerBar,this.count-1)}return"boundary"===n?n:{type:m.ObjectType.item,index:n}},getItemsContainerSize:function(){var e=this._layout._sizes,t=Math.ceil(this.count/this._layout._itemsPerBar);return t*e.containerSize+e.itemsContainerOuterSize},getItemsContainerCrossSize:function(){var e=this._layout._sizes;return this._layout._itemsPerBar*e.containerCrossSize+e.itemsContainerOuterCrossSize},getItemPositionForAnimations:function(e){var t=this._layout._sizes,n=this._layout._site.rtl?"right":"left",i=this._layout._sizes.containerMargins,r=this._layout._indexToCoordinate(e),o={row:r.row,column:r.column,top:i.top+r.row*t.containerHeight,left:i[n]+r.column*t.containerWidth,height:t.containerHeight-t.containerMargins.top-t.containerMargins.bottom,width:t.containerWidth-t.containerMargins.left-t.containerMargins.right};return o}})}),UniformGroup:n.Namespace._lazy(function(){return n.Class.derive(q.UniformGroupBase,function(e,t){this._layout=e,this._itemsContainer=t,h.addClass(this._itemsContainer,e._inListMode?f._uniformListLayoutClass:f._uniformGridLayoutClass)},{cleanUp:function(e){e||(h.removeClass(this._itemsContainer,f._uniformGridLayoutClass),h.removeClass(this._itemsContainer,f._uniformListLayoutClass),this._itemsContainer.style.height=this._itemsContainer.style.width=""),this._itemsContainer=null,this._layout=null,this.groupInfo=null,this.startIndex=null,this.offset=null,this.count=null},prepareLayout:function(e,t,n,i){return this.groupInfo=i.groupInfo,this.startIndex=i.startIndex,this.count=e,this._layout._ensureContainerSize(this)},layoutRealizedRange:function(){var e=this._layout._sizes;this._itemsContainer.style[this._layout._horizontal?"width":"height"]=this.getItemsContainerSize()-e.itemsContainerOuterSize+"px",this._itemsContainer.style[this._layout._horizontal?"height":"width"]=this._layout._inListMode?e.maxItemsContainerContentSize+"px":this._layout._itemsPerBar*e.containerCrossSize+"px"},layoutUnrealizedRange:function(){return l.wrap()}})}),UniformFlowGroup:n.Namespace._lazy(function(){return n.Class.derive(q.UniformGroupBase,function(e,t){this._layout=e,this._itemsContainer=t.element,h.addClass(this._itemsContainer,e._inListMode?f._uniformListLayoutClass:f._uniformGridLayoutClass)},{cleanUp:function(e){e||(h.removeClass(this._itemsContainer,f._uniformListLayoutClass),h.removeClass(this._itemsContainer,f._uniformGridLayoutClass),this._itemsContainer.style.height="")},layout:function(){this._layout._site._writeProfilerMark("Layout:_UniformFlowGroup:setItemsContainerHeight,info"),this._itemsContainer.style.height=this.count*this._layout._sizes.containerHeight+"px"}})}),CellSpanningGroup:n.Namespace._lazy(function(){return n.Class.define(function(e,t){this._layout=e,this._itemsContainer=t,h.addClass(this._itemsContainer,f._cellSpanningGridLayoutClass),this.resetMap()},{cleanUp:function(e){e||(this._cleanContainers(),h.removeClass(this._itemsContainer,f._cellSpanningGridLayoutClass),this._itemsContainer.style.cssText=""),this._itemsContainer=null,this._layoutPromise&&(this._layoutPromise.cancel(),this._layoutPromise=null),this.resetMap(),this._slotsPerColumn=null,this._offScreenSlotsPerColumn=null,this._items=null,this._layout=null,this._containersToHide=null,this.groupInfo=null,this.startIndex=null,this.offset=null,this.count=null},prepareLayoutWithCopyOfTree:function(e,t,n,i){var r,o=this;if(this._containersToHide={},t)for(r=t.firstIndex;r<=t.lastIndex;r++)this._containersToHide[L(n._items[r])]=n._items[r];this.groupInfo=i.groupInfo,this.startIndex=i.startIndex,this.count=e.items.length,this._items=e.items,this._slotsPerColumn=Math.floor(this._layout._sizes.maxItemsContainerContentSize/this.groupInfo.cellHeight),this._layout.maximumRowsOrColumns&&(this._slotsPerColumn=Math.min(this._slotsPerColumn,this._layout.maximumRowsOrColumns)),this._slotsPerColumn=Math.max(this._slotsPerColumn,1),this.resetMap();var s=new Array(this.count);for(r=0;r<this.count;r++)s[r]=this._layout._getItemInfo(this.startIndex+r);return l.join(s).then(function(e){e.forEach(function(e,t){o.addItemToMap(t,e)})})},layoutRealizedRange:function(e,t){if(t){var n,i=Math.max(e,t.firstIndex);for(n=i;n<=t.lastIndex;n++)this._layoutItem(n),delete this._containersToHide[L(this._items[n])]}Object.keys(this._containersToHide).forEach(function(e){h.removeClass(this._containersToHide[e],f._laidOutClass)}.bind(this)),this._containersToHide={},this._itemsContainer.style.cssText+=";width:"+(this.getItemsContainerSize()-this._layout._sizes.itemsContainerOuterSize)+"px;height:"+this._layout._sizes.maxItemsContainerContentSize+"px;-ms-grid-columns: ("+this.groupInfo.cellWidth+"px)["+this.getColumnCount()+"];-ms-grid-rows: ("+this.groupInfo.cellHeight+"px)["+(this._slotsPerColumn+this._offScreenSlotsPerColumn)+"]"},layoutUnrealizedRange:function(e,t,n){var i,r=this;return r._layoutPromise=new l(function(o){function s(){i=null,o()}function a(e){return u.schedule(e,u.Priority.normal,null,"WinJS.UI.GridLayout.CellSpanningGroup.LayoutUnrealizedRange")}if(t){var l=!1,c=t.firstIndex-1,d=Math.max(e,t.lastIndex+1);d=Math.max(c+1,d),i=a(function p(t){for(;!l;){if(t.shouldYield)return void t.setWork(p);l=!0,c>=e&&(r._layoutItem(c),c--,l=!1),d<r.count&&(r._layoutItem(d),d++,l=!1)}s()})}else if(n){var h=r.count-1;i=a(function m(t){for(;h>=e;h--){if(t.shouldYield)return void t.setWork(m);r._layoutItem(h)}s()})}else{var h=e;i=a(function f(e){for(;h<r.count;h++){if(e.shouldYield)return void e.setWork(f);r._layoutItem(h)}s()})}},function(){i&&i.cancel(),i=null}),r._layoutPromise},itemFromOffset:function(e,t){t=t||{};var n=this._layout._sizes,i=n.containerMargins;e-=n.itemsContainerOuterX,e-=(t.last?1:-1)*i[t.last?"left":"right"];var r=this.indexFromOffset(e,t.wholeItem,t.last).item;return C(0,this.count-1,r)},getAdjacent:function(e,t){var n,i;n=i=e.index;var r,o,s;s=this.lastAdjacent===n?this.lastInMapIndex:this.findItem(n);do{var a=Math.floor(s/this._slotsPerColumn),l=s-a*this._slotsPerColumn,u=Math.floor((this.occupancyMap.length-1)/this._slotsPerColumn);switch(t){case D.upArrow:if(!(l>0))return{type:m.ObjectType.item,index:i};s--;break;case D.downArrow:if(!(l+1<this._slotsPerColumn))return{type:m.ObjectType.item,index:i};s++;break;case D.leftArrow:s=a>0?s-this._slotsPerColumn:-1;break;case D.rightArrow:s=u>a?s+this._slotsPerColumn:this.occupancyMap.length}o=s>=0&&s<this.occupancyMap.length,o&&(r=this.occupancyMap[s]?this.occupancyMap[s].index:void 0)}while(o&&(n===r||void 0===r));return this.lastAdjacent=r,this.lastInMapIndex=s,o?{type:m.ObjectType.item,index:r}:"boundary"},hitTest:function(e,t){var n=this._layout._sizes,i=0;if(e-=n.itemsContainerOuterX,t-=n.itemsContainerOuterY,this.occupancyMap.length>0){for(var r=this.indexFromOffset(e,!1,0),o=Math.min(this._slotsPerColumn-1,Math.floor(t/this.groupInfo.cellHeight)),s=r.index,a=s;o-->0;)s++,this.occupancyMap[s]&&(a=s);this.occupancyMap[a]||a--,i=this.occupancyMap[a].index}var l=this.getItemSize(i),u=l.column*this.groupInfo.cellWidth,c=l.row*this.groupInfo.cellHeight,d=1===this._slotsPerColumn,h=i;return(d&&e<u+l.contentWidth/2||!d&&t<c+l.contentHeight/2)&&h--,{type:m.ObjectType.item,index:C(0,this.count-1,i),insertAfterIndex:C(-1,this.count-1,h)}},getItemsContainerSize:function(){var e=this._layout._sizes;return this.getColumnCount()*this.groupInfo.cellWidth+e.itemsContainerOuterSize},getItemsContainerCrossSize:function(){var e=this._layout._sizes;return e.maxItemsContainerContentSize+e.itemsContainerOuterCrossSize},getItemPositionForAnimations:function(e){var t=this._layout._site.rtl?"right":"left",n=this._layout._sizes.containerMargins,i=this.getItemSize(e),r=this.groupInfo,o={row:i.row,column:i.column,top:n.top+i.row*r.cellHeight,left:n[t]+i.column*r.cellWidth,height:i.contentHeight,width:i.contentWidth};return o},_layoutItem:function(e){var t=this.getItemSize(e);return this._items[e].style.cssText+=";-ms-grid-row:"+(t.row+1)+";-ms-grid-column:"+(t.column+1)+";-ms-grid-row-span:"+t.rows+";-ms-grid-column-span:"+t.columns+";height:"+t.contentHeight+"px;width:"+t.contentWidth+"px",h.addClass(this._items[e],f._laidOutClass),this._items[e]},_cleanContainers:function(){var e,t=this._items,n=t.length;for(e=0;n>e;e++)t[e].style.cssText="",h.removeClass(t[e],f._laidOutClass)},getColumnCount:function(){return Math.ceil(this.occupancyMap.length/this._slotsPerColumn)},getOccupancyMapItemCount:function(){var e=-1;return this.occupancyMap.forEach(function(t){t.index>e&&(e=t.index)}),e+1},coordinateToIndex:function(e,t){return e*this._slotsPerColumn+t},markSlotAsFull:function(e,t){for(var n=this._layout._indexToCoordinate(e,this._slotsPerColumn),i=n.row+t.rows,r=n.row;i>r&&r<this._slotsPerColumn;r++)for(var o=n.column,s=n.column+t.columns;s>o;o++)this.occupancyMap[this.coordinateToIndex(o,r)]=t;this._offScreenSlotsPerColumn=Math.max(this._offScreenSlotsPerColumn,i-this._slotsPerColumn)},isSlotEmpty:function(e,t,n){for(var i=t,r=t+e.rows;r>i;i++)for(var o=n,s=n+e.columns;s>o;o++)if(i>=this._slotsPerColumn||void 0!==this.occupancyMap[this.coordinateToIndex(o,i)])return!1;return!0},findEmptySlot:function(e,t,n){var i=this._layout._indexToCoordinate(e,this._slotsPerColumn),r=i.row,o=Math.floor((this.occupancyMap.length-1)/this._slotsPerColumn);if(n){for(var s=i.column+1;o>=s;s++)if(this.isSlotEmpty(t,0,s))return this.coordinateToIndex(s,0)}else for(var s=i.column;o>=s;s++){for(var a=r;a<this._slotsPerColumn;a++)if(this.isSlotEmpty(t,a,s))return this.coordinateToIndex(s,a);r=0}return(o+1)*this._slotsPerColumn},findItem:function(e){for(var t=e,n=this.occupancyMap.length;n>t;t++){var i=this.occupancyMap[t];if(i&&i.index===e)return t}return t},getItemSize:function(e){var t=this.findItem(e),n=this.occupancyMap[t],i=this._layout._indexToCoordinate(t,this._slotsPerColumn);return e===n.index?{row:i.row,column:i.column,contentWidth:n.contentWidth,contentHeight:n.contentHeight,columns:n.columns,rows:n.rows}:null},resetMap:function(){this.occupancyMap=[],this.lastAdded=0,this._offScreenSlotsPerColumn=0},addItemToMap:function(e,t){function n(e,t){var n=i.findEmptySlot(i.lastAdded,e,t);i.lastAdded=n,i.markSlotAsFull(n,e)}var i=this,r=i.groupInfo,o=i._layout._sizes.containerMargins,s={index:e,contentWidth:t.width,contentHeight:t.height,columns:Math.max(1,Math.ceil((t.width+o.left+o.right)/r.cellWidth)),rows:Math.max(1,Math.ceil((t.height+o.top+o.bottom)/r.cellHeight))};n(s,t.newColumn)},indexFromOffset:function(e,t,n){var i=0,r=0,o=this.groupInfo,s=0;if(this.occupancyMap.length>0){if(r=this.getOccupancyMapItemCount()-1,i=Math.ceil((this.occupancyMap.length-1)/this._slotsPerColumn)*o.cellWidth,i>e){for(var a=this._slotsPerColumn,s=(Math.max(0,Math.floor(e/o.cellWidth))+n)*this._slotsPerColumn-n;!this.occupancyMap[s]&&a-->0;)s+=n>0?-1:1;return{index:s,item:this.occupancyMap[s].index}}s=this.occupancyMap.length-1}return{index:s,item:r+(Math.max(0,Math.floor((e-i)/o.cellWidth))+n)*this._slotsPerColumn-n}}})})});n.Namespace._moduleDefine(e,"WinJS.UI",{ListLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LegacyLayout,function(e){e=e||{},this._itemInfo={},this._groupInfo={},this._groupHeaderPosition=e.groupHeaderPosition||J.top,this._inListMode=!0,this.orientation=e.orientation||"vertical"},{initialize:function(t,n){h.addClass(t.surface,f._listLayoutClass),e._LegacyLayout.prototype.initialize.call(this,t,n)},uninitialize:function(){this._site&&h.removeClass(this._site.surface,f._listLayoutClass),e._LegacyLayout.prototype.uninitialize.call(this)},layout:function(t,n,i,r){return this._groupsEnabled||this._horizontal?e._LegacyLayout.prototype.layout.call(this,t,n,i,r):this._layoutNonGroupedVerticalList(t,n,i,r)},_layoutNonGroupedVerticalList:function(e,t,n,i){var r=this,o="Layout:_layoutNonGroupedVerticalList";return r._site._writeProfilerMark(o+",StartTM"),this._layoutPromise=r._measureItem(0).then(function(){h[r._usingStructuralNodes?"addClass":"removeClass"](r._site.surface,f._structuralNodesClass),h[r._envInfo.nestedFlexTooLarge||r._envInfo.nestedFlexTooSmall?"addClass":"removeClass"](r._site.surface,f._singleItemsBlockClass),r._sizes.viewportContentSize!==r._getViewportCrossSize()&&r._viewportSizeChanged(r._getViewportCrossSize()),r._cacheRemovedElements(n,r._cachedItemRecords,r._cachedInsertedItemRecords,r._cachedRemovedItems,!1),r._cacheRemovedElements(i,r._cachedHeaderRecords,r._cachedInsertedHeaderRecords,r._cachedRemovedHeaders,!0);var t=e[0].itemsContainer,s=new q.UniformFlowGroup(r,t);r._groups=[s],s.groupInfo={enableCellSpanning:!1},s.startIndex=0,s.count=T(t),s.offset=0,s.layout(),r._site._writeProfilerMark(o+":setSurfaceWidth,info"),r._site.surface.style.width=r._sizes.surfaceContentSize+"px",r._layoutAnimations(n,i),r._site._writeProfilerMark(o+":complete,info"),r._site._writeProfilerMark(o+",StopTM")},function(e){return r._site._writeProfilerMark(o+":canceled,info"),r._site._writeProfilerMark(o+",StopTM"),l.wrapError(e)}),{realizedRangeComplete:this._layoutPromise,layoutComplete:this._layoutPromise}},numberOfItemsPerItemsBlock:{get:function(){var t=this;return this._measureItem(0).then(function(){return t._envInfo.nestedFlexTooLarge||t._envInfo.nestedFlexTooSmall?(t._usingStructuralNodes=!0,Number.MAX_VALUE):(t._usingStructuralNodes=e.ListLayout._numberOfItemsPerItemsBlock>0,e.ListLayout._numberOfItemsPerItemsBlock)})}}},{_numberOfItemsPerItemsBlock:10})}),CellSpanningLayout:n.Namespace._lazy(function(){return n.Class.derive(e._LayoutCommon,function(e){e=e||{},this._itemInfo=e.itemInfo,this._groupInfo=e.groupInfo,this._groupHeaderPosition=e.groupHeaderPosition||J.top,this._horizontal=!0,this._cellSpanning=!0},{maximumRowsOrColumns:{get:function(){return this._maxRowsOrColumns},set:function(e){this._setMaxRowsOrColumns(e)}},itemInfo:{enumerable:!0,get:function(){return this._itemInfo},set:function(e){this._itemInfo=e,this._invalidateLayout()}},groupInfo:{enumerable:!0,get:function(){return this._groupInfo},set:function(e){this._groupInfo=e,this._invalidateLayout()}},orientation:{enumerable:!0,get:function(){return"horizontal"}}})}),_LayoutWrapper:n.Namespace._lazy(function(){return n.Class.define(function(e){this.defaultAnimations=!0,this.initialize=function(t,n){e.initialize(t,n)},this.hitTest=function(t,n){return e.hitTest(t,n)},e.uninitialize&&(this.uninitialize=function(){e.uninitialize()}),"numberOfItemsPerItemsBlock"in e&&Object.defineProperty(this,"numberOfItemsPerItemsBlock",{get:function(){return e.numberOfItemsPerItemsBlock}}),e._getItemPosition&&(this._getItemPosition=function(t){return e._getItemPosition(t)}),e.itemsFromRange&&(this.itemsFromRange=function(t,n){return e.itemsFromRange(t,n)}),e.getAdjacent&&(this.getAdjacent=function(t,n){return e.getAdjacent(t,n)}),e.dragOver&&(this.dragOver=function(t,n,i){return e.dragOver(t,n,i)}),e.dragLeave&&(this.dragLeave=function(){return e.dragLeave()});var t={enumerable:!0,get:function(){return"vertical"}};if(void 0!==e.orientation&&(t.get=function(){return e.orientation},t.set=function(t){e.orientation=t}),Object.defineProperty(this,"orientation",t),(e.setupAnimations||e.executeAnimations)&&(this.defaultAnimations=!1,this.setupAnimations=function(){return e.setupAnimations()},this.executeAnimations=function(){return e.executeAnimations()}),e.layout)if(this.defaultAnimations){var n=this;this.layout=function(t,i,r,o){var s,a=A(e.layout(t,i,[],[]));return a.realizedRangeComplete.then(function(){s=!0}),s&&n._layoutAnimations(r,o),a}}else this.layout=function(t,n,i,r){return A(e.layout(t,n,i,r))}},{uninitialize:function(){},numberOfItemsPerItemsBlock:{get:function(){}},layout:function(e,t,n,i){return this.defaultAnimations&&this._layoutAnimations(n,i),A()},itemsFromRange:function(){return{firstIndex:0,lastIndex:Number.MAX_VALUE}},getAdjacent:function(e,t){switch(t){case D.pageUp:case D.upArrow:case D.leftArrow:return{type:e.type,index:e.index-1};case D.downArrow:case D.rightArrow:case D.pageDown:return{type:e.type,index:e.index+1}}},dragOver:function(){},dragLeave:function(){},setupAnimations:function(){},executeAnimations:function(){},_getItemPosition:function(){},_layoutAnimations:function(){}})})});var J={left:"left",top:"top"};n.Namespace._moduleDefine(e,"WinJS.UI",{HeaderPosition:J,_getMargins:O})}),i("WinJS/Controls/ListView/_VirtualizeContentsView",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Promise","../../_Signal","../../Scheduler","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_SafeHtml","../../Utilities/_UI","../ItemContainer/_Constants","../ItemContainer/_ItemEventsHandler","./_Helpers","./_ItemsContainer"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m){"use strict";function f(e,t){l._setAttribute(e,"aria-flowto",t.id),l._setAttribute(t,"x-ms-aria-flowfrom",e.id)}n.Namespace._moduleDefine(e,"WinJS.UI",{_VirtualizeContentsView:n.Namespace._lazy(function(){function e(t){for(var n,i=t.job._workItems;i.length&&!t.shouldYield;)(n=i.shift())();t.setWork(e),i.length||t.job.pause()}function _(t,n){var i=s.schedule(e,t,null,n);return i._workItems=[],i.addWork=function(e,t){t?this._workItems.unshift(e):this._workItems.push(e),this.resume()},i.clearWork=function(){this._workItems.length=0},i.dispose=function(){this.cancel(),this._workItems.length=0},i}function g(e){return e._zooming||e._pinching}function v(e,t){return e._isZombie()?r.wrap():g(e)?(+t!==t&&(t=C._waitForSeZoTimeoutDuration),r.timeout(C._waitForSeZoIntervalDuration).then(function(){return t-=C._waitForSeZoIntervalDuration,0>=t?!0:v(e,t)})):r.wrap()}function y(e){if("number"==typeof e){var t=e;e=function(){return{position:t,direction:"right"}}}return e}function b(){}var C=n.Class.define(function(e){this._listView=e,this._forceRelayout=!1,this.maxLeadingPages=i._isiOS?C._iOSMaxLeadingPages:C._defaultPagesToPrefetch,this.maxTrailingPages=i._isiOS?C._iOSMaxTrailingPages:C._defaultPagesToPrefetch,this.items=new m._ItemsContainer(e),this.firstIndexDisplayed=-1,this.lastIndexDisplayed=-1,this.begin=0,this.end=0,this._realizePass=1,this._firstLayoutPass=!0,this._runningAnimations=null,this._renderCompletePromise=r.wrap(),this._state=new w(this),this._createLayoutSignal(),this._createTreeBuildingSignal(),this._layoutWork=null,this._onscreenJob=_(s.Priority.aboveNormal,"on-screen items"),this._frontOffscreenJob=_(s.Priority.normal,"front off-screen items"),this._backOffscreenJob=_(s.Priority.belowNormal,"back off-screen items"),this._scrollbarPos=0,this._direction="right",this._scrollToFunctor=y(0)},{_dispose:function(){this.cleanUp(),this.items=null,this._renderCompletePromise&&this._renderCompletePromise.cancel(),this._renderCompletePromise=null,this._onscreenJob.dispose(),this._frontOffscreenJob.dispose(),this._backOffscreenJob.dispose()},_createItem:function(e,t,n,i){this._listView._writeProfilerMark("createItem("+e+") "+this._getBoundingRectString(e)+",info");var o=this;o._listView._itemsManager._itemFromItemPromiseThrottled(t).done(function(t){t?n(e,t,o._listView._itemsManager._recordFromElement(t)):i(e)},function(t){return i(e),r.wrapError(t)})},_addItem:function(e,t,n,i){if(this._realizePass===i){var r=this._listView._itemsManager._recordFromElement(n);delete this._pendingItemPromises[r.itemPromise.handle],this.items.setItemAt(t,{itemBox:null,container:null,element:n,detached:!0,itemsManagerRecord:r})}},lastItemIndex:function(){return this.containers?this.containers.length-1:-1},_setSkipRealizationForChange:function(e){e?this._realizationLevel!==C._realizationLevel.realize&&(this._realizationLevel=C._realizationLevel.skip):this._realizationLevel=C._realizationLevel.realize},_realizeItems:function(e,t,n,i,a,u,c,p,m,f){function _(e,t){k.push(r._cancelBlocker(t.renderComplete)),b(e)}function g(e,t){function n(e,t){e.updatedDraggableAttribute||!O._listView.itemsDraggable&&!O._listView.itemsReorderable||e.itemsManagerRecord.renderComplete.done(function(){O._realizePass===a&&(l.hasClass(t,d._nonDraggableClass)||(e.itemBox.draggable=!0),e.updatedDraggableAttribute=!0)})}if(O._listView._writeProfilerMark("_realizeItems_appendedItemsToDom,StartTM"),!O._listView._isZombie()){var i,r=0,o=-1,s=-1;for(i=e;t>=i;i++){var u=O.items.itemDataAt(i);if(u){var p=u.element,m=u.itemBox;m||(m=O._listView._itemBoxTemplate.cloneNode(!0),u.itemBox=m,m.appendChild(p),l.addClass(p,d._itemClass),O._listView._setupAriaSelectionObserver(p),O._listView._isSelected(i)&&h._ItemEventsHandler.renderSelection(m,p,!0,!0),O._listView._currentMode().renderDragSourceOnRealizedItem(i,m)),n(u,p);var f=O.getContainer(i);m.parentNode!==f&&(u.container=f,O._appendAndRestoreFocus(f,m),r++,0>o&&(o=i),s=i,O._listView._isSelected(i)&&l.addClass(f,d._selectedClass),l.removeClass(f,d._backdropClass),O.items.elementAvailable(i))}}O._listView._writeProfilerMark("_realizeItems_appendedItemsToDom,StopTM"),r>0&&(O._listView._writeProfilerMark("_realizeItems_appendedItemsToDom:"+r+" ("+o+"-"+s+"),info"),O._reportElementsLevel(c))}}function v(e,t,n,i){function r(e,t){var n=O.items.itemDataAt(e);if(n){var i=n.itemBox;return i&&i.parentNode?t?(l.addClass(i.parentNode,d._backdropClass),i.parentNode.removeChild(i),!0):!1:!0}return!0}if(!f){for(var o=!1;e>=n;)o=r(e,o),e--;for(o=!1;i>=t;)o=r(t,o),t++}}function y(e,t,n,i,o){function s(e){var t=O.items.itemDataAt(e);if(t){var i=t.itemsManagerRecord;i.readyComplete||O._realizePass!==a||n.addWork(function(){O._listView._isZombie()||i.pendingReady&&O._realizePass===a&&(O._listView._writeProfilerMark("pendingReady("+e+"),info"),i.pendingReady())},o)}}for(var l=[],u=e;t>=u;u++){var c=O.items.itemDataAt(u);c&&l.push(c.itemsManagerRecord.itemPromise)}r.join(l).then(function(){if("right"===i)for(var n=e;t>=n;n++)s(n);else for(var n=t;n>=e;n--)s(n)})}function b(e){if(O._realizePass===a){if(e>=p&&m>=e){if(0===--E){if(g(p,m),v(p,m,t,n),O._firstLayoutPass){y(p,m,O._frontOffscreenJob,"right"===c?"left":"right",!0);var i=s.schedulePromiseHigh(null,"WinJS.UI.ListView.entranceAnimation").then(function(){if(!O._listView._isZombie()){O._listView._writeProfilerMark("entranceAnimation,StartTM");var e=O._listView._animateListEntrance(!O._firstEntranceAnimated);return O._firstEntranceAnimated=!0,e}});O._runningAnimations=r.join([O._runningAnimations,i]),O._runningAnimations.done(function(){O._listView._writeProfilerMark("entranceAnimation,StopTM"),O._realizePass===a&&(O._runningAnimations=null,T.complete())}),O._firstLayoutPass=!1,O._listView._isCurrentZoomView&&s.requestDrain(O._onscreenJob.priority)}else y(p,m,O._frontOffscreenJob,c),T.complete();O._updateHeaders(O._listView._canvas,p,m+1).done(function(){M.complete()})}}else p>e?(--P,P%S===0&&g(t,p-1),P||(O._updateHeaders(O._listView._canvas,t,p).done(function(){"right"!==c&&A.complete()}),y(t,p-1,"right"!==c?O._frontOffscreenJob:O._backOffscreenJob,"left"))):e>m&&(--x,x%S===0&&g(m+1,n-1),x||(O._updateHeaders(O._listView._canvas,m+1,n).then(function(){"right"===c&&A.complete()}),y(m+1,n-1,"right"===c?O._frontOffscreenJob:O._backOffscreenJob,"right")));I--,0===I&&(O._renderCompletePromise=r.join(k).then(null,function(e){var t=Array.isArray(e)&&e.some(function(e){return e&&!(e instanceof Error&&"Canceled"===e.name)});return t?r.wrapError(e):void 0}),(O._headerRenderPromises||r.wrap()).done(function(){s.schedule(function(){O._listView._isZombie()?N.cancel():N.complete()},Math.min(O._onscreenJob.priority,O._backOffscreenJob.priority),null,"WinJS.UI.ListView._allItemsRealized")}))}}function C(t,n,i){if(O._realizePass===a){var n=i.element;O._addItem(e,t,n,a),_(t,i)}}var w="_realizeItems("+t+"-"+(n-1)+") visible("+p+"-"+m+")";this._listView._writeProfilerMark(w+",StartTM"),c=c||"right";var I=n-t,S=m-p+1,E=S,x=n-m-1,P=p-t,k=[],T=new o,M=new o,A=new o,O=this;if(I>0){var D=0,L=0,B=0;O.firstIndexDisplayed=p,O.lastIndexDisplayed=m;var R=O._listView._isCurrentZoomView;O._highPriorityRealize&&(O._firstLayoutPass||O._hasAnimationInViewportPending)?(O._highPriorityRealize=!1,O._onscreenJob.priority=s.Priority.high,O._frontOffscreenJob.priority=s.Priority.normal,O._backOffscreenJob.priority=s.Priority.belowNormal):O._highPriorityRealize?(O._highPriorityRealize=!1,O._onscreenJob.priority=s.Priority.high,O._frontOffscreenJob.priority=s.Priority.high-1,O._backOffscreenJob.priority=s.Priority.high-1):R?(O._onscreenJob.priority=s.Priority.aboveNormal,O._frontOffscreenJob.priority=s.Priority.normal,O._backOffscreenJob.priority=s.Priority.belowNormal):(O._onscreenJob.priority=s.Priority.belowNormal,O._frontOffscreenJob.priority=s.Priority.idle,O._backOffscreenJob.priority=s.Priority.idle);var N=new o,F=O._listView._versionManager.cancelOnNotification(N.promise),z=function(e,t){t.startStage1&&t.stage0.then(function(){O._realizePass===a&&t.startStage1&&e.addWork(t.startStage1)})},H=function(e,t){var n=O.items.itemDataAt(t);if(!n){var i=O._listView._itemsManager._itemPromiseAtIndex(t);O._pendingItemPromises[i.handle]=i,delete O._previousRealizationPendingItemPromises[i.handle],e.addWork(function(){if(!O._listView._isZombie()&&(D++,O._createItem(t,i,C,b),!O._listView._isZombie()&&O._realizePass===a&&i.handle)){var n=O._listView._itemsManager._recordFromHandle(i.handle);z(e,n)}})}},W=function(e,t,n){for(var i=t;n>=i;i++)H(e,i)},U=function(e,t,n){for(var i=n;i>=t;i--)H(e,i)},j=function(e,t,n){for(var i=t;n>=i;i++){var r=O.items.itemDataAt(i);if(r){var o=r.itemsManagerRecord;_(i,o),L++,z(e,o)}}};this._previousRealizationPendingItemPromises=this._pendingItemPromises||{},this._pendingItemPromises={};var V;"left"===c?(U(O._onscreenJob,p,m),U(O._frontOffscreenJob,t,p-1),V=t>p-1):(W(O._onscreenJob,p,m),W(O._frontOffscreenJob,m+1,n-1),V=m+1>n-1);for(var q=0,J=Object.keys(this._previousRealizationPendingItemPromises),K=J.length;K>q;q++){var G=J[q];O._listView._itemsManager.releaseItemPromise(this._previousRealizationPendingItemPromises[G])}this._previousRealizationPendingItemPromises={},j(O._onscreenJob,p,m),"left"===c?j(O._frontOffscreenJob,t,p-1):j(O._frontOffscreenJob,m+1,n-1);var Y=E===m-p+1;return O._firstLayoutPass?O._listView._canvas.style.opacity=0:Y?O._listView._showProgressBar(O._listView._element,"50%","50%"):O._listView._hideProgressBar(),O._frontOffscreenJob.pause(),O._backOffscreenJob.pause(),M.promise.done(function(){O._frontOffscreenJob.resume(),V&&A.complete()},function(){N.cancel()}),A.promise.done(function(){O._listView._writeProfilerMark("frontItemsRealized,info"),"left"===c?(W(O._backOffscreenJob,m+1,n-1),j(O._backOffscreenJob,m+1,n-1)):(U(O._backOffscreenJob,t,p-1),j(O._backOffscreenJob,t,p-1)),O._backOffscreenJob.resume()}),N.promise.done(function(){O._listView._versionManager.clearCancelOnNotification(F),O._listView._writeProfilerMark(w+" complete(created:"+D+" updated:"+L+"),info")},function(e){return O._listView._versionManager.clearCancelOnNotification(F),O._onscreenJob.clearWork(),O._frontOffscreenJob.clearWork(),O._backOffscreenJob.clearWork(),T.cancel(),M.cancel(),O._listView._writeProfilerMark(w+" canceled(created:"+D+" updated:"+L+" clean:"+B+"),info"),r.wrapError(e)}),O._listView._writeProfilerMark(w+",StopTM"),{viewportItemsRealized:M.promise,allItemsRealized:N.promise,loadingCompleted:r.join([N.promise,T.promise]).then(function(){for(var e=[],i=t;n>i;i++){var o=O.items.itemDataAt(i);o&&e.push(o.itemsManagerRecord.itemReadyPromise)}return r._cancelBlocker(r.join(e))})}}return O._listView._writeProfilerMark(w+",StopTM"),{viewportItemsRealized:r.wrap(),allItemsRealized:r.wrap(),loadingCompleted:r.wrap()}},_setAnimationInViewportState:function(e){if(this._hasAnimationInViewportPending=!1,e&&e.length>0)for(var t=this._listView._getViewportLength(),n=this._listView._layout.itemsFromRange(this._scrollbarPos,this._scrollbarPos+t-1),i=0,r=e.length;r>i;i++){var o=e[i];if(o.newIndex>=n.firstIndex&&o.newIndex<=n.lastIndex&&o.newIndex!==o.oldIndex){this._hasAnimationInViewportPending=!0;break}}},_addHeader:function(e,t){var n=this;return this._listView._groups.renderGroup(t).then(function(e){if(e){e.element.tabIndex=0;var i=n._getHeaderContainer(t);e.element.parentNode!==i&&(i.appendChild(e.element),l.addClass(e.element,d._headerClass)),n._listView._groups.setDomElement(t,e.element)}})},_updateHeaders:function(e,t,n){function i(t){var n=s._listView._groups.group(t);if(n&&!n.header){var i=n.headerPromise;return i||(i=n.headerPromise=s._addHeader(e,t),i.done(function(){n.headerPromise=null},function(){n.headerPromise=null})),i}return r.wrap()}function o(){s._headerRenderPromises=null}var s=this;this._listView._groups.removeElements();var a=this._listView._groups.groupFromItem(t),l=a,u=this._listView._groups.groupFromItem(n-1),c=[];if(null!==l)for(;u>=l;l++)c.push(i(l));return this._headerRenderPromises=r.join(c,this._headerRenderPromises).then(o,o),this._headerRenderPromises||r.wrap()},_unrealizeItem:function(e){var t,n=this._listView;this._listView._writeProfilerMark("_unrealizeItem("+e+"),info");var i=n._selection._getFocused();i.type===c.ObjectType.item&&i.index===e&&(n._unsetFocusOnItem(),t=!0);var r=this.items.itemDataAt(e),o=r.element,s=r.itemBox;s&&s.parentNode&&(l.removeClass(s.parentNode,d._selectedClass),l.removeClass(s.parentNode,d._footprintClass),l.addClass(s.parentNode,d._backdropClass),s.parentNode.removeChild(s)),r.container=null,n._currentMode().itemUnrealized&&n._currentMode().itemUnrealized(e,s),this.items.removeItem(e),r.removed||n._itemsManager.releaseItem(o),a._disposeElement(o),t&&n._setFocusOnItem(n._selection._getFocused())},_unrealizeGroup:function(e){var t,n=e.header,i=this._listView._selection._getFocused();i.type===c.ObjectType.groupHeader&&this._listView._groups.group(i.index)===e&&(this._listView._unsetFocusOnItem(),t=!0),n.parentNode&&n.parentNode.removeChild(n),a._disposeElement(n),e.header=null,e.left=-1,e.top=-1,t&&this._listView._setFocusOnItem(this._listView._selection._getFocused())},_unrealizeItems:function(e){var t=this,n=0;this.items.eachIndex(function(i){return i<t.begin||i>=t.end?(t._unrealizeItem(i),e&&++n>=e):void 0});var i=this._listView._groups,r=i.groupFromItem(this.begin);if(null!==r)for(var o=i.groupFromItem(this.end-1),s=0,a=i.length();a>s;s++){var l=i.group(s);(r>s||s>o)&&l.header&&this._unrealizeGroup(l)}},_unrealizeExcessiveItems:function(){var e=this.items.count(),t=this.end-this.begin,n=t+this._listView._maxDeferredItemCleanup;this._listView._writeProfilerMark("_unrealizeExcessiveItems realized("+e+") approved("+n+"),info"),e>n&&this._unrealizeItems(e-n)},_lazilyUnrealizeItems:function(){this._listView._writeProfilerMark("_lazilyUnrealizeItems,StartTM");var e=this;return v(this._listView).then(function(){function t(){e._listView._writeProfilerMark("_lazilyUnrealizeItems,StopTM")}if(e._listView._isZombie())return void t();var n=[];e.items.eachIndex(function(t){(t<e.begin||t>=e.end)&&n.push(t)}),e._listView._writeProfilerMark("_lazilyUnrealizeItems itemsToUnrealize("+n.length+"),info");var i=[],o=e._listView._groups,a=o.groupFromItem(e.begin);if(null!==a)for(var l=o.groupFromItem(e.end-1),u=0,c=o.length();c>u;u++){var d=o.group(u);(a>u||u>l)&&d.header&&i.push(d)}if(n.length||i.length){var h,p=new r(function(t){function r(o){if(!e._listView._isZombie()){for(var s=-1,a=-1,l=0,u=g(e._listView);n.length&&!u&&!o.shouldYield;){var c=n.shift();e._unrealizeItem(c),l++,0>s&&(s=c),a=c}for(e._listView._writeProfilerMark("unrealizeWorker removeItems:"+l+" ("+s+"-"+a+"),info");i.length&&!u&&!o.shouldYield;)e._unrealizeGroup(i.shift());n.length||i.length?u?o.setPromise(v(e._listView).then(function(){return r})):o.setWork(r):t()}}h=s.schedule(r,s.Priority.belowNormal,null,"WinJS.UI.ListView._lazilyUnrealizeItems")});return p.then(t,function(t){return h.cancel(),e._listView._writeProfilerMark("_lazilyUnrealizeItems canceled,info"),e._listView._writeProfilerMark("_lazilyUnrealizeItems,StopTM"),r.wrapError(t)})}return t(),r.wrap()})},_getBoundingRectString:function(e){var t;if(e>=0&&e<this.containers.length){var n=this._listView._layout._getItemPosition(e);n&&(t="["+n.left+"; "+n.top+"; "+n.width+"; "+n.height+" ]");
}return t||""},_clearDeferTimeout:function(){this.deferTimeout&&(this.deferTimeout.cancel(),this.deferTimeout=null),-1!==this.deferredActionCancelToken&&(this._listView._versionManager.clearCancelOnNotification(this.deferredActionCancelToken),this.deferredActionCancelToken=-1)},_setupAria:function(e){function t(){i._listView._writeProfilerMark("aria work,StopTM")}function n(e){var t=i._listView._groups,n=t.group(e+1);return n?Math.min(n.startIndex-1,i.end-1):i.end-1}if(!this._listView._isZombie()){var i=this;return this._listView._createAriaMarkers(),this._listView._itemsCount().then(function(o){if(!(o>0&&-1!==i.firstIndexDisplayed&&-1!==i.lastIndexDisplayed))return r.wrap();i._listView._writeProfilerMark("aria work,StartTM");var a,u,c,d,h,p,m=i._listView._ariaStartMarker,_=i._listView._ariaEndMarker,y=i.begin,b=i.items.itemAt(i.begin);return b?(l._ensureId(b),i._listView._groupsEnabled()?(u=i._listView._groups,c=d=u.groupFromItem(i.begin),h=u.group(d),p=n(d),l._ensureId(h.header),l._setAttribute(h.header,"role",i._listView._headerRole),l._setAttribute(h.header,"x-ms-aria-flowfrom",m.id),f(h.header,b),l._setAttribute(h.header,"tabindex",i._listView._tabIndex)):l._setAttribute(b,"x-ms-aria-flowfrom",m.id),new r(function(r){var m=e;a=s.schedule(function C(e){if(i._listView._isZombie())return void t();for(;y<i.end;y++){if(!m&&g(i._listView))return void e.setPromise(v(i._listView).then(function(e){return m=e,C}));if(e.shouldYield)return void e.setWork(C);b=i.items.itemAt(y);var s=i.items.itemAt(y+1);if(s&&l._ensureId(s),l._setAttribute(b,"role",i._listView._itemRole),l._setAttribute(b,"aria-setsize",o),l._setAttribute(b,"aria-posinset",y+1),l._setAttribute(b,"tabindex",i._listView._tabIndex),i._listView._groupsEnabled())if(y!==p&&s)f(b,s);else{var a=u.group(d+1);a&&a.header&&s?(l._setAttribute(a.header,"tabindex",i._listView._tabIndex),l._setAttribute(a.header,"role",i._listView._headerRole),l._ensureId(a.header),f(b,a.header),f(a.header,s)):l._setAttribute(b,"aria-flowto",_.id),d++,h=a,p=n(d)}else s?f(b,s):l._setAttribute(b,"aria-flowto",_.id);if(!s)break}i._listView._fireAccessibilityAnnotationCompleteEvent(i.begin,y,c,d-1),t(),r()},s.Priority.belowNormal,null,"WinJS.UI.ListView._setupAria")},function(){a.cancel(),t()})):void t()})}},_setupDeferredActions:function(){function e(){t._listView._isZombie()||(t.deferTimeout=null,t._listView._versionManager.clearCancelOnNotification(t.deferredActionCancelToken),t.deferredActionCancelToken=-1)}this._listView._writeProfilerMark("_setupDeferredActions,StartTM");var t=this;this._clearDeferTimeout(),this.deferTimeout=this._lazilyRemoveRedundantItemsBlocks().then(function(){return r.timeout(d._DEFERRED_ACTION)}).then(function(){return v(t._listView)}).then(function(e){return t._setupAria(e)}).then(e,function(t){return e(),r.wrapError(t)}),this.deferredActionCancelToken=this._listView._versionManager.cancelOnNotification(this.deferTimeout),this._listView._writeProfilerMark("_setupDeferredActions,StopTM")},_updateAriaMarkers:function(e,t,n){function i(){return o.items.itemAt(t)}function r(){for(var e=n;e>=t;e--)if(o.items.itemAt(e))return o.items.itemAt(e);return null}var o=this;if(!this._listView._isZombie()){this._listView._createAriaMarkers();var s,a,u=this._listView._ariaStartMarker,c=this._listView._ariaEndMarker;if(-1!==t&&-1!==n&&n>=t&&(s=i(),a=r()),!e&&s&&a){if(l._ensureId(s),l._ensureId(a),this._listView._groupsEnabled()){var d=this._listView._groups,h=d.group(d.groupFromItem(t));h.header&&(l._ensureId(h.header),t===h.startIndex?l._setAttribute(u,"aria-flowto",h.header.id):l._setAttribute(u,"aria-flowto",s.id))}else l._setAttribute(u,"aria-flowto",s.id);l._setAttribute(c,"x-ms-aria-flowfrom",a.id)}else f(u,c),this._listView._fireAccessibilityAnnotationCompleteEvent(-1,-1)}},updateAriaForAnnouncement:function(e,t){if(e!==this._listView.header&&e!==this._listView.footer){var n=-1,i=c.ObjectType.item;l.hasClass(e,d._headerClass)?(n=this._listView._groups.index(e),i=c.ObjectType.groupHeader,l._setAttribute(e,"role",this._listView._headerRole),l._setAttribute(e,"tabindex",this._listView._tabIndex)):(n=this.items.index(e),l._setAttribute(e,"aria-setsize",t),l._setAttribute(e,"aria-posinset",n+1),l._setAttribute(e,"role",this._listView._itemRole),l._setAttribute(e,"tabindex",this._listView._tabIndex)),i===c.ObjectType.groupHeader?this._listView._fireAccessibilityAnnotationCompleteEvent(-1,-1,n,n):this._listView._fireAccessibilityAnnotationCompleteEvent(n,n,-1,-1)}},_reportElementsLevel:function(e){function t(e,t){for(var n=0,r=e;t>=r;r++){var o=i.itemDataAt(r);o&&o.container&&n++}return n}var n,i=this.items;n="right"===e?Math.floor(100*t(this.firstIndexDisplayed,this.end-1)/(this.end-this.firstIndexDisplayed)):Math.floor(100*t(this.begin,this.lastIndexDisplayed)/(this.lastIndexDisplayed-this.begin+1)),this._listView._writeProfilerMark("elementsLevel level("+n+"),info")},_createHeaderContainer:function(e){return this._createSurfaceChild(d._headerContainerClass,e)},_createItemsContainer:function(e){var n=this._createSurfaceChild(d._itemsContainerClass,e),i=t.document.createElement("div");return i.className=d._padderClass,n.appendChild(i),n},_ensureContainerInDOM:function(e){var t=this.containers[e];return t&&!this._listView._canvas.contains(t)?(this._forceItemsBlocksInDOM(e,e+1),!0):!1},_ensureItemsBlocksInDOM:function(e,t){if(this._expandedRange){var n=this._expandedRange.first.index,i=this._expandedRange.last.index+1;n>=e&&t>n?t=Math.max(t,i):i>e&&t>=i&&(e=Math.min(e,n))}this._forceItemsBlocksInDOM(e,t)},_removeRedundantItemsBlocks:function(){-1!==this.begin&&-1!==this.end&&this._forceItemsBlocksInDOM(this.begin,this.end)},_lazilyRemoveRedundantItemsBlocks:function(){this._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks,StartTM");var e=this;return v(this._listView).then(function(){function t(){e._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks,StopTM")}if(e._listView._isZombie())return void t();if(e._expandedRange&&-1!==e.begin&&-1!==e.end&&(e._expandedRange.first.index<e.begin||e._expandedRange.last.index+1>e.end)){var n,i=new r(function(t){function i(n){if(!e._listView._isZombie()){for(var r=g(e._listView);e._expandedRange.first.index<e.begin&&!r&&!n.shouldYield;){var o=Math.min(e.begin,e._expandedRange.first.index+e._blockSize*C._blocksToRelease);e._forceItemsBlocksInDOM(o,e.end)}for(;e._expandedRange.last.index+1>e.end&&!r&&!n.shouldYield;){var s=Math.max(e.end,e._expandedRange.last.index-e._blockSize*C._blocksToRelease);e._forceItemsBlocksInDOM(e.begin,s)}e._expandedRange.first.index<e.begin||e._expandedRange.last.index+1>e.end?r?n.setPromise(v(e._listView).then(function(){return i})):n.setWork(i):t()}}n=s.schedule(i,s.Priority.belowNormal,null,"WinJS.UI.ListView._lazilyRemoveRedundantItemsBlocks")});return i.then(t,function(t){return n.cancel(),e._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks canceled,info"),e._listView._writeProfilerMark("_lazilyRemoveRedundantItemsBlocks,StopTM"),r.wrapError(t)})}return t(),r.wrap()})},_forceItemsBlocksInDOM:function(e,t){function n(e,t){var n=e.element.firstElementChild;n.style[_]=t}function i(e){for(var t=0;t<p.tree.length;t++)for(var n=p.tree[t].itemsContainer,i=0,r=n.itemsBlocks.length;r>i;i++)if(e(n,n.itemsBlocks[i]))return}function r(e){p._listView._writeProfilerMark("_itemsBlockExtent,StartTM"),p._listView._itemsBlockExtent=l[p._listView._horizontal()?"getTotalWidth":"getTotalHeight"](e.element),p._listView._writeProfilerMark("_itemsBlockExtent("+p._listView._itemsBlockExtent+"),info"),p._listView._writeProfilerMark("_itemsBlockExtent,StopTM")}function o(){return-1===p._listView._itemsBlockExtent&&i(function(e,t){return t.items.length===p._blockSize&&t.element.parentNode===e.element?(r(t),!0):!1}),-1===p._listView._itemsBlockExtent&&i(function(e,t){return t.items.length===p._blockSize?(e.element.appendChild(t.element),r(t),e.element.removeChild(t.element),!0):!1}),p._listView._itemsBlockExtent}function s(e,t,n){function i(t){var n=e.itemsBlocks[t];n&&n.element.parentNode===e.element&&(e.element.removeChild(n.element),f++)}if(Array.isArray(t))t.forEach(i);else for(var r=t;n>r;r++)i(r)}function a(e,t,n){for(var i=e.element.firstElementChild,r=i,o=t;n>o;o++){var s=e.itemsBlocks[o];s&&(s.element.parentNode!==e.element&&(e.element.insertBefore(s.element,r.nextElementSibling),m++),r=s.element)}}function u(e){if(e<p.tree.length){p._listView._writeProfilerMark("collapseGroup("+e+"),info");var t=p.tree[e].itemsContainer;s(t,0,t.itemsBlocks.length),n(t,"")}}function c(e){if(e<p.tree.length){p._listView._writeProfilerMark("expandGroup("+e+"),info");var t=p.tree[e].itemsContainer;a(t,0,t.itemsBlocks.length),n(t,"")}}function d(e,t){function n(e,t){for(var n=[],i=e;t>=i;i++)n.push(i);return n}var i=t[0],r=t[1],o=e[0],s=e[1];return o>r||i>s?n(o,s):i>o&&s>r?n(o,i-1).concat(n(r+1,s)):i>o?n(o,i-1):s>r?n(r+1,s):null}if(this._blockSize){var h="_forceItemsBlocksInDOM begin("+e+") end("+t+"),";this._listView._writeProfilerMark(h+"StartTM");var p=this,m=0,f=0,_="padding"+(this._listView._horizontal()?"Left":"Top"),g=this._listView._groups.groupFromItem(e),v=this._listView._groups.groupFromItem(t-1),y=this._listView._groups.group(g),b=p.tree[g].itemsContainer,C=Math.floor((e-y.startIndex)/this._blockSize),w=this._listView._groups.group(v),I=p.tree[v].itemsContainer,S=Math.floor((t-1-w.startIndex)/this._blockSize);C&&-1===p._listView._itemsBlockExtent&&i(function(e,t){return t.items.length===p._blockSize&&t.element.parentNode===e.element?(r(t),!0):!1});var E=this._expandedRange?d([this._expandedRange.first.groupIndex,this._expandedRange.last.groupIndex],[g,v]):null;if(E&&E.forEach(u),this._expandedRange&&this._expandedRange.first.groupKey===y.key){var x=d([this._expandedRange.first.block,Number.MAX_VALUE],[C,Number.MAX_VALUE]);x&&s(b,x)}else this._expandedRange&&g>=this._expandedRange.first.groupIndex&&g<=this._expandedRange.last.groupIndex&&s(b,0,C);if(g!==v?(a(b,C,b.itemsBlocks.length),a(I,0,S+1)):a(b,C,S+1),this._expandedRange&&this._expandedRange.last.groupKey===w.key){var x=d([0,this._expandedRange.last.block],[0,S]);x&&s(I,x)}else this._expandedRange&&v>=this._expandedRange.first.groupIndex&&v<=this._expandedRange.last.groupIndex&&s(I,S+1,I.itemsBlocks.length);n(b,C?C*o()+"px":""),g!==v&&n(I,"");for(var P=g+1;v>P;P++)c(P);this._expandedRange={first:{index:e,groupIndex:g,groupKey:y.key,block:C},last:{index:t-1,groupIndex:v,groupKey:w.key,block:S}},this._listView._writeProfilerMark("_forceItemsBlocksInDOM groups("+g+"-"+v+") blocks("+C+"-"+S+") added("+m+") removed("+f+"),info"),this._listView._writeProfilerMark(h+"StopTM")}},_realizePageImpl:function(){var e=this,t="realizePage(scrollPosition:"+this._scrollbarPos+" forceLayout:"+this._forceRelayout+")";return this._listView._writeProfilerMark(t+",StartTM"),this._listView._versionManager.locked?(this._listView._versionManager.unlocked.done(function(){e._listView._isZombie()||e._listView._batchViewUpdates(d._ViewChange.realize,d._ScrollToPriority.low,e._listView.scrollPosition)}),this._listView._writeProfilerMark(t+",StopTM"),r.cancel):new r(function(n){function i(){n(),c.complete()}function s(){e._listView._hideProgressBar(),e._state.setLoadingState(e._listView._LoadingState.viewPortLoaded),e._executeAnimations&&e._setState(A,c.promise)}function a(t){e._updateAriaMarkers(0===t,e.firstIndexDisplayed,e.lastIndexDisplayed),e._state.setLoadingState&&e._state.setLoadingState(e._listView._LoadingState.itemsLoaded)}function u(t){e._listView._clearInsertedItems(),e._listView._groups.removeElements(),s(),a(t),i()}var c=new o;e._state.setLoadingState(e._listView._LoadingState.itemsLoading),e._firstLayoutPass&&e._listView._showProgressBar(e._listView._element,"50%","50%");var d=e.containers.length;if(d){var h,p,m=e.maxLeadingPages,f=e.maxTrailingPages,_=e._listView._getViewportLength();if(e._listView._zooming)h=p=0;else if(C._disableCustomPagesPrefetch)h=p=C._defaultPagesToPrefetch;else{h="left"===e._direction?m:f;var g=Math.max(0,h-e._scrollbarPos/_);p=Math.min(m,g+("right"===e._direction?m:f))}var v=Math.max(0,e._scrollbarPos-h*_),y=e._scrollbarPos+(1+p)*_,b=e._listView._layout.itemsFromRange(v,y-1);if((b.firstIndex<0||b.firstIndex>=d)&&(b.lastIndex<0||b.lastIndex>=d))e.begin=-1,e.end=-1,e.firstIndexDisplayed=-1,e.lastIndexDisplayed=-1,u(d);else{var w=l._clamp(b.firstIndex,0,d-1),I=l._clamp(b.lastIndex+1,0,d),S=e._listView._layout.itemsFromRange(e._scrollbarPos,e._scrollbarPos+_-1),E=l._clamp(S.firstIndex,0,d-1),x=l._clamp(S.lastIndex,0,d-1);if(e._realizationLevel!==C._realizationLevel.skip||e.lastRealizePass||E!==e.firstIndexDisplayed||x!==e.lastIndexDisplayed)if((e._forceRelayout||w!==e.begin||I!==e.end||E!==e.firstIndexDisplayed||x!==e.lastIndexDisplayed)&&I>w&&y>v){e._listView._writeProfilerMark("realizePage currentInView("+E+"-"+x+") previousInView("+e.firstIndexDisplayed+"-"+e.lastIndexDisplayed+") change("+(E-e.firstIndexDisplayed)+"),info"),e._cancelRealize();var P=e._realizePass;e.begin=w,e.end=I,e.firstIndexDisplayed=E,e.lastIndexDisplayed=x,e.deletesWithoutRealize=0,e._ensureItemsBlocksInDOM(e.begin,e.end);var k=e._realizeItems(e._listView._itemCanvas,e.begin,e.end,d,P,e._scrollbarPos,e._direction,E,x,e._forceRelayout);e._forceRelayout=!1;var T=k.viewportItemsRealized.then(function(){return s(),k.allItemsRealized}).then(function(){return e._realizePass===P?e._updateHeaders(e._listView._canvas,e.begin,e.end).then(function(){a(d)}):void 0}).then(function(){return k.loadingCompleted}).then(function(){e._unrealizeExcessiveItems(),e.lastRealizePass=null,i()},function(t){return e._realizePass===P&&(e.lastRealizePass=null,e.begin=-1,e.end=-1),r.wrapError(t)});e.lastRealizePass=r.join([k.viewportItemsRealized,k.allItemsRealized,k.loadingCompleted,T]),e._unrealizeExcessiveItems()}else e.lastRealizePass?e.lastRealizePass.then(i):u(d);else e.begin=w,e.end=w+Object.keys(e.items._itemData).length,e._updateHeaders(e._listView._canvas,e.begin,e.end).done(function(){e.lastRealizePass=null,u(d)})}}else e.begin=-1,e.end=-1,e.firstIndexDisplayed=-1,e.lastIndexDisplayed=-1,u(d);e._reportElementsLevel(e._direction),e._listView._writeProfilerMark(t+",StopTM")})},realizePage:function(e,t,n,i){this._scrollToFunctor=y(e),this._forceRelayout=this._forceRelayout||t,this._scrollEndPromise=n,this._listView._writeProfilerMark(this._state.name+"_realizePage,info"),this._state.realizePage(i||x)},onScroll:function(e,t){this.realizePage(e,!1,t,k)},reload:function(e,t){this._listView._isZombie()||(this._scrollToFunctor=y(e),this._forceRelayout=!0,this._highPriorityRealize=!!t,this.stopWork(!0),this._listView._writeProfilerMark(this._state.name+"_rebuildTree,info"),this._state.rebuildTree())},refresh:function(e){this._listView._isZombie()||(this._scrollToFunctor=y(e),this._forceRelayout=!0,this._highPriorityRealize=!0,this.stopWork(),this._listView._writeProfilerMark(this._state.name+"_relayout,info"),this._state.relayout())},waitForValidScrollPosition:function(e){var t=this,n=this._listView._viewport[this._listView._scrollLength]-this._listView._getViewportLength();return e>n?t._listView._itemsCount().then(function(n){return t.containers.length<n?r._cancelBlocker(t._creatingContainersWork&&t._creatingContainersWork.promise).then(function(){return t._getLayoutCompleted()}).then(function(){return e}):e}):r.wrap(e)},waitForEntityPosition:function(e){var t=this;return e.type===c.ObjectType.header||e.type===c.ObjectType.footer?r.wrap():(this._listView._writeProfilerMark(this._state.name+"_waitForEntityPosition("+e.type+": "+e.index+"),info"),r._cancelBlocker(this._state.waitForEntityPosition(e).then(function(){return e.type!==c.ObjectType.groupHeader&&e.index>=t.containers.length||e.type===c.ObjectType.groupHeader&&t._listView._groups.group(e.index).startIndex>=t.containers.length?t._creatingContainersWork&&t._creatingContainersWork.promise:void 0}).then(function(){return t._getLayoutCompleted()})))},stopWork:function(e){this._listView._writeProfilerMark(this._state.name+"_stop,info"),this._state.stop(e),this._layoutWork&&this._layoutWork.cancel(),e&&this._creatingContainersWork&&this._creatingContainersWork.cancel(),e&&(this._state=new w(this))},_cancelRealize:function(){this._listView._writeProfilerMark("_cancelRealize,StartTM"),(this.lastRealizePass||this.deferTimeout)&&(this._forceRelayout=!0),this._clearDeferTimeout(),this._realizePass++,this._headerRenderPromises&&(this._headerRenderPromises.cancel(),this._headerRenderPromises=null);var e=this.lastRealizePass;e&&(this.lastRealizePass=null,this.begin=-1,this.end=-1,e.cancel()),this._listView._writeProfilerMark("_cancelRealize,StopTM")},resetItems:function(e){if(!this._listView._isZombie()){this.firstIndexDisplayed=-1,this.lastIndexDisplayed=-1,this._runningAnimations=null,this._executeAnimations=!1;var t=this._listView;this._firstLayoutPass=!0,t._unsetFocusOnItem(),t._currentMode().onDataChanged&&t._currentMode().onDataChanged(),this.items.each(function(n,i){e&&i.parentNode&&i.parentNode.parentNode&&i.parentNode.parentNode.removeChild(i.parentNode),t._itemsManager.releaseItem(i),a._disposeElement(i)}),this.items.removeItems(),this._deferredReparenting=[],e&&t._groups.removeElements(),t._clearInsertedItems()}},reset:function(){if(this.stopWork(!0),this._state=new w(this),this.resetItems(),!this._listView._isZombie()){var e=this._listView;e._groups.resetGroups(),e._resetCanvas(),this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null}},cleanUp:function(){this.stopWork(!0),this._runningAnimations&&this._runningAnimations.cancel();var e=this._listView._itemsManager;this.items.each(function(t,n){e.releaseItem(n),a._disposeElement(n)}),this._listView._unsetFocusOnItem(),this.items.removeItems(),this._deferredReparenting=[],this._listView._groups.resetGroups(),this._listView._resetCanvas(),this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null,this.destroyed=!0},getContainer:function(e){return this.containers[e]},_getHeaderContainer:function(e){return this.tree[e].header},_getGroups:function(e){if(this._listView._groupDataSource){var t=this._listView._groups.groups,n=[];if(e)for(var i=0,r=t.length;r>i;i++){var o=t[i],s=r>i+1?t[i+1].startIndex:e;n.push({key:o.key,size:s-o.startIndex})}return n}return[{key:"-1",size:e}]},_createChunk:function(e,t,n){function i(e,t){var i=e.element.children,r=i.length,s=Math.min(t-e.items.length,n);u.insertAdjacentHTMLUnsafe(e.element,"beforeend",p._repeat("<div class='win-container win-backdrop'></div>",s));for(var a=0;s>a;a++){var l=i[r+a];e.items.push(l),o.containers.push(l)}}function r(e){var t={header:o._listView._groupDataSource?o._createHeaderContainer():null,itemsContainer:{element:o._createItemsContainer(),items:[]}};o.tree.push(t),o.keyToGroupIndex[e.key]=o.tree.length-1,i(t.itemsContainer,e.size)}var o=this;if(this._listView._writeProfilerMark("createChunk,StartTM"),this.tree.length&&this.tree.length<=e.length){var s=this.tree[this.tree.length-1],a=e[this.tree.length-1].size;if(s.itemsContainer.items.length<a)return i(s.itemsContainer,a),void this._listView._writeProfilerMark("createChunk,StopTM")}this.tree.length<e.length&&r(e[this.tree.length]),this._listView._writeProfilerMark("createChunk,StopTM")},_createChunkWithBlocks:function(e,n,i,r){function o(e,n){var o,s=e.itemsBlocks.length?e.itemsBlocks[e.itemsBlocks.length-1]:null;if(n=Math.min(n,r),s&&s.items.length<i){var l=Math.min(n,i-s.items.length),c=s.items.length,o=(e.itemsBlocks.length-1)*i+c,d=p._stripedContainers(l,o);u.insertAdjacentHTMLUnsafe(s.element,"beforeend",d),w=s.element.children;for(var h=0;l>h;h++){var m=w[c+h];s.items.push(m),a.containers.push(m)}n-=l}o=e.itemsBlocks.length*i;var f=Math.floor(n/i),_="",g=o,v=o+i;if(f>0){var y=["<div class='win-itemsblock'>"+p._stripedContainers(i,g)+"</div>","<div class='win-itemsblock'>"+p._stripedContainers(i,v)+"</div>"];_=p._repeat(y,f),o+=f*i}var b=n%i;b>0&&(_+="<div class='win-itemsblock'>"+p._stripedContainers(b,o)+"</div>",o+=b,f++);var C=t.document.createElement("div");u.setInnerHTMLUnsafe(C,_);for(var w=C.children,I=0;f>I;I++){var S=w[I],E={element:S,items:p._nodeListToArray(S.children)};e.itemsBlocks.push(E);for(var x=0;x<E.items.length;x++)a.containers.push(E.items[x])}}function s(e){var t={header:a._listView._groupDataSource?a._createHeaderContainer():null,itemsContainer:{element:a._createItemsContainer(),itemsBlocks:[]}};a.tree.push(t),a.keyToGroupIndex[e.key]=a.tree.length-1,o(t.itemsContainer,e.size)}var a=this;if(this._listView._writeProfilerMark("createChunk,StartTM"),this.tree.length&&this.tree.length<=e.length){var l=this.tree[this.tree.length-1].itemsContainer,c=e[this.tree.length-1].size,d=0;if(l.itemsBlocks.length&&(d=(l.itemsBlocks.length-1)*i+l.itemsBlocks[l.itemsBlocks.length-1].items.length),c>d)return o(l,c-d),void this._listView._writeProfilerMark("createChunk,StopTM")}this.tree.length<e.length&&s(e[this.tree.length]),this._listView._writeProfilerMark("createChunk,StopTM")},_generateCreateContainersWorker:function(){var e=this,t=0,n=!1;return function r(o){e._listView._versionManager.locked?o.setPromise(e._listView._versionManager.unlocked.then(function(){return r})):e._listView._itemsCount().then(function(s){var a=!n&&g(e._listView);if(a)o.setPromise(v(e._listView).then(function(e){return n=e,r}));else{if(e._listView._isZombie())return;n=!1;var l=i._now()+C._createContainersJobTimeslice,u=e._getGroups(s),c=e.containers.length,d=e.end===e.containers.length,h=C._chunkSize;do e._blockSize?e._createChunkWithBlocks(u,s,e._blockSize,h):e._createChunk(u,s,h),t++;while(e.containers.length<s&&i._now()<l);e._listView._writeProfilerMark("createContainers yields containers("+e.containers.length+"),info"),e._listView._affectedRange.add({start:c,end:e.containers.length},s),d?(e.stopWork(),e._listView._writeProfilerMark(e._state.name+"_relayout,info"),e._state.relayout()):(e._listView._writeProfilerMark(e._state.name+"_layoutNewContainers,info"),e._state.layoutNewContainers()),e.containers.length<s?o.setWork(r):(e._listView._writeProfilerMark("createContainers completed steps("+t+"),info"),e._creatingContainersWork.complete())}})}},_scheduleLazyTreeCreation:function(){return s.schedule(this._generateCreateContainersWorker(),s.Priority.idle,this,"WinJS.UI.ListView.LazyTreeCreation")},_createContainers:function(){this.tree=null,this.keyToGroupIndex=null,this.containers=null,this._expandedRange=null;var e,t=this;return this._listView._itemsCount().then(function(n){return 0===n&&t._listView._hideProgressBar(),e=n,t._listView._writeProfilerMark("createContainers("+e+"),StartTM"),t._listView._groupDataSource?t._listView._groups.initialize():void 0}).then(function(){return t._listView._writeProfilerMark("numberOfItemsPerItemsBlock,StartTM"),e&&t._listView._groups.length()?t._listView._layout.numberOfItemsPerItemsBlock:null}).then(function(n){t._listView._writeProfilerMark("numberOfItemsPerItemsBlock("+n+"),info"),t._listView._writeProfilerMark("numberOfItemsPerItemsBlock,StopTM"),t._listView._resetCanvas(),t.tree=[],t.keyToGroupIndex={},t.containers=[],t._blockSize=n;var r,o=t._getGroups(e),s=i._now()+C._maxTimePerCreateContainers,a=Math.min(C._startupChunkSize,C._chunkSize);do r=n?t._createChunkWithBlocks(o,e,n,a):t._createChunk(o,e,a);while(i._now()<s&&t.containers.length<e&&!r);if(t._listView._writeProfilerMark("createContainers created("+t.containers.length+"),info"),t._listView._affectedRange.add({start:0,end:t.containers.length},e),t.containers.length<e){var l=t._scheduleLazyTreeCreation();t._creatingContainersWork.promise.done(null,function(){l.cancel()})}else t._listView._writeProfilerMark("createContainers completed synchronously,info"),t._creatingContainersWork.complete();t._listView._writeProfilerMark("createContainers("+e+"),StopTM")})},_updateItemsBlocks:function(e){function n(){var e=t.document.createElement("div");return e.className=d._itemsBlockClass,e}function i(t,i){function s(){t.itemsBlocks=null,t.items=[];for(var e=0;c>e;e++){var n=r.containers[i+e];t.element.appendChild(n),t.items.push(n)}}function a(){t.itemsBlocks=[{element:u.length?u.shift():n(),items:[]}];for(var o=t.itemsBlocks[0],s=0;c>s;s++){if(o.items.length===e){var a=u.length?u.shift():n();t.itemsBlocks.push({element:a,items:[]}),o=t.itemsBlocks[t.itemsBlocks.length-1]}var l=r.containers[i+s];o.element.appendChild(l),o.items.push(l)}t.items=null}var l,u=[],c=0,d=t.itemsBlocks;if(d)for(l=0;l<d.length;l++)c+=d[l].items.length,u.push(d[l].element);else c=t.items.length;for(o?a():s(),l=0;l<u.length;l++){var h=u[l];h.parentNode===t.element&&t.element.removeChild(h)}return c}for(var r=this,o=!!e,s=0,a=0;s<this.tree.length;s++)a+=i(this.tree[s].itemsContainer,a);r._blockSize=e},_layoutItems:function(){var e=this;return this._listView._itemsCount().then(function(){return r.as(e._listView._layout.numberOfItemsPerItemsBlock).then(function(t){e._listView._writeProfilerMark("numberOfItemsPerItemsBlock("+t+"),info"),t!==e._blockSize&&(e._updateItemsBlocks(t),e._listView._itemsBlockExtent=-1);var n,i=e._listView._affectedRange.get();return i&&(n={firstIndex:Math.max(i.start-1,0),lastIndex:Math.min(e.containers.length-1,i.end)},n.firstIndex<e.containers.length||0===e.containers.length)?e._listView._layout.layout(e.tree,n,e._modifiedElements||[],e._modifiedGroups||[]):(e._listView._affectedRange.clear(),{realizedRangeComplete:r.wrap(),layoutComplete:r.wrap()})})})},updateTree:function(e,t,n){return this._listView._writeProfilerMark(this._state.name+"_updateTree,info"),this._state.updateTree(e,t,n)},_updateTreeImpl:function(e,n,i,r){function o(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];i.parentNode.removeChild(i)}}if(this._executeAnimations=!0,this._modifiedElements=i,!i.handled){i.handled=!0,this._listView._writeProfilerMark("_updateTreeImpl,StartTM");var s,a=this;r||this._unrealizeItems();for(var s=0,u=i.length;u>s;s++)i[s]._itemBox&&i[s]._itemBox.parentNode&&l.removeClass(i[s]._itemBox.parentNode,d._selectedClass);this.items.each(function(e,t,n){n.container&&l.removeClass(n.container,d._selectedClass),n.container&&l.addClass(n.container,d._backdropClass)});var c=this._listView._updateContainers(this._getGroups(e),e,n,i);o(c.removedHeaders),o(c.removedItemsContainers);for(var s=0,u=i.length;u>s;s++){var p=i[s];if(-1!==p.newIndex){if(p.element=this.getContainer(p.newIndex),!p.element)throw"Container missing after updateContainers."}else l.removeClass(p.element,d._backdropClass)}var m=t.document.activeElement;this._listView._canvas.contains(m)&&(this._requireFocusRestore=m),this._deferredReparenting=[],this.items.each(function(e,t,n){var i=a.getContainer(e),r=n.itemBox;r&&i&&(n.container=i,r.parentNode!==i&&(e>=a.firstIndexDisplayed&&e<=a.lastIndexDisplayed?a._appendAndRestoreFocus(i,r):a._deferredReparenting.push({itemBox:r,container:i})),l.removeClass(i,d._backdropClass),l[a._listView.selection._isIncluded(e)?"addClass":"removeClass"](i,d._selectedClass),!a._listView.selection._isIncluded(e)&&l.hasClass(r,d._selectedClass)&&h._ItemEventsHandler.renderSelection(r,n.element,!1,!0))}),this._listView._writeProfilerMark("_updateTreeImpl,StopTM")}},_completeUpdateTree:function(){if(this._deferredReparenting){var e=this._deferredReparenting.length;if(e>0){var t="_completeReparenting("+e+")";this._listView._writeProfilerMark(t+",StartTM");for(var n,i=0;e>i;i++)n=this._deferredReparenting[i],this._appendAndRestoreFocus(n.container,n.itemBox);this._deferredReparenting=[],this._listView._writeProfilerMark(t+",StopTM")}}this._requireFocusRestore=null},_appendAndRestoreFocus:function(e,n){if(n.parentNode!==e){var i;if(this._requireFocusRestore&&(i=t.document.activeElement),this._requireFocusRestore&&this._requireFocusRestore===i&&(e.contains(i)||n.contains(i))&&(this._listView._unsetFocusOnItem(),i=t.document.activeElement),l.empty(e),e.appendChild(n),this._requireFocusRestore&&i===this._listView._keyboardEventsHelper){var r=this._listView._selection._getFocused();r.type===c.ObjectType.item&&this.items.itemBoxAt(r.index)===n&&(l._setActive(this._requireFocusRestore),this._requireFocusRestore=null)}}},_startAnimations:function(){this._listView._writeProfilerMark("startAnimations,StartTM");var e=this;this._hasAnimationInViewportPending=!1;var t=r.as(this._listView._layout.executeAnimations()).then(function(){e._listView._writeProfilerMark("startAnimations,StopTM")});return t},_setState:function(e,t){if(!this._listView._isZombie()){var n=this._state.name;this._state=new e(this,t),this._listView._writeProfilerMark(this._state.name+"_enter from("+n+"),info"),this._state.enter()}},getAdjacent:function(e,t){var n=this;return this.waitForEntityPosition(e).then(function(){return n._listView._layout.getAdjacent(e,t)})},hitTest:function(e,t){if(this._realizedRangeLaidOut)return{index:-1,insertAfterIndex:-1};var n=this._listView._layout.hitTest(e,t);return n.index=l._clamp(n.index,-1,this._listView._cachedCount-1,0),n.insertAfterIndex=l._clamp(n.insertAfterIndex,-1,this._listView._cachedCount-1,0),n},_createTreeBuildingSignal:function(){if(!this._creatingContainersWork){this._creatingContainersWork=new o;var e=this;this._creatingContainersWork.promise.done(function(){e._creatingContainersWork=null},function(){e._creatingContainersWork=null})}},_createLayoutSignal:function(){var e=this;this._layoutCompleted||(this._layoutCompleted=new o,this._layoutCompleted.promise.done(function(){e._layoutCompleted=null},function(){e._layoutCompleted=null})),this._realizedRangeLaidOut||(this._realizedRangeLaidOut=new o,this._realizedRangeLaidOut.promise.done(function(){e._realizedRangeLaidOut=null},function(){e._realizedRangeLaidOut=null}))},_getLayoutCompleted:function(){return this._layoutCompleted?r._cancelBlocker(this._layoutCompleted.promise):r.wrap()},_createSurfaceChild:function(e,n){var i=t.document.createElement("div");return i.className=e,this._listView._canvas.insertBefore(i,n?n.nextElementSibling:null),i},_executeScrollToFunctor:function(){var e=this;return r.as(this._scrollToFunctor?this._scrollToFunctor():null).then(function(t){e._scrollToFunctor=null,t=t||{},+t.position===t.position&&(e._scrollbarPos=t.position),e._direction=t.direction||"right"})}},{_defaultPagesToPrefetch:2,_iOSMaxLeadingPages:6,_iOSMaxTrailingPages:2,_disableCustomPagesPrefetch:!1,_waitForSeZoIntervalDuration:100,_waitForSeZoTimeoutDuration:500,_chunkSize:500,_startupChunkSize:100,_maxTimePerCreateContainers:5,_createContainersJobTimeslice:15,_blocksToRelease:10,_realizationLevel:{skip:"skip",realize:"realize",normal:"normal"}}),w=n.Class.define(function(e){this.view=e,this.view._createTreeBuildingSignal(),this.view._createLayoutSignal()},{name:"CreatedState",enter:function(){this.view._createTreeBuildingSignal(),this.view._createLayoutSignal()},stop:b,realizePage:b,rebuildTree:function(){this.view._setState(I)},relayout:function(){this.view._setState(I)},layoutNewContainers:b,waitForEntityPosition:function(){return this.view._setState(I),this.view._getLayoutCompleted()},updateTree:b}),I=n.Class.define(function(e){this.view=e},{name:"BuildingState",enter:function(){this.canceling=!1,this.view._createTreeBuildingSignal(),this.view._createLayoutSignal();var e=this,t=new o;this.promise=t.promise.then(function(){return e.view._createContainers()}).then(function(){e.view._setState(S)},function(t){return e.canceling||(e.view._setState(w),e.view._listView._raiseViewComplete()),r.wrapError(t)}),t.complete()},stop:function(){this.canceling=!0,this.promise.cancel(),this.view._setState(w)},realizePage:b,rebuildTree:function(){this.canceling=!0,this.promise.cancel(),this.enter()},relayout:b,layoutNewContainers:b,waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:b}),S=n.Class.define(function(e,t){this.view=e,this.nextStateType=t||x},{name:"LayingoutState",enter:function(){var e=this;this.canceling=!1,this.view._createLayoutSignal(),this.view._listView._writeProfilerMark(this.name+"_enter_layoutItems,StartTM");var t=new o;this.promise=t.promise.then(function(){
return e.view._layoutItems()}).then(function(t){return e.view._layoutWork=t.layoutComplete,t.realizedRangeComplete}).then(function(){e.view._listView._writeProfilerMark(e.name+"_enter_layoutItems,StopTM"),e.view._listView._clearInsertedItems(),e.view._setAnimationInViewportState(e.view._modifiedElements),e.view._modifiedElements=[],e.view._modifiedGroups=[],e.view._realizedRangeLaidOut.complete(),e.view._layoutWork.then(function(){e.view._listView._writeProfilerMark(e.name+"_enter_layoutCompleted,info"),e.view._listView._affectedRange.clear(),e.view._layoutCompleted.complete()}),e.canceling||e.view._setState(e.nextStateType)},function(t){return e.view._listView._writeProfilerMark(e.name+"_enter_layoutCanceled,info"),e.canceling||(e.view.firstIndexDisplayed=e.view.lastIndexDisplayed=-1,e.view._updateAriaMarkers(!0,e.view.firstIndexDisplayed,e.view.lastIndexDisplayed),e.view._setState(O)),r.wrapError(t)}),t.complete(),this.canceling&&this.promise.cancel()},cancelLayout:function(e){this.view._listView._writeProfilerMark(this.name+"_cancelLayout,info"),this.canceling=!0,this.promise&&this.promise.cancel(),e&&this.view._setState(E)},stop:function(){this.cancelLayout(!0)},realizePage:b,rebuildTree:function(){this.cancelLayout(!1),this.view._setState(I)},relayout:function(){this.cancelLayout(!1),this.enter()},layoutNewContainers:function(){this.relayout()},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),E=n.Class.define(function(e){this.view=e},{name:"LayoutCanceledState",enter:b,stop:b,realizePage:function(){this.relayout()},rebuildTree:function(){this.view._setState(I)},relayout:function(){this.view._setState(S)},layoutNewContainers:function(){this.relayout()},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),x=n.Class.define(function(e){this.view=e,this.nextState=M,this.relayoutNewContainers=!0},{name:"RealizingState",enter:function(){var e=this,t=new o;this.promise=t.promise.then(function(){return e.view._executeScrollToFunctor()}).then(function(){return e.relayoutNewContainers=!1,r._cancelBlocker(e.view._realizePageImpl())}).then(function(){e.view._state===e&&(e.view._completeUpdateTree(),e.view._listView._writeProfilerMark("RealizingState_to_UnrealizingState"),e.view._setState(e.nextState))},function(t){return e.view._state!==e||e.canceling||(e.view._listView._writeProfilerMark("RealizingState_to_CanceledState"),e.view._setState(P)),r.wrapError(t)}),t.complete()},stop:function(){this.canceling=!0,this.promise.cancel(),this.view._cancelRealize(),this.view._setState(P)},realizePage:function(){this.canceling=!0,this.promise.cancel(),this.enter()},rebuildTree:function(){this.stop(),this.view._setState(I)},relayout:function(){this.stop(),this.view._setState(S)},layoutNewContainers:function(){this.relayoutNewContainers?this.relayout():(this.view._createLayoutSignal(),this.view._relayoutInComplete=!0)},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)},setLoadingState:function(e){this.view._listView._setViewState(e)}}),P=n.Class.define(function(e){this.view=e},{name:"CanceledState",enter:b,stop:function(){this.view._cancelRealize()},realizePage:function(e){this.stop(),this.view._setState(e)},rebuildTree:function(){this.stop(),this.view._setState(I)},relayout:function(e){this.stop(),this.view._setState(S,e)},layoutNewContainers:function(){this.relayout(P)},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),k=n.Class.derive(x,function(e){this.view=e,this.nextState=T,this.relayoutNewContainers=!0},{name:"ScrollingState",setLoadingState:function(){}}),T=n.Class.derive(P,function(e){this.view=e},{name:"ScrollingPausedState",enter:function(){var e=this;this.promise=r._cancelBlocker(this.view._scrollEndPromise).then(function(){e.view._setState(M)})},stop:function(){this.promise.cancel(),this.view._cancelRealize()}}),M=n.Class.define(function(e){this.view=e},{name:"UnrealizingState",enter:function(){var e=this;this.promise=this.view._lazilyUnrealizeItems().then(function(){return e.view._listView._writeProfilerMark("_renderCompletePromise wait starts,info"),e.view._renderCompletePromise}).then(function(){e.view._setState(O)})},stop:function(){this.view._cancelRealize(),this.promise.cancel(),this.view._setState(P)},realizePage:function(e){this.promise.cancel(),this.view._setState(e)},rebuildTree:function(){this.view._setState(I)},relayout:function(){this.view._setState(S)},layoutNewContainers:function(){this.view._createLayoutSignal(),this.view._relayoutInComplete=!0},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n)}}),A=n.Class.define(function(e,t){this.view=e,this.realizePromise=t,this.realizeId=1},{name:"RealizingAnimatingState",enter:function(){var e=this;this.animating=!0,this.animatePromise=this.view._startAnimations(),this.animateSignal=new o,this.view._executeAnimations=!1,this.animatePromise.done(function(){e.animating=!1,e.modifiedElements?(e.view._updateTreeImpl(e.count,e.delta,e.modifiedElements),e.modifiedElements=null,e.view._setState(P)):e.animateSignal.complete()},function(t){return e.animating=!1,r.wrapError(t)}),this._waitForRealize()},_waitForRealize:function(){var e=this;this.realizing=!0,this.realizePromise.done(function(){e.realizing=!1});var t=++this.realizeId;r.join([this.realizePromise,this.animateSignal.promise]).done(function(){t===e.realizeId&&(e.view._completeUpdateTree(),e.view._listView._writeProfilerMark("RealizingAnimatingState_to_UnrealizingState"),e.view._setState(M))})},stop:function(e){this.realizePromise.cancel(),this.view._cancelRealize(),e&&(this.animatePromise.cancel(),this.view._setState(P))},realizePage:function(){if(!this.modifiedElements){var e=this;this.realizePromise=this.view._executeScrollToFunctor().then(function(){return r._cancelBlocker(e.view._realizePageImpl())}),this._waitForRealize()}},rebuildTree:function(){this.stop(!0),this.view._setState(I)},relayout:function(){this.stop(!0),this.modifiedElements&&(this.view._updateTreeImpl(this.count,this.delta,this.modifiedElements),this.modifiedElements=null),this.view._setState(S)},layoutNewContainers:function(){this.view._createLayoutSignal(),this.view._relayoutInComplete=!0},waitForEntityPosition:function(){return this.view._getLayoutCompleted()},updateTree:function(e,t,n){if(this.animating){var i=this.modifiedElements;return this.count=e,this.delta=t,this.modifiedElements=n,i?r.cancel:this.animatePromise}return this.view._updateTreeImpl(e,t,n)},setLoadingState:function(e){this.view._listView._setViewState(e)}}),O=n.Class.derive(P,function(e){this.view=e},{name:"CompletedState",enter:function(){this._stopped=!1,this.view._setupDeferredActions(),this.view._realizationLevel=C._realizationLevel.normal,this.view._listView._raiseViewComplete(),this.view._state===this&&this.view._relayoutInComplete&&!this._stopped&&this.view._setState(D)},stop:function(){this._stopped=!0,P.prototype.stop.call(this)},layoutNewContainers:function(){this.view._createLayoutSignal(),this.view._setState(D)},updateTree:function(e,t,n){return this.view._updateTreeImpl(e,t,n,!0)}}),D=n.Class.derive(P,function(e){this.view=e},{name:"LayingoutNewContainersState",enter:function(){var e=this;this.promise=r.join([this.view.deferTimeout,this.view._layoutWork]),this.promise.then(function(){e.view._relayoutInComplete=!1,e.relayout(P)})},stop:function(){this.promise.cancel(),this.view._cancelRealize()},realizePage:function(e){this.stop(),this.view._setState(S,e)},layoutNewContainers:function(){this.view._createLayoutSignal()}});return C})})}),i("require-style!less/styles-listview",[],function(){}),i("require-style!less/colors-listview",[],function(){}),i("WinJS/Controls/ListView",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../_Accents","../Animations","../Animations/_TransitionAnimation","../BindingList","../Promise","../Scheduler","../_Signal","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_ItemsManager","../Utilities/_SafeHtml","../Utilities/_TabContainer","../Utilities/_UI","../Utilities/_VersionManager","./ElementResizeInstrument","./ItemContainer/_Constants","./ItemContainer/_ItemEventsHandler","./ListView/_BrowseMode","./ListView/_ErrorMessages","./ListView/_GroupFocusCache","./ListView/_GroupsContainer","./ListView/_Helpers","./ListView/_ItemsContainer","./ListView/_Layouts","./ListView/_SelectionManager","./ListView/_VirtualizeContentsView","require-style!less/styles-listview","require-style!less/colors-listview"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b,C,w,I,S,E,x,P,k,T,M,A,O,D,L,B){"use strict";function R(){var e=U;U=[],e=e.filter(function(e){return e._isZombie()?(e._dispose(),!1):!0}),U=U.concat(e)}function N(e){U.push(e),z&&z.cancel(),z=h.timeout(W).then(R)}function F(e){return e.offsetParent?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:0}l.createAccentRule(".win-listview:not(.win-selectionstylefilled) .win-selectioncheckmarkbackground,	         .win-itemcontainer:not(.win-selectionstylefilled) .win-selectioncheckmarkbackground",[{name:"border-color",value:l.ColorTypes.accent},{name:"background-color",value:l.ColorTypes.accent}]),l.createAccentRule(".win-listview:not(.win-selectionstylefilled) .win-container.win-selected .win-selectionborder,	         .win-itemcontainer:not(.win-selectionstylefilled).win-container.win-selected .win-selectionborder",[{name:"border-color",value:l.ColorTypes.accent}]),l.createAccentRule(".win-listview.win-selectionstylefilled .win-selected .win-selectionbackground,	         .win-itemcontainer.win-selectionstylefilled.win-selected .win-selectionbackground",[{name:"background-color",value:l.ColorTypes.accent}]);var z,H=n._browserStyleEquivalents.transform,W=1e3,U=[],j=g._uniqueID,V={get notCompatibleWithSemanticZoom(){return"ListView can only be used with SemanticZoom if randomAccess loading behavior is specified."},get listViewInvalidItem(){return"Item must provide index, key or description of corresponding item."},get listViewViewportAriaLabel(){return s._getWinJSString("ui/listViewViewportAriaLabel").value}},q=n.requireSupportedForProcessing,J={entrance:"entrance",contentTransition:"contentTransition"};t.Namespace.define("WinJS.UI",{ListViewAnimationType:J,ListView:t.Namespace._lazy(function(){var s=t.Class.define(function(){this.clear()},{add:function(e,t){if(e._lastKnownSizeOfData=t,this._range){this._range.start=Math.min(this._range.start,e.start);var n=this._range._lastKnownSizeOfData-this._range.end,i=e._lastKnownSizeOfData-e.end,r=Math.min(n,i);this._range._lastKnownSizeOfData=e._lastKnownSizeOfData,this._range.end=this._range._lastKnownSizeOfData-r}else this._range=e},addAll:function(){this.add({start:0,end:Number.MAX_VALUE},Number.MAX_VALUE)},clear:function(){this._range=null},get:function(){return this._range}}),l=t.Class.define(function(e){this._listView=e},{getPanAxis:function(){return this._listView._getPanAxis()},configureForZoom:function(e,t,n,i){this._listView._configureForZoom(e,t,n,i)},setCurrentItem:function(e,t){this._listView._setCurrentItem(e,t)},getCurrentItem:function(){return this._listView._getCurrentItem()},beginZoom:function(){return this._listView._beginZoom()},positionItem:function(e,t){return this._listView._positionItem(e,t)},endZoom:function(e){this._listView._endZoom(e)},pinching:{get:function(){return this._listView._pinching},set:function(e){this._listView._pinching=e}}}),v=t.Class.define(function(t,n){if(t=t||e.document.createElement("div"),this._id=t.id||"",this._writeProfilerMark("constructor,StartTM"),n=n||{},t.winControl=this,g.addClass(t,"win-disposable"),this._affectedRange=new s,this._mutationObserver=new g._MutationObserver(this._itemPropertyChange.bind(this)),this._versionManager=null,this._insertedItems={},this._element=t,this._startProperty=null,this._scrollProperty=null,this._scrollLength=null,this._scrolling=!1,this._zooming=!1,this._pinching=!1,this._itemsManager=null,this._canvas=null,this._cachedCount=E._UNINITIALIZED,this._loadingState=this._LoadingState.complete,this._firstTimeDisplayed=!0,this._currentScrollPosition=0,this._lastScrollPosition=0,this._notificationHandlers=[],this._itemsBlockExtent=-1,this._lastFocusedElementInGroupTrack={type:w.ObjectType.item,index:-1},this._headerFooterVisibilityStatus={headerVisible:!1,footerVisible:!1},this._viewportWidth=E._UNINITIALIZED,this._viewportHeight=E._UNINITIALIZED,this._manipulationState=g._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED,this._maxDeferredItemCleanup=Number.MAX_VALUE,this._groupsToRemove={},this._setupInternalTree(),this._isCurrentZoomView=!0,this._dragSource=!1,this._reorderable=!1,this._groupFocusCache=new T._UnsupportedGroupFocusCache,this._viewChange=E._ViewChange.rebuild,this._scrollToFunctor=null,this._setScrollbarPosition=!1,this._view=new B._VirtualizeContentsView(this),this._selection=new L._SelectionManager(this),this._createTemplates(),this._groupHeaderRenderer=y._trivialHtmlRenderer,this._itemRenderer=y._trivialHtmlRenderer,this._groupHeaderRelease=null,this._itemRelease=null,n.itemDataSource)this._dataSource=n.itemDataSource;else{var i=new d.List;this._dataSource=i.dataSource}this._selectionMode=w.SelectionMode.multi,this._tap=w.TapBehavior.invokeOnly,this._groupHeaderTap=w.GroupHeaderTapBehavior.invoke,this._mode=new P._SelectionMode(this),this._groups=new M._NoGroups(this),this._updateItemsAriaRoles(),this._updateGroupHeadersAriaRoles(),this._element.setAttribute("aria-multiselectable",this._multiSelection()),this._element.tabIndex=-1,this._tabManager.tabIndex=this._tabIndex,"absolute"!==this._element.style.position&&"relative"!==this._element.style.position&&(this._element.style.position="relative"),this._updateItemsManager(),n.layout||this._updateLayout(new D.GridLayout),this._attachEvents(),this._runningInit=!0,f.setOptions(this,n),this._runningInit=!1,this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.medium,0),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},layout:{get:function(){return this._layoutImpl},set:function(e){this._updateLayout(e),this._runningInit||(this._view.reset(),this._updateItemsManager(),this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.medium,0,!0))}},maxLeadingPages:{get:function(){return this._view.maxLeadingPages},set:function(e){this._view.maxLeadingPages=Math.max(0,Math.floor(e))}},maxTrailingPages:{get:function(){return this._view.maxTrailingPages},set:function(e){this._view.maxTrailingPages=Math.max(0,Math.floor(e))}},pagesToLoad:{get:function(){return 2*B._VirtualizeContentsView._defaultPagesToPrefetch+1},set:function(){g._deprecated(k.pagesToLoadIsDeprecated)}},pagesToLoadThreshold:{get:function(){return 0},set:function(){g._deprecated(k.pagesToLoadThresholdIsDeprecated)}},groupDataSource:{get:function(){return this._groupDataSource},set:function(e){function t(e){e.detail===w.DataSourceStatus.failure&&(n.itemDataSource=null,n.groupDataSource=null)}this._writeProfilerMark("set_groupDataSource,info");var n=this;this._groupDataSource&&this._groupDataSource.removeEventListener&&this._groupDataSource.removeEventListener("statuschanged",t,!1),this._groupDataSource=e,this._groupFocusCache=e&&this._supportsGroupHeaderKeyboarding?new T._GroupFocusCache(this):new T._UnsupportedGroupFocusCache,this._groupDataSource&&this._groupDataSource.addEventListener&&this._groupDataSource.addEventListener("statuschanged",t,!1),this._createGroupsContainer(),this._runningInit?(this._updateGroupWork(),this._resetLayout()):(this._view.reset(),this._pendingLayoutReset=!0,this._pendingGroupWork=!0,this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.medium,0,!0))}},_updateGroupWork:function(){this._pendingGroupWork=!1,this._groupDataSource?g.addClass(this._element,E._groupsClass):g.removeClass(this._element,E._groupsClass),this._resetLayout()},automaticallyLoadPages:{get:function(){return!1},set:function(){g._deprecated(k.automaticallyLoadPagesIsDeprecated)}},loadingBehavior:{get:function(){return"randomAccess"},set:function(){g._deprecated(k.loadingBehaviorIsDeprecated)}},selectionMode:{get:function(){return this._selectionMode},set:function(e){if("string"==typeof e&&e.match(/^(none|single|multi)$/)){if(n.isPhone&&e===w.SelectionMode.single)return;return this._selectionMode=e,this._element.setAttribute("aria-multiselectable",this._multiSelection()),this._updateItemsAriaRoles(),void this._configureSelectionMode()}throw new i("WinJS.UI.ListView.ModeIsInvalid",k.modeIsInvalid)}},tapBehavior:{get:function(){return this._tap},set:function(e){n.isPhone&&e===w.TapBehavior.directSelect||(this._tap=e,this._updateItemsAriaRoles(),this._configureSelectionMode())}},groupHeaderTapBehavior:{get:function(){return this._groupHeaderTap},set:function(e){this._groupHeaderTap=e,this._updateGroupHeadersAriaRoles()}},swipeBehavior:{get:function(){return"none"},set:function(e){g._deprecated(k.swipeBehaviorDeprecated)}},itemDataSource:{get:function(){return this._itemsManager.dataSource},set:function(e){this._writeProfilerMark("set_itemDataSource,info"),this._dataSource=e||(new d.List).dataSource,this._groupFocusCache.clear(),this._runningInit||(this._selection._reset(),this._cancelAsyncViewWork(!0),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.medium,0,!0))}},itemTemplate:{get:function(){return this._itemRenderer},set:function(e){this._setRenderer(e,!1),this._runningInit||(this._cancelAsyncViewWork(!0),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.medium,0,!0))}},resetItem:{get:function(){return this._itemRelease},set:function(e){g._deprecated(k.resetItemIsDeprecated),this._itemRelease=e}},groupHeaderTemplate:{get:function(){return this._groupHeaderRenderer},set:function(e){this._setRenderer(e,!0),this._runningInit||(this._cancelAsyncViewWork(!0),this._pendingLayoutReset=!0,this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.medium,0,!0))}},resetGroupHeader:{get:function(){return this._groupHeaderRelease},set:function(e){g._deprecated(k.resetGroupHeaderIsDeprecated),this._groupHeaderRelease=e}},header:{get:function(){return this._header},set:function(e){g.empty(this._headerContainer),this._header=e,e&&(this._header.tabIndex=this._tabIndex,this._headerContainer.appendChild(e));var t=this._selection._getFocused();if(t.type===w.ObjectType.header){var n=t;e||(n={type:w.ObjectType.item,index:0}),this._hasKeyboardFocus?this._changeFocus(n,!0,!1,!0):this._changeFocusPassively(n)}this.recalculateItemPosition(),this._raiseHeaderFooterVisibilityEvent()}},footer:{get:function(){return this._footer},set:function(e){g.empty(this._footerContainer),this._footer=e,e&&(this._footer.tabIndex=this._tabIndex,this._footerContainer.appendChild(e));var t=this._selection._getFocused();if(t.type===w.ObjectType.footer){var n=t;e||(n={type:w.ObjectType.item,index:0}),this._hasKeyboardFocus?this._changeFocus(n,!0,!1,!0):this._changeFocusPassively(n)}this.recalculateItemPosition(),this._raiseHeaderFooterVisibilityEvent()}},loadingState:{get:function(){return this._loadingState}},selection:{get:function(){return this._selection}},indexOfFirstVisible:{get:function(){return this._view.firstIndexDisplayed},set:function(e){if(!(0>e)){this._writeProfilerMark("set_indexOfFirstVisible("+e+"),info"),this._raiseViewLoading(!0);var t=this;this._batchViewUpdates(E._ViewChange.realize,E._ScrollToPriority.high,function(){var n;return t._entityInRange({type:w.ObjectType.item,index:e}).then(function(e){return e.inRange?t._getItemOffset({type:w.ObjectType.item,index:e.index}).then(function(e){return n=e,t._ensureFirstColumnRange(w.ObjectType.item)}).then(function(){return n=t._correctRangeInFirstColumn(n,w.ObjectType.item),n=t._convertFromCanvasCoordinates(n),t._view.waitForValidScrollPosition(n.begin)}).then(function(e){var n=e<t._lastScrollPosition?"left":"right",i=t._viewport[t._scrollLength]-t._getViewportLength();return e=g._clamp(e,0,i),{position:e,direction:n}}):{position:0,direction:"left"}})},!0)}}},indexOfLastVisible:{get:function(){return this._view.lastIndexDisplayed}},currentItem:{get:function(){var e=this._selection._getFocused(),t={index:e.index,type:e.type,key:null,hasFocus:!!this._hasKeyboardFocus,showFocus:!1};if(e.type===w.ObjectType.groupHeader){var n=this._groups.group(e.index);n&&(t.key=n.key,t.showFocus=!(!n.header||!g.hasClass(n.header,E._itemFocusClass)))}else if(e.type===w.ObjectType.item){var i=this._view.items.itemAt(e.index);if(i){var r=this._itemsManager._recordFromElement(i);t.key=r.item&&r.item.key,t.showFocus=!!i.parentNode.querySelector("."+E._itemFocusOutlineClass)}}return t},set:function(e){function t(t,i,r){var o=!!e.showFocus&&n._hasKeyboardFocus;n._unsetFocusOnItem(i),n._selection._setFocused(r,o),n._hasKeyboardFocus?(n._keyboardFocusInbound=o,n._setFocusOnItem(r)):n._tabManager.childFocus=i?t:null,r.type!==w.ObjectType.groupHeader&&(n._updateFocusCache(r.index),n._updater&&(n._updater.newSelectionPivot=r.index,n._updater.oldSelectionPivot=-1),n._selection._pivot=r.index)}this._hasKeyboardFocus=e.hasFocus||this._hasKeyboardFocus,e.type||(e.type=w.ObjectType.item);var n=this;if(e.key&&(e.type===w.ObjectType.item&&this._dataSource.itemFromKey||e.type===w.ObjectType.groupHeader&&this._groupDataSource&&this._groupDataSource.itemFromKey)){this.oldCurrentItemKeyFetch&&this.oldCurrentItemKeyFetch.cancel();var i=e.type===w.ObjectType.groupHeader?this._groupDataSource:this._dataSource;this.oldCurrentItemKeyFetch=i.itemFromKey(e.key).then(function(i){if(n.oldCurrentItemKeyFetch=null,i){var r=e.type===w.ObjectType.groupHeader?n._groups.group(i.index).header:n._view.items.itemAt(i.index);t(r,!!r,{type:e.type,index:i.index})}})}else{var r;if(e.type===w.ObjectType.header||e.type===w.ObjectType.footer)r=e.type===w.ObjectType.header?this._header:this._footer,t(r,!!r,{type:e.type,index:e.index});else if(void 0!==e.index){if(e.type===w.ObjectType.groupHeader){var o=n._groups.group(e.index);r=o&&o.header}else r=n._view.items.itemAt(e.index);t(r,!!r,{type:e.type,index:e.index})}}}},zoomableView:{get:function(){return this._zoomableView||(this._zoomableView=new l(this)),this._zoomableView}},itemsDraggable:{get:function(){return this._dragSource},set:function(e){n.isPhone||this._dragSource!==e&&(this._dragSource=e,this._setDraggable())}},itemsReorderable:{get:function(){return this._reorderable},set:function(e){n.isPhone||this._reorderable!==e&&(this._reorderable=e,this._setDraggable())}},maxDeferredItemCleanup:{get:function(){return this._maxDeferredItemCleanup},set:function(e){this._maxDeferredItemCleanup=Math.max(0,+e||0)}},dispose:function(){this._dispose()},elementFromIndex:function(e){return this._view.items.itemAt(e)},indexOfElement:function(e){return this._view.items.index(e)},ensureVisible:function(e){var t=w.ObjectType.item,n=e;if(+e!==e&&(t=e.type,n=e.index),this._writeProfilerMark("ensureVisible("+t+": "+n+"),info"),!(0>n)){this._raiseViewLoading(!0);var i=this;this._batchViewUpdates(E._ViewChange.realize,E._ScrollToPriority.high,function(){var e;return i._entityInRange({type:t,index:n}).then(function(n){return n.inRange?i._getItemOffset({type:t,index:n.index}).then(function(n){return e=n,i._ensureFirstColumnRange(t)}).then(function(){e=i._correctRangeInFirstColumn(e,t);var r=i._getViewportLength(),o=i._viewportScrollPosition,s=o+r,a=i._viewportScrollPosition,l=e.end-e.begin;e=i._convertFromCanvasCoordinates(e);var u=!1;if(t===w.ObjectType.groupHeader&&o<=e.begin){var c=i._groups.group(n.index).header;if(c){var d,h=D._getMargins(c);if(i._horizontalLayout){var p=i._rtl(),m=p?F(c)-h.right:c.offsetLeft-h.left;d=m+c.offsetWidth+(p?h.left:h.right)}else d=c.offsetTop+c.offsetHeight+h.top;u=s>=d}}u||(l>=s-o?a=e.begin:e.begin<o?a=e.begin:e.end>s&&(a=e.end-r));var f=a<i._lastScrollPosition?"left":"right",_=i._viewport[i._scrollLength]-r;return a=g._clamp(a,0,_),{position:a,direction:f}}):{position:0,direction:"left"}})},!0)}},loadMorePages:function(){g._deprecated(k.loadMorePagesIsDeprecated)},recalculateItemPosition:function(){this._writeProfilerMark("recalculateItemPosition,info"),this._forceLayoutImpl(E._ViewChange.relayout)},forceLayout:function(){this._writeProfilerMark("forceLayout,info"),this._forceLayoutImpl(E._ViewChange.remeasure)},_entityInRange:function(e){if(e.type===w.ObjectType.item)return this._itemsCount().then(function(t){var n=g._clamp(e.index,0,t-1);return{inRange:n>=0&&t>n,index:n}});if(e.type===w.ObjectType.groupHeader){var t=g._clamp(e.index,0,this._groups.length()-1);return h.wrap({inRange:t>=0&&t<this._groups.length(),index:t})}return h.wrap({inRange:!0,index:0})},_forceLayoutImpl:function(e){var t=this;this._versionManager.unlocked.then(function(){t._writeProfilerMark("_forceLayoutImpl viewChange("+e+"),info"),t._cancelAsyncViewWork(),t._pendingLayoutReset=!0,t._resizeViewport(),t._batchViewUpdates(e,E._ScrollToPriority.low,function(){return{position:t._lastScrollPosition,direction:"right"}},!0,!0)})},_configureSelectionMode:function(){var t=E._selectionModeClass,n=E._hidingSelectionMode;if(this._isInSelectionMode())g.addClass(this._canvas,t),g.removeClass(this._canvas,n);else{if(g.hasClass(this._canvas,t)){var i=this;e.setTimeout(function(){e.setTimeout(function(){g.removeClass(i._canvas,n)},E._hidingSelectionModeAnimationTimeout)},50),g.addClass(this._canvas,n)}g.removeClass(this._canvas,t)}},_lastScrollPosition:{get:function(){return this._lastScrollPositionValue},set:function(e){if(0===e)this._lastDirection="right",this._direction="right",this._lastScrollPositionValue=0;else{var t=e<this._lastScrollPositionValue?"left":"right";this._direction=this._scrollDirection(e),this._lastDirection=t,this._lastScrollPositionValue=e}}},_hasHeaderOrFooter:{get:function(){return!(!this._header&&!this._footer)}},_getHeaderOrFooterFromElement:function(e){return this._header&&this._header.contains(e)?this._header:this._footer&&this._footer.contains(e)?this._footer:null},_supportsGroupHeaderKeyboarding:{get:function(){return this._groupDataSource}},_viewportScrollPosition:{get:function(){return this._currentScrollPosition=g.getScrollPosition(this._viewport)[this._scrollProperty],this._currentScrollPosition},set:function(e){var t={};t[this._scrollProperty]=e,g.setScrollPosition(this._viewport,t),this._currentScrollPosition=e}},_canvasStart:{get:function(){return this._canvasStartValue||0},set:function(e){var t=this._horizontal()?this._rtl()?-e:e:0,n=this._horizontal()?0:e;0!==e?this._canvas.style[H.scriptName]="translate( "+t+"px, "+n+"px)":this._canvas.style[H.scriptName]="",this._canvasStartValue=e}},scrollPosition:{get:function(){return this._viewportScrollPosition},set:function(e){var t=this;this._batchViewUpdates(E._ViewChange.realize,E._ScrollToPriority.high,function(){return t._view.waitForValidScrollPosition(e).then(function(){var n=t._viewport[t._scrollLength]-t._getViewportLength();e=g._clamp(e,0,n);var i=e<t._lastScrollPosition?"left":"right";return{position:e,direction:i}})},!0)}},_setRenderer:function(e,t){var r;if(e){if("function"==typeof e)r=e;else if("object"==typeof e){if(n.validation&&!e.renderItem)throw new i("WinJS.UI.ListView.invalidTemplate",k.invalidTemplate);r=e.renderItem}}else{if(n.validation)throw new i("WinJS.UI.ListView.invalidTemplate",k.invalidTemplate);r=y.trivialHtmlRenderer}r&&(t?this._groupHeaderRenderer=r:this._itemRenderer=r)},_renderWithoutReuse:function(e,t){t&&_._disposeElement(t);var n=this._itemRenderer(e);if(n.then)return n.then(function(e){return e.tabIndex=0,e});var i=n.element||n;return i.tabIndex=0,n},_isInsertedItem:function(e){return!!this._insertedItems[e.handle]},_clearInsertedItems:function(){for(var e=Object.keys(this._insertedItems),t=0,n=e.length;n>t;t++)this._insertedItems[e[t]].release();this._insertedItems={},this._modifiedElements=[],this._countDifference=0},_cancelAsyncViewWork:function(e){this._view.stopWork(e)},_updateView:function(){function e(){n._itemsBlockExtent=-1,n._firstItemRange=null,n._firstHeaderRange=null,n._itemMargins=null,n._headerMargins=null,n._canvasMargins=null,n._cachedRTL=null,n._rtl()}function t(){n._scrollToPriority=E._ScrollToPriority.uninitialized;var e=n._setScrollbarPosition;n._setScrollbarPosition=!1;var t="number"==typeof n._scrollToFunctor?{position:n._scrollToFunctor}:n._scrollToFunctor();return h.as(t).then(function(t){return t=t||{},e&&+t.position===t.position&&(n._lastScrollPosition=t.position,n._viewportScrollPosition=t.position),t},function(t){return n._setScrollbarPosition|=e,h.wrapError(t)})}if(!this._isZombie()){var n=this,i=this._viewChange;this._viewChange=E._ViewChange.realize,i===E._ViewChange.rebuild?(this._pendingGroupWork&&this._updateGroupWork(),this._pendingLayoutReset&&this._resetLayout(),e(),this._firstTimeDisplayed||this._view.reset(),this._view.reload(t,!0),this._setFocusOnItem(this._selection._getFocused()),this._headerFooterVisibilityStatus={headerVisible:!1,footerVisible:!1}):i===E._ViewChange.remeasure?(this._view.resetItems(!0),this._resetLayout(),e(),this._view.refresh(t),this._setFocusOnItem(this._selection._getFocused()),this._headerFooterVisibilityStatus={headerVisible:!1,footerVisible:!1}):i===E._ViewChange.relayout?(this._pendingLayoutReset&&(this._resetLayout(),e()),this._view.refresh(t)):(this._view.onScroll(t),this._raiseHeaderFooterVisibilityEvent())}},_batchViewUpdates:function(e,t,n,i,r){if(this._viewChange=Math.min(this._viewChange,e),(null===this._scrollToFunctor||t>=this._scrollToPriority)&&(this._scrollToPriority=t,this._scrollToFunctor=n),this._setScrollbarPosition|=!!i,!this._batchingViewUpdates){this._raiseViewLoading();var o=this;this._batchingViewUpdatesSignal=new m,this._batchingViewUpdates=h.any([this._batchingViewUpdatesSignal.promise,p.schedulePromiseHigh(null,"WinJS.UI.ListView._updateView")]).then(function(){return o._isZombie()?void 0:o._viewChange!==E._ViewChange.rebuild||o._firstTimeDisplayed||0===Object.keys(o._view.items._itemData).length||r?void 0:o._fadeOutViewport()}).then(function(){o._batchingViewUpdates=null,o._batchingViewUpdatesSignal=null,o._updateView(),o._firstTimeDisplayed=!1},function(){o._batchingViewUpdates=null,o._batchingViewUpdatesSignal=null})}return this._batchingViewUpdatesSignal},_resetCanvas:function(){if(!this._disposed){var t=e.document.createElement("div");t.className=this._canvas.className,this._viewport.replaceChild(t,this._canvas),this._canvas=t,this._groupsToRemove={},this._canvas.appendChild(this._canvasProxy)}},_setupInternalTree:function(){g.addClass(this._element,E._listViewClass),g[this._rtl()?"addClass":"removeClass"](this._element,E._rtlListViewClass),this._element.innerHTML='<div tabIndex="-1" role="group" class="'+E._viewportClass+" "+E._horizontalClass+'"><div></div><div class="'+E._scrollableClass+'"><div class="'+E._proxyClass+'"></div></div><div></div><div></div></div><div aria-hidden="true" style="position:absolute;left:50%;top:50%;width:0px;height:0px;" tabindex="-1"></div>',this._viewport=this._element.firstElementChild,this._headerContainer=this._viewport.firstElementChild,g.addClass(this._headerContainer,E._listHeaderContainerClass),this._canvas=this._headerContainer.nextElementSibling,this._footerContainer=this._canvas.nextElementSibling,g.addClass(this._footerContainer,E._listFooterContainerClass),this._canvasProxy=this._canvas.firstElementChild,this._deleteWrapper=this._canvas.nextElementSibling,this._keyboardEventsHelper=this._viewport.nextElementSibling,this._tabIndex=g.getTabIndex(this._element),
this._tabIndex<0&&(this._tabIndex=0),this._tabManager=new C.TabContainer(this._viewport),this._tabManager.tabIndex=this._tabIndex,this._progressBar=e.document.createElement("progress"),g.addClass(this._progressBar,E._progressClass),g.addClass(this._progressBar,"win-progress-ring"),this._progressBar.style.position="absolute",this._progressBar.max=100},_unsetFocusOnItem:function(t){this._tabManager.childFocus&&this._clearFocusRectangle(this._tabManager.childFocus),this._isZombie()||(t||(this._tabManager.childFocus&&(this._tabManager.childFocus=null),this._keyboardEventsHelper._shouldHaveFocus=!1,e.document.activeElement!==this._viewport&&this._hasKeyboardFocus&&(this._keyboardEventsHelper._shouldHaveFocus=!0,g._setActive(this._keyboardEventsHelper))),this._itemFocused=!1)},_setFocusOnItem:function(e){if(this._writeProfilerMark("_setFocusOnItem,info"),this._focusRequest&&this._focusRequest.cancel(),!this._isZombie()){var t=this,n=function(n){t._isZombie()||(t._tabManager.childFocus!==n&&(t._tabManager.childFocus=n),t._focusRequest=null,t._hasKeyboardFocus&&!t._itemFocused&&(t._selection._keyboardFocused()&&t._drawFocusRectangle(n),(e.type===w.ObjectType.groupHeader||e.type===w.ObjectType.item)&&t._view.updateAriaForAnnouncement(n,e.type===w.ObjectType.groupHeader?t._groups.length():t._cachedCount),t._itemFocused=!0,g._setActive(n)))};e.type===w.ObjectType.item?this._focusRequest=this._view.items.requestItem(e.index):e.type===w.ObjectType.groupHeader?this._focusRequest=this._groups.requestHeader(e.index):this._focusRequest=h.wrap(e.type===w.ObjectType.header?this._header:this._footer),this._focusRequest.then(n)}},_attachEvents:function(){function e(e,t,n){return{name:t?e:e.toLowerCase(),handler:function(t){i["_on"+e](t)},capture:n}}function t(e,t,n){return{capture:n,name:t?e:e.toLowerCase(),handler:function(t){var n=i._mode,r="on"+e;!i._disposed&&n[r]&&n[r](t)}}}function n(e,t){return{handler:function(t){i["_on"+e](t)},filter:t}}var i=this,r=[n("PropertyChange",["dir","style","tabindex"])];this._cachedStyleDir=this._element.style.direction,r.forEach(function(e){new g._MutationObserver(e.handler).observe(i._element,{attributes:!0,attributeFilter:e.filter})});var o=[t("PointerDown"),t("click",!1),t("PointerUp"),t("LostPointerCapture"),t("MSHoldVisual",!0),t("PointerCancel",!0),t("DragStart"),t("DragOver"),t("DragEnter"),t("DragLeave"),t("Drop"),t("ContextMenu")];o.forEach(function(e){g._addEventListener(i._viewport,e.name,e.handler,!!e.capture)});var s=[e("FocusIn",!1,!1),e("FocusOut",!1,!1),t("KeyDown"),t("KeyUp")];s.forEach(function(e){g._addEventListener(i._element,e.name,e.handler,!!e.capture)}),this._onElementResizeBound=this._onElementResize.bind(this),g._resizeNotifier.subscribe(this._element,this._onElementResizeBound),this._elementResizeInstrument=new S._ElementResizeInstrument,this._element.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._onElementResizeBound),g._inDom(this.element).then(function(){i._disposed||i._elementResizeInstrument.addedToDom()});var a=[e("MSManipulationStateChanged",!0),e("Scroll")];a.forEach(function(e){i._viewport.addEventListener(e.name,e.handler,!1)}),this._viewport.addEventListener("onTabEnter",this._onTabEnter.bind(this)),this._viewport.addEventListener("onTabExit",this._onTabExit.bind(this)),this._viewport.addEventListener("onTabEntered",function(e){i._mode.onTabEntered(e)}),this._viewport.addEventListener("onTabExiting",function(e){i._mode.onTabExiting(e)})},_updateItemsManager:function(){function e(e){e.detail===w.DataSourceStatus.failure&&(t.itemDataSource=null,t.groupDataSource=null)}var t=this,n={beginNotifications:function(){},changed:function(e,n){if(!t._ifZombieDispose()){t._createUpdater();var i=t._updater.elements[j(n)];if(i){var r=t.selection._isIncluded(i.index);if(r&&(t._updater.updateDrag=!0),n!==e){if((t._tabManager.childFocus===n||t._updater.newFocusedItem===n)&&(t._updater.newFocusedItem=e,t._tabManager.childFocus=null),i.itemBox){g.addClass(e,E._itemClass),t._setupAriaSelectionObserver(e);var o=n.nextElementSibling;i.itemBox.removeChild(n),i.itemBox.insertBefore(e,o)}t._setAriaSelected(e,r),t._view.items.setItemAt(i.newIndex,{element:e,itemBox:i.itemBox,container:i.container,itemsManagerRecord:i.itemsManagerRecord}),delete t._updater.elements[j(n)],_._disposeElement(n),t._updater.elements[j(e)]={item:e,container:i.container,itemBox:i.itemBox,index:i.index,newIndex:i.newIndex,itemsManagerRecord:i.itemsManagerRecord}}else i.itemBox&&i.container&&(x._ItemEventsHandler.renderSelection(i.itemBox,e,r,!0),g[r?"addClass":"removeClass"](i.container,E._selectedClass));t._updater.changed=!0}for(var s=0,a=t._notificationHandlers.length;a>s;s++)t._notificationHandlers[s].changed(e,n);t._writeProfilerMark("changed,info")}},removed:function(e,n,i){function r(e){t._updater.updateDrag=!0,t._currentMode()._dragging&&t._currentMode()._draggingUnselectedItem&&t._currentMode()._dragInfo._isIncluded(e)&&(t._updater.newDragInfo=new L._Selection(t,[]));var n=t._updater.selectionFirst[e],i=t._updater.selectionLast[e],r=n||i;r&&(delete t._updater.selectionFirst[r.oldFirstIndex],delete t._updater.selectionLast[r.oldLastIndex],t._updater.selectionChanged=!0)}if(!t._ifZombieDispose()){t._createUpdater();var o=t._insertedItems[i];o&&delete t._insertedItems[i];var s;if(e){var a=t._updater.elements[j(e)],l=t._itemsManager.itemObject(e);if(l&&t._groupFocusCache.deleteItem(l.key),a){if(s=a.index,a.itemBox){var u=a.itemBox,c=E._containerOddClass,d=E._containerEvenClass,h=g.hasClass(u.parentElement,d)?d:c;t._updater.removed.push({index:s,itemBox:u,containerStripe:h})}t._updater.deletesCount++;var p=t._view.items.itemDataAt(s);p.removed=!0,delete t._updater.elements[j(e)]}else s=l&&l.index;t._updater.oldFocus.type!==w.ObjectType.groupHeader&&t._updater.oldFocus.index===s&&(t._updater.newFocus.index=s,t._updater.focusedItemRemoved=!0),r(s)}else s=t._updater.selectionHandles[i],s===+s&&r(s);t._writeProfilerMark("removed("+s+"),info"),t._updater.changed=!0}},updateAffectedRange:function(e){t._itemsCount().then(function(n){var i=t._view.containers?t._view.containers.length:0;e.start=Math.min(e.start,i),t._affectedRange.add(e,n)}),t._createUpdater(),t._updater.changed=!0},indexChanged:function(e,n,i){if(!t._ifZombieDispose()){if(t._createUpdater(),e){var r=t._itemsManager.itemObject(e);r&&t._groupFocusCache.updateItemIndex(r.key,n);var o=t._updater.elements[j(e)];o&&(o.newIndex=n,t._updater.changed=!0),t._updater.itemsMoved=!0}t._currentMode()._dragging&&t._currentMode()._draggingUnselectedItem&&t._currentMode()._dragInfo._isIncluded(i)&&(t._updater.newDragInfo=new L._Selection(t,[{firstIndex:n,lastIndex:n}]),t._updater.updateDrag=!0),t._updater.oldFocus.type!==w.ObjectType.groupHeader&&t._updater.oldFocus.index===i&&(t._updater.newFocus.index=n,t._updater.changed=!0),t._updater.oldSelectionPivot===i&&(t._updater.newSelectionPivot=n,t._updater.changed=!0);var s=t._updater.selectionFirst[i];s&&(s.newFirstIndex=n,t._updater.changed=!0,t._updater.selectionChanged=!0,t._updater.updateDrag=!0),s=t._updater.selectionLast[i],s&&(s.newLastIndex=n,t._updater.changed=!0,t._updater.selectionChanged=!0,t._updater.updateDrag=!0)}},endNotifications:function(){t._update()},inserted:function(e){t._ifZombieDispose()||(t._writeProfilerMark("inserted,info"),t._createUpdater(),t._updater.changed=!0,e.retain(),t._updater.insertsCount++,t._insertedItems[e.handle]=e)},moved:function(e,n,i,r){if(!t._ifZombieDispose()){if(t._createUpdater(),t._updater.movesCount++,e){t._updater.itemsMoved=!0;var o=t._updater.elements[j(e)];o&&(o.moved=!0)}var s=t._updater.selectionHandles[r.handle];if(s===+s){t._updater.updateDrag=!0,t._updater.selectionChanged=!0,t._updater.changed=!0;var a=t._updater.selectionFirst[s],l=t._updater.selectionLast[s],u=a||l;u&&u.oldFirstIndex!==u.oldLastIndex&&(delete t._updater.selectionFirst[u.oldFirstIndex],delete t._updater.selectionLast[u.oldLastIndex])}t._writeProfilerMark("moved("+s+"),info")}},countChanged:function(e,n){t._ifZombieDispose()||(t._writeProfilerMark("countChanged("+e+"),info"),t._cachedCount=e,t._createUpdater(),t._view.lastIndexDisplayed+1===n&&(t._updater.changed=!0),t._updater.countDifference+=e-n)},reload:function(){t._ifZombieDispose()||(t._writeProfilerMark("reload,info"),t._processReload())}};this._versionManager&&this._versionManager._dispose(),this._versionManager=new I._VersionManager,this._updater=null;var i=this._selection.getRanges();this._selection._selected.clear(),this._itemsManager&&(this._itemsManager.dataSource&&this._itemsManager.dataSource.removeEventListener&&this._itemsManager.dataSource.removeEventListener("statuschanged",e,!1),this._clearInsertedItems(),this._itemsManager.release()),this._itemsCountPromise&&(this._itemsCountPromise.cancel(),this._itemsCountPromise=null),this._cachedCount=E._UNINITIALIZED,this._itemsManager=y._createItemsManager(this._dataSource,this._renderWithoutReuse.bind(this),n,{ownerElement:this._element,versionManager:this._versionManager,indexInView:function(e){return e>=t.indexOfFirstVisible&&e<=t.indexOfLastVisible},viewCallsReady:!0,profilerId:this._id}),this._dataSource.addEventListener&&this._dataSource.addEventListener("statuschanged",e,!1),this._selection._selected.set(i)},_processReload:function(){this._affectedRange.addAll(),this._cancelAsyncViewWork(!0),this._currentMode()._dragging&&this._currentMode()._clearDragProperties(),this._groupFocusCache.clear(),this._selection._reset(),this._updateItemsManager(),this._pendingLayoutReset=!0,this._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.low,this.scrollPosition)},_createUpdater:function(){if(!this._updater){this.itemDataSource._isVirtualizedDataSource&&this._affectedRange.addAll(),this._versionManager.beginUpdating(),this._cancelAsyncViewWork();var e={changed:!1,elements:{},selectionFirst:{},selectionLast:{},selectionHandles:{},oldSelectionPivot:{type:w.ObjectType.item,index:E._INVALID_INDEX},newSelectionPivot:{type:w.ObjectType.item,index:E._INVALID_INDEX},removed:[],selectionChanged:!1,oldFocus:{type:w.ObjectType.item,index:E._INVALID_INDEX},newFocus:{type:w.ObjectType.item,index:E._INVALID_INDEX},hadKeyboardFocus:this._hasKeyboardFocus,itemsMoved:!1,lastVisible:this.indexOfLastVisible,updateDrag:!1,movesCount:0,insertsCount:0,deletesCount:0,countDifference:0};this._view.items.each(function(t,n,i){e.elements[j(n)]={item:n,container:i.container,itemBox:i.itemBox,index:t,newIndex:t,itemsManagerRecord:i.itemsManagerRecord,detached:i.detached}});for(var t=this._selection._selected._ranges,n=0,i=t.length;i>n;n++){var r=t[n],o={newFirstIndex:t[n].firstIndex,oldFirstIndex:t[n].firstIndex,newLastIndex:t[n].lastIndex,oldLastIndex:t[n].lastIndex};e.selectionFirst[o.oldFirstIndex]=o,e.selectionLast[o.oldLastIndex]=o,e.selectionHandles[r.firstPromise.handle]=o.oldFirstIndex,e.selectionHandles[r.lastPromise.handle]=o.oldLastIndex}e.oldSelectionPivot=this._selection._pivot,e.newSelectionPivot=e.oldSelectionPivot,e.oldFocus=this._selection._getFocused(),e.newFocus=this._selection._getFocused(),this._updater=e}},_synchronize:function(){var e=this._updater;if(this._updater=null,this._groupsChanged=!1,this._countDifference=this._countDifference||0,e&&e.changed){e.itemsMoved&&this._layout.itemsMoved&&this._layout.itemsMoved(),e.removed.length&&this._layout.itemsRemoved&&this._layout.itemsRemoved(e.removed.map(function(e){return e.itemBox})),(e.itemsMoved||e.removed.length||Object.keys(this._insertedItems).length)&&this._layout.setupAnimations&&this._layout.setupAnimations(),this._currentMode().onDataChanged&&this._currentMode().onDataChanged();var t=[];for(var n in e.selectionFirst)if(e.selectionFirst.hasOwnProperty(n)){var i=e.selectionFirst[n];e.selectionChanged=e.selectionChanged||i.newLastIndex-i.newFirstIndex!==i.oldLastIndex-i.oldFirstIndex,i.newFirstIndex<=i.newLastIndex&&t.push({firstIndex:i.newFirstIndex,lastIndex:i.newLastIndex})}if(e.selectionChanged){var r=new L._Selection(this,t);this._selection._fireSelectionChanging(r),this._selection._selected.set(t),this._selection._fireSelectionChanged(),r.clear()}else this._selection._selected.set(t);this._selection._updateCount(this._cachedCount),e.newSelectionPivot=Math.min(this._cachedCount-1,e.newSelectionPivot),this._selection._pivot=e.newSelectionPivot>=0?e.newSelectionPivot:E._INVALID_INDEX,e.newFocus.type!==w.ObjectType.groupHeader&&(e.newFocus.index=Math.max(0,Math.min(this._cachedCount-1,e.newFocus.index))),this._selection._setFocused(e.newFocus,this._selection._keyboardFocused());var o=this._modifiedElements||[],s={};for(this._modifiedElements=[],this._countDifference+=e.countDifference,n=0;n<o.length;n++){var a=o[n];-1===a.newIndex?this._modifiedElements.push(a):s[a.newIndex]=a}for(n=0;n<e.removed.length;n++){var l=e.removed[n],a=s[l.index];a?delete s[l.index]:a={oldIndex:l.index},a.newIndex=-1,a._removalHandled||(a._itemBox=l.itemBox,a._containerStripe=l.containerStripe),this._modifiedElements.push(a)}var u=Object.keys(this._insertedItems);for(n=0;n<u.length;n++)this._modifiedElements.push({oldIndex:-1,newIndex:this._insertedItems[u[n]].index});this._writeProfilerMark("_synchronize:update_modifiedElements,StartTM");var c={};for(n in e.elements)if(e.elements.hasOwnProperty(n)){var d=e.elements[n];c[d.newIndex]={element:d.item,container:d.container,itemBox:d.itemBox,itemsManagerRecord:d.itemsManagerRecord,detached:d.detached};var a=s[d.index];a?(delete s[d.index],a.newIndex=d.newIndex):a={oldIndex:d.index,newIndex:d.newIndex},a.moved=d.moved,this._modifiedElements.push(a)}this._writeProfilerMark("_synchronize:update_modifiedElements,StopTM");var h=Object.keys(s);for(n=0;n<h.length;n++){var p=h[n],a=s[p];-1!==a.oldIndex&&this._modifiedElements.push(a)}this._view.items._itemData=c,e.updateDrag&&this._currentMode()._dragging&&(this._currentMode()._draggingUnselectedItem?e.newDragInfo&&(this._currentMode()._dragInfo=e.newDragInfo):this._currentMode()._dragInfo=this._selection,this._currentMode().fireDragUpdateEvent()),e.focusedItemRemoved||this._focusRequest&&e.oldFocus.index!==e.newFocus.index||e.oldFocus.type!==e.newFocus.type?(this._itemFocused=!1,this._setFocusOnItem(this._selection._getFocused())):e.newFocusedItem&&(this._hasKeyboardFocus=e.hadKeyboardFocus,this._itemFocused=!1,this._setFocusOnItem(this._selection._getFocused()));var m=this;return this._groups.synchronizeGroups().then(function(){return e.newFocus.type===w.ObjectType.groupHeader&&(e.newFocus.index=Math.min(m._groups.length()-1,e.newFocus.index),e.newFocus.index<0&&(e.newFocus={type:w.ObjectType.item,index:0}),m._selection._setFocused(e.newFocus,m._selection._keyboardFocused())),m._versionManager.endUpdating(),e.deletesCount>0&&m._updateDeleteWrapperSize(),m._view.updateTree(m._cachedCount,m._countDifference,m._modifiedElements)}).then(function(){return m._lastScrollPosition})}this._countDifference+=e?e.countDifference:0;var m=this;return this._groups.synchronizeGroups().then(function(){return e&&m._versionManager.endUpdating(),m._view.updateTree(m._cachedCount,m._countDifference,m._modifiedElements)}).then(function(){return m.scrollPosition})},_updateDeleteWrapperSize:function(e){var t=this._horizontal()?"width":"height";this._deleteWrapper.style["min-"+t]=(e?0:this.scrollPosition+this._getViewportSize()[t])+"px"},_verifyRealizationNeededForChange:function(){var e=!1,t=(this._view.lastIndexDisplayed||0)-(this._view.firstIndexDisplayed||0),n=this._updater&&0===this._updater.movesCount&&0===this._updater.insertsCount&&this._updater.deletesCount>0&&this._updater.deletesCount===Math.abs(this._updater.countDifference);if(n&&this._updater.elements)for(var i=Object.keys(this._updater.elements),r=0,o=i.length;o>r;r++){var s=this._updater.elements[i[r]],a=s.index-s.newIndex;if(0>a||a>this._updater.deletesCount){n=!1;break}}this._view.deletesWithoutRealize=this._view.deletesWithoutRealize||0,n&&this._view.lastIndexDisplayed<this._view.end-t&&this._updater.deletesCount+this._view.deletesWithoutRealize<t?(e=!0,this._view.deletesWithoutRealize+=Math.abs(this._updater.countDifference),this._writeProfilerMark("skipping realization on delete,info")):this._view.deletesWithoutRealize=0,this._view._setSkipRealizationForChange(e)},_update:function(){if(this._writeProfilerMark("update,StartTM"),!this._ifZombieDispose()){this._updateJob=null;var e=this;this._versionManager.noOutstandingNotifications&&(this._updater||this._groupsChanged?(this._cancelAsyncViewWork(),this._verifyRealizationNeededForChange(),this._synchronize().then(function(t){e._writeProfilerMark("update,StopTM"),e._batchViewUpdates(E._ViewChange.relayout,E._ScrollToPriority.low,t).complete()})):this._batchViewUpdates(E._ViewChange.relayout,E._ScrollToPriority.low,this._lastScrollPosition).complete())}},_scheduleUpdate:function(){if(!this._updateJob){var e=this;this._updateJob=p.schedulePromiseHigh(null,"WinJS.UI.ListView._update").then(function(){e._updateJob&&e._update()}),this._raiseViewLoading()}},_createGroupsContainer:function(){this._groups&&this._groups.cleanUp(),this._groupDataSource?this._groups=new M._UnvirtualizedGroupsContainer(this,this._groupDataSource):this._groups=new M._NoGroups(this)},_createLayoutSite:function(){var t=this;return Object.create({invalidateLayout:function(){t._pendingLayoutReset=!0;var e="horizontal"===t._layout.orientation!==t._horizontalLayout;t._affectedRange.addAll(),t._batchViewUpdates(E._ViewChange.rebuild,E._ScrollToPriority.low,e?0:t.scrollPosition,!1,!0)},itemFromIndex:function(e){return t._itemsManager._itemPromiseAtIndex(e)},groupFromIndex:function(e){return t._groupsEnabled()?e<t._groups.length()?t._groups.group(e).userData:null:{key:"-1"}},groupIndexFromItemIndex:function(e){return e=Math.max(0,e),t._groups.groupFromItem(e)},renderItem:function(n){return h._cancelBlocker(t._itemsManager._itemFromItemPromise(n)).then(function(n){if(n){var i=t._itemsManager._recordFromElement(n);i.pendingReady&&i.pendingReady(),n=n.cloneNode(!0),g.addClass(n,E._itemClass);var r=e.document.createElement("div");g.addClass(r,E._itemBoxClass),r.appendChild(n);var o=e.document.createElement("div");return g.addClass(o,E._containerClass),o.appendChild(r),o}return h.cancel})},renderHeader:function(n){var i=y._normalizeRendererReturn(t.groupHeaderTemplate(h.wrap(n)));return i.then(function(t){g.addClass(t.element,E._headerClass);var n=e.document.createElement("div");return g.addClass(n,E._headerContainerClass),n.appendChild(t.element),n})},readyToMeasure:function(){t._getViewportLength(),t._getCanvasMargins()},_isZombie:function(){return t._isZombie()},_writeProfilerMark:function(e){t._writeProfilerMark(e)}},{_itemsManager:{enumerable:!0,get:function(){return t._itemsManager}},rtl:{enumerable:!0,get:function(){return t._rtl()}},surface:{enumerable:!0,get:function(){return t._canvas}},viewport:{enumerable:!0,get:function(){return t._viewport}},scrollbarPos:{enumerable:!0,get:function(){return t.scrollPosition}},viewportSize:{enumerable:!0,get:function(){return t._getViewportSize()}},loadingBehavior:{enumerable:!0,get:function(){return t.loadingBehavior}},animationsDisabled:{enumerable:!0,get:function(){return t._animationsDisabled()}},tree:{enumerable:!0,get:function(){return t._view.tree}},realizedRange:{enumerable:!0,get:function(){return{firstPixel:Math.max(0,t.scrollPosition-2*t._getViewportLength()),lastPixel:t.scrollPosition+3*t._getViewportLength()-1}}},visibleRange:{enumerable:!0,get:function(){return{firstPixel:t.scrollPosition,lastPixel:t.scrollPosition+t._getViewportLength()-1}}},itemCount:{enumerable:!0,get:function(){return t._itemsCount()}},groupCount:{enumerable:!0,get:function(){return t._groups.length()}},header:{enumerable:!0,get:function(){return t.header}},footer:{enumerable:!0,get:function(){return t.footer}}})},_initializeLayout:function(){this._affectedRange.addAll();var e=this._createLayoutSite();return this._layout.initialize(e,this._groupsEnabled()),"horizontal"===this._layout.orientation},_resetLayoutOrientation:function(e){this._horizontalLayout?(this._startProperty="left",this._scrollProperty="scrollLeft",this._scrollLength="scrollWidth",this._deleteWrapper.style.minHeight="",g.addClass(this._viewport,E._horizontalClass),g.removeClass(this._viewport,E._verticalClass),e&&(this._viewport.scrollTop=0)):(this._startProperty="top",this._scrollProperty="scrollTop",this._scrollLength="scrollHeight",this._deleteWrapper.style.minWidth="",g.addClass(this._viewport,E._verticalClass),g.removeClass(this._viewport,E._horizontalClass),e&&g.setScrollPosition(this._viewport,{scrollLeft:0}))},_resetLayout:function(){this._pendingLayoutReset=!1,this._affectedRange.addAll(),this._layout&&(this._layout.uninitialize(),this._horizontalLayout=this._initializeLayout(),this._resetLayoutOrientation())},_updateLayout:function(e){var t=!1;this._layout&&(this._cancelAsyncViewWork(!0),this._layout.uninitialize(),t=!0);var n;if(e&&"function"==typeof e.type){var i=q(e.type);n=new i(e)}else n=e&&e.initialize?e:new D.GridLayout(e);t&&this._resetCanvas(),this._layoutImpl=n,this._layout=new D._LayoutWrapper(n),t&&this._unsetFocusOnItem(),this._setFocusOnItem({type:w.ObjectType.item,index:0}),this._selection._setFocused({type:w.ObjectType.item,index:0}),this._lastFocusedElementInGroupTrack={type:w.ObjectType.item,index:-1},this._headerContainer.style.opacity=0,this._footerContainer.style.opacity=0,this._horizontalLayout=this._initializeLayout(),this._resetLayoutOrientation(t),t&&(this._canvas.style.width=this._canvas.style.height="")},_currentMode:function(){return this._mode},_setDraggable:function(){var e=this.itemsDraggable||this.itemsReorderable;this._view.items.each(function(t,n,i){i.itemBox&&(i.itemBox.draggable=e&&!g.hasClass(n,E._nonDraggableClass))})},_resizeViewport:function(){this._viewportWidth=E._UNINITIALIZED,this._viewportHeight=E._UNINITIALIZED},_onElementResize:function(){this._writeProfilerMark("_onElementResize,info"),p.schedule(function(){if(!this._isZombie()&&this._viewportWidth!==E._UNINITIALIZED&&this._viewportHeight!==E._UNINITIALIZED){var e=this._element.offsetWidth,t=this._element.offsetHeight;if(this._previousWidth!==e||this._previousHeight!==t){this._writeProfilerMark("resize ("+this._previousWidth+"x"+this._previousHeight+") => ("+e+"x"+t+"),info"),this._previousWidth=e,this._previousHeight=t,this._resizeViewport();var n=this;this._affectedRange.addAll(),this._batchViewUpdates(E._ViewChange.relayout,E._ScrollToPriority.low,function(){return{position:n.scrollPosition,direction:"right"}})}}},p.Priority.max,this,"WinJS.UI.ListView._onElementResize")},_onFocusIn:function(e){function t(e){n._changeFocus(n._selection._getFocused(),!0,!1,!1,e)}this._hasKeyboardFocus=!0;var n=this;if(e.target===this._keyboardEventsHelper)!this._keyboardEventsHelper._shouldHaveFocus&&this._keyboardFocusInbound?t(!0):this._keyboardEventsHelper._shouldHaveFocus=!1;else if(e.target===this._element)t();else{if(this._mode.inboundFocusHandled)return void(this._mode.inboundFocusHandled=!1);var i=this._view.items,r={},o=this._getHeaderOrFooterFromElement(e.target),s=null;if(o?(r.index=0,r.type=o===this._header?w.ObjectType.header:w.ObjectType.footer,this._lastFocusedElementInGroupTrack=r):(o=this._groups.headerFrom(e.target),o?(r.type=w.ObjectType.groupHeader,r.index=this._groups.index(o),this._lastFocusedElementInGroupTrack=r):(r.index=i.index(e.target),r.type=w.ObjectType.item,o=i.itemBoxAt(r.index),s=i.itemAt(r.index))),r.index!==E._INVALID_INDEX&&((this._keyboardFocusInbound||this._selection._keyboardFocused())&&(r.type===w.ObjectType.groupHeader&&e.target===o||r.type===w.ObjectType.item&&e.target.parentNode===o)&&this._drawFocusRectangle(o),this._tabManager.childFocus!==o&&this._tabManager.childFocus!==s&&(this._selection._setFocused(r,this._keyboardFocusInbound||this._selection._keyboardFocused()),this._keyboardFocusInbound=!1,r.type===w.ObjectType.item&&(o=i.itemAt(r.index)),this._tabManager.childFocus=o,n._updater))){var a=n._updater.elements[j(o)],l=r.index;a&&a.newIndex&&(l=a.newIndex),n._updater.oldFocus={type:r.type,index:l},n._updater.newFocus={type:r.type,index:l}}}},_onFocusOut:function(e){if(!this._disposed){this._hasKeyboardFocus=!1,this._itemFocused=!1;var t=this._view.items.itemBoxFrom(e.target)||this._groups.headerFrom(e.target);t&&this._clearFocusRectangle(t)}},_onMSManipulationStateChanged:function(e){function t(){n._manipulationEndSignal=null}var n=this;this._manipulationState=e.currentState,n._writeProfilerMark("_onMSManipulationStateChanged state("+e.currentState+"),info"),this._manipulationState===g._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED||this._manipulationEndSignal||(this._manipulationEndSignal=new m,this._manipulationEndSignal.promise.done(t,t)),this._manipulationState===g._MSManipulationEvent.MS_MANIPULATION_STATE_STOPPED&&this._manipulationEndSignal.complete()},_pendingScroll:!1,_onScroll:function(){this._zooming||this._pendingScroll||this._checkScroller()},_checkScroller:function(){if(!this._isZombie()){var e=this._viewportScrollPosition;if(e!==this._lastScrollPosition){this._pendingScroll=n._requestAnimationFrame(this._checkScroller.bind(this)),e=Math.max(0,e);var t=this._scrollDirection(e);this._lastScrollPosition=e,this._raiseViewLoading(!0),this._raiseHeaderFooterVisibilityEvent();var i=this;this._view.onScroll(function(){return{position:i._lastScrollPosition,direction:t}},this._manipulationEndSignal?this._manipulationEndSignal.promise:h.timeout(E._DEFERRED_SCROLL_END))}else this._pendingScroll=null}},_scrollDirection:function(e){var t=e<this._lastScrollPosition?"left":"right";return t===this._lastDirection?t:this._direction},_onTabEnter:function(){this._keyboardFocusInbound=!0},_onTabExit:function(){this._keyboardFocusInbound=!1},_onPropertyChange:function(e){var t=this;e.forEach(function(e){var n=!1;if("dir"===e.attributeName?n=!0:"style"===e.attributeName&&(n=t._cachedStyleDir!==e.target.style.direction),n&&(t._cachedStyleDir=e.target.style.direction,t._cachedRTL=null,g[t._rtl()?"addClass":"removeClass"](t._element,E._rtlListViewClass),t._lastScrollPosition=0,t._viewportScrollPosition=0,t.forceLayout()),"tabIndex"===e.attributeName){var i=t._element.tabIndex;i>=0&&(t._view.items.each(function(e,t){t.tabIndex=i}),t._header&&(t._header.tabIndex=i),t._footer&&(t._footer.tabIndex=i),t._tabIndex=i,t._tabManager.tabIndex=i,t._element.tabIndex=-1)}})},_getCanvasMargins:function(){return this._canvasMargins||(this._canvasMargins=D._getMargins(this._canvas)),this._canvasMargins},_convertCoordinatesByCanvasMargins:function(e,t){function n(n,i){void 0!==e[n]&&(e[n]=t(e[n],i))}var i;return this._horizontal()?(i=this._getCanvasMargins()[this._rtl()?"right":"left"],n("left",i)):(i=this._getCanvasMargins().top,n("top",i)),n("begin",i),n("end",i),e},_convertFromCanvasCoordinates:function(e){return this._convertCoordinatesByCanvasMargins(e,function(e,t){return e+t})},_convertToCanvasCoordinates:function(e){return this._convertCoordinatesByCanvasMargins(e,function(e,t){return e-t})},_getViewportSize:function(){return(this._viewportWidth===E._UNINITIALIZED||this._viewportHeight===E._UNINITIALIZED)&&(this._viewportWidth=Math.max(0,g.getContentWidth(this._element)),this._viewportHeight=Math.max(0,g.getContentHeight(this._element)),this._writeProfilerMark("viewportSizeDetected width:"+this._viewportWidth+" height:"+this._viewportHeight),this._previousWidth=this._element.offsetWidth,this._previousHeight=this._element.offsetHeight),{width:this._viewportWidth,height:this._viewportHeight}},_itemsCount:function(){function e(){t._itemsCountPromise=null}var t=this;if(this._cachedCount!==E._UNINITIALIZED)return h.wrap(this._cachedCount);var n;return this._itemsCountPromise?n=this._itemsCountPromise:(n=this._itemsCountPromise=this._itemsManager.dataSource.getCount().then(function(e){return e===w.CountResult.unknown&&(e=0),t._cachedCount=e,t._selection._updateCount(t._cachedCount),e},function(){return h.cancel}),this._itemsCountPromise.then(e,e)),n},_isSelected:function(e){return this._selection._isIncluded(e)},_LoadingState:{itemsLoading:"itemsLoading",viewPortLoaded:"viewPortLoaded",itemsLoaded:"itemsLoaded",complete:"complete"},_raiseViewLoading:function(e){this._loadingState!==this._LoadingState.itemsLoading&&(this._scrolling=!!e),this._setViewState(this._LoadingState.itemsLoading)},_raiseViewComplete:function(){this._disposed||this._view.animating||this._setViewState(this._LoadingState.complete)},_raiseHeaderFooterVisibilityEvent:function(){var t=this,n=function(e){if(!e)return!1;var n=t._lastScrollPosition,i=e[t._horizontal()?"offsetLeft":"offsetTop"],r=e[t._horizontal()?"offsetWidth":"offsetHeight"];return i+r>n&&i<n+t._getViewportLength()},i=function(n,i){var r=e.document.createEvent("CustomEvent");r.initCustomEvent(n,!0,!0,{visible:i}),t._element.dispatchEvent(r)},r=!!this._header&&n(this._headerContainer),o=!!this._footer&&n(this._footerContainer);this._headerFooterVisibilityStatus.headerVisible!==r&&(this._headerFooterVisibilityStatus.headerVisible=r,i("headervisibilitychanged",r)),this._headerFooterVisibilityStatus.footerVisible!==o&&(this._headerFooterVisibilityStatus.footerVisible=o,i("footervisibilitychanged",o))},_setViewState:function(t){if(t!==this._loadingState){var n={scrolling:!1};switch(t){case this._LoadingState.viewPortLoaded:this._scheduledForDispose||(N(this),this._scheduledForDispose=!0),this._setViewState(this._LoadingState.itemsLoading);break;case this._LoadingState.itemsLoaded:n={scrolling:this._scrolling},this._setViewState(this._LoadingState.viewPortLoaded);break;case this._LoadingState.complete:this._setViewState(this._LoadingState.itemsLoaded),this._updateDeleteWrapperSize(!0)}this._writeProfilerMark("loadingStateChanged:"+t+",info"),this._loadingState=t;var i=e.document.createEvent("CustomEvent");i.initCustomEvent("loadingstatechanged",!0,!1,n),this._element.dispatchEvent(i)}},_createTemplates:function(){function t(t,n){var i=e.document.createElement("div");return i.className=t,n||i.setAttribute("aria-hidden",!0),i}this._itemBoxTemplate=t(E._itemBoxClass,!0)},_updateSelection:function(){var e=this._selection.getIndices(),t=this._selection.isEverything(),n={};if(!t)for(var i=0,r=e.length;r>i;i++){var o=e[i];n[o]=!0}this._view.items.each(function(e,i,r){if(r.itemBox){var o=t||!!n[e];x._ItemEventsHandler.renderSelection(r.itemBox,i,o,!0),r.container&&g[o?"addClass":"removeClass"](r.container,E._selectedClass)}})},_getViewportLength:function(){return this._getViewportSize()[this._horizontal()?"width":"height"]},_horizontal:function(){return this._horizontalLayout},_rtl:function(){return"boolean"!=typeof this._cachedRTL&&(this._cachedRTL="rtl"===g._getComputedStyle(this._element,null).direction),this._cachedRTL},_showProgressBar:function(e,t,n){var i=this._progressBar,r=i.style;if(!i.parentNode){this._fadingProgressBar=!1,this._progressIndicatorDelayTimer&&this._progressIndicatorDelayTimer.cancel();var o=this;this._progressIndicatorDelayTimer=h.timeout(E._LISTVIEW_PROGRESS_DELAY).then(function(){o._isZombie()||(e.appendChild(i),u.fadeIn(i),o._progressIndicatorDelayTimer=null)})}r[this._rtl()?"right":"left"]=t,r.top=n},_hideProgressBar:function(){this._progressIndicatorDelayTimer&&(this._progressIndicatorDelayTimer.cancel(),this._progressIndicatorDelayTimer=null);var e=this._progressBar;if(e.parentNode&&!this._fadingProgressBar){this._fadingProgressBar=!0;var t=this;u.fadeOut(e).then(function(){e.parentNode&&e.parentNode.removeChild(e),t._fadingProgressBar=!1})}},_getPanAxis:function(){return this._horizontal()?"horizontal":"vertical"},_configureForZoom:function(e,t,r){if(n.validation&&(!this._view.realizePage||"number"!=typeof this._view.begin))throw new i("WinJS.UI.ListView.NotCompatibleWithSemanticZoom",V.notCompatibleWithSemanticZoom);this._isZoomedOut=e,this._disableEntranceAnimation=!t,this._isCurrentZoomView=t,this._triggerZoom=r},_setCurrentItem:function(e,t){this._rtl()&&(e=this._viewportWidth-e),this._horizontal()?e+=this.scrollPosition:t+=this.scrollPosition;
var n=this._view.hitTest(e,t),i={type:n.type?n.type:w.ObjectType.item,index:n.index};i.index>=0&&(this._hasKeyboardFocus?this._changeFocus(i,!0,!1,!0):this._changeFocusPassively(i))},_getCurrentItem:function(){var e=this._selection._getFocused();e.type===w.ObjectType.groupHeader?e={type:w.ObjectType.item,index:this._groups.group(e.index).startIndex}:e.type!==w.ObjectType.item&&(e={type:w.ObjectType.item,index:e.type===w.ObjectType.header?0:this._cachedCount}),"number"!=typeof e.index&&(this._setCurrentItem(.5*this._viewportWidth,.5*this._viewportHeight),e=this._selection._getFocused());var t=this,n=this._getItemOffsetPosition(e.index).then(function(e){var n=t._canvasStart;return e[t._startProperty]+=n,e});return h.join({item:this._dataSource.itemFromIndex(e.index),position:n})},_animateItemsForPhoneZoom:function(){function e(e,t,n){return function(i){return(t[i]-e)*n}}function t(){for(var e=0,t=n.length;t>e;e++)n[e].style[H.scriptName]=""}for(var n=[],i=[],r=[],o=Number.MAX_VALUE,s=this,a=this._view.firstIndexDisplayed,l=Math.min(this._cachedCount,this._view.lastIndexDisplayed+1);l>a;a++)r.push(this._view.waitForEntityPosition({type:w.ObjectType.item,index:a}).then(function(){n.push(s._view.items.containerAt(a));var e=0;if(s.layout._getItemPosition){var t=s.layout._getItemPosition(a);t.row&&(e=t.row)}i.push(e),o=Math.min(e,o)}));return h.join(r).then(function(){return(0===n.length?h.wrap():c.executeTransition(n,{property:H.cssName,delay:e(o,i,30),duration:100,timing:"ease-in-out",from:s._isCurrentZoomView?"rotateX(0deg)":"rotateX(-90deg)",to:s._isCurrentZoomView?"rotateX(90deg)":"rotateX(0deg)"})).then(t,t)}).then(t,t)},_beginZoom:function(){this._zooming=!0;var e=null;if(n.isPhone){if(this._isZoomedOut)if(this._zoomAnimationPromise&&this._zoomAnimationPromise.cancel(),this._isCurrentZoomView){var t=this,i=function(){t._zoomAnimationPromise=null};this._zoomAnimationPromise=e=this._animateItemsForPhoneZoom().then(i,i)}else this._zoomAnimationPromise=new m,e=this._zoomAnimationPromise.promise}else{var r=this._horizontal(),o=-this.scrollPosition;g.addClass(this._viewport,r?E._zoomingXClass:E._zoomingYClass),this._canvasStart=o,g.addClass(this._viewport,r?E._zoomingYClass:E._zoomingXClass)}return e},_positionItem:function(e,t){function r(e){return o._getItemOffsetPosition(e).then(function(i){var r,s=o._horizontal(),a=o._viewport[s?"scrollWidth":"scrollHeight"],l=s?o._viewportWidth:o._viewportHeight,u=s?"headerContainerWidth":"headerContainerHeight",c=o.layout._sizes,d=0;c&&c[u]&&(d=c[u]);var h=n.isPhone?d:t[o._startProperty],p=l-(s?i.width:i.height);h=Math.max(0,Math.min(p,h)),r=i[o._startProperty]-h;var m=Math.max(0,Math.min(a-l,r)),f=m-r;r=m;var _={type:w.ObjectType.item,index:e};if(o._hasKeyboardFocus?o._changeFocus(_,!0):o._changeFocusPassively(_),o._raiseViewLoading(!0),n.isPhone)o._viewportScrollPosition=r;else{var g=-r;o._canvasStart=g}if(o._view.realizePage(r,!0),n.isPhone&&o._isZoomedOut){var v=function(){o._zoomAnimationPromise&&o._zoomAnimationPromise.complete&&o._zoomAnimationPromise.complete(),o._zoomAnimationPromise=null};o._animateItemsForPhoneZoom().then(v,v)}return s?{x:f,y:0}:{x:0,y:f}})}var o=this,s=0;if(e&&(s=this._isZoomedOut?e.groupIndexHint:e.firstItemIndexHint),"number"==typeof s)return r(s);var a,l=this._isZoomedOut?e.groupKey:e.firstItemKey;if("string"==typeof l&&this._dataSource.itemFromKey)a=this._dataSource.itemFromKey(l,this._isZoomedOut?{groupMemberKey:e.key,groupMemberIndex:e.index}:null);else{var u=this._isZoomedOut?e.groupDescription:e.firstItemDescription;if(n.validation&&void 0===u)throw new i("WinJS.UI.ListView.InvalidItem",V.listViewInvalidItem);a=this._dataSource.itemFromDescription(u)}return a.then(function(e){return r(e.index)})},_endZoom:function(e){if(!this._isZombie()){if(!n.isPhone){var t=this._canvasStart;g.removeClass(this._viewport,E._zoomingYClass),g.removeClass(this._viewport,E._zoomingXClass),this._canvasStart=0,this._viewportScrollPosition=-t}this._disableEntranceAnimation=!e,this._isCurrentZoomView=e,this._zooming=!1,this._view.realizePage(this.scrollPosition,!1)}},_getItemOffsetPosition:function(e){var t=this;return this._getItemOffset({type:w.ObjectType.item,index:e}).then(function(e){return t._ensureFirstColumnRange(w.ObjectType.item).then(function(){return e=t._correctRangeInFirstColumn(e,w.ObjectType.item),e=t._convertFromCanvasCoordinates(e),t._horizontal()?(e.left=e.begin,e.width=e.end-e.begin,e.height=e.totalHeight):(e.top=e.begin,e.height=e.end-e.begin,e.width=e.totalWidth),e})})},_groupRemoved:function(e){this._groupFocusCache.deleteGroup(e)},_updateFocusCache:function(e){this._updateFocusCacheItemRequest&&this._updateFocusCacheItemRequest.cancel();var t=this;this._updateFocusCacheItemRequest=this._view.items.requestItem(e).then(function(){t._updateFocusCacheItemRequest=null;var n=t._view.items.itemDataAt(e),i=t._groups.groupFromItem(e),r=t._groups.group(i).key;n.itemsManagerRecord.item&&t._groupFocusCache.updateCache(r,n.itemsManagerRecord.item.key,e)})},_changeFocus:function(e,t,n,i,r){if(!this._isZombie()){var o;if(e.type===w.ObjectType.item)o=this._view.items.itemAt(e.index),!t&&o&&g.hasClass(o,E._nonSelectableClass)&&(t=!0),this._updateFocusCache(e.index);else if(e.type===w.ObjectType.groupHeader){this._lastFocusedElementInGroupTrack=e;var s=this._groups.group(e.index);o=s&&s.header}else this._lastFocusedElementInGroupTrack=e,o=e.type===w.ObjectType.footer?this._footer:this._header;this._unsetFocusOnItem(!!o),this._hasKeyboardFocus=!0,this._selection._setFocused(e,r),i||this.ensureVisible(e),!t&&this._selectFocused(n)&&this._selection.set(e.index),this._setFocusOnItem(e)}},_changeFocusPassively:function(e){var t;switch(e.type){case w.ObjectType.item:t=this._view.items.itemAt(e.index),this._updateFocusCache(e.index);break;case w.ObjectType.groupHeader:this._lastFocusedElementInGroupTrack=e;var n=this._groups.group(e.index);t=n&&n.header;break;case w.ObjectType.header:this._lastFocusedElementInGroupTrack=e,t=this._header;break;case w.ObjectType.footer:this._lastFocusedElementInGroupTrack=e,t=this._footer}this._unsetFocusOnItem(!!t),this._selection._setFocused(e),this._setFocusOnItem(e)},_drawFocusRectangle:function(t){if(t!==this._header&&t!==this._footer)if(g.hasClass(t,E._headerClass))g.addClass(t,E._itemFocusClass);else{var n=this._view.items.itemBoxFrom(t);if(n.querySelector("."+E._itemFocusOutlineClass))return;g.addClass(n,E._itemFocusClass);var i=e.document.createElement("div");i.className=E._itemFocusOutlineClass,n.appendChild(i)}},_clearFocusRectangle:function(e){if(e&&!this._isZombie()&&e!==this._header&&e!==this._footer){var t=this._view.items.itemBoxFrom(e);if(t){g.removeClass(t,E._itemFocusClass);var n=t.querySelector("."+E._itemFocusOutlineClass);n&&n.parentNode.removeChild(n)}else{var i=this._groups.headerFrom(e);i&&g.removeClass(i,E._itemFocusClass)}}},_defaultInvoke:function(e){(this._isZoomedOut||n.isPhone&&this._triggerZoom&&e.type===w.ObjectType.groupHeader)&&(this._changeFocusPassively(e),this._triggerZoom())},_selectionAllowed:function(e){var t=void 0!==e?this.elementFromIndex(e):null,n=!(t&&g.hasClass(t,E._nonSelectableClass));return n&&this._selectionMode!==w.SelectionMode.none},_multiSelection:function(){return this._selectionMode===w.SelectionMode.multi},_isInSelectionMode:function(){return this.tapBehavior===w.TapBehavior.toggleSelect&&this.selectionMode===w.SelectionMode.multi},_selectOnTap:function(){return this._tap===w.TapBehavior.toggleSelect||this._tap===w.TapBehavior.directSelect},_selectFocused:function(e){return this._tap===w.TapBehavior.directSelect&&this._selectionMode===w.SelectionMode.multi&&!e},_dispose:function(){if(!this._disposed){this._disposed=!0;var e=function(e){e&&(e.textContent="")};g._resizeNotifier.unsubscribe(this._element,this._onElementResizeBound),this._elementResizeInstrument.dispose(),this._batchingViewUpdates&&this._batchingViewUpdates.cancel(),this._view&&this._view._dispose&&this._view._dispose(),this._mode&&this._mode._dispose&&this._mode._dispose(),this._groups&&this._groups._dispose&&this._groups._dispose(),this._selection&&this._selection._dispose&&this._selection._dispose(),this._layout&&this._layout.uninitialize&&this._layout.uninitialize(),this._itemsCountPromise&&this._itemsCountPromise.cancel(),this._versionManager&&this._versionManager._dispose(),this._clearInsertedItems(),this._itemsManager&&this._itemsManager.release(),this._zoomAnimationPromise&&this._zoomAnimationPromise.cancel(),e(this._viewport),e(this._canvas),e(this._canvasProxy),this._versionManager=null,this._view=null,this._mode=null,this._element=null,this._viewport=null,this._itemsManager=null,this._canvas=null,this._canvasProxy=null,this._itemsCountPromise=null,this._scrollToFunctor=null;var t=U.indexOf(this);t>=0&&U.splice(t,1)}},_isZombie:function(){return this._disposed||!(this.element.firstElementChild&&e.document.body.contains(this.element))},_ifZombieDispose:function(){var e=this._isZombie();return e&&!this._disposed&&N(this),e},_animationsDisabled:function(){return 0===this._viewportWidth||0===this._viewportHeight?!0:!c.isAnimationEnabled()},_fadeOutViewport:function(){var e=this;return new h(function(t){if(e._animationsDisabled())return void t();if(!e._fadingViewportOut){e._waitingEntranceAnimationPromise&&(e._waitingEntranceAnimationPromise.cancel(),e._waitingEntranceAnimationPromise=null);var n=e._fireAnimationEvent(J.contentTransition);e._firedAnimationEvent=!0,n.prevented?(e._disableEntranceAnimation=!0,e._viewport.style.opacity=1,t()):(e._fadingViewportOut=!0,e._viewport.style.overflow="hidden",u.fadeOut(e._viewport).then(function(){e._isZombie()||(e._fadingViewportOut=!1,e._viewport.style.opacity=1,t())}))}})},_animateListEntrance:function(e){function t(){r._canvas.style.opacity=1,r._headerContainer.style.opacity=1,r._footerContainer.style.opacity=1,r._viewport.style.overflow="",r._raiseHeaderFooterVisibilityEvent()}var i={prevented:!1,animationPromise:h.wrap()},r=this;return this._raiseHeaderFooterVisibilityEvent(),this._disableEntranceAnimation||this._animationsDisabled()?(t(),this._waitingEntranceAnimationPromise&&(this._waitingEntranceAnimationPromise.cancel(),this._waitingEntranceAnimationPromise=null),h.wrap()):(this._firedAnimationEvent?this._firedAnimationEvent=!1:i=this._fireAnimationEvent(J.entrance),i.prevented||n.isPhone?(t(),h.wrap()):(this._waitingEntranceAnimationPromise&&this._waitingEntranceAnimationPromise.cancel(),this._canvas.style.opacity=0,this._viewport.style.overflow="hidden",this._headerContainer.style.opacity=1,this._footerContainer.style.opacity=1,this._waitingEntranceAnimationPromise=i.animationPromise.then(function(){return r._isZombie()?void 0:(r._canvas.style.opacity=1,u.enterContent(r._viewport).then(function(){r._isZombie()||(r._waitingEntranceAnimationPromise=null,r._viewport.style.overflow="")}))}),this._waitingEntranceAnimationPromise))},_fireAnimationEvent:function(t){var n=e.document.createEvent("CustomEvent"),i=h.wrap();n.initCustomEvent("contentanimating",!0,!0,{type:t}),t===J.entrance&&(n.detail.setPromise=function(e){i=e});var r=!this._element.dispatchEvent(n);return{prevented:r,animationPromise:i}},_createAriaMarkers:function(){this._viewport.getAttribute("aria-label")||this._viewport.setAttribute("aria-label",V.listViewViewportAriaLabel),this._ariaStartMarker||(this._ariaStartMarker=e.document.createElement("div"),this._ariaStartMarker.id=j(this._ariaStartMarker),this._viewport.insertBefore(this._ariaStartMarker,this._viewport.firstElementChild)),this._ariaEndMarker||(this._ariaEndMarker=e.document.createElement("div"),this._ariaEndMarker.id=j(this._ariaEndMarker),this._viewport.appendChild(this._ariaEndMarker))},_updateItemsAriaRoles:function(){var e,t,n=this,i=this._element.getAttribute("role");this._currentMode().staticMode()?(e="list",t="listitem"):(e="listbox",t="option"),(i!==e||this._itemRole!==t)&&(this._element.setAttribute("role",e),this._itemRole=t,this._view.items.each(function(e,t){t.setAttribute("role",n._itemRole)}))},_updateGroupHeadersAriaRoles:function(){var e=this.groupHeaderTapBehavior===w.GroupHeaderTapBehavior.none?"separator":"link";if(this._headerRole!==e){this._headerRole=e;for(var t=0,n=this._groups.length();n>t;t++){var i=this._groups.group(t).header;i&&i.setAttribute("role",this._headerRole)}}},_setAriaSelected:function(e,t){var n="true"===e.getAttribute("aria-selected");t!==n&&e.setAttribute("aria-selected",t)},_setupAriaSelectionObserver:function(e){e._mutationObserver||(this._mutationObserver.observe(e,{attributes:!0,attributeFilter:["aria-selected"]}),e._mutationObserver=!0)},_itemPropertyChange:function(e){function t(e){e.forEach(function(e){e.item.setAttribute("aria-selected",!e.selected)})}if(!this._isZombie()){for(var n=this,i=n._selectionMode===w.SelectionMode.single,r=[],o=[],s=0,a=e.length;a>s;s++){var l=e[s].target,u=n._view.items.itemBoxFrom(l),c="true"===l.getAttribute("aria-selected");if(u&&c!==g._isSelectionRendered(u)){var d=n._view.items.index(u),h={index:d,item:l,selected:c};(n._selectionAllowed(d)?r:o).push(h)}}if(r.length>0){var p=new m;n.selection._synchronize(p).then(function(){var e=n.selection._cloneSelection();return r.forEach(function(t){t.selected?e[i?"set":"add"](t.index):e.remove(t.index)}),n.selection._set(e)}).then(function(e){n._isZombie()||e||t(r),p.complete()})}t(o)}},_groupsEnabled:function(){return!!this._groups.groupDataSource},_getItemPosition:function(e,t){var n=this;return this._view.waitForEntityPosition(e).then(function(){var i,r=n._zooming&&0!==n._canvasStart;switch(e.type){case w.ObjectType.item:i=n._view.getContainer(e.index);break;case w.ObjectType.groupHeader:i=n._view._getHeaderContainer(e.index);break;case w.ObjectType.header:r=!0,i=n._headerContainer;break;case w.ObjectType.footer:r=!0,i=n._footerContainer}if(i){n._writeProfilerMark("WinJS.UI.ListView:getItemPosition,info");var o,s;n._view._expandedRange?(o=n._view._expandedRange.first.index,s=n._view._expandedRange.last.index):t=!1,e.type===w.ObjectType.item?(t=!!t,t&=n._view._ensureContainerInDOM(e.index)):t=!1;var a=n._getItemMargins(e.type),l={left:n._rtl()?F(i)-a.right:i.offsetLeft-a.left,top:i.offsetTop-a.top,totalWidth:g.getTotalWidth(i),totalHeight:g.getTotalHeight(i),contentWidth:g.getContentWidth(i),contentHeight:g.getContentHeight(i)};return t&&n._view._forceItemsBlocksInDOM(o,s+1),r?l:n._convertToCanvasCoordinates(l)}return h.cancel})},_getItemOffset:function(e,t){var n=this;return this._getItemPosition(e,t).then(function(t){var i=n._getItemMargins(e.type);if(n._horizontal()){var r=n._rtl();t.begin=t.left-i[r?"left":"right"],t.end=t.left+t.totalWidth+i[r?"right":"left"]}else t.begin=t.top-i.bottom,t.end=t.top+t.totalHeight+i.top;return t})},_getItemMargins:function(t){t=t||w.ObjectType.item;var n=this,i=function(t){var i,r=n._canvas.querySelector("."+t);r||(r=e.document.createElement("div"),g.addClass(r,t),n._viewport.appendChild(r),i=!0);var o=D._getMargins(r);return i&&n._viewport.removeChild(r),o};return t===w.ObjectType.item?this._itemMargins?this._itemMargins:this._itemMargins=i(E._containerClass):t===w.ObjectType.groupHeader?this._headerMargins?this._headerMargins:this._headerMargins=i(E._headerContainerClass):(this._headerFooterMargins||(this._headerFooterMargins={headerMargins:i(E._listHeaderContainerClass),footerMargins:i(E._listFooterContainerClass)}),this._headerFooterMargins[t===w.ObjectType.header?"headerMargins":"footerMargins"])},_fireAccessibilityAnnotationCompleteEvent:function(t,n,i,r){var o={firstIndex:t,lastIndex:n,firstHeaderIndex:+i||-1,lastHeaderIndex:+r||-1},s=e.document.createEvent("CustomEvent");s.initCustomEvent("accessibilityannotationcomplete",!0,!1,o),this._element.dispatchEvent(s)},_ensureFirstColumnRange:function(e){if(e===w.ObjectType.header||e===w.ObjectType.footer)return h.wrap();var t=e===w.ObjectType.item?"_firstItemRange":"_firstHeaderRange";if(this[t])return h.wrap();var n=this;return this._getItemOffset({type:e,index:0},!0).then(function(e){n[t]=e})},_correctRangeInFirstColumn:function(e,t){if(t===w.ObjectType.header||t===w.ObjectType.footer)return e;var n=t===w.ObjectType.groupHeader?this._firstHeaderRange:this._firstItemRange;return n.begin===e.begin&&(this._horizontal()?e.begin=-this._getCanvasMargins()[this._rtl()?"right":"left"]:e.begin=-this._getCanvasMargins().top),e},_updateContainers:function(t,n,i,r){function o(){var t=e.document.createElement("div");return t.className=E._containerClass,t}function s(t,n,i){n+i>h&&(i=h-n);var r,o=t.itemsContainer,s=o.itemsBlocks,a=p._view._blockSize,l=s.length?s[s.length-1]:null,u=s.length?(s.length-1)*a+l.items.length:0,c=i-u;if(c>0){var d,m=c;if(l&&l.items.length<a){var f=Math.min(m,a-l.items.length);d=l.items.length;var _=A._stripedContainers(f,u);b.insertAdjacentHTMLUnsafe(l.element,"beforeend",_),r=l.element.children;for(var g=0;f>g;g++)l.items.push(r[d+g]);m-=f}u=s.length*a;var v=Math.floor(m/a),y="",C=u,S=u+a;if(v>0){var E=["<div class='win-itemsblock'>"+A._stripedContainers(a,C)+"</div>","<div class='win-itemsblock'>"+A._stripedContainers(a,S)+"</div>"];y=A._repeat(E,v),u+=v*a}var x=m%a;x>0&&(y+="<div class='win-itemsblock'>"+A._stripedContainers(x,u)+"</div>",u+=x,v++);var P=e.document.createElement("div");b.setInnerHTMLUnsafe(P,y);for(var r=P.children,g=0;v>g;g++){var k=r[g],T={element:k,items:A._nodeListToArray(k.children)};s.push(T)}}else if(0>c)for(var M=c;0>M;M++){var O=l.items.pop();!p._view._requireFocusRestore&&O.contains(e.document.activeElement)&&(p._view._requireFocusRestore=e.document.activeElement,p._unsetFocusOnItem()),l.element.removeChild(O),I.push(O),l.items.length||(o.element===l.element.parentNode&&o.element.removeChild(l.element),s.pop(),l=s[s.length-1])}for(var g=0,D=s.length;D>g;g++)for(var k=s[g],M=0;M<k.items.length;M++)w.push(k.items[M])}function a(e,t,n){for(var i=r.filter(function(e){return-1===e.oldIndex&&e.newIndex>=t&&e.newIndex<t+n}).sort(function(e,t){return e.newIndex-t.newIndex}),s=e.itemsContainer,a=0,l=i.length;l>a;a++){var u=i[a],c=u.newIndex-t,d=o(),h=c<s.items.length?s.items[c]:null;s.items.splice(c,0,d),s.element.insertBefore(d,h)}}function l(e,t,n){t+n>h&&(n=h-t);var i=e.itemsContainer,r=n-i.items.length;if(r>0){var o=i.element.children,s=o.length;b.insertAdjacentHTMLUnsafe(i.element,"beforeend",A._repeat("<div class='win-container win-backdrop'></div>",r));for(var a=0;r>a;a++){var l=o[s+a];i.items.push(l)}}for(var a=r;0>a;a++){var l=i.items.pop();i.element.removeChild(l),I.push(l)}for(var a=0,u=i.items.length;u>a;a++)w.push(i.items[a])}function u(e,t){var n=p._view._createHeaderContainer(B),i={header:n,itemsContainer:{element:p._view._createItemsContainer(n)}};return i.itemsContainer[p._view._blockSize?"itemsBlocks":"items"]=[],p._view._blockSize?s(i,t,e.size):l(i,t,e.size),i}function c(e,t,i,o){for(var s,a,l=i+o-1,u=0,c=r.length;c>u;u++){var d=r[u];d.newIndex>=i&&d.newIndex<=l&&-1!==d.oldIndex&&(s!==+s||d.newIndex<s)&&(s=d.newIndex,a=d.newIndex-d.oldIndex)}if(s===+s){var h=0;for(u=0,c=r.length;c>u;u++){var d=r[u];d.newIndex>=i&&d.newIndex<s&&-1===d.oldIndex&&h++}var m=0,f=s-a;for(u=0,c=r.length;c>u;u++){var d=r[u];d.oldIndex>=t&&d.oldIndex<f&&-1===d.newIndex&&m++}a+=m,a-=h,a-=i-t;var _=e.itemsContainer;if(a>0){var g=_.element.children;b.insertAdjacentHTMLUnsafe(_.element,"afterBegin",A._repeat("<div class='win-container win-backdrop'></div>",a));for(var v=0;a>v;v++){var y=g[v];_.items.splice(v,0,y)}}for(var v=a;0>v;v++){var y=_.items.shift();_.element.removeChild(y)}a&&p._affectedRange.add({start:i,end:i+o},n)}}function d(e){for(var t=0,n=0,i=p._view.tree.length;i>n;n++){var r=p._view.tree[n],o=r.itemsContainer.items.length,s=t+o-1;if(e>=t&&s>=e)return{group:n,item:e-t};t+=o}}var h,p=this,m=this._view.containers.length+i,f=n>m;if(f){for(var _=0,v=0;v<r.length;v++)-1===r[v].oldIndex&&_++;h=this._view.containers.length+_}else h=n;var y=[],C={},w=[],I=[],S=[],x=0;if(!p._view._blockSize)for(var v=0,P=this._view.tree.length;P>v;v++)S.push(x),x+=this._view.tree[v].itemsContainer.items.length;if(!p._view._blockSize)for(var k=r.filter(function(e){return-1===e.newIndex&&!e._removalHandled}).sort(function(e,t){return t.oldIndex-e.oldIndex}),v=0,P=k.length;P>v;v++){var T=k[v];T._removalHandled=!0;var M=T._itemBox;T._itemBox=null;var O=d(T.oldIndex),D=this._view.tree[O.group],L=D.itemsContainer.items[O.item];L.parentNode.removeChild(L),g.hasClass(M,E._selectedClass)&&g.addClass(L,E._selectedClass),D.itemsContainer.items.splice(O.item,1),T.element=L}this._view._modifiedGroups=[];var B=this._canvasProxy;x=0;for(var v=0,P=t.length;P>v&&(!this._groupsEnabled()||h>x);v++){var R=t[v],N=this._view.keyToGroupIndex[R.key],F=this._view.tree[N];if(F)p._view._blockSize?s(F,x,R.size):(c(F,S[N],x,R.size),a(F,x,R.size),l(F,x,R.size)),y.push(F),C[R.key]=y.length-1,delete this._view.keyToGroupIndex[R.key],B=F.itemsContainer.element,this._view._modifiedGroups.push({oldIndex:N,newIndex:y.length-1,element:F.header});else{var z=u(R,x);y.push(z),C[R.key]=y.length-1,this._view._modifiedGroups.push({oldIndex:-1,newIndex:y.length-1,element:z.header}),B=z.itemsContainer.element}x+=R.size}for(var H=[],W=[],U=this._view.keyToGroupIndex?Object.keys(this._view.keyToGroupIndex):[],v=0,P=U.length;P>v;v++){var O=this._view.keyToGroupIndex[U[v]],j=this._view.tree[O];if(W.push(j.header),H.push(j.itemsContainer.element),this._view._blockSize)for(var V=0;V<j.itemsContainer.itemsBlocks.length;V++)for(var q=j.itemsContainer.itemsBlocks[V],J=0;J<q.items.length;J++)I.push(q.items[J]);else for(var J=0;J<j.itemsContainer.items.length;J++)I.push(j.itemsContainer.items[J]);this._view._modifiedGroups.push({oldIndex:O,newIndex:-1,element:j.header})}for(var v=0,P=r.length;P>v;v++)if(-1===r[v].newIndex&&!r[v]._removalHandled){r[v]._removalHandled=!0;var M=r[v]._itemBox;r[v]._itemBox=null;var L;I.length?(L=I.pop(),g.empty(L)):L=o(),g.hasClass(M,E._selectedClass)&&g.addClass(L,E._selectedClass),r._containerStripe===E._containerEvenClass?(g.addClass(L,E._containerEvenClass),g.removeClass(L,E._containerOddClass)):(g.addClass(L,E._containerOddClass),g.removeClass(L,E._containerEvenClass)),L.appendChild(M),r[v].element=L}return this._view.tree=y,this._view.keyToGroupIndex=C,this._view.containers=w,{removedHeaders:W,removedItemsContainers:H}},_writeProfilerMark:function(e){var t="WinJS.UI.ListView:"+this._id+":"+e;a(t),o.log&&o.log(t,null,"listviewprofiler")}},{triggerDispose:function(){R()}});return t.Class.mix(v,r.createEventProperties("iteminvoked","groupheaderinvoked","selectionchanging","selectionchanged","loadingstatechanged","keyboardnavigating","contentanimating","itemdragstart","itemdragenter","itemdragend","itemdragbetween","itemdragleave","itemdragchanged","itemdragdrop","headervisibilitychanged","footervisibilitychanged","accessibilityannotationcomplete")),t.Class.mix(v,f.DOMEventMixin),v})})}),i("WinJS/Controls/FlipView/_Constants",[],function(){"use strict";var e={};return e.datasourceCountChangedEvent="datasourcecountchanged",e.pageVisibilityChangedEvent="pagevisibilitychanged",e.pageSelectedEvent="pageselected",e.pageCompletedEvent="pagecompleted",e}),i("WinJS/Controls/FlipView/_PageManager",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Log","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations","../../Promise","../../_Signal","../../Scheduler","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_TabContainer","./_Constants"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_FlipPageManager:n.Namespace._lazy(function(){function e(e){var t=e.winControl;return t&&t._isFlipView?!0:!1}function s(e){e.forEach(function(e){var t=e.target;t.winControl&&t.tabIndex>=0&&(t.winControl._pageManager._updateTabIndex(t.tabIndex),t.tabIndex=-1);var n=t.winControl;if(n&&n._isFlipView){var i=!1;"dir"===e.attributeName?i=!0:"style"===e.attributeName&&(i=n._cachedStyleDir!==t.style.direction),i&&(n._cachedStyleDir=t.style.direction,n._pageManager._rtl="rtl"===p._getComputedStyle(n._pageManager._flipperDiv,null).direction,n._pageManager.resized())}})}var _=p._uniqueID,g=i._browserStyleEquivalents,v=50,y=250,b={get badCurrentPage(){return"Invalid argument: currentPage must be a number greater than or equal to zero and be within the bounds of the datasource"}},C=n.Class.define(function(e,t,n,r,o,a,l){this._visibleElements=[],this._flipperDiv=e,this._panningDiv=t,this._panningDivContainer=n,this._buttonVisibilityHandler=l,this._currentPage=null,this._rtl="rtl"===p._getComputedStyle(this._flipperDiv,null).direction,this._itemsManager=r,this._itemSpacing=o,this._tabIndex=p.getTabIndex(e),this._tabIndex<0&&(this._tabIndex=0),t.tabIndex=-1,e.tabIndex=-1,this._tabManager=new m.TabContainer(this._panningDivContainer),this._tabManager.tabIndex=this._tabIndex,this._lastSelectedPage=null,this._lastSelectedElement=null,this._bufferSize=C.flipPageBufferCount,this._cachedSize=-1,this._environmentSupportsTouch=a;var u=this;this._panningDiv.addEventListener("keydown",function(e){u._blockTabs&&e.keyCode===p.Key.tab&&(e.stopImmediatePropagation(),e.preventDefault())},!0),p._addEventListener(this._flipperDiv,"focusin",function(e){e.target===u._flipperDiv&&u._currentPage.element&&p._setActive(u._currentPage.element)},!1),new p._MutationObserver(s).observe(this._flipperDiv,{attributes:!0,attributeFilter:["dir","style","tabindex"]}),this._cachedStyleDir=this._flipperDiv.style.direction,this._handleManipulationStateChangedBound=this._handleManipulationStateChanged.bind(this),this._environmentSupportsTouch&&this._panningDivContainer.addEventListener(i._browserEventEquivalents.manipulationStateChanged,this._handleManipulationStateChangedBound,!0)},{initialize:function(e,n){var i=null;if(this._panningDivContainerOffsetWidth=this._panningDivContainer.offsetWidth,this._panningDivContainerOffsetHeight=this._panningDivContainer.offsetHeight,this._isHorizontal=n,!this._currentPage){this._bufferAriaStartMarker=t.document.createElement("div"),this._bufferAriaStartMarker.id=_(this._bufferAriaStartMarker),this._panningDiv.appendChild(this._bufferAriaStartMarker),this._currentPage=this._createFlipPage(null,this),i=this._currentPage,this._panningDiv.appendChild(i.pageRoot);for(var r=2*this._bufferSize,o=0;r>o;o++)i=this._createFlipPage(i,this),this._panningDiv.appendChild(i.pageRoot);this._bufferAriaEndMarker=t.document.createElement("div"),this._bufferAriaEndMarker.id=_(this._bufferAriaEndMarker),this._panningDiv.appendChild(this._bufferAriaEndMarker)}this._prevMarker=this._currentPage.prev.prev,this._itemsManager&&this.setNewItemsManager(this._itemsManager,e)},dispose:function(){var e=this._currentPage,t=e;do h._disposeElement(t.element),t=t.next;while(t!==e)},setOrientation:function(e){if(this._notificationsEndedSignal){var t=this;return void this._notificationsEndedSignal.promise.done(function(){t._notificationsEndedSignal=null,t.setOrientation(e)})}if(e!==this._isHorizontal){this._isOrientationChanging=!0,this._isHorizontal?p.setScrollPosition(this._panningDivContainer,{scrollLeft:this._getItemStart(this._currentPage),scrollTop:0}):p.setScrollPosition(this._panningDivContainer,{scrollLeft:0,scrollTop:this._getItemStart(this._currentPage)}),this._isHorizontal=e;var n=this._panningDivContainer.style;n.overflowX="hidden",n.overflowY="hidden";var t=this;i._requestAnimationFrame(function(){t._isOrientationChanging=!1,t._forEachPage(function(e){var t=e.pageRoot.style;t.left="0px",t.top="0px"}),n.overflowX=t._isHorizontal&&t._environmentSupportsTouch?"scroll":"hidden",n.overflowY=t._isHorizontal||!t._environmentSupportsTouch?"hidden":"scroll",t._ensureCentered()})}},resetState:function(e){if(this._writeProfilerMark("WinJS.UI.FlipView:resetState,info"),0!==e){var t=this.jumpToIndex(e,!0);if(!t&&i.validation)throw new r("WinJS.UI.FlipView.BadCurrentPage",b.badCurrentPage);return t}h.disposeSubTree(this._flipperDiv),this._resetBuffer(null,!0);var n=this,o=u.wrap(!0);return this._itemsManager&&(o=n._itemsManager._firstItem().then(function(e){return n._currentPage.setElement(e),n._fetchPreviousItems(!0).then(function(){return n._fetchNextItems()}).then(function(){n._setButtonStates()})})),o.then(function(){n._tabManager.childFocus=n._currentPage.element,n._ensureCentered(),n._itemSettledOn()})},setNewItemsManager:function(e,t){this._itemsManager=e;var n=this;return this.resetState(t).then(function(){0!==t&&(n._tabManager.childFocus=n._currentPage.element,n._ensureCentered(),n._itemSettledOn())})},currentIndex:function(){if(!this._itemsManager)return 0;var e=0,t=this._navigationAnimationRecord?this._navigationAnimationRecord.newCurrentElement:this._currentPage.element;return t&&(e=this._getElementIndex(t)),e},resetScrollPos:function(){this._ensureCentered()},scrollPosChanged:function(){if(this._hasFocus&&(this._hadFocus=!0),this._itemsManager&&this._currentPage.element&&!this._isOrientationChanging){var e=this._getViewportStart(),t=this._lastScrollPos>e?this._getTailOfBuffer():this._getHeadOfBuffer();if(e!==this._lastScrollPos){for(;this._currentPage.element&&this._getItemStart(this._currentPage)>e&&this._currentPage.prev.element;)this._currentPage=this._currentPage.prev,this._fetchOnePrevious(t.prev),t=t.prev;for(;this._currentPage.element&&this._itemEnd(this._currentPage)<=e&&this._currentPage.next.element;)this._currentPage=this._currentPage.next,this._fetchOneNext(t.next),t=t.next;this._setButtonStates(),this._checkElementVisibility(!1),this._blockTabs=!0,this._lastScrollPos=e,this._currentPage.element&&(this._tabManager.childFocus=this._currentPage.element),this._setListEnds(),!this._manipulationState&&this._viewportOnItemStart()&&(this._currentPage.element.setAttribute("aria-setsize",this._cachedSize),this._currentPage.element.setAttribute("aria-posinset",this.currentIndex()+1),this._timeoutPageSelection())}}},itemRetrieved:function(e,t){var n=this;if(this._forEachPage(function(i){return i.element===t?(i===n._currentPage||i===n._currentPage.next?n._changeFlipPage(i,t,e):i.setElement(e,!0),!0):void 0}),this._navigationAnimationRecord&&this._navigationAnimationRecord.elementContainers)for(var i=this._navigationAnimationRecord.elementContainers,r=0,o=i.length;o>r;r++)i[r].element===t&&(n._changeFlipPage(i[r],t,e),i[r].element=e);this._checkElementVisibility(!1)},resized:function(){this._panningDivContainerOffsetWidth=this._panningDivContainer.offsetWidth,this._panningDivContainerOffsetHeight=this._panningDivContainer.offsetHeight;var e=this;this._forEachPage(function(t){t.pageRoot.style.width=e._panningDivContainerOffsetWidth+"px",t.pageRoot.style.height=e._panningDivContainerOffsetHeight+"px"}),this._ensureCentered(),this._writeProfilerMark("WinJS.UI.FlipView:resize,StopTM")},jumpToIndex:function(e,t){if(!t){if(!this._itemsManager||!this._currentPage.element||0>e)return u.wrap(!1);var n=this._getElementIndex(this._currentPage.element),i=Math.abs(e-n);if(0===i)return u.wrap(!1)}var r=u.wrap(!0),o=this;return r=r.then(function(){var n=o._itemsManager._itemPromiseAtIndex(e);return u.join({element:o._itemsManager._itemFromItemPromise(n),item:n}).then(function(e){var n=e.element;return o._resetBuffer(n,t),n?(o._currentPage.setElement(n),o._fetchNextItems().then(function(){return o._fetchPreviousItems(!0)}).then(function(){return!0})):!1})}),r=r.then(function(e){return o._setButtonStates(),e})},startAnimatedNavigation:function(e,t,n){if(this._writeProfilerMark("WinJS.UI.FlipView:startAnimatedNavigation,info"),this._currentPage.element){var i=this._currentPage,r=e?this._currentPage.next:this._currentPage.prev;if(r.element){this._hasFocus&&p._setActive(this._panningDiv),this._navigationAnimationRecord={},this._navigationAnimationRecord.goForward=e,this._navigationAnimationRecord.cancelAnimationCallback=t,this._navigationAnimationRecord.completionCallback=n,this._navigationAnimationRecord.oldCurrentPage=i,this._navigationAnimationRecord.newCurrentPage=r;var o=i.element,s=r.element;this._navigationAnimationRecord.newCurrentElement=s,
i.setElement(null,!0),i.elementUniqueID=_(o),r.setElement(null,!0),r.elementUniqueID=_(s);var a=this._createDiscardablePage(o),l=this._createDiscardablePage(s);return a.pageRoot.itemIndex=this._getElementIndex(o),l.pageRoot.itemIndex=a.pageRoot.itemIndex+(e?1:-1),a.pageRoot.style.position="absolute",l.pageRoot.style.position="absolute",a.pageRoot.style.zIndex=1,l.pageRoot.style.zIndex=2,this._setItemStart(a,0),this._setItemStart(l,0),this._blockTabs=!0,this._visibleElements.push(s),this._announceElementVisible(s),this._navigationAnimationRecord.elementContainers=[a,l],{outgoing:a,incoming:l}}}return null},endAnimatedNavigation:function(e,t,n){if(this._writeProfilerMark("WinJS.UI.FlipView:endAnimatedNavigation,info"),this._navigationAnimationRecord&&this._navigationAnimationRecord.oldCurrentPage&&this._navigationAnimationRecord.newCurrentPage){var i=this._restoreAnimatedElement(this._navigationAnimationRecord.oldCurrentPage,t);this._restoreAnimatedElement(this._navigationAnimationRecord.newCurrentPage,n),i||this._setViewportStart(this._getItemStart(e?this._currentPage.next:this._currentPage.prev)),this._navigationAnimationRecord=null,this._itemSettledOn()}},startAnimatedJump:function(e,t,n){if(this._writeProfilerMark("WinJS.UI.FlipView:startAnimatedJump,info"),this._hasFocus&&(this._hadFocus=!0),this._currentPage.element){var i=this._currentPage.element,r=this._getElementIndex(i),o=this;return o.jumpToIndex(e).then(function(s){if(!s)return null;if(o._navigationAnimationRecord={},o._navigationAnimationRecord.cancelAnimationCallback=t,o._navigationAnimationRecord.completionCallback=n,o._navigationAnimationRecord.oldCurrentPage=null,o._forEachPage(function(e){return e.element===i?(o._navigationAnimationRecord.oldCurrentPage=e,!0):void 0}),o._navigationAnimationRecord.newCurrentPage=o._currentPage,o._navigationAnimationRecord.newCurrentPage===o._navigationAnimationRecord.oldCurrentPage)return null;var a=o._currentPage.element;o._navigationAnimationRecord.newCurrentElement=a,o._currentPage.setElement(null,!0),o._currentPage.elementUniqueID=_(a),o._navigationAnimationRecord.oldCurrentPage&&o._navigationAnimationRecord.oldCurrentPage.setElement(null,!0);var l=o._createDiscardablePage(i),u=o._createDiscardablePage(a);return l.pageRoot.itemIndex=r,u.pageRoot.itemIndex=e,l.pageRoot.style.position="absolute",u.pageRoot.style.position="absolute",l.pageRoot.style.zIndex=1,u.pageRoot.style.zIndex=2,o._setItemStart(l,0),o._setItemStart(u,o._itemSize(o._currentPage)),o._visibleElements.push(a),o._announceElementVisible(a),o._navigationAnimationRecord.elementContainers=[l,u],o._blockTabs=!0,{oldPage:l,newPage:u}})}return u.wrap(null)},simulateMouseWheelScroll:function(e){if(!this._environmentSupportsTouch&&!this._waitingForMouseScroll){var n;n="number"==typeof e.deltaY?(e.deltaX||e.deltaY)>0:e.wheelDelta<0;var i=n?this._currentPage.next:this._currentPage.prev;if(i.element){var r={contentX:0,contentY:0,viewportX:0,viewportY:0};r[this._isHorizontal?"contentX":"contentY"]=this._getItemStart(i),p._zoomTo(this._panningDivContainer,r),this._waitingForMouseScroll=!0,t.setTimeout(function(){this._waitingForMouseScroll=!1}.bind(this),p._zoomToDuration+100)}}},endAnimatedJump:function(e,t){this._writeProfilerMark("WinJS.UI.FlipView:endAnimatedJump,info"),this._navigationAnimationRecord.oldCurrentPage?this._navigationAnimationRecord.oldCurrentPage.setElement(e.element,!0):e.element.parentNode&&e.element.parentNode.removeChild(e.element),this._navigationAnimationRecord.newCurrentPage.setElement(t.element,!0),this._navigationAnimationRecord=null,this._ensureCentered(),this._itemSettledOn()},inserted:function(e,t,n,i){this._writeProfilerMark("WinJS.UI.FlipView:inserted,info");var r=this._prevMarker,o=!1,s=!1;if(i&&(this._createAnimationRecord(_(e),null),this._getAnimationRecord(e).inserted=!0),t){do{if(r===this._currentPage&&(o=!0),r.elementUniqueID===_(t)){s=!0;var a,l=r,u=e,c=_(e);if(o)for(;l.next!==this._prevMarker;)a=l.next.element,c=l.next.elementUniqueID,l.next.setElement(u,!0),!u&&c&&(l.next.elementUniqueID=c),u=a,l=l.next;else for(r.elementUniqueID===r.next.elementUniqueID&&r.elementUniqueID&&(l=r.next);l.next!==this._prevMarker;)a=l.element,c=l.elementUniqueID,l.setElement(u,!0),!u&&c&&(l.elementUniqueID=c),u=a,l=l.prev;if(u){var d=!1;this._forEachPage(function(e){return _(u)===e.elementUniqueID?(d=!0,!0):void 0}),d||this._releaseElementIfNotAnimated(u)}break}r=r.next}while(r!==this._prevMarker)}else if(n){for(;r.next!==this._prevMarker&&r.elementUniqueID!==_(n);)r===this._currentPage&&(o=!0),r=r.next;r.elementUniqueID===_(n)&&r!==this._prevMarker?(r.prev.setElement(e),s=!0):this._releaseElementIfNotAnimated(e)}else this._currentPage.setElement(e);this._getAnimationRecord(e).successfullyMoved=s,this._setButtonStates()},changed:function(e,t){this._writeProfilerMark("WinJS.UI.FlipView:changed,info");var n=this;if(this._forEachPage(function(i){if(i.elementUniqueID===_(t)){var r=n._animationRecords[i.elementUniqueID];return r.changed=!0,r.oldElement=t,r.newElement=e,i.element=e,i.elementUniqueID=_(e),n._animationRecords[_(e)]=r,!0}}),this._navigationAnimationRecord&&this._navigationAnimationRecord.elementContainers){for(var i=0,r=this._navigationAnimationRecord.elementContainers.length;r>i;i++){var o=this._navigationAnimationRecord.elementContainers[i];o&&o.elementUniqueID===_(t)&&(o.element=e,o.elementUniqueID=_(e))}var s=this._navigationAnimationRecord.newCurrentElement;s&&_(s)===_(t)&&(this._navigationAnimationRecord.newCurrentElement=e)}},moved:function(e,t,n){this._writeProfilerMark("WinJS.UI.FlipView:moved,info");var i=this._getAnimationRecord(e);i||(i=this._createAnimationRecord(_(e))),i.moved=!0,this.removed(e,!1,!1),t||n?this.inserted(e,t,n,!1):i.successfullyMoved=!1},removed:function(e,t,n){this._writeProfilerMark("WinJS.UI.FlipView:removed,info");var i=this,r=this._prevMarker,o=u.wrap();if(t){var s=!1;return this._forEachPage(function(t){(t.elementUniqueID===_(e)||s)&&(t.setElement(null,!0),s=!0)}),void this._setButtonStates()}if(n){var a=this._getAnimationRecord(e);a&&(a.removed=!0)}if(this._currentPage.elementUniqueID===_(e))this._currentPage.next.elementUniqueID?(this._shiftLeft(this._currentPage),this._ensureCentered()):this._currentPage.prev.elementUniqueID?this._shiftRight(this._currentPage):this._currentPage.setElement(null,!0);else if(r.elementUniqueID===_(e))r.next.element?o=this._itemsManager._previousItem(r.next.element).then(function(t){return t===e&&(t=i._itemsManager._previousItem(t)),t}).then(function(e){r.setElement(e,!0)}):r.setElement(null,!0);else if(r.prev.elementUniqueID===_(e))r.prev.prev&&r.prev.prev.element?o=this._itemsManager._nextItem(r.prev.prev.element).then(function(t){return t===e&&(t=i._itemsManager._nextItem(t)),t}).then(function(e){r.prev.setElement(e,!0)}):r.prev.setElement(null,!0);else{for(var l=this._currentPage.prev,c=!1;l!==r&&!c;)l.elementUniqueID===_(e)&&(this._shiftRight(l),c=!0),l=l.prev;for(l=this._currentPage.next;l!==r&&!c;)l.elementUniqueID===_(e)&&(this._shiftLeft(l),c=!0),l=l.next}return o.then(function(){i._setButtonStates()})},reload:function(){this._writeProfilerMark("WinJS.UI.FlipView:reload,info"),this.resetState(0)},getItemSpacing:function(){return this._itemSpacing},setItemSpacing:function(e){this._itemSpacing=e,this._ensureCentered()},notificationsStarted:function(){this._writeProfilerMark("WinJS.UI.FlipView:changeNotifications,StartTM"),this._logBuffer(),this._notificationsStarted=this._notificationsStarted||0,this._notificationsStarted++,this._notificationsEndedSignal=new c,this._temporaryKeys=[],this._animationRecords={};var e=this;this._forEachPage(function(t){e._createAnimationRecord(t.elementUniqueID,t)}),this._animationRecords.currentPage=this._currentPage.element,this._animationRecords.nextPage=this._currentPage.next.element},notificationsEnded:function(){var e=this;this._endNotificationsWork&&this._endNotificationsWork.cancel(),this._endNotificationsWork=this._ensureBufferConsistency().then(function(){function t(t){var n=null;return e._forEachPage(function(e){return e.element===t?(n=e,!0):void 0}),n}function n(t,n){e._writeProfilerMark("WinJS.UI.FlipView:_animateOldViewportItemRemoved,info");var i=e._createDiscardablePage(n);e._setItemStart(i,t.originalLocation),o.push(e._deleteFlipPage(i))}function i(n,i){e._writeProfilerMark("WinJS.UI.FlipView:_animateOldViewportItemMoved,info");var r,s=n.originalLocation;if(n.successfullyMoved)r=t(i),s=n.newLocation;else{r=e._createDiscardablePage(i);var a=e._getElementIndex(i),l=e._currentPage.element?e._getElementIndex(e._currentPage.element):0;s+=l>a?-100*e._bufferSize:100*e._bufferSize}r&&(e._setItemStart(r,n.originalLocation),o.push(e._moveFlipPage(r,function(){e._setItemStart(r,s)})))}function r(){return 0===o.length&&o.push(u.wrap()),u.join(o)}var o=[];e._forEachPage(function(t){var n=e._getAnimationRecord(t.element);n&&(n.changed&&(n.oldElement.removedFromChange=!0,o.push(e._changeFlipPage(t,n.oldElement,n.newElement))),n.newLocation=t.location,e._setItemStart(t,n.originalLocation),n.inserted&&(t.elementRoot.style.opacity=0))});var s=e._animationRecords.currentPage,a=e._getAnimationRecord(s),l=e._animationRecords.nextPage,c=e._getAnimationRecord(l);a&&a.changed&&(s=a.newElement),c&&c.changed&&(l=c.newElement),(s!==e._currentPage.element||l!==e._currentPage.next.element)&&(a&&a.removed&&n(a,s),c&&c.removed&&n(c,l)),e._blockTabs=!0,r().then(function(){o=[],a&&a.moved&&i(a,s),c&&c.moved&&i(c,l);var t=e._getAnimationRecord(e._currentPage.element),n=e._getAnimationRecord(e._currentPage.next.element);e._forEachPage(function(i){var r=e._getAnimationRecord(i.element);r&&(r.inserted?r!==t&&r!==n&&(i.elementRoot.style.opacity=1):r.originalLocation!==r.newLocation&&(r!==a&&r!==c||r===a&&!a.moved||r===c&&!c.moved)&&o.push(e._moveFlipPage(i,function(){e._setItemStart(i,r.newLocation)})))}),r().then(function(){o=[],t&&t.inserted&&o.push(e._insertFlipPage(e._currentPage)),n&&n.inserted&&o.push(e._insertFlipPage(e._currentPage.next)),r().then(function(){e._checkElementVisibility(!1),e._itemSettledOn(),e._setListEnds(),e._notificationsStarted--,0===e._notificationsStarted&&e._notificationsEndedSignal.complete(),e._writeProfilerMark("WinJS.UI.FlipView:changeNotifications,StopTM"),e._logBuffer(),e._endNotificationsWork=null})})})})},disableTouchFeatures:function(){this._environmentSupportsTouch=!1;var e=this._panningDivContainer.style;this._panningDivContainer.removeEventListener(i._browserEventEquivalents.manipulationStateChanged,this._handleManipulationStateChangedBound,!0),e.overflowX="hidden",e.overflowY="hidden";var t=["scroll-snap-type","scroll-snap-points-x","scroll-snap-points-y","scroll-limit-x-min","scroll-limit-x-max","scroll-limit-y-min","scroll-limit-y-max"];t.forEach(function(t){var n=g[t];n&&(e[n.scriptName]="")})},_hasFocus:{get:function(){return this._flipperDiv.contains(t.document.activeElement)}},_timeoutPageSelection:function(){var e=this;this._lastTimeoutRequest&&this._lastTimeoutRequest.cancel(),this._lastTimeoutRequest=u.timeout(y).then(function(){e._itemSettledOn()})},_updateTabIndex:function(e){this._forEachPage(function(t){t.element&&(t.element.tabIndex=e)}),this._tabIndex=e,this._tabManager.tabIndex=e},_releaseElementIfNotAnimated:function(e){var t=this._getAnimationRecord(e);t&&(t.changed||t.inserted||t.moved||t.removed)||this._itemsManager.releaseItem(e)},_getAnimationRecord:function(e){return e?this._animationRecords[_(e)]:null},_createAnimationRecord:function(e,t){if(e){var n=this._animationRecords[e]={removed:!1,changed:!1,inserted:!1};return t&&(n.originalLocation=t.location),n}},_writeProfilerMark:function(e){a(e),this._flipperDiv.winControl.constructor._enabledDebug&&o.log&&o.log(e,null,"flipviewdebug")},_getElementIndex:function(e){var t=0;try{t=this._itemsManager.itemObject(e).index}catch(n){}return t},_resetBuffer:function(e,t){this._writeProfilerMark("WinJS.UI.FlipView:_resetBuffer,info");var n=this._currentPage,i=n;do i.element&&i.element===e||t?i.setElement(null,!0):i.setElement(null),i=i.next;while(i!==n)},_getHeadOfBuffer:function(){return this._prevMarker.prev},_getTailOfBuffer:function(){return this._prevMarker},_insertNewFlipPage:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_insertNewFlipPage,info");var t=this._createFlipPage(e,this);return this._panningDiv.appendChild(t.pageRoot),t},_fetchNextItems:function(){this._writeProfilerMark("WinJS.UI.FlipView:_fetchNextItems,info");for(var e=u.wrap(this._currentPage),t=this,n=0;n<this._bufferSize;n++)e=e.then(function(e){return e.next===t._prevMarker&&t._insertNewFlipPage(e),e.element?t._itemsManager._nextItem(e.element).then(function(t){return e.next.setElement(t),e.next}):(e.next.setElement(null),e.next)});return e},_fetchOneNext:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_fetchOneNext,info");var t=e.prev.element;if(this._prevMarker===e&&(this._prevMarker=this._prevMarker.next),!t)return void e.setElement(null);var n=this;return this._itemsManager._nextItem(t).then(function(t){e.setElement(t),n._movePageAhead(e.prev,e)})},_fetchPreviousItems:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_fetchPreviousItems,info");for(var t=this,n=u.wrap(this._currentPage),i=0;i<this._bufferSize;i++)n=n.then(function(e){return e.element?t._itemsManager._previousItem(e.element).then(function(t){return e.prev.setElement(t),e.prev}):(e.prev.setElement(null),e.prev)});return n.then(function(n){e&&(t._prevMarker=n)})},_fetchOnePrevious:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_fetchOnePrevious,info");var t=e.next.element;if(this._prevMarker===e.next&&(this._prevMarker=this._prevMarker.prev),!t)return e.setElement(null),u.wrap();var n=this;return this._itemsManager._previousItem(t).then(function(t){e.setElement(t),n._movePageBehind(e.next,e)})},_setButtonStates:function(){this._currentPage.prev.element?this._buttonVisibilityHandler.showPreviousButton():this._buttonVisibilityHandler.hidePreviousButton(),this._currentPage.next.element?this._buttonVisibilityHandler.showNextButton():this._buttonVisibilityHandler.hideNextButton()},_ensureCentered:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_ensureCentered,info"),this._setItemStart(this._currentPage,v*this._viewportSize());for(var t=this._currentPage;t!==this._prevMarker;)this._movePageBehind(t,t.prev),t=t.prev;for(t=this._currentPage;t.next!==this._prevMarker;)this._movePageAhead(t,t.next),t=t.next;var n=!1;this._lastScrollPos&&!e&&(this._setListEnds(),n=!0),this._lastScrollPos=this._getItemStart(this._currentPage),this._setViewportStart(this._lastScrollPos),this._checkElementVisibility(!0),this._setupSnapPoints(),n||this._setListEnds()},_ensureBufferConsistency:function(){var e=this,t=this._currentPage.element;if(!t)return u.wrap();var n=!1,i={},r={};this._forEachPage(function(e){if(e&&e.elementUniqueID){if(i[e.elementUniqueID])return n=!0,!0;if(i[e.elementUniqueID]=!0,e.location>0){if(r[e.location])return n=!0,!0;r[e.location]=!0}}});var o=Object.keys(this._animationRecords);return o.forEach(function(t){var i=e._animationRecords[t];i&&(i.changed||i.inserted||i.moved||i.removed)&&(n=!0)}),n?(this._resetBuffer(null,!0),this._currentPage.setElement(t),this._fetchNextItems().then(function(){return e._fetchPreviousItems(!0)}).then(function(){e._ensureCentered()})):u.wrap()},_shiftLeft:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_shiftLeft,info");for(var t=e,n=null;t!==this._prevMarker&&t.next!==this._prevMarker;)n=t.next.element,!n&&t.next.elementUniqueID&&(t.elementUniqueID=t.next.elementUniqueID),t.next.setElement(null,!0),t.setElement(n,!0),t=t.next;if(t!==this._prevMarker&&t.prev.element){var i=this;return this._itemsManager._nextItem(t.prev.element).then(function(e){t.setElement(e),i._createAnimationRecord(t.elementUniqueID,t)})}},_logBuffer:function(){if(this._flipperDiv.winControl.constructor._enabledDebug){o.log&&o.log(this._currentPage.next.next.next.elementUniqueID+"	@:"+this._currentPage.next.next.next.location+(this._currentPage.next.next.next.element?"	"+this._currentPage.next.next.next.element.textContent:""),null,"flipviewdebug"),o.log&&o.log(this._currentPage.next.next.next.next.elementUniqueID+"	@:"+this._currentPage.next.next.next.next.location+(this._currentPage.next.next.next.next.element?"	"+this._currentPage.next.next.next.next.element.textContent:""),null,"flipviewdebug"),o.log&&o.log("> "+this._currentPage.elementUniqueID+"	@:"+this._currentPage.location+(this._currentPage.element?"	"+this._currentPage.element.textContent:""),null,"flipviewdebug"),o.log&&o.log(this._currentPage.next.elementUniqueID+"	@:"+this._currentPage.next.location+(this._currentPage.next.element?"	"+this._currentPage.next.element.textContent:""),null,"flipviewdebug"),o.log&&o.log(this._currentPage.next.next.elementUniqueID+"	@:"+this._currentPage.next.next.location+(this._currentPage.next.next.element?"	"+this._currentPage.next.next.element.textContent:""),null,"flipviewdebug");var e=Object.keys(this._itemsManager._elementMap),t=[];this._forEachPage(function(e){e&&e.elementUniqueID&&t.push(e.elementUniqueID)}),o.log&&o.log("itemsmanager  = ["+e.join(" ")+"] flipview ["+t.join(" ")+"]",null,"flipviewdebug")}},_shiftRight:function(e){this._writeProfilerMark("WinJS.UI.FlipView:_shiftRight,info");for(var t=e,n=null;t!==this._prevMarker;)n=t.prev.element,!n&&t.prev.elementUniqueID&&(t.elementUniqueID=t.prev.elementUniqueID),t.prev.setElement(null,!0),t.setElement(n,!0),t=t.prev;if(t.next.element){var i=this;return this._itemsManager._previousItem(t.next.element).then(function(e){t.setElement(e),i._createAnimationRecord(t.elementUniqueID,t)})}},_checkElementVisibility:function(e){var t,n;if(e){var i=this._currentPage.element;for(t=0,n=this._visibleElements.length;n>t;t++)this._visibleElements[t]!==i&&this._announceElementInvisible(this._visibleElements[t]);this._visibleElements=[],i&&(this._visibleElements.push(i),this._announceElementVisible(i))}else{for(t=0,n=this._visibleElements.length;n>t;t++)(!this._visibleElements[t].parentNode||this._visibleElements[t].removedFromChange)&&this._announceElementInvisible(this._visibleElements[t]);this._visibleElements=[];var r=this;this._forEachPage(function(e){var t=e.element;t&&(r._itemInView(e)?(r._visibleElements.push(t),r._announceElementVisible(t)):r._announceElementInvisible(t))})}},_announceElementVisible:function(e){if(e&&!e.visible){e.visible=!0;var n=t.document.createEvent("CustomEvent");this._writeProfilerMark("WinJS.UI.FlipView:pageVisibilityChangedEvent(visible:true),info"),n.initCustomEvent(f.pageVisibilityChangedEvent,!0,!1,{source:this._flipperDiv,visible:!0}),e.dispatchEvent(n)}},_announceElementInvisible:function(e){if(e&&e.visible){e.visible=!1;var n=!1;e.parentNode||(n=!0,this._panningDivContainer.appendChild(e));var i=t.document.createEvent("CustomEvent");this._writeProfilerMark("WinJS.UI.FlipView:pageVisibilityChangedEvent(visible:false),info"),i.initCustomEvent(f.pageVisibilityChangedEvent,!0,!1,{source:this._flipperDiv,visible:!1}),e.dispatchEvent(i),n&&this._panningDivContainer.removeChild(e)}},_createDiscardablePage:function(e){var t=this._createPageContainer(),n={pageRoot:t.root,elementRoot:t.elementContainer,discardable:!0,element:e,elementUniqueID:_(e),discard:function(){n.pageRoot.parentNode&&n.pageRoot.parentNode.removeChild(n.pageRoot),n.element.parentNode&&n.element.parentNode.removeChild(n.element)}};return n.pageRoot.style.top="0px",n.elementRoot.appendChild(e),this._panningDiv.appendChild(n.pageRoot),n},_createPageContainer:function(){var e=this._panningDivContainerOffsetWidth,n=this._panningDivContainerOffsetHeight,i=t.document.createElement("div"),r=i.style,o=t.document.createElement("div");return o.className="win-item",r.position="absolute",r.overflow="hidden",r.width=e+"px",r.height=n+"px",i.appendChild(o),{root:i,elementContainer:o}},_createFlipPage:function(t,n){var i={};i.element=null,i.elementUniqueID=null,t?(i.prev=t,i.next=t.next,i.next.prev=i,t.next=i):(i.next=i,i.prev=i);var r=this._createPageContainer();return i.elementRoot=r.elementContainer,i.elementRoot.style.msOverflowStyle="auto",i.pageRoot=r.root,i.setElement=function(t,r){if(void 0===t&&(t=null),t===i.element)return void(t||(i.elementUniqueID=null));if(i.element&&(r||(n._itemsManager.releaseItem(i.element),h._disposeElement(i.element))),i.element=t,i.elementUniqueID=t?_(t):null,p.empty(i.elementRoot),i.element){if(i===n._currentPage&&(n._tabManager.childFocus=t),!e(i.element)){i.element.tabIndex=n._tabIndex,i.element.setAttribute("role","option"),i.element.setAttribute("aria-selected",!1),i.element.id||(i.element.id=_(i.element));var o=function(e,t,n){e.setAttribute(n,t.id)},s=!i.next.element||i===n._prevMarker.prev;s&&(o(i.element,n._bufferAriaEndMarker,"aria-flowto"),o(n._bufferAriaEndMarker,i.element,"x-ms-aria-flowfrom")),i!==n._prevMarker&&i.prev.element&&(o(i.prev.element,i.element,"aria-flowto"),o(i.element,i.prev.element,"x-ms-aria-flowfrom")),i.next!==n._prevMarker&&i.next.element&&(o(i.element,i.next.element,"aria-flowto"),o(i.next.element,i.element,"x-ms-aria-flowfrom")),i.prev.element||o(i.element,n._bufferAriaStartMarker,"x-ms-aria-flowfrom")}i.elementRoot.appendChild(i.element)}},i},_itemInView:function(e){return this._itemEnd(e)>this._getViewportStart()&&this._getItemStart(e)<this._viewportEnd()},_getViewportStart:function(){return this._panningDivContainer.parentNode?this._isHorizontal?p.getScrollPosition(this._panningDivContainer).scrollLeft:p.getScrollPosition(this._panningDivContainer).scrollTop:void 0},_setViewportStart:function(e){this._panningDivContainer.parentNode&&(this._isHorizontal?p.setScrollPosition(this._panningDivContainer,{scrollLeft:e}):p.setScrollPosition(this._panningDivContainer,{scrollTop:e}))},_viewportEnd:function(){var e=this._panningDivContainer;return this._isHorizontal?this._rtl?this._getViewportStart()+this._panningDivContainerOffsetWidth:p.getScrollPosition(e).scrollLeft+this._panningDivContainerOffsetWidth:e.scrollTop+this._panningDivContainerOffsetHeight},_viewportSize:function(){return this._isHorizontal?this._panningDivContainerOffsetWidth:this._panningDivContainerOffsetHeight},_getItemStart:function(e){return e.location},_setItemStart:function(e,t){void 0!==t&&(this._isHorizontal?e.pageRoot.style.left=(this._rtl?-t:t)+"px":e.pageRoot.style.top=t+"px",e.location=t)},_itemEnd:function(e){return(this._isHorizontal?e.location+this._panningDivContainerOffsetWidth:e.location+this._panningDivContainerOffsetHeight)+this._itemSpacing},_itemSize:function(){return this._isHorizontal?this._panningDivContainerOffsetWidth:this._panningDivContainerOffsetHeight},_movePageAhead:function(e,t){var n=this._itemSize(e)+this._itemSpacing;this._setItemStart(t,this._getItemStart(e)+n)},_movePageBehind:function(e,t){var n=this._itemSize(e)+this._itemSpacing;this._setItemStart(t,this._getItemStart(e)-n)},_setupSnapPoints:function(){if(this._environmentSupportsTouch){var e=this._panningDivContainer.style;e[g["scroll-snap-type"].scriptName]="mandatory";var t=this._viewportSize(),n=t+this._itemSpacing,i="scroll-snap-points",r=0,o=this._getItemStart(this._currentPage);r=o%(t+this._itemSpacing),e[g[this._isHorizontal?i+"-x":i+"-y"].scriptName]="snapInterval("+r+"px, "+n+"px)"}},_setListEnds:function(){if(this._environmentSupportsTouch&&this._currentPage.element){for(var e=this._panningDivContainer.style,t=0,n=0,i=this._getTailOfBuffer(),r=this._getHeadOfBuffer(),o=g["scroll-limit-"+(this._isHorizontal?"x-min":"y-min")].scriptName,s=g["scroll-limit-"+(this._isHorizontal?"x-max":"y-max")].scriptName;!r.element&&(r=r.prev,r!==this._prevMarker.prev););for(;!i.element&&(i=i.next,i!==this._prevMarker););n=this._getItemStart(r),t=this._getItemStart(i),e[o]=t+"px",e[s]=n+"px"}},_viewportOnItemStart:function(){return this._getItemStart(this._currentPage)===this._getViewportStart()},_restoreAnimatedElement:function(e,t){var n=!0;return e.elementUniqueID!==_(t.element)||e.element?this._forEachPage(function(e){e.elementUniqueID!==t.elementUniqueID||e.element||(e.setElement(t.element,!0),n=!1)}):(e.setElement(t.element,!0),n=!1),n},_itemSettledOn:function(){this._lastTimeoutRequest&&(this._lastTimeoutRequest.cancel(),this._lastTimeoutRequest=null);var n=this;i._setImmediate(function(){n._viewportOnItemStart()&&(n._blockTabs=!1,n._currentPage.element&&n._lastSelectedElement!==n._currentPage.element&&(n._lastSelectedPage&&n._lastSelectedPage.element&&!e(n._lastSelectedPage.element)&&n._lastSelectedPage.element.setAttribute("aria-selected",!1),n._lastSelectedPage=n._currentPage,n._lastSelectedElement=n._currentPage.element,e(n._currentPage.element)||n._currentPage.element.setAttribute("aria-selected",!0),d.schedule(function(){if(n._currentPage.element){(n._hasFocus||n._hadFocus)&&(n._hadFocus=!1,p._setActive(n._currentPage.element),n._tabManager.childFocus=n._currentPage.element);var e=t.document.createEvent("CustomEvent");e.initCustomEvent(f.pageSelectedEvent,!0,!1,{source:n._flipperDiv}),n._writeProfilerMark("WinJS.UI.FlipView:pageSelectedEvent,info"),n._currentPage.element.dispatchEvent(e);var i=n._currentPage.element;if(i){var r=n._itemsManager._recordFromElement(i,!0);r&&r.renderComplete.then(function(){i===n._currentPage.element&&(n._currentPage.element.setAttribute("aria-setsize",n._cachedSize),n._currentPage.element.setAttribute("aria-posinset",n.currentIndex()+1),n._bufferAriaStartMarker.setAttribute("aria-flowto",n._currentPage.element.id),e=t.document.createEvent("CustomEvent"),e.initCustomEvent(f.pageCompletedEvent,!0,!1,{source:n._flipperDiv}),n._writeProfilerMark("WinJS.UI.FlipView:pageCompletedEvent,info"),n._currentPage.element.dispatchEvent(e))})}}},d.Priority.normal,null,"WinJS.UI.FlipView._dispatchPageSelectedEvent")))})},_forEachPage:function(e){var t=this._prevMarker;do{if(e(t))break;t=t.next}while(t!==this._prevMarker)},_changeFlipPage:function(e,t,n){this._writeProfilerMark("WinJS.UI.FlipView:_changeFlipPage,info"),e.element=null,e.setElement?e.setElement(n,!0):(t.parentNode.removeChild(t),e.elementRoot.appendChild(n));var i=t.style;return i.position="absolute",i.left="0px",i.top="0px",i.opacity=1,e.pageRoot.appendChild(t),t.style.left=Math.max(0,(e.pageRoot.offsetWidth-t.offsetWidth)/2)+"px",t.style.top=Math.max(0,(e.pageRoot.offsetHeight-t.offsetHeight)/2)+"px",l.fadeOut(t).then(function(){t.parentNode&&t.parentNode.removeChild(t)})},_deleteFlipPage:function(e){a("WinJS.UI.FlipView:_deleteFlipPage,info"),e.elementRoot.style.opacity=0;var t=l.createDeleteFromListAnimation([e.elementRoot]),n=this;return t.execute().then(function(){e.discardable&&(e.discard(),n._itemsManager.releaseItem(e.element))})},_insertFlipPage:function(e){a("WinJS.UI.FlipView:_insertFlipPage,info"),e.elementRoot.style.opacity=1;var t=l.createAddToListAnimation([e.elementRoot]);return t.execute().then(function(){e.discardable&&e.discard()})},_moveFlipPage:function(e,t){a("WinJS.UI.FlipView:_moveFlipPage,info");var n=l.createRepositionAnimation(e.pageRoot);t();var i=this;return n.execute().then(function(){if(e.discardable){e.discard();var t=i._getAnimationRecord(e.element);t&&!t.successfullyMoved&&i._itemsManager.releaseItem(e.element)}})},_handleManipulationStateChanged:function(e){this._manipulationState=e.currentState,0===e.currentState&&e.target===this._panningDivContainer&&(this._itemSettledOn(),this._ensureCentered())}},{supportedForProcessing:!1});return C.flipPageBufferCount=2,C})})}),i("require-style!less/styles-flipview",[],function(){}),i("require-style!less/colors-flipview",[],function(){}),i("WinJS/Controls/FlipView",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../BindingList","../Promise","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_ItemsManager","../Utilities/_UI","./ElementResizeInstrument","./FlipView/_Constants","./FlipView/_PageManager","require-style!less/styles-flipview","require-style!less/colors-flipview"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b){"use strict";t.Namespace.define("WinJS.UI",{FlipView:t.Namespace._lazy(function(){function f(e){var t=e[0].target.winControl;t&&t instanceof N&&e.some(function(e){return"dir"===e.attributeName?!0:"style"===e.attributeName?t._cachedStyleDir!==e.target.style.direction:!1})&&(t._cachedStyleDir=t._flipviewDiv.style.direction,t._rtl="rtl"===m._getComputedStyle(t._flipviewDiv,null).direction,t._setupOrientation())}var C="win-navbutton",w="win-flipview",I="win-navleft",S="win-navright",E="win-navtop",x="win-navbottom",P="Previous",k="Next",T=3e3,M=500,A="&#57570;",O="&#57571;",D="&#57572;",L="&#57573;",B=40,R={get badAxis(){return"Invalid argument: orientation must be a string, either 'horizontal' or 'vertical'"},get badCurrentPage(){return"Invalid argument: currentPage must be a number greater than or equal to zero and be within the bounds of the datasource"},get noitemsManagerForCount(){return"Invalid operation: can't get count if no dataSource has been set"},get badItemSpacingAmount(){return"Invalid argument: itemSpacing must be a number greater than or equal to zero"},get navigationDuringStateChange(){return"Error: After changing itemDataSource or itemTemplate, any navigation in the FlipView control should be delayed until the pageselected event is fired."},get panningContainerAriaLabel(){return o._getWinJSString("ui/flipViewPanningContainerAriaLabel").value}},N=t.Class.define(function(t,n){s("WinJS.UI.FlipView:constructor,StartTM"),this._disposed=!1,t=t||e.document.createElement("div");var i=!0,r=null,o=_._trivialHtmlRenderer,a=0,l=0;if(n){if(n.orientation&&"string"==typeof n.orientation)switch(n.orientation.toLowerCase()){case"horizontal":i=!0;break;case"vertical":i=!1}n.currentPage&&(a=n.currentPage>>0,a=0>a?0:a),n.itemDataSource&&(r=n.itemDataSource),n.itemTemplate&&(o=this._getItemRenderer(n.itemTemplate)),n.itemSpacing&&(l=n.itemSpacing>>0,l=0>l?0:l)}if(!r){var c=new u.List;r=c.dataSource}m.empty(t),this._flipviewDiv=t,t.winControl=this,h._setOptions(this,n,!0),this._initializeFlipView(t,i,r,o,a,l),m.addClass(t,"win-disposable"),this._avoidTrappingTime=0,this._windowWheelHandlerBound=this._windowWheelHandler.bind(this),m._globalListener.addEventListener(t,"wheel",this._windowWheelHandlerBound),m._globalListener.addEventListener(t,"mousewheel",this._windowWheelHandlerBound),s("WinJS.UI.FlipView:constructor,StopTM")},{dispose:function(){s("WinJS.UI.FlipView:dispose,StopTM"),this._disposed||(m._globalListener.removeEventListener(this._flipviewDiv,"wheel",this._windowWheelHandlerBound),m._globalListener.removeEventListener(this._flipviewDiv,"mousewheel",this._windowWheelHandlerBound),m._resizeNotifier.unsubscribe(this._flipviewDiv,this._resizeHandlerBound),this._elementResizeInstrument.dispose(),this._disposed=!0,this._pageManager.dispose(),this._itemsManager.release(),this.itemDataSource=null)},next:function(){s("WinJS.UI.FlipView:next,info");var e=this._nextAnimation?null:this._cancelDefaultAnimation;return this._navigate(!0,e)},previous:function(){s("WinJS.UI.FlipView:prev,info");var e=this._prevAnimation?null:this._cancelDefaultAnimation;return this._navigate(!1,e)},element:{get:function(){return this._flipviewDiv}},currentPage:{get:function(){return this._getCurrentIndex()},set:function(e){if(s("WinJS.UI.FlipView:set_currentPage,info"),this._pageManager._notificationsEndedSignal){var t=this;return void this._pageManager._notificationsEndedSignal.promise.done(function(){t._pageManager._notificationsEndedSignal=null,t.currentPage=e})}if(!this._animating||this._cancelAnimation())if(e>>=0,e=0>e?0:e,this._refreshTimer)this._indexAfterRefresh=e;else{this._pageManager._cachedSize>0?e=Math.min(this._pageManager._cachedSize-1,e):0===this._pageManager._cachedSize&&(e=0);var t=this;if(this._jumpingToIndex===e)return;var n=function(){t._jumpingToIndex=null};this._jumpingToIndex=e;var i=this._jumpAnimation?this._jumpAnimation:this._defaultAnimation.bind(this),r=this._jumpAnimation?null:this._cancelDefaultAnimation,o=function(){
t._completeJump()};this._pageManager.startAnimatedJump(e,r,o).then(function(e){if(e){t._animationsStarted();var r=e.oldPage.pageRoot,a=e.newPage.pageRoot;t._contentDiv.appendChild(r),t._contentDiv.appendChild(a),t._completeJumpPending=!0,i(r,a).then(function(){t._completeJumpPending&&(o(),s("WinJS.UI.FlipView:set_currentPage.animationComplete,info"))}).done(n,n)}else n()},n)}}},orientation:{get:function(){return this._axisAsString()},set:function(e){s("WinJS.UI.FlipView:set_orientation,info");var t="horizontal"===e;t!==this._isHorizontal&&(this._isHorizontal=t,this._setupOrientation(),this._pageManager.setOrientation(this._isHorizontal))}},itemDataSource:{get:function(){return this._dataSource},set:function(e){s("WinJS.UI.FlipView:set_itemDataSource,info"),this._dataSourceAfterRefresh=e||(new u.List).dataSource,this._refresh()}},itemTemplate:{get:function(){return this._itemRenderer},set:function(e){s("WinJS.UI.FlipView:set_itemTemplate,info"),this._itemRendererAfterRefresh=this._getItemRenderer(e),this._refresh()}},itemSpacing:{get:function(){return this._pageManager.getItemSpacing()},set:function(e){s("WinJS.UI.FlipView:set_itemSpacing,info"),e>>=0,e=0>e?0:e,this._pageManager.setItemSpacing(e)}},count:function(){s("WinJS.UI.FlipView:count,info");var e=this;return new c(function(t,n){e._itemsManager?e._pageManager._cachedSize===g.CountResult.unknown||e._pageManager._cachedSize>=0?t(e._pageManager._cachedSize):e._dataSource.getCount().then(function(n){e._pageManager._cachedSize=n,t(n)}):n(N.noitemsManagerForCount)})},setCustomAnimations:function(e){s("WinJS.UI.FlipView:setCustomAnimations,info"),void 0!==e.next&&(this._nextAnimation=e.next),void 0!==e.previous&&(this._prevAnimation=e.previous),void 0!==e.jump&&(this._jumpAnimation=e.jump)},forceLayout:function(){s("WinJS.UI.FlipView:forceLayout,info"),this._pageManager.resized()},_initializeFlipView:function(t,i,r,o,s,a){function l(e){e.setAttribute("aria-hidden",!0),e.style.visibility="hidden",e.style.opacity=0,e.tabIndex=-1,e.style.zIndex=1e3}function u(e){if(e.pointerType!==T){if(h._touchInteraction=!1,e.screenX===h._lastMouseX&&e.screenY===h._lastMouseY)return;h._lastMouseX=e.screenX,h._lastMouseY=e.screenY,h._mouseInViewport=!0,h._fadeInButton("prev"),h._fadeInButton("next"),h._fadeOutButtons()}}function c(e){e.pointerType===T?(h._mouseInViewport=!1,h._touchInteraction=!0,h._fadeOutButtons(!0)):(h._touchInteraction=!1,h._isInteractive(e.target)||0!==(4&e.buttons)&&(e.stopPropagation(),e.preventDefault()))}function d(e){e.pointerType!==T&&(h._touchInteraction=!1)}var h=this,p=!1;this._flipviewDiv=t,m.addClass(this._flipviewDiv,w),this._contentDiv=e.document.createElement("div"),this._panningDivContainer=e.document.createElement("div"),this._panningDivContainer.className="win-surface",this._panningDiv=e.document.createElement("div"),this._prevButton=e.document.createElement("button"),this._nextButton=e.document.createElement("button"),this._isHorizontal=i,this._dataSource=r,this._itemRenderer=o,this._itemsManager=null,this._pageManager=null;for(var y=["scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","overflow-style"],C=!0,I=n._browserStyleEquivalents,S=0,E=y.length;E>S;S++)C=C&&!!I[y[S]];C=C&&!!n._browserEventEquivalents.manipulationStateChanged,C=C&&m._supportsSnapPoints,this._environmentSupportsTouch=C;var x=this._flipviewDiv.getAttribute("aria-label");x||this._flipviewDiv.setAttribute("aria-label",""),this._flipviewDiv.setAttribute("role","listbox"),this._flipviewDiv.style.overflow||(this._flipviewDiv.style.overflow="hidden"),this._contentDiv.style.position="relative",this._contentDiv.style.zIndex=0,this._contentDiv.style.width="100%",this._contentDiv.style.height="100%",this._panningDiv.style.position="relative",this._panningDivContainer.style.position="relative",this._panningDivContainer.style.width="100%",this._panningDivContainer.style.height="100%",this._panningDivContainer.setAttribute("role","group"),this._panningDivContainer.setAttribute("aria-label",R.panningContainerAriaLabel),this._contentDiv.appendChild(this._panningDivContainer),this._flipviewDiv.appendChild(this._contentDiv),this._panningDiv.style.width="100%",this._panningDiv.style.height="100%",this._setupOrientation(),l(this._prevButton),l(this._nextButton),this._prevButton.setAttribute("aria-label",P),this._nextButton.setAttribute("aria-label",k),this._prevButton.setAttribute("type","button"),this._nextButton.setAttribute("type","button"),this._panningDivContainer.appendChild(this._panningDiv),this._contentDiv.appendChild(this._prevButton),this._contentDiv.appendChild(this._nextButton),this._itemsManagerCallback={inserted:function(e,t,n){h._itemsManager._itemFromPromise(e).then(function(e){var i=h._itemsManager._elementFromHandle(t),r=h._itemsManager._elementFromHandle(n);h._pageManager.inserted(e,i,r,!0)})},countChanged:function(e,t){h._pageManager._cachedSize=e,t!==g.CountResult.unknown&&h._fireDatasourceCountChangedEvent()},changed:function(e,t){h._pageManager.changed(e,t)},moved:function(e,t,n,i){var r=function(e){h._pageManager.moved(e,t,n)};e?r(e):h._itemsManager._itemFromPromise(i).then(r)},removed:function(e,t){e&&h._pageManager.removed(e,t,!0)},knownUpdatesComplete:function(){},beginNotifications:function(){h._cancelAnimation(),h._pageManager.notificationsStarted()},endNotifications:function(){h._pageManager.notificationsEnded()},itemAvailable:function(e,t){h._pageManager.itemRetrieved(e,t)},reload:function(){h._pageManager.reload()}},this._dataSource&&(this._itemsManager=_._createItemsManager(this._dataSource,this._itemRenderer,this._itemsManagerCallback,{ownerElement:this._flipviewDiv})),this._pageManager=new b._FlipPageManager(this._flipviewDiv,this._panningDiv,this._panningDivContainer,this._itemsManager,a,this._environmentSupportsTouch,{hidePreviousButton:function(){h._hasPrevContent=!1,h._fadeOutButton("prev"),h._prevButton.setAttribute("aria-hidden",!0)},showPreviousButton:function(){h._hasPrevContent=!0,h._fadeInButton("prev"),h._prevButton.setAttribute("aria-hidden",!1)},hideNextButton:function(){h._hasNextContent=!1,h._fadeOutButton("next"),h._nextButton.setAttribute("aria-hidden",!0)},showNextButton:function(){h._hasNextContent=!0,h._fadeInButton("next"),h._nextButton.setAttribute("aria-hidden",!1)}}),this._pageManager.initialize(s,this._isHorizontal),this._dataSource.getCount().then(function(e){h._pageManager._cachedSize=e}),this._prevButton.addEventListener("click",function(){h.previous()},!1),this._nextButton.addEventListener("click",function(){h.next()},!1),new m._MutationObserver(f).observe(this._flipviewDiv,{attributes:!0,attributeFilter:["dir","style"]}),this._cachedStyleDir=this._flipviewDiv.style.direction,this._contentDiv.addEventListener("mouseleave",function(){h._mouseInViewport=!1},!1);var T=m._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch";this._environmentSupportsTouch&&(m._addEventListener(this._contentDiv,"pointerdown",c,!1),m._addEventListener(this._contentDiv,"pointermove",u,!1),m._addEventListener(this._contentDiv,"pointerup",d,!1)),this._panningDivContainer.addEventListener("scroll",function(){h._scrollPosChanged()},!1),this._panningDiv.addEventListener("blur",function(){h._touchInteraction||h._fadeOutButtons()},!0),this._resizeHandlerBound=this._resizeHandler.bind(this),this._elementResizeInstrument=new v._ElementResizeInstrument,this._flipviewDiv.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._resizeHandlerBound),m._resizeNotifier.subscribe(this._flipviewDiv,this._resizeHandlerBound);var M=e.document.body.contains(this._flipviewDiv);M&&this._elementResizeInstrument.addedToDom(),m._addInsertedNotifier(this._flipviewDiv);var A=!0;this._flipviewDiv.addEventListener("WinJSNodeInserted",function(e){A?(A=!1,M||(h._elementResizeInstrument.addedToDom(),h._pageManager.resized())):h._pageManager.resized()},!1),this._flipviewDiv.addEventListener("keydown",function(e){if(!h._disposed){var t=!0;if(!h._isInteractive(e.target)){var n=m.Key,i=!1;if(h._isHorizontal)switch(e.keyCode){case n.leftArrow:!h._rtl&&h.currentPage>0?(h.previous(),i=!0):h._rtl&&h.currentPage<h._pageManager._cachedSize-1&&(h.next(),i=!0);break;case n.pageUp:h.currentPage>0&&(h.previous(),i=!0);break;case n.rightArrow:!h._rtl&&h.currentPage<h._pageManager._cachedSize-1?(h.next(),i=!0):h._rtl&&h.currentPage>0&&(h.previous(),i=!0);break;case n.pageDown:h.currentPage<h._pageManager._cachedSize-1&&(h.next(),i=!0);break;case n.upArrow:case n.downArrow:i=!0,t=!1}else switch(e.keyCode){case n.upArrow:case n.pageUp:h.currentPage>0&&(h.previous(),i=!0);break;case n.downArrow:case n.pageDown:h.currentPage<h._pageManager._cachedSize-1&&(h.next(),i=!0);break;case n.space:i=!0}switch(e.keyCode){case n.home:h.currentPage=0,i=!0;break;case n.end:h._pageManager._cachedSize>0&&(h.currentPage=h._pageManager._cachedSize-1),i=!0}if(i)return e.preventDefault(),t&&e.stopPropagation(),!0}}},!1),p=!0},_windowWheelHandler:function(e){if(!this._disposed){e=e.detail.originalEvent;var t=e.target&&(this._flipviewDiv.contains(e.target)||this._flipviewDiv===e.target),i=this,r=n._now(),o=this._avoidTrappingTime>r;(!t||o)&&(this._avoidTrappingTime=r+M),t&&o?(this._panningDivContainer.style.overflowX="hidden",this._panningDivContainer.style.overflowY="hidden",n._yieldForDomModification(function(){i._pageManager._ensureCentered(),i._isHorizontal?(i._panningDivContainer.style.overflowX=i._environmentSupportsTouch?"scroll":"hidden",i._panningDivContainer.style.overflowY="hidden"):(i._panningDivContainer.style.overflowY=i._environmentSupportsTouch?"scroll":"hidden",i._panningDivContainer.style.overflowX="hidden")})):t&&this._pageManager.simulateMouseWheelScroll(e)}},_isInteractive:function(e){if(e.parentNode)for(var t=e.parentNode.querySelectorAll(".win-interactive, .win-interactive *"),n=0,i=t.length;i>n;n++)if(t[n]===e)return!0;return!1},_resizeHandler:function(){s("WinJS.UI.FlipView:resize,StartTM"),this._pageManager.resized()},_refreshHandler:function(){var e=this._dataSourceAfterRefresh||this._dataSource,t=this._itemRendererAfterRefresh||this._itemRenderer,n=this._indexAfterRefresh||0;this._setDatasource(e,t,n),this._dataSourceAfterRefresh=null,this._itemRendererAfterRefresh=null,this._indexAfterRefresh=0,this._refreshTimer=!1},_refresh:function(){if(!this._refreshTimer){var e=this;this._refreshTimer=!0,d.schedule(function(){e._refreshTimer&&!e._disposed&&e._refreshHandler()},d.Priority.high,null,"WinJS.UI.FlipView._refreshHandler")}},_getItemRenderer:function(t){var n=null;if("function"==typeof t){var i=new c(function(){}),r=t(i);n=r.element?"object"==typeof r.element&&"function"==typeof r.element.then?function(n){var i=e.document.createElement("div");return i.className="win-template",p.markDisposable(i),{element:i,renderComplete:t(n).element.then(function(e){i.appendChild(e)})}}:t:function(n){var i=e.document.createElement("div");return i.className="win-template",p.markDisposable(i),{element:i,renderComplete:n.then(function(){return c.as(t(n)).then(function(e){i.appendChild(e)})})}}}else"object"==typeof t&&(n=t.renderItem);return n},_navigate:function(e,t){if(n.validation&&this._refreshTimer)throw new i("WinJS.UI.FlipView.NavigationDuringStateChange",R.navigationDuringStateChange);if(this._animating||(this._animatingForward=e),this._goForward=e,this._animating&&!this._cancelAnimation())return!1;var r=this,o=e?this._nextAnimation:this._prevAnimation,s=o?o:this._defaultAnimation.bind(this),a=function(e){r._completeNavigation(e)},l=this._pageManager.startAnimatedNavigation(e,t,a);if(l){this._animationsStarted();var u=l.outgoing.pageRoot,c=l.incoming.pageRoot;return this._contentDiv.appendChild(u),this._contentDiv.appendChild(c),this._completeNavigationPending=!0,s(u,c).then(function(){r._completeNavigationPending&&a(r._goForward)}).done(),!0}return!1},_cancelDefaultAnimation:function(e,t){e.style.opacity=0,t.style.animationName="",t.style.opacity=1},_cancelAnimation:function(){if(this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.completionCallback){var e=this._pageManager._navigationAnimationRecord.cancelAnimationCallback;if(e&&(e=e.bind(this)),this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.elementContainers){var t=this._pageManager._navigationAnimationRecord.elementContainers[0],n=this._pageManager._navigationAnimationRecord.elementContainers[1],i=t.pageRoot,r=n.pageRoot;return e&&e(i,r),this._pageManager._navigationAnimationRecord.completionCallback(this._animatingForward),!0}}return!1},_completeNavigation:function(e){if(!this._disposed){if(this._pageManager._resizing=!1,this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.elementContainers){var t=this._pageManager._navigationAnimationRecord.elementContainers[0],n=this._pageManager._navigationAnimationRecord.elementContainers[1],i=t.pageRoot,r=n.pageRoot;i.parentNode&&i.parentNode.removeChild(i),r.parentNode&&r.parentNode.removeChild(r),this._pageManager.endAnimatedNavigation(e,t,n),this._fadeOutButtons(),this._scrollPosChanged(),this._pageManager._ensureCentered(!0),this._animationsFinished()}this._completeNavigationPending=!1}},_completeJump:function(){if(!this._disposed){if(this._pageManager._resizing=!1,this._pageManager._navigationAnimationRecord&&this._pageManager._navigationAnimationRecord.elementContainers){var e=this._pageManager._navigationAnimationRecord.elementContainers[0],t=this._pageManager._navigationAnimationRecord.elementContainers[1],n=e.pageRoot,i=t.pageRoot;n.parentNode&&n.parentNode.removeChild(n),i.parentNode&&i.parentNode.removeChild(i),this._pageManager.endAnimatedJump(e,t),this._animationsFinished()}this._completeJumpPending=!1}},_setCurrentIndex:function(e){return this._pageManager.jumpToIndex(e)},_getCurrentIndex:function(){return this._pageManager.currentIndex()},_setDatasource:function(e,t,n){this._animating&&this._cancelAnimation();var i=0;void 0!==n&&(i=n),this._dataSource=e,this._itemRenderer=t;var r=this._itemsManager;this._itemsManager=_._createItemsManager(this._dataSource,this._itemRenderer,this._itemsManagerCallback,{ownerElement:this._flipviewDiv}),this._dataSource=this._itemsManager.dataSource;var o=this;this._dataSource.getCount().then(function(e){o._pageManager._cachedSize=e}),this._pageManager.setNewItemsManager(this._itemsManager,i),r&&r.release()},_fireDatasourceCountChangedEvent:function(){var t=this;d.schedule(function(){var n=e.document.createEvent("Event");n.initEvent(N.datasourceCountChangedEvent,!0,!0),s("WinJS.UI.FlipView:dataSourceCountChangedEvent,info"),t._flipviewDiv.dispatchEvent(n)},d.Priority.normal,null,"WinJS.UI.FlipView._dispatchDataSourceCountChangedEvent")},_scrollPosChanged:function(){this._disposed||this._pageManager.scrollPosChanged()},_axisAsString:function(){return this._isHorizontal?"horizontal":"vertical"},_setupOrientation:function(){if(this._isHorizontal){this._panningDivContainer.style.overflowX=this._environmentSupportsTouch?"scroll":"hidden",this._panningDivContainer.style.overflowY="hidden";var e="rtl"===m._getComputedStyle(this._flipviewDiv,null).direction;this._rtl=e,e?(this._prevButton.className=C+" "+S,this._nextButton.className=C+" "+I):(this._prevButton.className=C+" "+I,this._nextButton.className=C+" "+S),this._prevButton.innerHTML=e?O:A,this._nextButton.innerHTML=e?A:O}else this._panningDivContainer.style.overflowY=this._environmentSupportsTouch?"scroll":"hidden",this._panningDivContainer.style.overflowX="hidden",this._prevButton.className=C+" "+E,this._nextButton.className=C+" "+x,this._prevButton.innerHTML=D,this._nextButton.innerHTML=L;this._panningDivContainer.style.msOverflowStyle="none"},_fadeInButton:function(e,t){(this._mouseInViewport||t||!this._environmentSupportsTouch)&&("next"===e&&this._hasNextContent?(this._nextButtonAnimation&&(this._nextButtonAnimation.cancel(),this._nextButtonAnimation=null),this._nextButton.style.visibility="visible",this._nextButtonAnimation=this._fadeInFromCurrentValue(this._nextButton)):"prev"===e&&this._hasPrevContent&&(this._prevButtonAnimation&&(this._prevButtonAnimation.cancel(),this._prevButtonAnimation=null),this._prevButton.style.visibility="visible",this._prevButtonAnimation=this._fadeInFromCurrentValue(this._prevButton)))},_fadeOutButton:function(e){var t=this;return"next"===e?(this._nextButtonAnimation&&(this._nextButtonAnimation.cancel(),this._nextButtonAnimation=null),this._nextButtonAnimation=a.fadeOut(this._nextButton).then(function(){t._nextButton.style.visibility="hidden"}),this._nextButtonAnimation):(this._prevButtonAnimation&&(this._prevButtonAnimation.cancel(),this._prevButtonAnimation=null),this._prevButtonAnimation=a.fadeOut(this._prevButton).then(function(){t._prevButton.style.visibility="hidden"}),this._prevButtonAnimation)},_fadeOutButtons:function(e){if(this._environmentSupportsTouch){this._buttonFadePromise&&(this._buttonFadePromise.cancel(),this._buttonFadePromise=null);var t=this;this._buttonFadePromise=(e?c.wrap():c.timeout(l._animationTimeAdjustment(T))).then(function(){t._fadeOutButton("prev"),t._fadeOutButton("next"),t._buttonFadePromise=null})}},_animationsStarted:function(){this._animating=!0},_animationsFinished:function(){this._animating=!1},_defaultAnimation:function(e,t){var n={};t.style.left="0px",t.style.top="0px",t.style.opacity=0;var i=e.itemIndex>t.itemIndex?-B:B;n.left=(this._isHorizontal?this._rtl?-i:i:0)+"px",n.top=(this._isHorizontal?0:i)+"px";var r=a.fadeOut(e),o=a.enterContent(t,[n],{mechanism:"transition"});return c.join([r,o])},_fadeInFromCurrentValue:function(e){return l.executeTransition(e,{property:"opacity",delay:0,duration:167,timing:"linear",to:1})}},y);return t.Class.mix(N,r.createEventProperties(N.datasourceCountChangedEvent,N.pageVisibilityChangedEvent,N.pageSelectedEvent,N.pageCompletedEvent)),t.Class.mix(N,h.DOMEventMixin),N})})}),i("WinJS/Controls/ItemContainer",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_KeyboardBehavior","../Utilities/_UI","./ItemContainer/_Constants","./ItemContainer/_ItemEventsHandler"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v){"use strict";var y=o._createEventProperty,b={invoked:"invoked",selectionchanging:"selectionchanging",selectionchanged:"selectionchanged"};n.Namespace._moduleDefine(e,"WinJS.UI",{ItemContainer:n.Namespace._lazy(function(){var o={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get swipeOrientationDeprecated(){return"Invalid configuration: swipeOrientation is deprecated. The control will default this property to 'none'"},get swipeBehaviorDeprecated(){return"Invalid configuration: swipeBehavior is deprecated. The control will default this property to 'none'"}},a=n.Class.define(function(n,i){function s(e,t,n){return{name:t?e:e.toLowerCase(),handler:function(t){l["_on"+e](t)},capture:n}}if(n=n||t.document.createElement("DIV"),this._id=n.id||p._uniqueID(n),this._writeProfilerMark("constructor,StartTM"),i=i||{},n.winControl)throw new r("WinJS.UI.ItemContainer.DuplicateConstruction",o.duplicateConstruction);n.winControl=this,this._element=n,p.addClass(n,"win-disposable"),this._selectionMode=_.SelectionMode.single,this._draggable=!1,this._pressedEntity={type:_.ObjectType.item,index:g._INVALID_INDEX},this.tapBehavior=_.TapBehavior.invokeOnly,p.addClass(this.element,a._ClassName.itemContainer+" "+g._containerClass),this._setupInternalTree(),this._selection=new e._SingleItemSelectionManager(n,this._itemBox),this._setTabIndex(),d.setOptions(this,i),this._mutationObserver=new p._MutationObserver(this._itemPropertyChange.bind(this)),this._mutationObserver.observe(n,{attributes:!0,attributeFilter:["aria-selected"]}),this._setAriaRole();var l=this;this.selectionDisabled||c.schedule(function(){l._setDirectionClass()},c.Priority.normal,null,"WinJS.UI.ItemContainer_async_initialize"),this._itemEventsHandler=new v._ItemEventsHandler(Object.create({containerFromElement:function(){return l.element},indexForItemElement:function(){return 1},indexForHeaderElement:function(){return g._INVALID_INDEX},itemBoxAtIndex:function(){return l._itemBox},itemAtIndex:function(){return l.element},headerAtIndex:function(){return null},containerAtIndex:function(){return l.element},isZombie:function(){return this._disposed},getItemPosition:function(){return l._getItemPosition()},rtl:function(){return l._rtl()},fireInvokeEvent:function(){l._fireInvokeEvent()},verifySelectionAllowed:function(){return l._verifySelectionAllowed()},changeFocus:function(){},selectRange:function(e,t){return l._selection.set({firstIndex:e,lastIndex:t})}},{pressedEntity:{get:function(){return l._pressedEntity},set:function(e){l._pressedEntity=e}},pressedElement:{enumerable:!0,set:function(e){l._pressedElement=e}},eventHandlerRoot:{enumerable:!0,get:function(){return l.element}},selectionMode:{enumerable:!0,get:function(){return l._selectionMode}},accessibleItemClass:{enumerable:!0,get:function(){return g._containerClass}},canvasProxy:{enumerable:!0,get:function(){return l._captureProxy}},tapBehavior:{enumerable:!0,get:function(){return l._tapBehavior}},draggable:{enumerable:!0,get:function(){return l._draggable}},selection:{enumerable:!0,get:function(){return l._selection}},customFootprintParent:{enumerable:!0,get:function(){return null}},skipPreventDefaultOnPointerDown:{enumerable:!0,get:function(){return!0}}}));var u=[s("PointerDown"),s("Click"),s("PointerUp"),s("PointerCancel"),s("LostPointerCapture"),s("ContextMenu"),s("MSHoldVisual",!0),s("FocusIn"),s("FocusOut"),s("DragStart"),s("DragEnd"),s("KeyDown")];u.forEach(function(e){p._addEventListener(l.element,e.name,e.handler,!!e.capture)}),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},draggable:{get:function(){return this._draggable},set:function(e){i.isPhone||this._draggable!==e&&(this._draggable=e,this._updateDraggableAttribute())}},selected:{get:function(){return this._selection.selected},set:function(e){this._selection.selected!==e&&(this._selection.selected=e)}},swipeOrientation:{get:function(){return"none"},set:function(e){p._deprecated(o.swipeOrientationDeprecated)}},tapBehavior:{get:function(){return this._tapBehavior},set:function(e){i.isPhone&&e===_.TapBehavior.directSelect||(this._tapBehavior=e,this._setAriaRole())}},swipeBehavior:{get:function(){return"none"},set:function(e){p._deprecated(o.swipeBehaviorDeprecated)}},selectionDisabled:{get:function(){return this._selectionMode===_.SelectionMode.none},set:function(e){e?this._selectionMode=_.SelectionMode.none:(this._setDirectionClass(),this._selectionMode=_.SelectionMode.single),this._setAriaRole()}},oninvoked:y(b.invoked),onselectionchanging:y(b.selectionchanging),onselectionchanged:y(b.selectionchanged),forceLayout:function(){this._forceLayout()},dispose:function(){this._disposed||(this._disposed=!0,this._itemEventsHandler.dispose(),h.disposeSubTree(this.element))},_onMSManipulationStateChanged:function(e){this._itemEventsHandler.onMSManipulationStateChanged(e)},_onPointerDown:function(e){this._itemEventsHandler.onPointerDown(e)},_onClick:function(e){this._itemEventsHandler.onClick(e)},_onPointerUp:function(e){p.hasClass(this._itemBox,g._itemFocusClass)&&this._onFocusOut(e),this._itemEventsHandler.onPointerUp(e)},_onPointerCancel:function(e){this._itemEventsHandler.onPointerCancel(e)},_onLostPointerCapture:function(e){this._itemEventsHandler.onLostPointerCapture(e)},_onContextMenu:function(e){this._itemEventsHandler.onContextMenu(e)},_onMSHoldVisual:function(e){this._itemEventsHandler.onMSHoldVisual(e)},_onFocusIn:function(){if(!this._itemBox.querySelector("."+g._itemFocusOutlineClass)&&f._keyboardSeenLast){p.addClass(this._itemBox,g._itemFocusClass);var e=t.document.createElement("div");e.className=g._itemFocusOutlineClass,this._itemBox.appendChild(e)}},_onFocusOut:function(){p.removeClass(this._itemBox,g._itemFocusClass);var e=this._itemBox.querySelector("."+g._itemFocusOutlineClass);e&&e.parentNode.removeChild(e)},_onDragStart:function(e){if(this._pressedElement&&this._itemEventsHandler._isInteractive(this._pressedElement))e.preventDefault();else{this._dragging=!0;var t=this;if(e.dataTransfer.setData("text",""),e.dataTransfer.setDragImage){var n=this.element.getBoundingClientRect();e.dataTransfer.setDragImage(this.element,e.clientX-n.left,e.clientY-n.top)}i._yieldForDomModification(function(){t._dragging&&p.addClass(t._itemBox,g._dragSourceClass)})}},_onDragEnd:function(){this._dragging=!1,p.removeClass(this._itemBox,g._dragSourceClass),this._itemEventsHandler.resetPointerDownState()},_onKeyDown:function(e){if(!this._itemEventsHandler._isInteractive(e.target)){var t=p.Key,n=e.keyCode,i=!1;if(e.ctrlKey||n!==t.enter)e.ctrlKey&&n===t.enter||n===t.space?this.selectionDisabled||(this.selected=!this.selected,i=p._setActive(this.element)):n===t.escape&&this.selected&&(this.selected=!1,i=!0);else{var r=this._verifySelectionAllowed();r.canTapSelect&&(this.selected=!this.selected),this._fireInvokeEvent(),i=!0}i&&(e.stopPropagation(),e.preventDefault())}},_setTabIndex:function(){var e=this.element.getAttribute("tabindex");e||this.element.setAttribute("tabindex","0")},_rtl:function(){return"boolean"!=typeof this._cachedRTL&&(this._cachedRTL="rtl"===p._getComputedStyle(this.element,null).direction),this._cachedRTL},_setDirectionClass:function(){p[this._rtl()?"addClass":"removeClass"](this.element,g._rtlListViewClass)},_forceLayout:function(){this._cachedRTL="rtl"===p._getComputedStyle(this.element,null).direction,this._setDirectionClass()},_getItemPosition:function(){var e=this.element;return e?u.wrap({left:this._rtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft,top:e.offsetTop,totalWidth:p.getTotalWidth(e),totalHeight:p.getTotalHeight(e),contentWidth:p.getContentWidth(e),contentHeight:p.getContentHeight(e)}):u.cancel},_itemPropertyChange:function(e){if(!this._disposed){var t=e[0].target,n="true"===t.getAttribute("aria-selected");n!==p._isSelectionRendered(this._itemBox)&&(this.selectionDisabled?p._setAttribute(t,"aria-selected",!n):(this.selected=n,n!==this.selected&&p._setAttribute(t,"aria-selected",!n)))}},_updateDraggableAttribute:function(){this._itemBox.setAttribute("draggable",this._draggable)},_verifySelectionAllowed:function(){if(this._selectionMode!==_.SelectionMode.none&&this._tapBehavior===_.TapBehavior.toggleSelect){var e=this._selection.fireSelectionChanging();return{canSelect:e,canTapSelect:e&&this._tapBehavior===_.TapBehavior.toggleSelect}}return{canSelect:!1,canTapSelect:!1}},_setupInternalTree:function(){var e=t.document.createElement("div");e.className=g._itemClass,this._captureProxy=t.document.createElement("div"),this._itemBox=t.document.createElement("div"),this._itemBox.className=g._itemBoxClass;for(var n=this.element.firstChild;n;){var i=n.nextSibling;e.appendChild(n),n=i}this.element.appendChild(this._itemBox),this._itemBox.appendChild(e),this.element.appendChild(this._captureProxy)},_fireInvokeEvent:function(){if(this.tapBehavior!==_.TapBehavior.none){var e=t.document.createEvent("CustomEvent");e.initCustomEvent(b.invoked,!0,!1,{}),this.element.dispatchEvent(e)}},_setAriaRole:function(){if(!this.element.getAttribute("role")||this._usingDefaultItemRole){this._usingDefaultItemRole=!0;var e;e=this.tapBehavior===_.TapBehavior.none&&this.selectionDisabled?"listitem":"option",p._setAttribute(this.element,"role",e)}},_writeProfilerMark:function(e){var t="WinJS.UI.ItemContainer:"+this._id+":"+e;l(t),s.log&&s.log(t,null,"itemcontainerprofiler")}},{_ClassName:{itemContainer:"win-itemcontainer",vertical:"win-vertical",horizontal:"win-horizontal"}});return n.Class.mix(a,d.DOMEventMixin),a}),_SingleItemSelectionManager:n.Namespace._lazy(function(){return n.Class.define(function(e,t){this._selected=!1,this._element=e,this._itemBox=t},{selected:{get:function(){return this._selected},set:function(e){e=!!e,this._selected!==e&&this.fireSelectionChanging()&&(this._selected=e,v._ItemEventsHandler.renderSelection(this._itemBox,this._element,e,!0,this._element),this.fireSelectionChanged())}},count:function(){return this._selected?1:0},getIndices:function(){},getItems:function(){},getRanges:function(){},isEverything:function(){return!1},set:function(){this.selected=!0},clear:function(){this.selected=!1},add:function(){this.selected=!0},remove:function(){this.selected=!1},selectAll:function(){},fireSelectionChanging:function(){var e=t.document.createEvent("CustomEvent");return e.initCustomEvent(b.selectionchanging,!0,!0,{}),this._element.dispatchEvent(e)},fireSelectionChanged:function(){var e=t.document.createEvent("CustomEvent");e.initCustomEvent(b.selectionchanged,!0,!1,{}),this._element.dispatchEvent(e)},_isIncluded:function(){return this._selected},_getFocused:function(){return{type:_.ObjectType.item,index:g._INVALID_INDEX}}})})})}),i("WinJS/Controls/Repeater",["exports","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../BindingList","../BindingTemplate","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{Repeater:n.Namespace._lazy(function(){function e(e){var n=t.document.createElement("div");return n.textContent=JSON.stringify(e),n}var o="itemsloaded",p="itemchanging",m="itemchanged",f="iteminserting",_="iteminserted",g="itemmoving",v="itemmoved",y="itemremoving",b="itemremoved",C="itemsreloading",w="itemsreloaded",I=r._createEventProperty,S={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get asynchronousRender(){return"Top level items must render synchronously"},get repeaterReentrancy(){return"Cannot modify Repeater data until Repeater has commited previous modification."}},E=n.Class.define(function(e,n){if(e&&e.winControl)throw new i("WinJS.UI.Repeater.DuplicateConstruction",S.duplicateConstruction);this._element=e||t.document.createElement("div"),this._id=this._element.id||h._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),n=n||{},h.addClass(this._element,"win-repeater win-disposable"),this._render=null,this._modifying=!1,this._disposed=!1,this._element.winControl=this,this._dataListeners={itemchanged:this._dataItemChangedHandler.bind(this),iteminserted:this._dataItemInsertedHandler.bind(this),itemmoved:this._dataItemMovedHandler.bind(this),itemremoved:this._dataItemRemovedHandler.bind(this),reload:this._dataReloadHandler.bind(this)};var r=this._extractInlineTemplate();this._initializing=!0,this.template=n.template||r,this.data=n.data,this._initializing=!1,c._setOptions(this,n,!0),this._repeatedDOM=[],this._renderAllItems(),this.dispatchEvent(o,{}),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},data:{get:function(){return this._data},set:function(e){this._writeProfilerMark("data.set,StartTM"),this._data&&this._removeDataListeners(),this._data=e||new a.List,this._addDataListeners(),this._initializing||(this._reloadRepeater(!0),this.dispatchEvent(o,{})),this._writeProfilerMark("data.set,StopTM")}},template:{get:function(){return this._template},set:function(t){this._writeProfilerMark("template.set,StartTM"),this._template=t||e,this._render=h._syncRenderer(this._template,this.element.tagName),this._initializing||(this._reloadRepeater(!0),this.dispatchEvent(o,{})),this._writeProfilerMark("template.set,StopTM")}},length:{get:function(){return this._repeatedDOM.length}},elementFromIndex:function(e){return this._repeatedDOM[e];
},dispose:function(){if(!this._disposed){this._disposed=!0,this._removeDataListeners(),this._data=null,this._template=null;for(var e=0,t=this._repeatedDOM.length;t>e;e++)d._disposeElement(this._repeatedDOM[e])}},onitemsloaded:I(o),onitemchanging:I(p),onitemchanged:I(m),oniteminserting:I(f),oniteminserted:I(_),onitemmoving:I(g),onitemmoved:I(v),onitemremoving:I(y),onitemremoved:I(b),onitemsreloading:I(C),onitemsreloaded:I(w),_extractInlineTemplate:function(){if(this._element.firstElementChild){for(var e=t.document.createElement(this._element.tagName);this._element.firstElementChild;)e.appendChild(this._element.firstElementChild);return new l.Template(e,{extractChild:!0})}},_renderAllItems:function(){for(var e=t.document.createDocumentFragment(),n=0,r=this._data.length;r>n;n++){var o=this._render(this._data.getAt(n));if(!o)throw new i("WinJS.UI.Repeater.AsynchronousRender",S.asynchronousRender);e.appendChild(o),this._repeatedDOM.push(o)}this._element.appendChild(e)},_reloadRepeater:function(e){this._unloadRepeatedDOM(e),this._repeatedDOM=[],this._renderAllItems()},_unloadRepeatedDOM:function(e){for(var t=0,n=this._repeatedDOM.length;n>t;t++){var i=this._repeatedDOM[t];e&&d._disposeElement(i),i.parentElement===this._element&&this._element.removeChild(i)}},_addDataListeners:function(){Object.keys(this._dataListeners).forEach(function(e){this._data.addEventListener(e,this._dataListeners[e],!1)}.bind(this))},_beginModification:function(){if(this._modifying)throw new i("WinJS.UI.Repeater.RepeaterModificationReentrancy",S.repeaterReentrancy);this._modifying=!0},_endModification:function(){this._modifying=!1},_removeDataListeners:function(){Object.keys(this._dataListeners).forEach(function(e){this._data.removeEventListener(e,this._dataListeners[e],!1)}.bind(this))},_dataItemChangedHandler:function(e){this._beginModification();var t,n=this._element,r=e.detail.index,o=this._render(e.detail.newValue);if(!o)throw new i("WinJS.UI.Repeater.AsynchronousRender",S.asynchronousRender);this._repeatedDOM[r]&&(e.detail.oldElement=this._repeatedDOM[r]),e.detail.newElement=o,e.detail.setPromise=function(e){t=e},this._writeProfilerMark(p+",info"),this.dispatchEvent(p,e.detail);var s=null;r<this._repeatedDOM.length?(s=this._repeatedDOM[r],n.replaceChild(o,s),this._repeatedDOM[r]=o):(n.appendChild(o),this._repeatedDOM.push(o)),this._endModification(),this._writeProfilerMark(m+",info"),this.dispatchEvent(m,e.detail),s&&u.as(t).done(function(){d._disposeElement(s)}.bind(this))},_dataItemInsertedHandler:function(e){this._beginModification();var t=e.detail.index,n=this._render(e.detail.value);if(!n)throw new i("WinJS.UI.Repeater.AsynchronousRender",S.asynchronousRender);var r=this._element;if(e.detail.affectedElement=n,this._writeProfilerMark(f+",info"),this.dispatchEvent(f,e.detail),t<this._repeatedDOM.length){var o=this._repeatedDOM[t];r.insertBefore(n,o)}else r.appendChild(n);this._repeatedDOM.splice(t,0,n),this._endModification(),this._writeProfilerMark(_+",info"),this.dispatchEvent(_,e.detail)},_dataItemMovedHandler:function(e){this._beginModification();var t=this._repeatedDOM[e.detail.oldIndex];if(e.detail.affectedElement=t,this._writeProfilerMark(g+",info"),this.dispatchEvent(g,e.detail),this._repeatedDOM.splice(e.detail.oldIndex,1)[0],t.parentNode.removeChild(t),e.detail.newIndex<this._data.length-1){var n=this._repeatedDOM[e.detail.newIndex];this._element.insertBefore(t,n),this._repeatedDOM.splice(e.detail.newIndex,0,t)}else this._repeatedDOM.push(t),this._element.appendChild(t);this._endModification(),this._writeProfilerMark(v+",info"),this.dispatchEvent(v,e.detail)},_dataItemRemovedHandler:function(e){this._beginModification();var t,n=this._repeatedDOM[e.detail.index],i={affectedElement:n,index:e.detail.index,item:e.detail.item};i.setPromise=function(e){t=e},this._writeProfilerMark(y+",info"),this.dispatchEvent(y,i),n.parentNode.removeChild(n),this._repeatedDOM.splice(e.detail.index,1),this._endModification(),this._writeProfilerMark(b+",info"),this.dispatchEvent(b,i),u.as(t).done(function(){d._disposeElement(n)}.bind(this))},_dataReloadHandler:function(){this._beginModification();var e,t=this._repeatedDOM.slice(0),n={affectedElements:t};n.setPromise=function(t){e=t},this._writeProfilerMark(C+",info"),this.dispatchEvent(C,n),this._reloadRepeater(!1);var i=this._repeatedDOM.slice(0);this._endModification(),this._writeProfilerMark(w+",info"),this.dispatchEvent(w,{affectedElements:i}),u.as(e).done(function(){for(var e=0,n=t.length;n>e;e++)d._disposeElement(t[e])}.bind(this))},_writeProfilerMark:function(e){s("WinJS.UI.Repeater:"+this._id+":"+e)}},{isDeclarativeControlContainer:!0});return n.Class.mix(E,c.DOMEventMixin),E})})}),i("require-style!less/styles-datetimepicker",[],function(){}),i("WinJS/Controls/DatePicker",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_Select","require-style!less/styles-datetimepicker"],function(e,t,n,i,r,o,s,a,l,u){"use strict";n.Namespace.define("WinJS.UI",{DatePicker:n.Namespace._lazy(function(){function i(e,n,i){var r=t.Windows.Globalization.DateTimeFormatting;e=e?e:i;var o=new r.DateTimeFormatter(e);return n?new r.DateTimeFormatter(e,o.languages,o.geographicRegion,n,o.clock):o}function l(e,t,n){var r=y[e];r||(r=y[e]={});var o=r[t];o||(o=r[t]={});var s=o[n];return s||(s=o[n]={},s.formatter=i(e,t,n),s.years={}),s}function c(e,t,n,i,r,o){var s=l(e,t,n),a=s.years[o.year+"-"+o.era];return a||(a=s.formatter.format(o.getDateTime()),s.years[o.year+"-"+o.era]=a),a}function d(e,t,n,i){var r=l(e,t,n);return r.formatter.format(i.getDateTime())}function h(e,t,n,i){var r=l(e,t,n);return r.formatter.format(i.getDateTime())}function p(e){var n=t.Windows.Globalization,i=new n.Calendar;return e?new n.Calendar(i.languages,e,i.getClock()):i}function m(e,t){var n=0;if(e.era===t.era)n=t.year-e.year;else for(;e.era!==t.era||e.year!==t.year;)n++,e.addYears(1);return n}var f="day",_="{month.full}",g="year.full",v={get ariaLabel(){return o._getWinJSString("ui/datePicker").value},get selectDay(){return o._getWinJSString("ui/selectDay").value},get selectMonth(){return o._getWinJSString("ui/selectMonth").value},get selectYear(){return o._getWinJSString("ui/selectYear").value}},y={},b=n.Class.define(function(t,n){this._currentDate=new Date,this._minYear=this._currentDate.getFullYear()-100,this._maxYear=this._currentDate.getFullYear()+100,this._datePatterns={date:null,month:null,year:null},t=t||e.document.createElement("div"),a.addClass(t,"win-disposable"),t.winControl=this;var i=t.getAttribute("aria-label");i||t.setAttribute("aria-label",v.ariaLabel),this._init(t),s.setOptions(this,n)},{_information:null,_currentDate:null,_calendar:null,_disabled:!1,_dateElement:null,_dateControl:null,_monthElement:null,_monthControl:null,_minYear:null,_maxYear:null,_yearElement:null,_yearControl:null,_datePatterns:{date:null,month:null,year:null},_addAccessibilityAttributes:function(){this._domElement.setAttribute("role","group"),this._dateElement.setAttribute("aria-label",v.selectDay),this._monthElement.setAttribute("aria-label",v.selectMonth),this._yearElement.setAttribute("aria-label",v.selectYear)},_addControlsInOrder:function(){var e=this._domElement,t=this,n=0;t._information.order.forEach(function(i){switch(i){case"month":e.appendChild(t._monthElement),a.addClass(t._monthElement,"win-order"+n++);break;case"date":e.appendChild(t._dateElement),a.addClass(t._dateElement,"win-order"+n++);break;case"year":e.appendChild(t._yearElement),a.addClass(t._yearElement,"win-order"+n++)}})},_createControlElements:function(){this._monthElement=e.document.createElement("select"),this._monthElement.className="win-datepicker-month win-dropdown",this._dateElement=e.document.createElement("select"),this._dateElement.className="win-datepicker-date win-dropdown",this._yearElement=e.document.createElement("select"),this._yearElement.className="win-datepicker-year win-dropdown"},_createControls:function(){var e=this._information,t=e.getIndex(this.current);e.forceLanguage&&(this._domElement.setAttribute("lang",e.forceLanguage),this._domElement.setAttribute("dir",e.isRTL?"rtl":"ltr")),this._yearControl=new u._Select(this._yearElement,{dataSource:this._information.years,disabled:this.disabled,index:t.year}),this._monthControl=new u._Select(this._monthElement,{dataSource:this._information.months(t.year),disabled:this.disabled,index:t.month}),this._dateControl=new u._Select(this._dateElement,{dataSource:this._information.dates(t.year,t.month),disabled:this.disabled,index:t.date}),this._wireupEvents()},dispose:function(){},calendar:{get:function(){return this._calendar},set:function(e){this._calendar=e,this._setElement(this._domElement)}},current:{get:function(){var e=this._currentDate,t=e.getFullYear();return new Date(Math.max(Math.min(this.maxYear,t),this.minYear),e.getMonth(),e.getDate(),12,0,0,0)},set:function(e){var t;"string"==typeof e?(t=new Date(Date.parse(e)),t.setHours(12,0,0,0)):t=e;var n=this._currentDate;n!==t&&(this._currentDate=t,this._updateDisplay())}},disabled:{get:function(){return this._disabled},set:function(e){this._disabled!==e&&(this._disabled=e,this._yearControl&&(this._monthControl.setDisabled(e),this._dateControl.setDisabled(e),this._yearControl.setDisabled(e)))}},datePattern:{get:function(){return this._datePatterns.date},set:function(e){this._datePatterns.date!==e&&(this._datePatterns.date=e,this._init())}},element:{get:function(){return this._domElement}},_setElement:function(e){this._domElement=this._domElement||e,this._domElement&&(a.empty(this._domElement),a.addClass(this._domElement,"win-datepicker"),this._updateInformation(),this._createControlElements(),this._addControlsInOrder(),this._createControls(),this._addAccessibilityAttributes())},minYear:{get:function(){return this._information.getDate({year:0,month:0,date:0}).getFullYear()},set:function(e){this._minYear!==e&&(this._minYear=e,e>this._maxYear&&(this._maxYear=e),this._updateInformation(),this._yearControl&&(this._yearControl.dataSource=this._information.years),this._updateDisplay())}},maxYear:{get:function(){var e={year:this._information.years.getLength()-1};return e.month=this._information.months(e.year).getLength()-1,e.date=this._information.dates(e.year,e.month).getLength()-1,this._information.getDate(e).getFullYear()},set:function(e){this._maxYear!==e&&(this._maxYear=e,e<this._minYear&&(this._minYear=e),this._updateInformation(),this._yearControl&&(this._yearControl.dataSource=this._information.years),this._updateDisplay())}},monthPattern:{get:function(){return this._datePatterns.month},set:function(e){this._datePatterns.month!==e&&(this._datePatterns.month=e,this._init())}},_updateInformation:function(){var e=new Date(this._minYear,0,1,12,0,0),t=new Date(this._maxYear,11,31,12,0,0);e.setFullYear(this._minYear),t.setFullYear(this._maxYear),this._information=b.getInformation(e,t,this._calendar,this._datePatterns)},_init:function(e){this._setElement(e)},_updateDisplay:function(){if(this._domElement&&this._yearControl){var e=this._information.getIndex(this.current);this._yearControl.index=e.year,this._monthControl.dataSource=this._information.months(e.year),this._monthControl.index=e.month,this._dateControl.dataSource=this._information.dates(e.year,e.month),this._dateControl.index=e.date}},_wireupEvents:function(){function e(){t._currentDate=t._information.getDate({year:t._yearControl.index,month:t._monthControl.index,date:t._dateControl.index},t._currentDate);var e=t._information.getIndex(t._currentDate);t._monthControl.dataSource=t._information.months(e.year),t._monthControl.index=e.month,t._dateControl.dataSource=t._information.dates(e.year,e.month),t._dateControl.index=e.date}var t=this;this._dateElement.addEventListener("change",e,!1),this._monthElement.addEventListener("change",e,!1),this._yearElement.addEventListener("change",e,!1)},yearPattern:{get:function(){return this._datePatterns.year},set:function(e){this._datePatterns.year!==e&&(this._datePatterns.year=e,this._init())}}},{_getInformationWinRT:function(e,t,n,i){function r(e){return new Date(Math.min(new Date(Math.max(u,e)),v))}i=i||{date:f,month:_,year:g};var o=p(n),s=p(n),a=p(n);o.setToMin();var u=o.getDateTime();o.setToMax();var v=o.getDateTime();o.hour=12,e=r(e),t=r(t),o.setDateTime(t);var y={year:o.year,era:o.era};o.setDateTime(e);var b=0;b=m(o,y)+1;var C=l("day month.full year",n).formatter,w=C.patterns[0],I=8207===w.charCodeAt(0),S=["date","month","year"],E={month:w.indexOf("{month"),date:w.indexOf("{day"),year:w.indexOf("{year")};S.sort(function(e,t){return E[e]<E[t]?-1:E[e]>E[t]?1:0});var x=function(){return{getLength:function(){return b},getValue:function(t){return o.setDateTime(e),o.addYears(t),c(i.year,n,g,i,S,o)}}}(),P=function(t){return s.setDateTime(e),s.addYears(t),{getLength:function(){return s.numberOfMonthsInThisYear},getValue:function(e){return s.month=s.firstMonthInThisYear,s.addMonths(e),d(i.month,n,_,s)}}},k=function(t,r){return a.setDateTime(e),a.addYears(t),a.month=a.firstMonthInThisYear,a.addMonths(r),a.day=a.firstDayInThisMonth,{getLength:function(){return a.numberOfDaysInThisMonth},getValue:function(e){return a.day=a.firstDayInThisMonth,a.addDays(e),h(i.date,n,f,a)}}};return{isRTL:I,forceLanguage:C.resolvedLanguage,order:S,getDate:function(t,n){var i;n&&(o.setDateTime(n),i={year:o.year,month:o.month,day:o.day});var r=o;r.setDateTime(e),r.addYears(t.year);var s;r.firstMonthInThisYear>r.lastMonthInThisYear?(s=t.month+r.firstMonthInThisYear>r.numberOfMonthsInThisYear?t.month+r.firstMonthInThisYear-r.numberOfMonthsInThisYear:t.month+r.firstMonthInThisYear,i&&i.year!==r.year&&(s=Math.max(Math.min(i.month,r.numberOfMonthsInThisYear),1))):s=i&&i.year!==r.year?Math.max(Math.min(i.month,r.firstMonthInThisYear+r.numberOfMonthsInThisYear-1),r.firstMonthInThisYear):Math.max(Math.min(t.month+r.firstMonthInThisYear,r.firstMonthInThisYear+r.numberOfMonthsInThisYear-1),r.firstMonthInThisYear),r.month=s;var a=Math.max(Math.min(t.date+r.firstDayInThisMonth,r.firstDayInThisMonth+r.numberOfDaysInThisMonth-1),r.firstDayInThisMonth);return!i||i.year===r.year&&i.month===r.month||(a=Math.max(Math.min(i.day,r.firstDayInThisMonth+r.numberOfDaysInThisMonth-1),r.firstDayInThisMonth)),r.day=r.firstDayInThisMonth,r.addDays(a-r.firstDayInThisMonth),r.getDateTime()},getIndex:function(t){var n=r(t);o.setDateTime(n);var i={year:o.year,era:o.era},s=0;o.setDateTime(e),o.month=1,s=m(o,i),o.setDateTime(n);var a=o.month-o.firstMonthInThisYear;0>a&&(a=o.month-o.firstMonthInThisYear+o.numberOfMonthsInThisYear);var l=o.day-o.firstDayInThisMonth,u={year:s,month:a,date:l};return u},years:x,months:P,dates:k}},_getInformationJS:function(e,t){var n=e.getFullYear(),i=t.getFullYear(),r={getLength:function(){return Math.max(0,i-n+1)},getValue:function(e){return n+e}},o=["January","February","March","April","May","June","July","August","September","October","November","December"],s=function(){return{getLength:function(){return o.length},getValue:function(e){return o[e]},getMonthNumber:function(e){return Math.min(e,o.length-1)}}},a=function(e,t){var n=new Date,i=r.getValue(e),o=t+1;n.setFullYear(i,o,0);var s=n.getDate();return{getLength:function(){return s},getValue:function(e){return""+(e+1)},getDateNumber:function(e){return Math.min(e+1,s)}}};return{order:["month","date","year"],getDate:function(e){return new Date(r.getValue(e.year),s(e.year).getMonthNumber(e.month),a(e.year,e.month).getDateNumber(e.date),12,0)},getIndex:function(e){var t=0,i=e.getFullYear();t=n>i?0:i>this.maxYear?r.getLength()-1:e.getFullYear()-n;var o=Math.min(e.getMonth(),s(t).getLength()),l=Math.min(e.getDate()-1,a(t,o).getLength());return{year:t,month:o,date:l}},years:r,months:s,dates:a}}});return t.Windows.Globalization.Calendar&&t.Windows.Globalization.DateTimeFormatting?b.getInformation=b._getInformationWinRT:b.getInformation=b._getInformationJS,n.Class.mix(b,r.createEventProperties("change")),n.Class.mix(b,s.DOMEventMixin),b})})}),i("WinJS/Controls/TimePicker",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_Select","require-style!less/styles-datetimepicker"],function(e,t,n,i,r,o,s,a,l,u){"use strict";n.Namespace.define("WinJS.UI",{TimePicker:n.Namespace._lazy(function(){var i="{minute.integer(2)}",l="{hour.integer(1)}",c="{period.abbreviated(2)}",d={get ariaLabel(){return o._getWinJSString("ui/timePicker").value},get selectHour(){return o._getWinJSString("ui/selectHour").value},get selectMinute(){return o._getWinJSString("ui/selectMinute").value},get selectAMPM(){return o._getWinJSString("ui/selectAMPM").value}},h=function(e,t){return e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()},p=n.Class.define(function(t,n){this._currentTime=p._sentinelDate(),t=t||e.document.createElement("div"),a.addClass(t,"win-disposable"),t.winControl=this;var i=t.getAttribute("aria-label");i||t.setAttribute("aria-label",d.ariaLabel),this._timePatterns={minute:null,hour:null,period:null},this._init(t),s.setOptions(this,n)},{_currentTime:null,_clock:null,_disabled:!1,_hourElement:null,_hourControl:null,_minuteElement:null,_minuteControl:null,_ampmElement:null,_ampmControl:null,_minuteIncrement:1,_timePatterns:{minute:null,hour:null,period:null},_information:null,_addAccessibilityAttributes:function(){this._domElement.setAttribute("role","group"),this._hourElement.setAttribute("aria-label",d.selectHour),this._minuteElement.setAttribute("aria-label",d.selectMinute),this._ampmElement&&this._ampmElement.setAttribute("aria-label",d.selectAMPM)},_addControlsInOrder:function(e){var t=this;e.order.forEach(function(e,n){switch(e){case"hour":t._domElement.appendChild(t._hourElement),a.addClass(t._hourElement,"win-order"+n);break;case"minute":t._domElement.appendChild(t._minuteElement),a.addClass(t._minuteElement,"win-order"+n);break;case"period":t._ampmElement&&(t._domElement.appendChild(t._ampmElement),a.addClass(t._ampmElement,"win-order"+n))}})},dispose:function(){},clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._init())}},current:{get:function(){var e=this._currentTime;if(e){var t=p._sentinelDate();return t.setHours(e.getHours()),t.setMinutes(this._getMinutesIndex(e)*this.minuteIncrement),t.setSeconds(0),t.setMilliseconds(0),t}return e},set:function(e){var t;"string"==typeof e?(t=p._sentinelDate(),t.setTime(Date.parse(t.toDateString()+" "+e))):(t=p._sentinelDate(),t.setHours(e.getHours()),t.setMinutes(e.getMinutes()));var n=this._currentTime;h(n,t)||(this._currentTime=t,this._updateDisplay())}},disabled:{get:function(){return this._disabled},set:function(e){this._disabled!==e&&(this._disabled=e,this._hourControl&&(this._hourControl.setDisabled(e),this._minuteControl.setDisabled(e)),this._ampmControl&&this._ampmControl.setDisabled(e))}},element:{get:function(){return this._domElement}},_init:function(e){this._setElement(e),this._updateDisplay()},hourPattern:{get:function(){return this._timePatterns.hour.pattern},set:function(e){this._timePatterns.hour!==e&&(this._timePatterns.hour=e,this._init())}},_getHoursAmpm:function(e){var t=e.getHours();return this._ampmElement?0===t?{hours:12,ampm:0}:12>t?{hours:t,ampm:0}:{hours:t-12,ampm:1}:{hours:t}},_getHoursIndex:function(e){return this._ampmElement&&12===e?0:e},_getMinutesIndex:function(e){return parseInt(e.getMinutes()/this.minuteIncrement)},minuteIncrement:{get:function(){return Math.max(1,Math.abs(0|this._minuteIncrement)%60)},set:function(e){this._minuteIncrement!==e&&(this._minuteIncrement=e,this._init())}},minutePattern:{get:function(){return this._timePatterns.minute.pattern},set:function(e){this._timePatterns.minute!==e&&(this._timePatterns.minute=e,this._init())}},periodPattern:{get:function(){return this._timePatterns.period.pattern},set:function(e){this._timePatterns.period!==e&&(this._timePatterns.period=e,this._init())}},_setElement:function(t){if(this._domElement=this._domElement||t,this._domElement){var n=p.getInformation(this.clock,this.minuteIncrement,this._timePatterns);this._information=n,n.forceLanguage&&(this._domElement.setAttribute("lang",n.forceLanguage),this._domElement.setAttribute("dir",n.isRTL?"rtl":"ltr")),a.empty(this._domElement),a.addClass(this._domElement,"win-timepicker"),this._hourElement=e.document.createElement("select"),a.addClass(this._hourElement,"win-timepicker-hour win-dropdown"),this._minuteElement=e.document.createElement("select"),a.addClass(this._minuteElement,"win-timepicker-minute win-dropdown"),this._ampmElement=null,"12HourClock"===n.clock&&(this._ampmElement=e.document.createElement("select"),a.addClass(this._ampmElement,"win-timepicker-period win-dropdown")),this._addControlsInOrder(n);var i=this._getHoursAmpm(this.current);this._hourControl=new u._Select(this._hourElement,{dataSource:this._getInfoHours(),disabled:this.disabled,index:this._getHoursIndex(i.hours)}),this._minuteControl=new u._Select(this._minuteElement,{dataSource:n.minutes,disabled:this.disabled,index:this._getMinutesIndex(this.current)}),this._ampmControl=null,this._ampmElement&&(this._ampmControl=new u._Select(this._ampmElement,{dataSource:n.periods,disabled:this.disabled,index:i.ampm})),this._wireupEvents(),this._updateValues(),this._addAccessibilityAttributes()}},_getInfoHours:function(){return this._information.hours},_updateLayout:function(){this._domElement&&this._updateValues()},_updateValues:function(){if(this._hourControl){var e=this._getHoursAmpm(this.current);this._ampmControl&&(this._ampmControl.index=e.ampm),this._hourControl.index=this._getHoursIndex(e.hours),this._minuteControl.index=this._getMinutesIndex(this.current)}},_updateDisplay:function(){var e=this._getHoursAmpm(this.current);this._ampmControl&&(this._ampmControl.index=e.ampm),this._hourControl&&(this._hourControl.index=this._getHoursIndex(e.hours),this._minuteControl.index=this._getMinutesIndex(this.current))},_wireupEvents:function(){var e=this,t=function(){var t=e._hourControl.index;return e._ampmElement&&1===e._ampmControl.index&&12!==t&&(t+=12),t},n=function(){var n=t();e._currentTime.setHours(n),e._currentTime.setMinutes(e._minuteControl.index*e.minuteIncrement)};this._hourElement.addEventListener("change",n,!1),this._minuteElement.addEventListener("change",n,!1),this._ampmElement&&this._ampmElement.addEventListener("change",n,!1)}},{_sentinelDate:function(){var e=new Date;return new Date(2011,6,15,e.getHours(),e.getMinutes())},_getInformationWinRT:function(e,n,r){var o=function(n,i){var r=t.Windows.Globalization.DateTimeFormatting;n=n?n:i;var o=new r.DateTimeFormatter(n);return e&&(o=r.DateTimeFormatter(n,o.languages,o.geographicRegion,o.calendar,e)),o},s=t.Windows.Globalization,a=new s.Calendar;e&&(a=new s.Calendar(a.languages,a.getCalendarSystem(),e)),a.setDateTime(p._sentinelDate());var u=a.getClock(),d=24;d=a.numberOfHoursInThisPeriod;var h=function(){var e=o(r.period,c);return{getLength:function(){return 2},getValue:function(t){var n=p._sentinelDate();if(0===t){n.setHours(1);var i=e.format(n);return i}if(1===t){n.setHours(13);var r=e.format(n);return r}return null}}}(),m=function(){var e=o(r.minute,i),t=p._sentinelDate();return{getLength:function(){return 60/n},getValue:function(i){var r=i*n;return t.setMinutes(r),e.format(t)}}}(),f=function(){var e=o(r.hour,l),t=p._sentinelDate();return{getLength:function(){return d},getValue:function(n){return t.setHours(n),e.format(t)}}}(),_=o("hour minute"),g=_.patterns[0],v=["hour","minute"],y={period:g.indexOf("{period"),hour:g.indexOf("{hour"),minute:g.indexOf("{minute")};y.period>-1&&v.push("period");var b=t.Windows.Globalization.DateTimeFormatting.DateTimeFormatter,C=new b("month.full",t.Windows.Globalization.ApplicationLanguages.languages,"ZZ","GregorianCalendar","24HourClock"),w=C.patterns[0],I=8207===w.charCodeAt(0);if(I){var S=y.hour;y.hour=y.minute,y.minute=S}return v.sort(function(e,t){return y[e]<y[t]?-1:y[e]>y[t]?1:0}),{minutes:m,hours:f,clock:u,periods:h,order:v,forceLanguage:_.resolvedLanguage,isRTL:I}},_getInformationJS:function(e,t){var n=[12,1,2,3,4,5,6,7,8,9,10,11],i={};i.getLength=function(){return 60/t},i.getValue=function(e){var n=e*t;return 10>n?"0"+n.toString():n.toString()};var r=["hour","minute","period"];return"24HourClock"===e&&(n=["00","01","02","03","04","05","06","07","08","09",10,11,12,13,14,15,16,17,18,19,20,21,22,23],r=["hour","minute"]),{minutes:i,hours:n,clock:e||"12HourClock",periods:["AM","PM"],order:r}}});return t.Windows.Globalization.DateTimeFormatting&&t.Windows.Globalization.Calendar&&t.Windows.Globalization.ApplicationLanguages?p.getInformation=p._getInformationWinRT:p.getInformation=p._getInformationJS,n.Class.mix(p,r.createEventProperties("change")),n.Class.mix(p,s.DOMEventMixin),p})})}),i("require-style!less/styles-backbutton",[],function(){}),i("require-style!less/colors-backbutton",[],function(){}),i("WinJS/Controls/BackButton",["exports","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Resources","../Navigation","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","require-style!less/styles-backbutton","require-style!less/colors-backbutton"],function(e,t,n,i,r,o,s,a,l){"use strict";var u=a.Key,c="win-navigation-backbutton",d="win-back",h=3,p=function(){function e(){t.addEventListener("keyup",i,!1),a._addEventListener(t,"pointerup",r,!1)}function n(){t.removeEventListener("keyup",i,!1),a._removeEventListener(t,"pointerup",r,!1)}function i(e){(e.keyCode===u.leftArrow&&e.altKey&&!e.shiftKey&&!e.ctrlKey||e.keyCode===u.browserBack)&&(o.back(),e.preventDefault())}function r(e){e.button===h&&o.back()}var s=0;return{addRef:function(){0===s&&e(),s++},release:function(){s>0&&(s--,0===s&&n())},getCount:function(){return s}}}();n.Namespace._moduleDefine(e,"WinJS.UI",{BackButton:n.Namespace._lazy(function(){var e={get ariaLabel(){return r._getWinJSString("ui/backbuttonarialabel").value},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badButtonElement(){return"Invalid argument: For a button, toggle, or flyout command, the element must be null or a button element"}},l=n.Class.define(function(n,r){if(n&&n.winControl)throw new i("WinJS.UI.BackButton.DuplicateConstruction",e.duplicateConstruction);this._element=n||t.document.createElement("button"),r=r||{},this._initializeButton(),this._disposed=!1,this._element.winControl=this,s.setOptions(this,r),this._buttonClickHandler=this._handleBackButtonClick.bind(this),this._element.addEventListener("click",this._buttonClickHandler,!1),this._navigatedHandler=this._handleNavigatedEvent.bind(this),o.addEventListener("navigated",this._navigatedHandler,!1),p.addRef()},{element:{get:function(){return this._element}},dispose:function(){this._disposed||(this._disposed=!0,o.removeEventListener("navigated",this._navigatedHandler,!1),p.release())},refresh:function(){o.canGoBack?this._element.disabled=!1:this._element.disabled=!0},_initializeButton:function(){if("BUTTON"!==this._element.tagName)throw new i("WinJS.UI.BackButton.BadButtonElement",e.badButtonElement);a.addClass(this._element,c),a.addClass(this._element,"win-disposable"),this._element.innerHTML='<span class="'+d+'"></span>',this.refresh(),this._element.setAttribute("aria-label",e.ariaLabel),this._element.setAttribute("title",e.ariaLabel),this._element.setAttribute("type","button")},_handleNavigatedEvent:function(){this.refresh()},_handleBackButtonClick:function(){o.back()}});return l._getReferenceCount=function(){return p.getCount()},n.Class.mix(l,s.DOMEventMixin),l})})}),i("require-style!less/styles-tooltip",[],function(){}),i("require-style!less/colors-tooltip",[],function(){}),i("WinJS/Controls/Tooltip",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Animations","../Animations/_TransitionAnimation","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","require-style!less/styles-tooltip","require-style!less/colors-tooltip"],function(e,t,n,i,r,o,s,a,l,u,c,d){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{Tooltip:i.Namespace._lazy(function(){function e(e,t){return"pointerdown"===e?t===O:e in D}function d(e,t){return"pointerdown"===e?t!==O:e in B}var h=0,p=c.Key,m="top",f=a._animationTimeAdjustment(400),_=a._animationTimeAdjustment(1200),g=a._animationTimeAdjustment(400),v=a._animationTimeAdjustment(5e3),y=a._animationTimeAdjustment(0),b=a._animationTimeAdjustment(600),C=a._animationTimeAdjustment(400),w=a._animationTimeAdjustment(600),I=a._animationTimeAdjustment(200),S=a._animationTimeAdjustment(3e5),E=12,x=20,P=45,k=20,T=12,M=1,A=c._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",O=c._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",D={keyup:"",pointerover:"",pointerdown:""},L={pointermove:""},B={pointerdown:"",keydown:"",focusout:"",pointerout:"",pointercancel:"",pointerup:""},R={pointerover:"",pointerout:""},N="win-tooltip",F="win-tooltip-phantom",z=g,H=2*z,W=2.5*z,U=v,j=!1,V=!1,q=o._createEventProperty;return i.Class.define(function(e,i){e=e||t.document.createElement("div");var r=c.data(e).tooltip;if(r)return r;if(!V&&n.Windows.UI.ViewManagement.UISettings){var o=new n.Windows.UI.ViewManagement.UISettings;z=a._animationTimeAdjustment(o.mouseHoverTime),H=2*z,W=2.5*z,U=a._animationTimeAdjustment(1e3*o.messageDuration);var s=o.handPreference;j=s===n.Windows.UI.ViewManagement.HandPreference.leftHanded}V=!0,this._disposed=!1,this._placement=m,this._infotip=!1,this._innerHTML=null,this._contentElement=null,this._extraClass=null,this._lastContentType="html",this._anchorElement=e,this._domElement=null,this._phantomDiv=null,this._triggerByOpen=!1,this._eventListenerRemoveStack=[],this._lastKeyOrBlurEvent=null,this._currentKeyOrBlurEvent=null,e.winControl=this,c.addClass(e,"win-disposable"),e.title&&(this._innerHTML=this._anchorElement.title,this._anchorElement.removeAttribute("title")),l.setOptions(this,i),this._events(),c.data(e).tooltip=this},{innerHTML:{get:function(){return this._innerHTML},set:function(e){if(this._innerHTML=e,this._domElement){if(!this._innerHTML||""===this._innerHTML)return void this._onDismiss();this._domElement.innerHTML=e,this._position()}this._lastContentType="html"}},element:{get:function(){return this._anchorElement}},contentElement:{get:function(){return this._contentElement},set:function(e){if(this._contentElement=e,this._domElement){if(!this._contentElement)return void this._onDismiss();this._domElement.innerHTML="",this._domElement.appendChild(this._contentElement),this._position()}this._lastContentType="element"}},placement:{get:function(){return this._placement},set:function(e){"top"!==e&&"bottom"!==e&&"left"!==e&&"right"!==e&&(e=m),this._placement=e,this._domElement&&this._position()}},infotip:{get:function(){return this._infotip},set:function(e){this._infotip=!!e}},extraClass:{get:function(){return this._extraClass},set:function(e){this._extraClass=e}},onbeforeopen:q("beforeopen"),onopened:q("opened"),onbeforeclose:q("beforeclose"),onclosed:q("closed"),dispose:function(){if(!this._disposed){this._disposed=!0,u.disposeSubTree(this.element);for(var e=0,t=this._eventListenerRemoveStack.length;t>e;e++)this._eventListenerRemoveStack[e]();this._onDismiss();var n=c.data(this._anchorElement);n&&delete n.tooltip}},addEventListener:function(e,t,n){if(this._anchorElement){this._anchorElement.addEventListener(e,t,n);var i=this;this._eventListenerRemoveStack.push(function(){i._anchorElement.removeEventListener(e,t,n)})}},removeEventListener:function(e,t,n){this._anchorElement&&this._anchorElement.removeEventListener(e,t,n)},open:function(e){switch(this._triggerByOpen=!0,"touch"!==e&&"mouseover"!==e&&"mousedown"!==e&&"keyboard"!==e&&(e="default"),e){case"touch":this._onInvoke("touch","never");break;case"mouseover":this._onInvoke("mouse","auto");
break;case"keyboard":this._onInvoke("keyboard","auto");break;case"mousedown":case"default":this._onInvoke("nodelay","never")}},close:function(){this._onDismiss()},_cleanUpDOM:function(){this._domElement&&(u.disposeSubTree(this._domElement),t.document.body.removeChild(this._domElement),this._domElement=null,t.document.body.removeChild(this._phantomDiv),this._phantomDiv=null)},_createTooltipDOM:function(){this._cleanUpDOM(),this._domElement=t.document.createElement("div");var e=c._uniqueID(this._domElement);this._domElement.setAttribute("id",e);var n=c._getComputedStyle(this._anchorElement,null),i=this._domElement.style;i.direction=n.direction,i.writingMode=n["writing-mode"],this._domElement.setAttribute("tabindex",-1),this._domElement.setAttribute("role","tooltip"),this._anchorElement.setAttribute("aria-describedby",e),"element"===this._lastContentType?this._domElement.appendChild(this._contentElement):this._domElement.innerHTML=this._innerHTML,t.document.body.appendChild(this._domElement),c.addClass(this._domElement,N),this._extraClass&&c.addClass(this._domElement,this._extraClass),this._phantomDiv=t.document.createElement("div"),this._phantomDiv.setAttribute("tabindex",-1),t.document.body.appendChild(this._phantomDiv),c.addClass(this._phantomDiv,F);var r=c._getComputedStyle(this._domElement,null).zIndex+1;this._phantomDiv.style.zIndex=r},_raiseEvent:function(e,n){if(this._anchorElement){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!1,!1,n),this._anchorElement.dispatchEvent(i)}},_captureLastKeyBlurOrPointerOverEvent:function(e){switch(this._lastKeyOrBlurEvent=this._currentKeyOrBlurEvent,e.type){case"keyup":e.keyCode===p.shift?this._currentKeyOrBlurEvent=null:this._currentKeyOrBlurEvent="keyboard";break;case"focusout":this._currentKeyOrBlurEvent=null}},_registerEventToListener:function(e,t){var n=this,i=function(e){n._captureLastKeyBlurOrPointerOverEvent(e),n._handleEvent(e)};c._addEventListener(e,t,i,!1),this._eventListenerRemoveStack.push(function(){c._removeEventListener(e,t,i,!1)})},_events:function(){for(var e in D)this._registerEventToListener(this._anchorElement,e);for(var e in L)this._registerEventToListener(this._anchorElement,e);for(e in B)this._registerEventToListener(this._anchorElement,e);this._registerEventToListener(this._anchorElement,"contextmenu"),this._registerEventToListener(this._anchorElement,"MSHoldVisual")},_handleEvent:function(t){var n=t._normalizedType||t.type;if(!this._triggerByOpen){if(n in R&&c.eventWithinElement(this._anchorElement,t))return;if(e(n,t.pointerType))if(t.pointerType===O)this._isShown||(this._showTrigger="touch"),this._onInvoke("touch","never",t);else{if(this._skipMouseOver&&t.pointerType===A&&"pointerover"===n)return void(this._skipMouseOver=!1);var i="key"===n.substring(0,3)?"keyboard":"mouse";this._isShown||(this._showTrigger=i),this._onInvoke(i,"auto",t)}else if(n in L)this._contactPoint={x:t.clientX,y:t.clientY};else if(d(n,t.pointerType)){var o;if(t.pointerType===O){if("pointerup"===n){this._skipMouseOver=!0;var s=this;r._yieldForEvents(function(){s._skipMouseOver=!1})}o="touch"}else o="key"===n.substring(0,3)?"keyboard":"mouse";if("focusout"!==n&&o!==this._showTrigger)return;this._onDismiss()}else("contextmenu"===n||"MSHoldVisual"===n)&&t.preventDefault()}},_onShowAnimationEnd:function(){if(!this._shouldDismiss&&!this._disposed&&(this._raiseEvent("opened"),this._domElement&&"never"!==this._hideDelay)){var e=this,t=this._infotip?Math.min(3*U,S):U;this._hideDelayTimer=this._setTimeout(function(){e._onDismiss()},t)}},_onHideAnimationEnd:function(){t.document.body.removeEventListener("DOMNodeRemoved",this._removeTooltip,!1),this._cleanUpDOM(),this._anchorElement&&this._anchorElement.removeAttribute("aria-describedby"),h=(new Date).getTime(),this._triggerByOpen=!1,this._disposed||this._raiseEvent("closed")},_decideOnDelay:function(e){var t;if(this._useAnimation=!0,"nodelay"===e)t=0,this._useAnimation=!1;else{var n=(new Date).getTime();I>=n-h?(t="touch"===e?this._infotip?C:y:this._infotip?w:b,this._useAnimation=!1):t="touch"===e?this._infotip?_:f:this._infotip?W:H}return t},_getAnchorPositionFromElementWindowCoord:function(){var e=this._anchorElement.getBoundingClientRect();return{x:e.left,y:e.top,width:e.width,height:e.height}},_getAnchorPositionFromPointerWindowCoord:function(e){return{x:e.x,y:e.y,width:1,height:1}},_canPositionOnSide:function(e,t,n,i){var r=0,o=0;switch(e){case"top":r=i.width+this._offset,o=n.y;break;case"bottom":r=i.width+this._offset,o=t.height-n.y-n.height;break;case"left":r=n.x,o=i.height+this._offset;break;case"right":r=t.width-n.x-n.width,o=i.height+this._offset}return r>=i.width+this._offset&&o>=i.height+this._offset},_positionOnSide:function(e,t,n,i){var r=0,o=0;switch(e){case"top":case"bottom":r=n.x+n.width/2-i.width/2,r=Math.min(Math.max(r,0),t.width-i.width-M),o="top"===e?n.y-i.height-this._offset:n.y+n.height+this._offset;break;case"left":case"right":o=n.y+n.height/2-i.height/2,o=Math.min(Math.max(o,0),t.height-i.height-M),r="left"===e?n.x-i.width-this._offset:n.x+n.width+this._offset}this._domElement.style.left=r+"px",this._domElement.style.top=o+"px",this._phantomDiv.style.left=r+"px",this._phantomDiv.style.top=o+"px",this._phantomDiv.style.width=i.width+"px",this._phantomDiv.style.height=i.height+"px"},_position:function(e){var n={width:0,height:0},i={x:0,y:0,width:0,height:0},r={width:0,height:0};n.width=t.document.documentElement.clientWidth,n.height=t.document.documentElement.clientHeight,"tb-rl"===c._getComputedStyle(t.document.body,null)["writing-mode"]&&(n.width=t.document.documentElement.clientHeight,n.height=t.document.documentElement.clientWidth),i=!this._contactPoint||"touch"!==e&&"mouse"!==e?this._getAnchorPositionFromElementWindowCoord():this._getAnchorPositionFromPointerWindowCoord(this._contactPoint),r.width=this._domElement.offsetWidth,r.height=this._domElement.offsetHeight;var o={top:["top","bottom","left","right"],bottom:["bottom","top","left","right"],left:["left","right","top","bottom"],right:["right","left","top","bottom"]};j&&(o.top[2]="right",o.top[3]="left",o.bottom[2]="right",o.bottom[3]="left");for(var s=o[this._placement],a=s.length,l=0;a>l;l++)if(l===a-1||this._canPositionOnSide(s[l],n,i,r)){this._positionOnSide(s[l],n,i,r);break}return s[l]},_showTooltip:function(e){if(!this._shouldDismiss&&(this._isShown=!0,this._raiseEvent("beforeopen"),t.document.body.contains(this._anchorElement)&&!this._shouldDismiss)){if("element"===this._lastContentType){if(!this._contentElement)return void(this._isShown=!1)}else if(!this._innerHTML||""===this._innerHTML)return void(this._isShown=!1);var n=this;this._removeTooltip=function(e){for(var i=n._anchorElement;i;){if(e.target===i){t.document.body.removeEventListener("DOMNodeRemoved",n._removeTooltip,!1),n._cleanUpDOM();break}i=i.parentNode}},t.document.body.addEventListener("DOMNodeRemoved",this._removeTooltip,!1),this._createTooltipDOM(),this._position(e),this._useAnimation?s.fadeIn(this._domElement).then(this._onShowAnimationEnd.bind(this)):this._onShowAnimationEnd()}},_onInvoke:function(e,t,n){if(this._shouldDismiss=!1,!this._isShown&&(!n||"keyup"!==n.type||"keyboard"!==this._lastKeyOrBlurEvent&&(this._lastKeyOrBlurEvent||n.keyCode===p.tab))){this._hideDelay=t,this._contactPoint=null,n?(this._contactPoint={x:n.clientX,y:n.clientY},"touch"===e?this._offset=P:"keyboard"===e?this._offset=E:this._offset=x):"touch"===e?this._offset=k:this._offset=T,this._clearTimeout(this._delayTimer),this._clearTimeout(this._hideDelayTimer);var i=this._decideOnDelay(e);if(i>0){var r=this;this._delayTimer=this._setTimeout(function(){r._showTooltip(e)},i)}else this._showTooltip(e)}},_onDismiss:function(){this._shouldDismiss=!0,this._isShown&&(this._isShown=!1,this._showTrigger="mouse",this._domElement?(this._raiseEvent("beforeclose"),this._useAnimation?s.fadeOut(this._domElement).then(this._onHideAnimationEnd.bind(this)):this._onHideAnimationEnd()):(this._raiseEvent("beforeclose"),this._raiseEvent("closed")))},_setTimeout:function(e,n){return t.setTimeout(e,n)},_clearTimeout:function(e){t.clearTimeout(e)}},{_DELAY_INITIAL_TOUCH_SHORT:{get:function(){return f}},_DELAY_INITIAL_TOUCH_LONG:{get:function(){return _}},_DEFAULT_MOUSE_HOVER_TIME:{get:function(){return g}},_DEFAULT_MESSAGE_DURATION:{get:function(){return v}},_DELAY_RESHOW_NONINFOTIP_TOUCH:{get:function(){return y}},_DELAY_RESHOW_NONINFOTIP_NONTOUCH:{get:function(){return b}},_DELAY_RESHOW_INFOTIP_TOUCH:{get:function(){return C}},_DELAY_RESHOW_INFOTIP_NONTOUCH:{get:function(){return w}},_RESHOW_THRESHOLD:{get:function(){return I}},_HIDE_DELAY_MAX:{get:function(){return S}}})})})}),i("require-style!less/styles-rating",[],function(){}),i("require-style!less/colors-rating",[],function(){}),i("WinJS/Controls/Rating",["../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../_Accents","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_SafeHtml","./Tooltip","require-style!less/styles-rating","require-style!less/colors-rating"],function(e,t,n,i,r,o,s,a,l,u,c){"use strict";o.createAccentRule(".win-rating .win-star.win-user.win-full, .win-rating .win-star.win-user.win-full.win-disabled",[{name:"color",value:o.ColorTypes.accent}]),t.Namespace.define("WinJS.UI",{Rating:t.Namespace._lazy(function(){var o=i._createEventProperty,l={get averageRating(){return r._getWinJSString("ui/averageRating").value},get clearYourRating(){return r._getWinJSString("ui/clearYourRating").value},get tentativeRating(){return r._getWinJSString("ui/tentativeRating").value},get tooltipStringsIsInvalid(){return"Invalid argument: tooltipStrings must be null or an array of strings."},get unrated(){return r._getWinJSString("ui/unrated").value},get userRating(){return r._getWinJSString("ui/userRating").value}},d=5,h=!1,p="cancel",m="change",f="previewchange",_=0,g=a._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",v=a._MSPointerEvent.MSPOINTER_TYPE_PEN||"pen",y=a._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",b="padding-left: 0px; padding-right: 0px; border-left: 0px; border-right: 0px; -ms-flex: none; -webkit-flex: none; flex: none; display: none",C="win-rating",w="win-star win-empty",I="win-star win-average win-empty",S="win-star win-average win-full",E="win-star win-user win-empty",x="win-star win-user win-full",P="win-star win-tentative win-empty",k="win-star win-tentative win-full",T="win-disabled",M="win-average",A="win-user";return t.Class.define(function(t,n){this._disposed=!1,t=t||e.document.createElement("div"),n=n||{},this._element=t,a.addClass(this._element,"win-disposable"),this._userRating=0,this._averageRating=0,this._disabled=h,this._enableClear=!0,this._tooltipStrings=[],this._controlUpdateNeeded=!1,this._setControlSize(n.maxRating),n.tooltipStrings||this._updateTooltips(null),s.setOptions(this,n),this._controlUpdateNeeded=!0,this._forceLayout(),a._addInsertedNotifier(this._element),t.winControl=this,this._events()},{maxRating:{get:function(){return this._maxRating},set:function(e){this._setControlSize(e),this._forceLayout()}},userRating:{get:function(){return this._userRating},set:function(e){this._userRating=Math.max(0,Math.min(Number(e)>>0,this._maxRating)),this._updateControl()}},averageRating:{get:function(){return this._averageRating},set:function(e){this._averageRating=Number(e)<1?0:Math.min(Number(e)||0,this._maxRating),this._averageRatingElement&&this._ensureAverageMSStarRating(),this._updateControl()}},disabled:{get:function(){return this._disabled},set:function(e){this._disabled=!!e,this._disabled&&this._clearTooltips(),this._updateTabIndex(),this._updateControl()}},enableClear:{get:function(){return this._enableClear},set:function(e){this._enableClear=!!e,this._setAriaValueMin(),this._updateControl()}},tooltipStrings:{get:function(){return this._tooltipStrings},set:function(e){if("object"!=typeof e)throw new n("WinJS.UI.Rating.TooltipStringsIsInvalid",l.tooltipStringsIsInvalid);this._updateTooltips(e),this._updateAccessibilityRestState()}},element:{get:function(){return this._element}},oncancel:o(p),onchange:o(m),onpreviewchange:o(f),dispose:function(){if(!this._disposed){this._disposed=!0;for(var e=0;e<this._toolTips.length;e++)this._toolTips[e].dispose();this._toolTips=null}},addEventListener:function(e,t,n){this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},_forceLayout:function(){if(this._controlUpdateNeeded){var e=!1;this._updateControl=function(){e=!0},this.userRating=this._userRating,this.averageRating=this._averageRating,this._lastEventWasChange=!1,this._lastEventWasCancel=!1,this._tentativeRating=-1,this._captured=!1,this._pointerDownFocus=!1,this._elements=[],this._toolTips=[],this._clearElement=null,this._averageRatingElement=null,this._elementWidth=null,this._elementPadding=null,this._elementBorder=null,this._floatingValue=0,this._createControl(),this._setAccessibilityProperties(),delete this._updateControl,e&&this._updateControl()}},_hideAverageRating:function(){this._averageRatingHidden||(this._averageRatingHidden=!0,this._averageRatingElement.style.cssText=b)},_createControl:function(){a.addClass(this._element,C);var e="";this._averageRatingHidden=!0;for(var t=0;t<=this._maxRating;t++)e=t===this._maxRating?e+"<div class='"+S+"' style='"+b+"'></div>":e+"<div class='"+E+"'></div>";u.setInnerHTMLUnsafe(this._element,e);for(var n=this._element.firstElementChild,t=0;n;)this._elements[t]=n,t<this._maxRating&&(a.data(n).msStarRating=t+1),n=n.nextElementSibling,t++;this._averageRatingElement=this._elements[this._maxRating],this._ensureAverageMSStarRating(),this._updateTabIndex()},_setAriaValueMin:function(){this._element.setAttribute("aria-valuemin",this._enableClear?0:1)},_setAccessibilityProperties:function(){this._element.setAttribute("role","slider"),this._element.setAttribute("aria-valuemax",this._maxRating),this._setAriaValueMin(),this._updateAccessibilityRestState()},_getText:function(t){var n=this._tooltipStrings[t];if(n){var i=e.document.createElement("div");return i.innerHTML=n,i.textContent}return t===this._maxRating?l.clearYourRating:t+1},_updateAccessibilityRestState:function(){var e=this._element;this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.disconnect(),e.setAttribute("aria-readOnly",this._disabled),0!==this._userRating?(e.setAttribute("aria-valuenow",this._userRating),e.setAttribute("aria-label",l.userRating),e.setAttribute("aria-valuetext",this._getText(this._userRating-1))):0!==this._averageRating?(e.setAttribute("aria-valuenow",this._averageRating),e.setAttribute("aria-label",l.averageRating),e.setAttribute("aria-valuetext",this._averageRating)):(e.setAttribute("aria-valuenow",l.unrated),e.setAttribute("aria-label",l.userRating),e.setAttribute("aria-valuetext",l.unrated)),this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_updateAccessibilityHoverState:function(){var e=this._element;this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.disconnect(),e.setAttribute("aria-readOnly",this._disabled),this._tentativeRating>0?(e.setAttribute("aria-label",l.tentativeRating),e.setAttribute("aria-valuenow",this._tentativeRating),e.setAttribute("aria-valuetext",this._getText(this._tentativeRating-1))):0===this._tentativeRating?(e.setAttribute("aria-valuenow",l.unrated),e.setAttribute("aria-label",l.tentativeRating),e.setAttribute("aria-valuetext",this._getText(this._maxRating))):(e.setAttribute("aria-valuenow",l.unrated),e.setAttribute("aria-label",l.tentativeRating),e.setAttribute("aria-valuetext",l.unrated)),this._ariaValueNowMutationObserver&&this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_ensureTooltips:function(){if(!this.disabled&&0===this._toolTips.length)for(var e=0;e<this._maxRating;e++)this._toolTips[e]=new c.Tooltip(this._elements[e])},_decrementRating:function(){this._closeTooltip();var e=!0;this._tentativeRating<=0?e=!1:(this._tentativeRating>0?this._tentativeRating--:-1===this._tentativeRating&&(0!==this._userRating&&this._userRating>0?this._tentativeRating=this._userRating-1:this._tentativeRating=0),0!==this._tentativeRating||this._enableClear||(this._tentativeRating=1,e=!1)),this._showTentativeRating(e,"keyboard")},_events:function(){function e(e){return{name:e,lowerCaseName:e.toLowerCase(),handler:function(t){var i=n["_on"+e];i&&i.apply(n,[t])}}}var t,n=this,i=[e("KeyDown"),e("FocusOut"),e("FocusIn"),e("PointerCancel"),e("PointerDown"),e("PointerMove"),e("PointerOver"),e("PointerUp"),e("PointerOut")],r=[e("WinJSNodeInserted")];for(t=0;t<i.length;++t)a._addEventListener(this._element,i[t].lowerCaseName,i[t].handler,!1);for(t=0;t<r.length;++t)this._element.addEventListener(r[t].name,r[t].handler,!1);this._ariaValueNowMutationObserver=new a._MutationObserver(this._ariaValueNowChanged.bind(this)),this._ariaValueNowMutationObserver.observe(this._element,{attributes:!0,attributeFilter:["aria-valuenow"]})},_onWinJSNodeInserted:function(){this._recalculateStarProperties(),this._updateControl()},_recalculateStarProperties:function(){var e=0;1===this._averageRating&&(e=1);var t=a._getComputedStyle(this._elements[e]);this._elementWidth=t.width,"rtl"===a._getComputedStyle(this._element).direction?(this._elementPadding=t.paddingRight,this._elementBorder=t.borderRight):(this._elementPadding=t.paddingLeft,this._elementBorder=t.borderLeft)},_hideAverageStar:function(){0!==this._averageRating&&this._resetAverageStar(!1)},_incrementRating:function(){this._closeTooltip();var e=!0;(this._tentativeRating<0||this._tentativeRating>=this._maxRating)&&(e=!1),-1!==this._tentativeRating?this._tentativeRating<this._maxRating&&this._tentativeRating++:0!==this._userRating?this._userRating<this._maxRating?this._tentativeRating=this._userRating+1:this._tentativeRating=this._maxRating:this._tentativeRating=1,this._showTentativeRating(e,"keyboard")},_ariaValueNowChanged:function(){if(!this._disabled){var e=this._element.getAttributeNode("aria-valuenow");if(null!==e){var t=Number(e.nodeValue);this.userRating!==t&&(this.userRating=t,this._tentativeRating=this._userRating,this._raiseEvent(m,this._userRating))}}},_onPointerCancel:function(){this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(p,null),this._captured=!1},_onPointerDown:function(e){(e.pointerType!==y||e.button===_)&&(this._captured||(this._pointerDownAt={x:e.clientX,y:e.clientY},this._pointerDownFocus=!0,this._disabled||(a._setPointerCapture(this._element,e.pointerId),this._captured=!0,e.pointerType===g?(this._tentativeRating=a.data(e.target).msStarRating||0,this._setStarClasses(k,this._tentativeRating,P),this._hideAverageStar(),this._updateAccessibilityHoverState(),this._openTooltip("touch"),this._raiseEvent(f,this._tentativeRating)):this._openTooltip("mousedown"))))},_onCapturedPointerMove:function(e,t){var n,i=this._pointerDownAt||{x:e.clientX,y:e.clientY},r=a._elementsFromPoint(e.clientX,i.y);if(r)for(var o=0,s=r.length;s>o;o++){var l=r[o];if("tooltip"===l.getAttribute("role"))return;if(a.hasClass(l,"win-star")){n=l;break}}var u;if(n&&n.parentElement===this._element)u=a.data(n).msStarRating||0;else{var c=0,d=this.maxRating;"rtl"===a._getComputedStyle(this._element).direction&&(c=d,d=0),u=e.clientX<i.x?c:d}var h=!1,p=Math.min(Math.ceil(u),this._maxRating);0!==p||this._enableClear||(p=1),p!==this._tentativeRating&&(this._closeTooltip(),h=!0),this._tentativeRating=p,this._showTentativeRating(h,t),e.preventDefault()},_onPointerMove:function(e){this._captured&&(e.pointerType===g?this._onCapturedPointerMove(e,"touch"):this._onCapturedPointerMove(e,"mousedown"))},_onPointerOver:function(e){this._disabled||e.pointerType!==v&&e.pointerType!==y||this._onCapturedPointerMove(e,"mouseover")},_onPointerUp:function(e){this._captured&&(a._releasePointerCapture(this._element,e.pointerId),this._captured=!1,this._onUserRatingChanged()),this._pointerDownAt=null},_onFocusOut:function(){this._captured||(this._onUserRatingChanged(),this._lastEventWasChange||this._lastEventWasCancel||this._raiseEvent(p,null))},_onFocusIn:function(){if(!this._pointerDownFocus){if(!this._disabled){if(0===this._userRating)for(var e=0;e<this._maxRating;e++)this._elements[e].className=P;this._hideAverageStar()}0!==this._userRating?this._raiseEvent(f,this._userRating):this._raiseEvent(f,0),this._tentativeRating=this._userRating}this._pointerDownFocus=!1},_onKeyDown:function(e){var t=a.Key,n=e.keyCode,i=a._getComputedStyle(this._element).direction,r=!0;switch(n){case t.enter:this._onUserRatingChanged();break;case t.tab:this._onUserRatingChanged(),r=!1;break;case t.escape:this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(p,null);break;case t.leftArrow:"rtl"===i&&this._tentativeRating<this.maxRating?this._incrementRating():"rtl"!==i&&this._tentativeRating>0?this._decrementRating():r=!1;break;case t.upArrow:this._tentativeRating<this.maxRating?this._incrementRating():r=!1;break;case t.rightArrow:"rtl"===i&&this._tentativeRating>0?this._decrementRating():"rtl"!==i&&this._tentativeRating<this.maxRating?this._incrementRating():r=!1;break;case t.downArrow:this._tentativeRating>0?this._decrementRating():r=!1;break;default:var o=0;if(n>=t.num0&&n<=t.num9?o=t.num0:n>=t.numPad0&&n<=t.numPad9&&(o=t.numPad0),o>0){var s=!1,l=Math.min(n-o,this._maxRating);0!==l||this._enableClear||(l=1),l!==this._tentativeRating&&(this._closeTooltip(),s=!0),this._tentativeRating=l,this._showTentativeRating(s,"keyboard")}else r=!1}r&&(e.stopPropagation(),e.preventDefault())},_onPointerOut:function(e){this._captured||a.eventWithinElement(this._element,e)||(this._showCurrentRating(),this._lastEventWasChange||this._raiseEvent(p,null))},_onUserRatingChanged:function(){this._disabled||(this._closeTooltip(),this._userRating===this._tentativeRating||this._lastEventWasCancel||this._lastEventWasChange?this._updateControl():(this.userRating=this._tentativeRating,this._raiseEvent(m,this._userRating)))},_raiseEvent:function(t,n){if(!this._disabled&&(this._lastEventWasChange=t===m,this._lastEventWasCancel=t===p,e.document.createEvent)){var i=e.document.createEvent("CustomEvent");i.initCustomEvent(t,!1,!1,{tentativeRating:n}),this._element.dispatchEvent(i)}},_resetNextElement:function(e){if(null!==this._averageRatingElement.nextSibling){a._setFlexStyle(this._averageRatingElement.nextSibling,{grow:1,shrink:1});var t=this._averageRatingElement.nextSibling.style,n=a._getComputedStyle(this._element).direction;e&&(n="rtl"===n?"ltr":"rtl"),"rtl"===n?(t.paddingRight=this._elementPadding,t.borderRight=this._elementBorder,t.direction="rtl"):(t.paddingLeft=this._elementPadding,t.borderLeft=this._elementBorder,t.direction="ltr"),t.backgroundPosition="left",t.backgroundSize="100% 100%",t.width=this._resizeStringValue(this._elementWidth,1,t.width)}},_resetAverageStar:function(e){this._resetNextElement(e),this._hideAverageRating()},_resizeStringValue:function(e,t,n){var i=parseFloat(e);if(isNaN(i))return null!==n?n:e;var r=e.substring(i.toString(10).length);return i*=t,i+r},_setControlSize:function(e){var t=(Number(e)||d)>>0;this._maxRating=t>0?t:d},_updateTooltips:function(e){var t,n=0;if(null!==e)for(n=e.length<=this._maxRating+1?e.length:this._maxRating+1,t=0;n>t;t++)this._tooltipStrings[t]=e[t];else{for(t=0;t<this._maxRating;t++)this._tooltipStrings[t]=t+1;this._tooltipStrings[this._maxRating]=l.clearYourRating}},_updateTabIndex:function(){this._element.tabIndex=this._disabled?"-1":"0"},_setStarClasses:function(e,t,n){for(var i=0;i<this._maxRating;i++)t>i?this._elements[i].className=e:this._elements[i].className=n},_updateAverageStar:function(){var e=this._averageRatingElement.style,t=this._averageRatingElement.nextSibling.style;"rtl"===a._getComputedStyle(this._element).direction?(e.backgroundPosition="right",e.paddingRight=this._elementPadding,e.borderRight=this._elementBorder,t.paddingRight="0px",t.borderRight="0px",t.direction="ltr"):(e.backgroundPosition="left",t.backgroundPosition="right",e.paddingLeft=this._elementPadding,e.borderLeft=this._elementBorder,t.paddingLeft="0px",t.borderLeft="0px",t.direction="rtl"),a._setFlexStyle(this._averageRatingElement,{grow:this._floatingValue,shrink:this._floatingValue}),e.width=this._resizeStringValue(this._elementWidth,this._floatingValue,e.width),e.backgroundSize=100/this._floatingValue+"% 100%",e.display=a._getComputedStyle(this._averageRatingElement.nextSibling).display,this._averageRatingHidden=!1,a._setFlexStyle(this._averageRatingElement.nextSibling,{grow:1-this._floatingValue,shrink:1-this._floatingValue}),t.width=this._resizeStringValue(this._elementWidth,1-this._floatingValue,t.width),t.backgroundSize=100/(1-this._floatingValue)+"% 100%"},_showCurrentRating:function(){this._closeTooltip(),this._tentativeRating=-1,this._disabled||this._updateControl(),this._updateAccessibilityRestState()},_showTentativeRating:function(e,t){!this._disabled&&this._tentativeRating>=0&&(this._setStarClasses(k,this._tentativeRating,P),this._hideAverageStar()),this._updateAccessibilityHoverState(),e&&(this._openTooltip(t),this._raiseEvent(f,this._tentativeRating))},_openTooltip:function(t){if(!this.disabled)if(this._ensureTooltips(),this._tentativeRating>0)this._toolTips[this._tentativeRating-1].innerHTML=this._tooltipStrings[this._tentativeRating-1],this._toolTips[this._tentativeRating-1].open(t);else if(0===this._tentativeRating){this._clearElement=e.document.createElement("div");var n=this._elements[0].offsetWidth+parseInt(this._elementPadding,10);"ltr"===a._getComputedStyle(this._element).direction&&(n*=-1),this._clearElement.style.cssText="visiblity:hidden; position:absolute; width:0px; height:100%; left:"+n+"px; top:0px;",this._elements[0].appendChild(this._clearElement),this._toolTips[this._maxRating]=new c.Tooltip(this._clearElement),this._toolTips[this._maxRating].innerHTML=this._tooltipStrings[this._maxRating],this._toolTips[this._maxRating].open(t)}},_closeTooltip:function(){0!==this._toolTips.length&&(this._tentativeRating>0?this._toolTips[this._tentativeRating-1].close():0===this._tentativeRating&&null!==this._clearElement&&(this._toolTips[this._maxRating].close(),this._elements[0].removeChild(this._clearElement),this._clearElement=null))},_clearTooltips:function(){if(this._toolTips&&0!==this._toolTips.length)for(var e=0;e<this._maxRating;e++)this._toolTips[e].innerHTML=null},_appendClass:function(e){for(var t=0;t<=this._maxRating;t++)a.addClass(this._elements[t],e)},_setClasses:function(e,t,n){for(var i=0;i<this._maxRating;i++)t>i?this._elements[i].className=e:this._elements[i].className=n},_ensureAverageMSStarRating:function(){a.data(this._averageRatingElement).msStarRating=Math.ceil(this._averageRating)},_updateControl:function(){if(this._controlUpdateNeeded){if(0!==this._averageRating&&0===this._userRating&&this._averageRating>=1&&this._averageRating<=this._maxRating){this._setClasses(S,this._averageRating-1,I),this._averageRatingElement.className=S;for(var e=0;e<this._maxRating;e++)if(e<this._averageRating&&e+1>=this._averageRating){this._resetNextElement(!1),this._element.insertBefore(this._averageRatingElement,this._elements[e]),this._floatingValue=this._averageRating-e;var t=a._getComputedStyle(this._elements[e]);this._elementWidth=t.width,"rtl"===a._getComputedStyle(this._element).direction?(this._elementPadding=t.paddingRight,this._elementBorder=t.borderRight):(this._elementPadding=t.paddingLeft,this._elementBorder=t.borderLeft),this._updateAverageStar()}}0!==this._userRating&&this._userRating>=1&&this._userRating<=this._maxRating&&(this._setClasses(x,this._userRating,E),this._resetAverageStar(!1)),0===this._userRating&&0===this._averageRating&&(this._setClasses(w,this._maxRating),this._resetAverageStar(!1)),this.disabled&&this._appendClass(T),0!==this._averageRating&&0===this._userRating?this._appendClass(M):this._appendClass(A),this._updateAccessibilityRestState()}}})})})}),i("require-style!less/styles-toggleswitch",[],function(){}),i("require-style!less/colors-toggleswitch",[],function(){}),i("WinJS/Controls/ToggleSwitch",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_Resources","../_Accents","../Utilities/_Control","../Utilities/_ElementUtilities","require-style!less/styles-toggleswitch","require-style!less/colors-toggleswitch"],function(e,t,n,i,r,o,s,a){"use strict";o.createAccentRule(".win-toggleswitch-on .win-toggleswitch-track",[{name:"background-color",value:o.ColorTypes.accent}]),o.createAccentRule("html.win-hoverable .win-toggleswitch-on:not(.win-toggleswitch-disabled):not(.win-toggleswitch-pressed) .win-toggleswitch-clickregion:hover .win-toggleswitch-track",[{name:"background-color",value:o.ColorTypes.listSelectPress}]),t.Namespace.define("WinJS.UI",{ToggleSwitch:t.Namespace._lazy(function(){var n="win-toggleswitch",o="win-toggleswitch-header",l="win-toggleswitch-clickregion",u="win-toggleswitch-track",c="win-toggleswitch-thumb",d="win-toggleswitch-values",h="win-toggleswitch-value",p="win-toggleswitch-value-on",m="win-toggleswitch-value-off",f="win-toggleswitch-description",_="win-toggleswitch-on",g="win-toggleswitch-off",v="win-toggleswitch-disabled",y="win-toggleswitch-enabled",b="win-toggleswitch-dragging",C="win-toggleswitch-pressed",w={get on(){return r._getWinJSString("ui/on").value},get off(){return r._getWinJSString("ui/off").value}},I=t.Class.define(function(t,i){t=t||e.document.createElement("div"),this._domElement=t,a.addClass(this._domElement,n),this._domElement.innerHTML=['<div class="'+o+'"></div>','<div class="'+l+'">','   <div class="'+u+'">','       <div class="'+c+'"></div>',"   </div>",'   <div class="'+d+'">','      <div class="'+h+" "+p+'"></div>','      <div class="'+h+" "+m+'"></div>',"   </div>","</div>",'<div class="'+f+'"></div>'].join("\n"),this._headerElement=this._domElement.firstElementChild,this._clickElement=this._headerElement.nextElementSibling,this._trackElement=this._clickElement.firstElementChild,this._thumbElement=this._trackElement.firstElementChild,this._labelsElement=this._trackElement.nextElementSibling,this._labelOnElement=this._labelsElement.firstElementChild,this._labelOffElement=this._labelOnElement.nextElementSibling,this._descriptionElement=this._clickElement.nextElementSibling,this._headerElement.setAttribute("aria-hidden",!0),this._labelsElement.setAttribute("aria-hidden",!0),this._headerElement.setAttribute("id",a._uniqueID(this._headerElement)),this._domElement.setAttribute("aria-labelledby",this._headerElement.id),this._domElement.setAttribute("role","checkbox"),this._domElement.winControl=this,a.addClass(this._domElement,"win-disposable"),this._domElement.addEventListener("keydown",this._keyDownHandler.bind(this)),a._addEventListener(this._clickElement,"pointerdown",this._pointerDownHandler.bind(this)),a._addEventListener(this._clickElement,"pointercancel",this._pointerCancelHandler.bind(this)),this._boundPointerMove=this._pointerMoveHandler.bind(this),this._boundPointerUp=this._pointerUpHandler.bind(this),this._mutationObserver=new a._MutationObserver(this._ariaChangedHandler.bind(this)),this._mutationObserver.observe(this._domElement,{attributes:!0,attributeFilter:["aria-checked"]}),this._dragX=0,this._dragging=!1,this.checked=!1,this.disabled=!1,this.labelOn=w.on,this.labelOff=w.off,s.setOptions(this,i)},{element:{get:function(){return this._domElement}},checked:{get:function(){return this._checked},set:function(e){e=!!e,e!==this.checked&&(this._checked=e,this._domElement.setAttribute("aria-checked",e),e?(a.addClass(this._domElement,_),a.removeClass(this._domElement,g)):(a.addClass(this._domElement,g),a.removeClass(this._domElement,_)),this.dispatchEvent("change"))}},disabled:{get:function(){return this._disabled},set:function(e){e=!!e,e!==this._disabled&&(e?(a.addClass(this._domElement,v),a.removeClass(this._domElement,y)):(a.removeClass(this._domElement,v),a.addClass(this._domElement,y)),this._disabled=e,
this._domElement.setAttribute("aria-disabled",e),this._domElement.setAttribute("tabIndex",e?-1:0))}},labelOn:{get:function(){return this._labelOnElement.innerHTML},set:function(e){this._labelOnElement.innerHTML=e}},labelOff:{get:function(){return this._labelOffElement.innerHTML},set:function(e){this._labelOffElement.innerHTML=e}},title:{get:function(){return this._headerElement.innerHTML},set:function(e){this._headerElement.innerHTML=e}},onchange:i._createEventProperty("change"),dispose:function(){this._disposed||(this._disposed=!0)},_ariaChangedHandler:function(){var e=this._domElement.getAttribute("aria-checked");e="true"===e?!0:!1,this.checked=e},_keyDownHandler:function(e){this.disabled||(e.keyCode===a.Key.space&&(e.preventDefault(),this.checked=!this.checked),(e.keyCode===a.Key.rightArrow||e.keyCode===a.Key.upArrow)&&(e.preventDefault(),this.checked=!0),(e.keyCode===a.Key.leftArrow||e.keyCode===a.Key.downArrow)&&(e.preventDefault(),this.checked=!1))},_pointerDownHandler:function(e){this.disabled||this._mousedown||(e.preventDefault(),this._mousedown=!0,this._dragXStart=e.pageX-this._trackElement.getBoundingClientRect().left,this._dragX=this._dragXStart,this._dragging=!1,a.addClass(this._domElement,C),a._globalListener.addEventListener(this._domElement,"pointermove",this._boundPointerMove,!0),a._globalListener.addEventListener(this._domElement,"pointerup",this._boundPointerUp,!0),e.pointerType===a._MSPointerEvent.MSPOINTER_TYPE_TOUCH&&a._setPointerCapture(this._domElement,e.pointerId))},_pointerCancelHandler:function(e){this._resetPressedState(),e.pointerType===a._MSPointerEvent.MSPOINTER_TYPE_TOUCH&&a._releasePointerCapture(this._domElement,e.pointerId)},_pointerUpHandler:function(e){if(!this.disabled&&this._mousedown){e=e.detail.originalEvent,e.preventDefault();var t=this._trackElement.getBoundingClientRect(),n=this._thumbElement.getBoundingClientRect(),i="rtl"===a._getComputedStyle(this._domElement).direction;if(this._dragging){var r=t.width-n.width;this.checked=i?this._dragX<r/2:this._dragX>=r/2,this._dragging=!1,a.removeClass(this._domElement,b)}else this.checked=!this.checked;this._resetPressedState()}},_pointerMoveHandler:function(e){if(!this.disabled&&this._mousedown){e=e.detail.originalEvent,e.preventDefault();var t=this._trackElement.getBoundingClientRect(),n=e.pageX-t.left;if(!(n>t.width)){var i=this._thumbElement.getBoundingClientRect(),r=t.width-i.width-6;this._dragX=Math.min(r,n-i.width/2),this._dragX=Math.max(2,this._dragX),!this._dragging&&Math.abs(n-this._dragXStart)>3&&(this._dragging=!0,a.addClass(this._domElement,b)),this._thumbElement.style.left=this._dragX+"px"}}},_resetPressedState:function(){this._mousedown=!1,this._thumbElement.style.left="",a.removeClass(this._domElement,C),a._globalListener.removeEventListener(this._domElement,"pointermove",this._boundPointerMove,!0),a._globalListener.removeEventListener(this._domElement,"pointerup",this._boundPointerUp,!0)}});return t.Class.mix(I,s.DOMEventMixin),I})})}),i("require-style!less/styles-semanticzoom",[],function(){}),i("require-style!less/colors-semanticzoom",[],function(){}),i("WinJS/Controls/SemanticZoom",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Animations/_TransitionAnimation","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_ElementListUtilities","../Utilities/_Hoverable","./ElementResizeInstrument","require-style!less/styles-semanticzoom","require-style!less/colors-semanticzoom"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_){"use strict";t.Namespace.define("WinJS.UI",{SemanticZoom:t.Namespace._lazy(function(){function o(e){return e}function g(e,t,n){return e+" "+l._animationTimeAdjustment(t)+"s "+n+" "+l._libraryDelay+"ms"}function v(){return g(Y.cssName,U,"ease-in-out")+", "+g("opacity",H,"ease-in-out")}function y(){return g(Y.cssName,j,"ease-in-out")+", "+g("opacity",W,"ease-in-out")}function b(){return g(Y.cssName,J,G)}function C(){return g(Y.cssName,K,G)}function w(e,t){return p.convertToPixels(e,t)}function I(e,t){l.isAnimationEnabled()&&(e.style[Y.scriptName]="scale("+t+")")}function S(e){var t=e[0].target&&e[0].target.winControl;t&&t instanceof ae&&t._onPropertyChanged()}var E=n._browserStyleEquivalents,x={get invalidZoomFactor(){return"Invalid zoomFactor"}},P="win-semanticzoom-button",k="win-semanticzoom-button-location",T=3e3,M=8,A="win-semanticzoom",O="win-semanticzoom-zoomedinview",D="win-semanticzoom-zoomedoutview",L="zoomchanged",B=1.05,R=.65,N=.8,F=.2,z=4096,H=.333,W=.333,U=.333,j=.333,V=1e3*H,q=50,J=.333,K=.333,G="cubic-bezier(0.1,0.9,0.2,1)",Y=E.transform,X=E.transition.scriptName,Z=2,Q=.2,$=.45,ee=1e3,te=50,ne={none:0,zoomedIn:1,zoomedOut:2},ie=p._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",re=p._MSPointerEvent.MSPOINTER_TYPE_PEN||"pen",oe=p._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",se={x:0,y:0},ae=t.Class.define(function(t,r){this._disposed=!1;var o=this,s=n.isPhone;this._element=t,this._element.winControl=this,p.addClass(this._element,"win-disposable"),p.addClass(this._element,A),this._element.setAttribute("role","ms-semanticzoomcontainer");var a=this._element.getAttribute("aria-label");if(a||this._element.setAttribute("aria-label",""),r=r||{},this._zoomedOut=!!r.zoomedOut||!!r.initiallyZoomedOut||!1,this._enableButton=!s,s||void 0===r.enableButton||(this._enableButton=!!r.enableButton),this._element.setAttribute("aria-checked",this._zoomedOut.toString()),this._zoomFactor=p._clamp(r.zoomFactor,F,N,R),this.zoomedInItem=r.zoomedInItem,this.zoomedOutItem=r.zoomedOutItem,n.validation&&r._zoomFactor&&r._zoomFactor!==this._zoomFactor)throw new i("WinJS.UI.SemanticZoom.InvalidZoomFactor",x.invalidZoomFactor);this._locked=!!r.locked,this._zoomInProgress=!1,this._isBouncingIn=!1,this._isBouncing=!1,this._zooming=!1,this._aligning=!1,this._gesturing=!1,this._gestureEnding=!1,this._buttonShown=!1,this._shouldFakeTouchCancel="TouchEvent"in e,this._initialize(),this._configure(),this._onResizeBound=this._onResize.bind(this),this._elementResizeInstrument=new _._ElementResizeInstrument,this._element.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._onResizeBound),p._resizeNotifier.subscribe(this._element,this._onResizeBound);var l=e.document.body.contains(this._element);l&&this._elementResizeInstrument.addedToDom(),p._addInsertedNotifier(this._element);var u=!0;this._element.addEventListener("WinJSNodeInserted",function(e){u?(u=!1,l||(o._elementResizeInstrument.addedToDom(),o._onResizeBound())):o._onResizeBound()},!1),new p._MutationObserver(S).observe(this._element,{attributes:!0,attributeFilter:["aria-checked"]}),s||(this._element.addEventListener("wheel",this._onWheel.bind(this),!0),this._element.addEventListener("mousewheel",this._onMouseWheel.bind(this),!0),this._element.addEventListener("keydown",this._onKeyDown.bind(this),!0),p._addEventListener(this._element,"pointerdown",this._onPointerDown.bind(this),!0),p._addEventListener(this._element,"pointermove",this._onPointerMove.bind(this),!0),p._addEventListener(this._element,"pointerout",this._onPointerOut.bind(this),!0),p._addEventListener(this._element,"pointercancel",this._onPointerCancel.bind(this),!0),p._addEventListener(this._element,"pointerup",this._onPointerUp.bind(this),!1),this._hiddenElement.addEventListener("gotpointercapture",this._onGotPointerCapture.bind(this),!1),this._hiddenElement.addEventListener("lostpointercapture",this._onLostPointerCapture.bind(this),!1),this._element.addEventListener("click",this._onClick.bind(this),!0),this._canvasIn.addEventListener(n._browserEventEquivalents.transitionEnd,this._onCanvasTransitionEnd.bind(this),!1),this._canvasOut.addEventListener(n._browserEventEquivalents.transitionEnd,this._onCanvasTransitionEnd.bind(this),!1),this._element.addEventListener("MSContentZoom",this._onMSContentZoom.bind(this),!0),this._resetPointerRecords()),this._onResizeImpl(),d._setOptions(this,r,!0),o._setVisibility()},{element:{get:function(){return this._element}},enableButton:{get:function(){return this._enableButton},set:function(e){var t=!!e;this._enableButton===t||n.isPhone||(this._enableButton=t,t?this._createSemanticZoomButton():this._removeSemanticZoomButton())}},zoomedOut:{get:function(){return this._zoomedOut},set:function(e){this._zoom(!!e,{x:.5*this._sezoClientWidth,y:.5*this._sezoClientHeight},!1,!1,this._zoomedOut&&n.isPhone)}},zoomFactor:{get:function(){return this._zoomFactor},set:function(e){var t=this._zoomFactor,n=p._clamp(e,F,N,R);t!==n&&(this._zoomFactor=n,this.forceLayout())}},locked:{get:function(){return this._locked},set:function(e){this._locked=!!e,e?this._hideSemanticZoomButton():this._displayButton()}},zoomedInItem:{get:function(){return this._zoomedInItem},set:function(e){this._zoomedInItem=e||o}},zoomedOutItem:{get:function(){return this._zoomedOutItem},set:function(e){this._zoomedOutItem=e||o}},dispose:function(){this._disposed||(this._disposed=!0,this._elementResizeInstrument.dispose(),p._resizeNotifier.unsubscribe(this._element,this._onResizeBound),h._disposeElement(this._elementIn),h._disposeElement(this._elementOut),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer))},forceLayout:function(){this._onResizeImpl()},_initialize:function(){var t=m.children(this._element);this._elementIn=t[0],this._elementOut=t[1],this._elementIn.style.height=this._elementOut.style.height=this._element.offsetHeight+"px",u.processAll(this._elementIn),u.processAll(this._elementOut),this._viewIn=this._elementIn.winControl.zoomableView,this._viewOut=this._elementOut.winControl.zoomableView,this._element.removeChild(this._elementOut),this._element.removeChild(this._elementIn),this._element.innerHTML="",this._cropViewport=e.document.createElement("div"),this._element.appendChild(this._cropViewport),this._viewportIn=e.document.createElement("div"),this._opticalViewportIn=e.document.createElement("div"),this._viewportOut=e.document.createElement("div"),this._opticalViewportOut=e.document.createElement("div"),this._opticalViewportIn.appendChild(this._viewportIn),this._opticalViewportOut.appendChild(this._viewportOut),this._cropViewport.appendChild(this._opticalViewportIn),this._cropViewport.appendChild(this._opticalViewportOut),this._canvasIn=e.document.createElement("div"),this._canvasOut=e.document.createElement("div"),this._viewportIn.appendChild(this._canvasIn),this._viewportOut.appendChild(this._canvasOut),this._canvasIn.appendChild(this._elementIn),this._canvasOut.appendChild(this._elementOut),this._enableButton&&this._createSemanticZoomButton(),this._hiddenElement=e.document.createElement("div"),this._hiddenElement.tabIndex=-1,this._hiddenElement.visibility="hidden",this._hiddenElement.setAttribute("aria-hidden","true"),this._element.appendChild(this._hiddenElement),p.addClass(this._elementIn,O),p.addClass(this._elementOut,D),this._setLayout(this._element,"relative","hidden"),this._setLayout(this._cropViewport,"absolute","hidden"),this._setLayout(this._opticalViewportIn,"absolute","auto"),this._setLayout(this._opticalViewportOut,"absolute","auto"),this._setLayout(this._viewportIn,"absolute","hidden"),this._setLayout(this._viewportOut,"absolute","hidden"),this._setLayout(this._canvasIn,"absolute","hidden"),this._setLayout(this._canvasOut,"absolute","hidden"),this._setupOpticalViewport(this._opticalViewportIn),this._setupOpticalViewport(this._opticalViewportOut),this._viewportIn.style["-ms-overflow-style"]="-ms-autohiding-scrollbar",this._viewportOut.style["-ms-overflow-style"]="-ms-autohiding-scrollbar",this._elementIn.style.position="absolute",this._elementOut.style.position="absolute"},_createSemanticZoomButton:function(){this._sezoButton=e.document.createElement("button"),this._sezoButton.setAttribute("type","button"),this._sezoButton.className=P+" "+k+" win-button",this._sezoButton.tabIndex=-1,this._sezoButton.style.visibility="hidden",this._sezoButton.setAttribute("aria-hidden",!0),this._element.appendChild(this._sezoButton),this._sezoButton.addEventListener("click",this._onSeZoButtonZoomOutClick.bind(this),!1),this._element.addEventListener("scroll",this._onSeZoChildrenScroll.bind(this),!0),p._addEventListener(this._element,"pointermove",this._onPenHover.bind(this),!1)},_removeSemanticZoomButton:function(){this._sezoButton&&(this._element.removeChild(this._sezoButton),this._sezoButton=null)},_configure:function(){var e=this._viewIn.getPanAxis(),t=this._viewOut.getPanAxis(),i=n.isPhone;if(this._pansHorizontallyIn="horizontal"===e||"both"===e,this._pansVerticallyIn="vertical"===e||"both"===e,this._pansHorizontallyOut="horizontal"===t||"both"===t,this._pansVerticallyOut="vertical"===t||"both"===t,!this._zoomInProgress){var r=1/this._zoomFactor-1,o=B-1;this._setLayout(this._elementIn,"absolute","visible"),this._setLayout(this._elementOut,"absolute","visible"),this._viewIn.configureForZoom(!1,!this._zoomedOut,this._zoomFromCurrent.bind(this,!0),r),this._viewOut.configureForZoom(!0,this._zoomedOut,this._zoomFromCurrent.bind(this,!1),o),this._pinching=!1,this._pinchGesture=0,this._canvasLeftIn=0,this._canvasTopIn=0,this._canvasLeftOut=0,this._canvasTopOut=0,i||(this._zoomedOut?I(this._canvasIn,this._zoomFactor):I(this._canvasOut,1/this._zoomFactor));var s=this._opticalViewportIn.style,a=this._opticalViewportOut.style,u=this._canvasIn.style,c=this._canvasOut.style;u.opacity=this._zoomedOut&&!i?0:1,c.opacity=this._zoomedOut?1:0,i&&(u.zIndex=1,c.zIndex=2),l.isAnimationEnabled()&&!i&&(s[E["transition-property"].scriptName]=Y.cssName,s[E["transition-duration"].scriptName]="0s",s[E["transition-timing-function"].scriptName]="linear",a[E["transition-property"].scriptName]=Y.cssName,a[E["transition-duration"].scriptName]="0s",a[E["transition-timing-function"].scriptName]="linear")}},_onPropertyChanged:function(){var e=this._element.getAttribute("aria-checked"),t="true"===e;this._zoomedOut!==t&&(this.zoomedOut=t)},_onResizeImpl:function(){this._resizing=this._resizing||0,this._resizing++;try{var e=function(e,t,n,i,r){var o=e.style;o.left=t+"px",o.top=n+"px",o.width=i+"px",o.height=r+"px"},t=p._getComputedStyle(this._element,null),n=parseFloat(t.width),i=parseFloat(t.height),r=w(this._element,t.paddingLeft),o=w(this._element,t.paddingRight),s=w(this._element,t.paddingTop),a=w(this._element,t.paddingBottom),l=n-r-o,u=i-s-a,c=1/this._zoomFactor;if(this._viewportWidth===l&&this._viewportHeight===u)return;this._sezoClientHeight=i,this._sezoClientWidth=n,this._viewportWidth=l,this._viewportHeight=u,this._configure();var d=2*c-1,h=Math.min(z,(this._pansHorizontallyIn?d:1)*l),m=Math.min(z,(this._pansVerticallyIn?d:1)*u);this._canvasLeftIn=.5*(h-l),this._canvasTopIn=.5*(m-u),e(this._cropViewport,r,s,l,u),e(this._viewportIn,0,0,l,u),e(this._opticalViewportIn,0,0,l,u),e(this._canvasIn,-this._canvasLeftIn,-this._canvasTopIn,h,m),e(this._elementIn,this._canvasLeftIn,this._canvasTopIn,l,u);var f=2*B-1,_=(this._pansHorizontallyOut?f:1)*l,g=(this._pansVerticallyOut?f:1)*u;this._canvasLeftOut=.5*(_-l),this._canvasTopOut=.5*(g-u),e(this._viewportOut,0,0,l,u),e(this._opticalViewportOut,0,0,l,u),e(this._canvasOut,-this._canvasLeftOut,-this._canvasTopOut,_,g),e(this._elementOut,this._canvasLeftOut,this._canvasTopOut,l,u)}finally{this._resizing--}},_onResize:function(){this._resizing||this._onResizeImpl()},_onMouseMove:function(e){return this._zooming||!this._lastMouseX&&!this._lastMouseY||e.screenX===this._lastMouseX&&e.screenY===this._lastMouseY?(this._lastMouseX=e.screenX,void(this._lastMouseY=e.screenY)):void(Math.abs(e.screenX-this._lastMouseX)<=M&&Math.abs(e.screenY-this._lastMouseY)<=M||(this._lastMouseX=e.screenX,this._lastMouseY=e.screenY,this._displayButton()))},_displayButton:function(){if(f.isHoverable){e.clearTimeout(this._dismissButtonTimer),this._showSemanticZoomButton();var t=this;this._dismissButtonTimer=e.setTimeout(function(){t._hideSemanticZoomButton()},l._animationTimeAdjustment(T))}},_showSemanticZoomButton:function(){this._disposed||this._buttonShown||!this._sezoButton||this._zoomedOut||this._locked||(a.fadeIn(this._sezoButton),this._sezoButton.style.visibility="visible",this._buttonShown=!0)},_hideSemanticZoomButton:function(e){if(!this._disposed&&this._buttonShown&&this._sezoButton){if(e)this._sezoButton.style.visibility="hidden";else{var t=this;a.fadeOut(this._sezoButton).then(function(){t._sezoButton.style.visibility="hidden"})}this._buttonShown=!1}},_onSeZoChildrenScroll:function(e){e.target!==this.element&&this._hideSemanticZoomButton(!0)},_onWheel:function(e){e.ctrlKey&&(this._zoom(e.deltaY>0,this._getPointerLocation(e)),e.stopPropagation(),e.preventDefault())},_onMouseWheel:function(e){e.ctrlKey&&(this._zoom(e.wheelDelta<0,this._getPointerLocation(e)),e.stopPropagation(),e.preventDefault())},_onPenHover:function(e){e.pointerType===re&&0===e.buttons&&this._displayButton()},_onSeZoButtonZoomOutClick:function(){this._hideSemanticZoomButton(),this._zoom(!0,{x:.5*this._sezoClientWidth,y:.5*this._sezoClientHeight},!1)},_onKeyDown:function(e){var t=!1;if(e.ctrlKey){var n=p.Key;switch(e.keyCode){case n.add:case n.equal:case 61:this._zoom(!1),t=!0;break;case n.subtract:case n.dash:case 173:this._zoom(!0),t=!0}}t&&(e.stopPropagation(),e.preventDefault())},_createPointerRecord:function(e,t){var n=this._getPointerLocation(e),i={};return i.startX=i.currentX=n.x,i.startY=i.currentY=n.y,i.fireCancelOnPinch=t,this._pointerRecords[e.pointerId]=i,this._pointerCount=Object.keys(this._pointerRecords).length,i},_deletePointerRecord:function(e){var t=this._pointerRecords[e];return delete this._pointerRecords[e],this._pointerCount=Object.keys(this._pointerRecords).length,2!==this._pointerCount&&(this._pinching=!1),t},_fakeCancelOnPointer:function(t){var n=e.document.createEvent("UIEvent");n.initUIEvent("touchcancel",!0,!0,e,0),n.touches=t.touches,n.targetTouches=t.targetTouches,n.changedTouches=[t._currentTouch],n._fakedBySemanticZoom=!0,t.target.dispatchEvent(n)},_handlePointerDown:function(e){this._createPointerRecord(e,!1);for(var t=Object.keys(this._pointerRecords),n=0,i=t.length;i>n;n++)try{p._setPointerCapture(this._hiddenElement,t[n]||0)}catch(r){return void this._resetPointerRecords()}e.stopImmediatePropagation(),e.preventDefault()},_handleFirstPointerDown:function(e){this._resetPointerRecords(),this._createPointerRecord(e,this._shouldFakeTouchCancel),this._startedZoomedOut=this._zoomedOut},_onClick:function(e){e.target!==this._element&&this._isBouncing&&e.stopImmediatePropagation()},_onPointerDown:function(e){e.pointerType===ie&&(0===this._pointerCount?this._handleFirstPointerDown(e):this._handlePointerDown(e))},_onPointerMove:function(e){function t(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}function n(e,t){return{x:.5*(e.currentX+t.currentX)|0,y:.5*(e.currentY+t.currentY)|0}}if(e.pointerType===oe||e.pointerType===re)return void this._onMouseMove(e);if(e.pointerType===ie){var i=this._pointerRecords[e.pointerId],r=this._getPointerLocation(e);if(i){if(i.currentX=r.x,i.currentY=r.y,2===this._pointerCount){this._pinching=!0;var o=Object.keys(this._pointerRecords),a=this._pointerRecords[o[0]],l=this._pointerRecords[o[1]];this._currentMidPoint=n(a,l);var u=t(a.currentX,a.currentY,l.currentX,l.currentY),c=this,d=function(e){var t=e?ne.zoomedOut:ne.zoomedIn,i=e?c._pinchedDirection===ne.zoomedIn&&!c._zoomingOut:c._pinchedDirection===ne.zoomedOut&&c._zoomingOut,r=e?!c._zoomedOut:c._zoomedOut;if(c._pinchedDirection===ne.none)r?(c._isBouncingIn=!1,c._zoom(e,n(a,l),!0),c._pinchedDirection=t):c._isBouncingIn||c._playBounce(!0,n(a,l));else if(i){var o=c._lastPinchDistance/c._lastPinchStartDistance,s=c._lastLastPinchDistance/c._lastPinchDistance;(e&&o>Q||!e&&s>$)&&(c._zoom(e,n(a,l),!0),c._pinchedDirection=t)}};this._updatePinchDistanceRecords(u),this._pinchDistanceCount>=Z&&(this._zooming||this._isBouncing||(s("WinJS.UI.SemanticZoom:EndPinchDetection,info"),d(this._lastPinchDirection===ne.zoomedOut)))}else this._pointerCount>2&&this._resetPinchDistanceRecords();this._pointerCount>=2&&(i.fireCancelOnPinch&&(this._fakeCancelOnPointer(e,i),i.fireCancelOnPinch=!1),e.stopImmediatePropagation(),e.preventDefault()),2!==this._pointerCount&&this._isBouncingIn&&this._playBounce(!1)}}},_onPointerOut:function(e){e.pointerType===ie&&e.target===this._element&&this._completePointerUp(e,!1)},_onPointerUp:function(e){this._releasePointerCapture(e),this._completePointerUp(e,!0),this._completeZoomingIfTimeout()},_onPointerCancel:function(e){e._fakedBySemanticZoom||(this._releasePointerCapture(e),this._completePointerUp(e,!1),this._completeZoomingIfTimeout())},_onGotPointerCapture:function(e){var t=this._pointerRecords[e.pointerId];t&&(t.dirty=!1)},_onLostPointerCapture:function(e){var t=this._pointerRecords[e.pointerId];if(t){t.dirty=!0;var n=this;c.timeout(te).then(function(){t.dirty&&n._completePointerUp(e,!1)})}},_onMSContentZoom:function(e){var t=e.target;if(t===this._opticalViewportIn||t===this._opticalViewportOut){var n=t.msContentZoomFactor<.995,i=t.msContentZoomFactor>1.005;!n||this._zoomedOut||this._zoomingOut?i&&(this._zoomedOut||this._zoomingOut)&&(this.zoomedOut=!1):this.zoomedOut=!0}},_updatePinchDistanceRecords:function(e){function t(t){n._lastPinchDirection===t?n._pinchDistanceCount++:(n._pinchGesture++,n._pinchDistanceCount=0,n._lastPinchStartDistance=e),n._lastPinchDirection=t,n._lastPinchDistance=e,n._lastLastPinchDistance=n._lastPinchDistance}var n=this;-1===this._lastPinchDistance?(s("WinJS.UI.SemanticZoom:StartPinchDetection,info"),this._lastPinchDistance=e):this._lastPinchDistance!==e&&t(this._lastPinchDistance>e?ne.zoomedOut:ne.zoomedIn)},_zoomFromCurrent:function(e){this._zoom(e,null,!1,!0)},_zoom:function(e,t,i,r,o){if(s("WinJS.UI.SemanticZoom:StartZoom(zoomOut="+e+"),info"),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._hideSemanticZoomButton(),this._resetPinchDistanceRecords(),!this._locked&&!this._gestureEnding)if(this._zoomInProgress){if(this._gesturing===!i)return;e!==this._zoomingOut&&this._startAnimations(e)}else if(e!==this._zoomedOut){this._zooming=!0,this._aligning=!0,this._gesturing=!!i,t&&(e?this._viewIn:this._viewOut).setCurrentItem(t.x,t.y),this._zoomInProgress=!0,(e?this._opticalViewportOut:this._opticalViewportIn).style.visibility="visible",e&&n.isPhone&&(this._canvasOut.style.opacity=1);var a=this._viewIn.beginZoom(),l=this._viewOut.beginZoom(),u=null;if((a||l)&&n.isPhone&&(u=c.join([a,l])),r&&!o){var d=this;(e?this._viewIn:this._viewOut).getCurrentItem().then(function(t){var n=t.position;d._prepareForZoom(e,{x:d._rtl()?d._sezoClientWidth-n.left-.5*n.width:n.left+.5*n.width,y:n.top+.5*n.height},c.wrap(t),u)})}else this._prepareForZoom(e,t||{},null,u,o)}},_prepareForZoom:function(e,t,n,i,r){function o(e,t){a._canvasIn.style[E["transform-origin"].scriptName]=a._canvasLeftIn+l-e.x+"px "+(a._canvasTopIn+u-e.y)+"px",a._canvasOut.style[E["transform-origin"].scriptName]=a._canvasLeftOut+l-t.x+"px "+(a._canvasTopOut+u-t.y)+"px"}s("WinJS.UI.SemanticZoom:prepareForZoom,StartTM");var a=this,l=t.x,u=t.y;"number"==typeof l&&this._pansHorizontallyIn&&this._pansHorizontallyOut||(l=.5*this._sezoClientWidth),"number"==typeof u&&this._pansVerticallyIn&&this._pansVerticallyOut||(u=.5*this._sezoClientHeight),o(se,se),r?this._aligning=!1:this._alignViewsPromise=this._alignViews(e,l,u,n).then(function(){a._aligning=!1,a._gestureEnding=!1,a._alignViewsPromise=null,a._zooming||a._gesturing||a._completeZoom()}),this._zoomingOut=e,p._getComputedStyle(this._canvasIn).opacity,p._getComputedStyle(this._canvasOut).opacity,s("WinJS.UI.SemanticZoom:prepareForZoom,StopTM"),this._startAnimations(e,i)},_alignViews:function(e,t,n,i){var r=1-this._zoomFactor,o=this._rtl(),s=r*(o?this._viewportWidth-t:t),a=r*n,l=this;if(e){var u=i||this._viewIn.getCurrentItem();if(u)return u.then(function(e){var t=e.position,n={left:t.left*l._zoomFactor+s,top:t.top*l._zoomFactor+a,width:t.width*l._zoomFactor,height:t.height*l._zoomFactor};return l._viewOut.positionItem(l._zoomedOutItem(e.item),n)})}else{var d=i||this._viewOut.getCurrentItem();if(d)return d.then(function(e){var t=e.position,n={left:(t.left-s)/l._zoomFactor,top:(t.top-a)/l._zoomFactor,width:t.width/l._zoomFactor,height:t.height/l._zoomFactor};return l._viewIn.positionItem(l._zoomedInItem(e.item),n)})}return new c(function(e){e({x:0,y:0})})},_startAnimations:function(e,t){this._zoomingOut=e;var i=n.isPhone;if(l.isAnimationEnabled()&&!i&&(s("WinJS.UI.SemanticZoom:ZoomAnimation,StartTM"),this._canvasIn.style[X]=e?v():y(),this._canvasOut.style[X]=e?y():v()),i||(I(this._canvasIn,e?this._zoomFactor:1),I(this._canvasOut,e?1:1/this._zoomFactor)),this._canvasIn.style.opacity=e&&!i?0:1,(!i||e)&&(this._canvasOut.style.opacity=e?1:0),l.isAnimationEnabled())if(t){var r=this,o=function(){r._canvasIn.style[Y.scriptName]="",r._canvasOut.style[Y.scriptName]="",r._onZoomAnimationComplete()};t.then(o,o)}else this.setTimeoutAfterTTFF(this._onZoomAnimationComplete.bind(this),l._animationTimeAdjustment(V));else this._zooming=!1,this._canvasIn.style[Y.scriptName]="",this._canvasOut.style[Y.scriptName]="",this._completeZoom()},_onBounceAnimationComplete:function(){this._isBouncingIn||this._disposed||this._completeZoom()},_onZoomAnimationComplete:function(){s("WinJS.UI.SemanticZoom:ZoomAnimation,StopTM"),this._disposed||(this._zooming=!1,this._aligning||this._gesturing||this._gestureEnding||this._completeZoom())},_onCanvasTransitionEnd:function(e){return this._disposed?void 0:e.target!==this._canvasOut&&e.target!==this._canvasIn||!this._isBouncing?void(e.target===this._canvasIn&&e.propertyName===Y.cssName&&this._onZoomAnimationComplete()):void this._onBounceAnimationComplete()},_clearTimeout:function(t){t&&e.clearTimeout(t)},_completePointerUp:function(e,t){if(!this._disposed){var n=e.pointerId,i=this._pointerRecords[n];if(i&&(this._deletePointerRecord(n),this._isBouncingIn&&this._playBounce(!1),t&&this._pinchedDirection!==ne.none&&e.stopImmediatePropagation(),0===this._pointerCount)){if(1===this._pinchGesture&&!this._zooming&&this._lastPinchDirection!==ne.none&&this._pinchDistanceCount<Z)return this._zoom(this._lastPinchDirection===ne.zoomedOut,this._currentMidPoint,!1),this._pinchGesture=0,void this._attemptRecordReset();this._pinchedDirection!==ne.none&&(this._gesturing=!1,this._aligning||this._zooming||this._completeZoom()),this._pinchGesture=0,this._attemptRecordReset()}}},setTimeoutAfterTTFF:function(t,n){var i=this;i._TTFFTimer=e.setTimeout(function(){this._disposed||(i._TTFFTimer=e.setTimeout(t,n))},q)},_completeZoomingIfTimeout:function(){if(0===this._pointerCount){var t=this;(this._zoomInProgress||this._isBouncing)&&(t._completeZoomTimer=e.setTimeout(function(){t._completeZoom()},l._animationTimeAdjustment(ee)))}},_completeZoom:function(){if(!this._disposed){if(this._isBouncing)return this._zoomedOut?this._viewOut.endZoom(!0):this._viewIn.endZoom(!0),void(this._isBouncing=!1);if(this._zoomInProgress){s("WinJS.UI.SemanticZoom:CompleteZoom,info"),this._aligning=!1,this._alignViewsPromise&&this._alignViewsPromise.cancel(),this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._gestureEnding=!1,this[this._zoomingOut?"_opticalViewportOut":"_opticalViewportIn"].msContentZoomFactor=1,this._viewIn.endZoom(!this._zoomingOut),this._viewOut.endZoom(this._zoomingOut),this._canvasIn.style.opacity=this._zoomingOut&&!n.isPhone?0:1,this._canvasOut.style.opacity=this._zoomingOut?1:0,this._zoomInProgress=!1;var t=!1;if(this._zoomingOut!==this._zoomedOut&&(this._zoomedOut=!!this._zoomingOut,this._element.setAttribute("aria-checked",this._zoomedOut.toString()),t=!0),this._setVisibility(),t){var i=e.document.createEvent("CustomEvent");i.initCustomEvent(L,!0,!0,this._zoomedOut),this._element.dispatchEvent(i),this._isActive&&p._setActive(this._zoomedOut?this._elementOut:this._elementIn)}s("WinJS.UI.SemanticZoom:CompleteZoom_Custom,info")}}},_isActive:function(){var t=e.document.activeElement;return this._element===t||this._element.contains(t)},_setLayout:function(e,t,n){var i=e.style;i.position=t,i.overflow=n},_setupOpticalViewport:function(e){e.style["-ms-overflow-style"]="none",n.isPhone||(e.style["-ms-content-zooming"]="zoom",e.style["-ms-content-zoom-limit-min"]="99%",e.style["-ms-content-zoom-limit-max"]="101%",e.style["-ms-content-zoom-snap-points"]="snapList(100%)",e.style["-ms-content-zoom-snap-type"]="mandatory")},_setVisibility:function(){function e(e,t){e.style.visibility=t?"visible":"hidden"}e(this._opticalViewportIn,!this._zoomedOut||n.isPhone),e(this._opticalViewportOut,this._zoomedOut),this._opticalViewportIn.setAttribute("aria-hidden",!!this._zoomedOut),this._opticalViewportOut.setAttribute("aria-hidden",!this._zoomedOut)},_resetPointerRecords:function(){this._pinchedDirection=ne.none,this._pointerCount=0,this._pointerRecords={},this._resetPinchDistanceRecords()},_releasePointerCapture:function(e){var t=e.pointerId;try{p._releasePointerCapture(this._hiddenElement,t)}catch(n){}},_attemptRecordReset:function(){this._recordResetPromise&&this._recordResetPromise.cancel();var e=this;this._recordResetPromise=c.timeout(te).then(function(){0===e._pointerCount&&(e._resetPointerRecords(),e._recordResetPromise=null)})},_resetPinchDistanceRecords:function(){this._lastPinchDirection=ne.none,this._lastPinchDistance=-1,this._lastLastPinchDistance=-1,this._pinchDistanceCount=0,this._currentMidPoint=null},_getPointerLocation:function(e){var t={left:0,top:0};try{t=this._element.getBoundingClientRect()}catch(n){}var i=p._getComputedStyle(this._element,null),r=w(this._element,i.paddingLeft),o=w(this._element,i.paddingTop),s=w(this._element,i.borderLeftWidth);return{x:+e.clientX===e.clientX?e.clientX-t.left-r-s:0,y:+e.clientY===e.clientY?e.clientY-t.top-o-o:0}},_playBounce:function(e,t){if(l.isAnimationEnabled()&&this._isBouncingIn!==e){this._clearTimeout(this._completeZoomTimer),this._clearTimeout(this._TTFFTimer),this._isBouncing=!0,this._isBouncingIn=e,e?this._bounceCenter=t:this._aligned=!0;var n=this._zoomedOut?this._canvasOut:this._canvasIn,i=this._zoomedOut?this._canvasLeftOut:this._canvasLeftIn,r=this._zoomedOut?this._canvasTopOut:this._canvasTopIn;n.style[E["transform-origin"].scriptName]=i+this._bounceCenter.x+"px "+(r+this._bounceCenter.y)+"px",n.style[X]=e?b():C(),this._zoomedOut?this._viewOut.beginZoom():this._viewIn.beginZoom();var o=e?this._zoomedOut?2-B:B:1;I(n,o),this.setTimeoutAfterTTFF(this._onBounceAnimationComplete.bind(this),l._animationTimeAdjustment(V))}},_rtl:function(){return"rtl"===p._getComputedStyle(this._element,null).direction},_pinching:{set:function(e){this._viewIn.pinching=e,this._viewOut.pinching=e}}});return t.Class.mix(ae,r.createEventProperties("zoomchanged")),t.Class.mix(ae,d.DOMEventMixin),ae})})}),i("WinJS/Controls/Pivot/_Constants",["require","exports"],function(e,t){t._ClassNames={pivot:"win-pivot",pivotCustomHeaders:"win-pivot-customheaders",pivotLocked:"win-pivot-locked",pivotTitle:"win-pivot-title",pivotHeaderArea:"win-pivot-header-area",pivotHeaderLeftCustom:"win-pivot-header-leftcustom",pivotHeaderRightCustom:"win-pivot-header-rightcustom",pivotHeaderItems:"win-pivot-header-items",pivotHeaders:"win-pivot-headers",pivotHeader:"win-pivot-header",pivotHeaderSelected:"win-pivot-header-selected",pivotViewport:"win-pivot-viewport",pivotSurface:"win-pivot-surface",pivotNoSnap:"win-pivot-nosnap",pivotNavButton:"win-pivot-navbutton",pivotNavButtonPrev:"win-pivot-navbutton-prev",pivotNavButtonNext:"win-pivot-navbutton-next",pivotShowNavButtons:"win-pivot-shownavbuttons",pivotInputTypeMouse:"win-pivot-mouse",pivotInputTypeTouch:"win-pivot-touch",pivotDisableContentSwipeNavigation:"win-pivot-disablecontentswipenavigation"}}),i("WinJS/Controls/Pivot/_Item",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../ControlProcessor","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","./_Constants"],function(e,t,n,i,r,o,s,a,l,u,c,d,h){
"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{PivotItem:n.Namespace._lazy(function(){var e={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},o=n.Class.define(function(n,i){if(n=n||t.document.createElement("DIV"),i=i||{},n.winControl)throw new r("WinJS.UI.PivotItem.DuplicateConstruction",e.duplicateConstruction);n.winControl=this,this._element=n,d.addClass(this.element,o._ClassName.pivotItem),d.addClass(this.element,"win-disposable"),this._element.setAttribute("role","tabpanel"),this._contentElement=t.document.createElement("DIV"),this._contentElement.className=o._ClassName.pivotItemContent,n.appendChild(this._contentElement);for(var a=this.element.firstChild;a!==this._contentElement;){var l=a.nextSibling;this._contentElement.appendChild(a),a=l}this._processors=[s.processAll],u.setOptions(this,i)},{element:{get:function(){return this._element}},contentElement:{get:function(){return this._contentElement}},header:{get:function(){return this._header},set:function(e){this._header=e,this._parentPivot&&this._parentPivot._headersState.handleHeaderChanged(this)}},_parentPivot:{get:function(){for(var e=this._element;e&&!d.hasClass(e,h._ClassNames.pivot);)e=e.parentNode;return e&&e.winControl}},_process:function(){var e=this;return this._processors&&this._processors.push(function(){return l.schedulePromiseAboveNormal()}),this._processed=(this._processors||[]).reduce(function(t,n){return t.then(function(){return n(e.contentElement)})},this._processed||a.as()),this._processors=null,this._processed},dispose:function(){this._disposed||(this._disposed=!0,this._processors=null,c.disposeSubTree(this.contentElement))}},{_ClassName:{pivotItem:"win-pivot-item",pivotItemContent:"win-pivot-item-content"},isDeclarativeControlContainer:i.markSupportedForProcessing(function(e,t){t!==s.processAll&&(e._processors=e._processors||[],e._processors.push(t),e._processed&&e._process())})});return o})})}),i("require-style!less/styles-pivot",[],function(){}),i("require-style!less/colors-pivot",[],function(){});var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};i("WinJS/Controls/Pivot/_Pivot",["require","exports","../../Core/_Global","../../Animations","../../BindingList","../../ControlProcessor","../../Promise","../../Scheduler","../../Core/_Base","../../Core/_BaseUtils","../../Utilities/_Control","../../Utilities/_Dispose","../ElementResizeInstrument","../../Utilities/_ElementUtilities","../../Core/_ErrorFromName","../../Core/_Events","../../Utilities/_Hoverable","../../Utilities/_KeyboardBehavior","../../Core/_Log","../../Core/_Resources","../../Animations/_TransitionAnimation","../../Core/_WriteProfilerMark","./_Constants"],function(e,t,n,i,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b,C,w,I){function S(e){var t=n.document.createTextNode("object"==typeof e.header?JSON.stringify(e.header):""+e.header);return t}g.isHoverable,e(["require-style!less/styles-pivot"]),e(["require-style!less/colors-pivot"]);var E={selectionChanged:"selectionchanged",itemAnimationStart:"itemanimationstart",itemAnimationEnd:"itemanimationend"},x={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get duplicateItem(){return b._getWinJSString("ui/duplicateItem").value},get invalidContent(){return"Invalid content: Pivot content must be made up of PivotItems."},get pivotAriaLabel(){return b._getWinJSString("ui/pivotAriaLabel").value},get pivotViewportAriaLabel(){return b._getWinJSString("ui/pivotViewportAriaLabel").value}},P=!!(m._supportsSnapPoints&&"inertiaDestinationX"in n.MSManipulationEvent.prototype),k=m._MSPointerEvent.MSPOINTER_TYPE_MOUSE||"mouse",T=m._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",M=m.Key,A=250,O=-1,D=function(){function e(e,t){var i=this;if(void 0===t&&(t={}),this._disposed=!1,this._firstLoad=!0,this._hidePivotItemAnimation=a.wrap(),this._loadPromise=a.wrap(),this._pendingRefresh=!1,this._selectedIndex=0,this._showPivotItemAnimation=a.wrap(),this._slideHeadersAnimation=a.wrap(),e=e||n.document.createElement("DIV"),e.winControl)throw new f("WinJS.UI.Pivot.DuplicateConstruction",x.duplicateConstruction);this._handleItemChanged=this._handleItemChanged.bind(this),this._handleItemInserted=this._handleItemInserted.bind(this),this._handleItemMoved=this._handleItemMoved.bind(this),this._handleItemRemoved=this._handleItemRemoved.bind(this),this._handleItemReload=this._handleItemReload.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._updatePointerType=this._updatePointerType.bind(this),this._id=e.id||m._uniqueID(e),this._writeProfilerMark("constructor,StartTM"),e.winControl=this,this._element=e,this._element.setAttribute("role","tablist"),this._element.getAttribute("aria-label")||this._element.setAttribute("aria-label",x.pivotAriaLabel),m.addClass(this.element,I._ClassNames.pivot),m.addClass(this.element,"win-disposable"),m._addEventListener(this.element,"pointerenter",this._updatePointerType),m._addEventListener(this.element,"pointerout",this._updatePointerType),this._titleElement=n.document.createElement("DIV"),this._titleElement.style.display="none",m.addClass(this._titleElement,I._ClassNames.pivotTitle),this._element.appendChild(this._titleElement),this._headerAreaElement=n.document.createElement("DIV"),m.addClass(this._headerAreaElement,I._ClassNames.pivotHeaderArea),this._element.appendChild(this._headerAreaElement),this._headerItemsElement=n.document.createElement("DIV"),m.addClass(this._headerItemsElement,I._ClassNames.pivotHeaderItems),this._headerAreaElement.appendChild(this._headerItemsElement),this._headerItemsElWidth=null,this._headersContainerElement=n.document.createElement("DIV"),this._headersContainerElement.tabIndex=0,m.addClass(this._headersContainerElement,I._ClassNames.pivotHeaders),this._headersContainerElement.addEventListener("keydown",this._headersKeyDown.bind(this)),m._addEventListener(this._headersContainerElement,"pointerenter",this._showNavButtons.bind(this)),m._addEventListener(this._headersContainerElement,"pointerout",this._hideNavButtons.bind(this)),this._headerItemsElement.appendChild(this._headersContainerElement),this._element.addEventListener("click",this._elementClickedHandler.bind(this)),this._winKeyboard=new v._WinKeyboard(this._headersContainerElement),this._customLeftHeader=n.document.createElement("DIV"),m.addClass(this._customLeftHeader,I._ClassNames.pivotHeaderLeftCustom),this._headerAreaElement.insertBefore(this._customLeftHeader,this._headerAreaElement.children[0]),this._customRightHeader=n.document.createElement("DIV"),m.addClass(this._customRightHeader,I._ClassNames.pivotHeaderRightCustom),this._headerAreaElement.appendChild(this._customRightHeader),this._viewportElement=n.document.createElement("DIV"),this._viewportElement.className=I._ClassNames.pivotViewport,this._element.appendChild(this._viewportElement),this._viewportElement.setAttribute("role","group"),this._viewportElement.setAttribute("aria-label",x.pivotViewportAriaLabel),this._elementResizeInstrument=new p._ElementResizeInstrument,this._element.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._resizeHandler),m._inDom(this._element).then(function(){i._disposed||i._elementResizeInstrument.addedToDom()}),m._resizeNotifier.subscribe(this.element,this._resizeHandler),this._viewportElWidth=null,this._surfaceElement=n.document.createElement("DIV"),this._surfaceElement.className=I._ClassNames.pivotSurface,this._viewportElement.appendChild(this._surfaceElement),this._headersState=new L(this),P?this._viewportElement.addEventListener("MSManipulationStateChanged",this._MSManipulationStateChangedHandler.bind(this)):(m.addClass(this.element,I._ClassNames.pivotNoSnap),m._addEventListener(this._element,"pointerdown",this._elementPointerDownHandler.bind(this)),m._addEventListener(this._element,"pointerup",this._elementPointerUpHandler.bind(this))),this._parse(),t=c._shallowCopy(t),t.items&&(this.items=t.items,delete t.items),d.setOptions(this,t),this._refresh(),this._writeProfilerMark("constructor,StopTM")}return Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customLeftHeader",{get:function(){return this._customLeftHeader.firstElementChild},set:function(e){m.empty(this._customLeftHeader),e?(this._customLeftHeader.appendChild(e),m.addClass(this._element,I._ClassNames.pivotCustomHeaders)):this._customLeftHeader.children.length||this._customRightHeader.childNodes.length||m.removeClass(this._element,I._ClassNames.pivotCustomHeaders),this.forceLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customRightHeader",{get:function(){return this._customRightHeader.firstElementChild},set:function(e){m.empty(this._customRightHeader),e?(this._customRightHeader.appendChild(e),m.addClass(this._element,I._ClassNames.pivotCustomHeaders)):this._customLeftHeader.children.length||this._customRightHeader.childNodes.length||m.removeClass(this._element,I._ClassNames.pivotCustomHeaders),this.forceLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locked",{get:function(){return m.hasClass(this.element,I._ClassNames.pivotLocked)},set:function(e){m[e?"addClass":"removeClass"](this.element,I._ClassNames.pivotLocked),e&&this._hideNavButtons()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._pendingItems?this._pendingItems:this._items},set:function(e){this._pendingItems=e,this._refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._titleElement.textContent},set:function(e){e?(this._titleElement.style.display="block",this._titleElement.textContent=e):(this._titleElement.style.display="none",this._titleElement.textContent="")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return 0===this.items.length?-1:this._selectedIndex},set:function(e){e>=0&&e<this.items.length&&(this._pendingRefresh?this._selectedIndex=e:this._loadItem(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this.items.getAt(this.selectedIndex)},set:function(e){var t=this.items.indexOf(e);-1!==t&&(this.selectedIndex=t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this._updateEvents(this._items,null),m._resizeNotifier.unsubscribe(this.element,this._resizeHandler),this._elementResizeInstrument.dispose(),this._headersState.exit(),h._disposeElement(this._headersContainerElement);for(var e=0,t=this.items.length;t>e;e++)this.items.getAt(e).dispose()}},e.prototype.forceLayout=function(){this._disposed||this._resizeHandler()},e.prototype._applyProperties=function(){function e(e){for(var t=0,n=e.items.length;n>t;t++){var i=e._items.getAt(t);if(i.element.parentNode===e._surfaceElement)throw new f("WinJS.UI.Pivot.DuplicateItem",x.duplicateItem);i.element.style.display="none",e._surfaceElement.appendChild(i.element)}}if(!this._disposed){if(this._pendingItems){for(this._updateEvents(this._items,this._pendingItems),this._items=this._pendingItems,this._pendingItems=null;this.element.firstElementChild!==this._titleElement;){var t=this.element.firstElementChild;t.parentNode.removeChild(t)}m.empty(this._surfaceElement)}e(this),this._rtl="rtl"===m._getComputedStyle(this._element,null).direction,this._headersState.refreshHeadersState(!0),this._pendingRefresh=!1,this._firstLoad=!0,this.selectedIndex=this._selectedIndex,this._firstLoad=!1,this._recenterViewport()}},e.prototype._parse=function(){for(var e=[],t=this.element.firstElementChild;t!==this._titleElement;){s.processAll(t);var n=t.winControl;if(!n)throw new f("WinJS.UI.Pivot.InvalidContent",x.invalidContent);e.push(n);var i=t.nextElementSibling;t=i}this.items=new o.List(e)},e.prototype._refresh=function(){this._pendingRefresh||(this._pendingRefresh=!0,l.schedule(this._applyProperties.bind(this),l.Priority.high))},e.prototype._resizeHandler=function(){if(!this._disposed&&!this._pendingRefresh){var e=this._getViewportWidth(),t=this._getHeaderItemsWidth();this._invalidateMeasures(),e!==this._getViewportWidth()||t!==this._getHeaderItemsWidth()?(y.log&&y.log("_resizeHandler, viewport from:"+e+" to: "+this._getViewportWidth()),y.log&&y.log("_resizeHandler, headers from:"+t+" to: "+this._getHeaderItemsWidth()),this._hidePivotItemAnimation&&this._hidePivotItemAnimation.cancel(),this._showPivotItemAnimation&&this._showPivotItemAnimation.cancel(),this._slideHeadersAnimation&&this._slideHeadersAnimation.cancel(),this._recenterViewport(),this._headersState.handleResize()):y.log&&y.log("_resizeHandler worthless resize")}},e.prototype._activateHeader=function(e){if(!this.locked){var t=this._items.indexOf(e._item);t!==this.selectedIndex?this._headersState.activateHeader(e):m._setActiveFirstFocusableElement(this.selectedItem.element)}},e.prototype._goNext=function(){this.selectedIndex<this._items.length-1?this.selectedIndex++:this.selectedIndex=0},e.prototype._goPrevious=function(){this._animateToPrevious=!0,this.selectedIndex>0?this.selectedIndex--:this.selectedIndex=this._items.length-1,this._animateToPrevious=!1},e.prototype._loadItem=function(e){var t=this;this._rtl="rtl"===m._getComputedStyle(this._element,null).direction,this._hidePivotItemAnimation.cancel(),this._showPivotItemAnimation.cancel(),this._slideHeadersAnimation.cancel();var n=this._animateToPrevious,i=this._items.getAt(e),r=this._firstLoad,o=this._loadPromise=this._loadPromise.then(function(){var s=t._items.getAt(t.selectedIndex);s&&t._hidePivotItem(s.element,n,r);var l=t._selectedIndex;t._selectedIndex=e;var u={index:e,direction:n?"backwards":"forward",item:i};return t._fireEvent(E.selectionChanged,!0,!1,u),t._headersState.handleNavigation(n,e,l),a.join([i._process(),t._hidePivotItemAnimation,a.timeout()]).then(function(){return t._disposed||t._loadPromise!==o?void 0:(t._recenterViewport(),t._showPivotItem(i.element,n,r).then(function(){t._disposed||t._loadPromise!==o||(t._loadPromise=a.wrap(),t._writeProfilerMark("itemAnimationStop,info"),t._fireEvent(E.itemAnimationEnd,!0,!1,null))}))})})},e.prototype._recenterViewport=function(){m.setScrollPosition(this._viewportElement,{scrollLeft:this._getViewportWidth()}),this.selectedItem&&(this.selectedItem.element.style[this._getDirectionAccessor()]=this._getViewportWidth()+"px")},e.prototype._fireEvent=function(e,t,i,r){var o=n.document.createEvent("CustomEvent");return o.initCustomEvent(e,!!t,!!i,r),this.element.dispatchEvent(o)},e.prototype._getDirectionAccessor=function(){return this._rtl?"right":"left"},e.prototype._getHeaderItemsWidth=function(){return this._headerItemsElWidth||(this._headerItemsElWidth=parseFloat(m._getComputedStyle(this._headerItemsElement).width)),this._headerItemsElWidth||O},e.prototype._getViewportWidth=function(){return this._viewportElWidth||(this._viewportElWidth=parseFloat(m._getComputedStyle(this._viewportElement).width),P&&(this._viewportElement.style[c._browserStyleEquivalents["scroll-snap-points-x"].scriptName]="snapInterval(0%, "+Math.ceil(this._viewportElWidth)+"px)")),this._viewportElWidth||O},e.prototype._invalidateMeasures=function(){this._viewportElWidth=this._headerItemsElWidth=null},e.prototype._updateEvents=function(e,t){e&&(e.removeEventListener("itemchanged",this._handleItemChanged),e.removeEventListener("iteminserted",this._handleItemInserted),e.removeEventListener("itemmoved",this._handleItemMoved),e.removeEventListener("itemremoved",this._handleItemRemoved),e.removeEventListener("reload",this._handleItemReload)),t&&(t.addEventListener("itemchanged",this._handleItemChanged),t.addEventListener("iteminserted",this._handleItemInserted),t.addEventListener("itemmoved",this._handleItemMoved),t.addEventListener("itemremoved",this._handleItemRemoved),t.addEventListener("reload",this._handleItemReload))},e.prototype._writeProfilerMark=function(e){var t="WinJS.UI.Pivot:"+this._id+":"+e;w(t),y.log&&y.log(t,null,"pivotprofiler")},e.prototype._handleItemChanged=function(e){if(!this._pendingItems){var t=e.detail.index,n=e.detail.newValue,i=e.detail.oldValue;if(n.element!==i.element){if(n.element.parentNode===this._surfaceElement)throw new f("WinJS.UI.Pivot.DuplicateItem",x.duplicateItem);n.element.style.display="none",this._surfaceElement.insertBefore(n.element,i.element),this._surfaceElement.removeChild(i.element),t===this.selectedIndex&&(this.selectedIndex=t)}this._headersState.render(),this._headersState.refreshHeadersState(!0)}},e.prototype._handleItemInserted=function(e){if(!this._pendingItems){var t=e.detail.index,n=e.detail.value;if(n.element.parentNode===this._surfaceElement)throw new f("WinJS.UI.Pivot.DuplicateItem",x.duplicateItem);n.element.style.display="none",t<this.items.length-1?this._surfaceElement.insertBefore(n.element,this.items.getAt(t+1).element):this._surfaceElement.appendChild(n.element),t<=this.selectedIndex&&this._selectedIndex++,1===this._items.length&&(this.selectedIndex=0),this._headersState.render(),this._headersState.refreshHeadersState(!0)}},e.prototype._handleItemMoved=function(e){if(!this._pendingItems){var t=e.detail.oldIndex,n=e.detail.newIndex,i=e.detail.value;n<this.items.length-1?this._surfaceElement.insertBefore(i.element,this.items.getAt(n+1).element):this._surfaceElement.appendChild(i.element),t<this.selectedIndex&&n>=this.selectedIndex?this._selectedIndex--:n>this.selectedIndex&&t<=this.selectedIndex?this._selectedIndex++:t===this.selectedIndex&&(this.selectedIndex=this.selectedIndex),this._headersState.render(),this._headersState.refreshHeadersState(!0)}},e.prototype._handleItemReload=function(){this.items=this.items},e.prototype._handleItemRemoved=function(e){if(!this._pendingItems){var t=e.detail.value,n=e.detail.index;this._surfaceElement.removeChild(t.element),n<this.selectedIndex?this._selectedIndex--:n===this._selectedIndex&&(this.selectedIndex=Math.min(this.items.length-1,this._selectedIndex)),this._headersState.render(),this._headersState.refreshHeadersState(!0)}},e.prototype._elementClickedHandler=function(e){if(this.locked||this._navigationHandled)return void(this._navigationHandled=!1);var t,n=e.target;if(m.hasClass(n,I._ClassNames.pivotHeader))t=n;else{var i=!1,r=m._elementsFromPoint(e.clientX,e.clientY);if(r&&r[0]===this._viewportElement)for(var o=0,s=r.length;s>o;o++)r[o]===n&&(i=!0),m.hasClass(r[o],I._ClassNames.pivotHeader)&&(t=r[o]);i||(t=null)}t&&this._activateHeader(t)},e.prototype._elementPointerDownHandler=function(e){if(!P){var t=e.target;this._elementPointerDownPoint={x:e.clientX,y:e.clientY,type:e.pointerType||"mouse",time:Date.now(),inHeaders:this._headersContainerElement.contains(t)}}},e.prototype._elementPointerUpHandler=function(e){if(!this._elementPointerDownPoint||this.locked)return void(this._elementPointerDownPoint=null);var t=e.target,n=32,i=.4,r=Math.abs(e.clientY-this._elementPointerDownPoint.y),o=e.clientX-this._elementPointerDownPoint.x,s=Math.abs(o*i),a=s>r&&Math.abs(o)>n&&(!m._supportsTouchDetection||this._elementPointerDownPoint.type===e.pointerType&&e.pointerType===T)&&(!this.element.classList.contains(I._ClassNames.pivotDisableContentSwipeNavigation)||this._elementPointerDownPoint.inHeaders&&this._headersContainerElement.contains(t));if(this._navigationHandled=!1,a){var l=Date.now()-this._elementPointerDownPoint.time;o*=Math.max(1,Math.pow(350/l,2)),o=this._rtl?-o:o;var u=this._getViewportWidth()/4;-u>o?(this._goNext(),this._navigationHandled=!0):o>u&&(this._goPrevious(),this._navigationHandled=!0)}if(!this._navigationHandled){for(;null!==t&&!m.hasClass(t,I._ClassNames.pivotHeader);)t=t.parentElement;null!==t&&(this._activateHeader(t),this._navigationHandled=!0)}this._elementPointerDownPoint=null},e.prototype._headersKeyDown=function(e){this.locked||(e.keyCode===M.leftArrow||e.keyCode===M.pageUp?(this._rtl?this._goNext():this._goPrevious(),e.preventDefault()):(e.keyCode===M.rightArrow||e.keyCode===M.pageDown)&&(this._rtl?this._goPrevious():this._goNext(),e.preventDefault()))},e.prototype._hideNavButtons=function(e){e&&this._headersContainerElement.contains(e.relatedTarget)||m.removeClass(this._headersContainerElement,I._ClassNames.pivotShowNavButtons)},e.prototype._hidePivotItem=function(e,t,n){return n||!C.isAnimationEnabled()?(e.style.display="none",this._hidePivotItemAnimation=a.wrap(),this._hidePivotItemAnimation):(this._hidePivotItemAnimation=C.executeTransition(e,{property:"opacity",delay:0,duration:67,timing:"linear",from:"",to:"0"}).then(function(){e.style.display="none"}),this._hidePivotItemAnimation)},e.prototype._MSManipulationStateChangedHandler=function(e){if(e.target===this._viewportElement&&e.currentState===m._MSManipulationEvent.MS_MANIPULATION_STATE_INERTIA){var t=e.inertiaDestinationX-this._getViewportWidth();t>0?this._goNext():0>t&&this._goPrevious()}},e.prototype._updatePointerType=function(e){this._pointerType!==(e.pointerType||k)&&(this._pointerType=e.pointerType||k,this._pointerType===T?(m.removeClass(this.element,I._ClassNames.pivotInputTypeMouse),m.addClass(this.element,I._ClassNames.pivotInputTypeTouch),this._hideNavButtons()):(m.removeClass(this.element,I._ClassNames.pivotInputTypeTouch),m.addClass(this.element,I._ClassNames.pivotInputTypeMouse)))},e.prototype._showNavButtons=function(e){this.locked||e&&e.pointerType===T||m.addClass(this._headersContainerElement,I._ClassNames.pivotShowNavButtons)},e.prototype._showPivotItem=function(e,t,n){function r(e){var t=e.getBoundingClientRect();return t.top<s.bottom&&t.bottom>s.top}if(this._writeProfilerMark("itemAnimationStart,info"),this._fireEvent(E.itemAnimationStart,!0,!1,null),e.style.display="",n||!C.isAnimationEnabled())return e.style.opacity="",this._showPivotItemAnimation=a.wrap(),this._showPivotItemAnimation;var o=this._rtl?!t:t,s=this._viewportElement.getBoundingClientRect(),l=e.querySelectorAll(".win-pivot-slide1"),u=e.querySelectorAll(".win-pivot-slide2"),d=e.querySelectorAll(".win-pivot-slide3");return l=Array.prototype.filter.call(l,r),u=Array.prototype.filter.call(u,r),d=Array.prototype.filter.call(d,r),this._showPivotItemAnimation=a.join([C.executeTransition(e,{property:"opacity",delay:0,duration:333,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"0",to:""}),C.executeTransition(e,{property:c._browserStyleEquivalents.transform.cssName,delay:0,duration:767,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"translateX("+(o?"-20px":"20px")+")",to:""}),i[o?"slideRightIn":"slideLeftIn"](null,l,u,d)]),this._showPivotItemAnimation},e.supportedForProcessing=!0,e._ClassNames=I._ClassNames,e._EventNames=E,e}();t.Pivot=D;var L=function(){function e(e){this.pivot=e}return e.prototype.exit=function(){},e.prototype.render=function(e){},e.prototype.activateHeader=function(e){},e.prototype.handleNavigation=function(e,t,n){},e.prototype.handleResize=function(){},e.prototype.handleHeaderChanged=function(e){},e.prototype.getCumulativeHeaderWidth=function(t){if(0===t)return 0;for(var n=this.pivot._headersContainerElement.children.length,i=0;t>i;i++){var r=this.renderHeader(i,!1);this.pivot._headersContainerElement.appendChild(r)}var o=0,s=this.pivot._rtl?this.pivot._headersContainerElement.lastElementChild:this.pivot._headersContainerElement.children[n],a=this.pivot._rtl?this.pivot._headersContainerElement.children[n]:this.pivot._headersContainerElement.lastElementChild;o=a.offsetLeft+a.offsetWidth-s.offsetLeft,o+=2*e.headerHorizontalMargin;for(var i=0;t>i;i++)this.pivot._headersContainerElement.removeChild(this.pivot._headersContainerElement.lastElementChild);return o},e.prototype.refreshHeadersState=function(e){e&&(this.cachedHeaderWidth=0);var t=this.cachedHeaderWidth||this.getCumulativeHeaderWidth(this.pivot.items.length);this.cachedHeaderWidth=t,t>this.pivot._getHeaderItemsWidth()&&!(this.pivot._headersState instanceof R)?(this.exit(),this.pivot._headersState=new R(this.pivot)):t<=this.pivot._getHeaderItemsWidth()&&!(this.pivot._headersState instanceof B)&&(this.exit(),this.pivot._headersState=new B(this.pivot))},e.prototype.renderHeader=function(t,i){function r(){o.pivot._disposed||o.pivot._headersContainerElement.contains(l)&&t!==o.pivot.selectedIndex&&"true"===l.getAttribute("aria-selected")&&(o.pivot.selectedIndex=t)}var o=this,s=m._syncRenderer(S),a=this.pivot.items.getAt(t),l=n.document.createElement("BUTTON");return l.tabIndex=-1,l.setAttribute("type","button"),l.style.marginLeft=l.style.marginRight=e.headerHorizontalMargin+"px",m.addClass(l,I._ClassNames.pivotHeader),l._item=a,l._pivotItemIndex=t,s(a,l),i&&(l.setAttribute("aria-selected",""+(t===this.pivot.selectedIndex)),l.setAttribute("role","tab"),new m._MutationObserver(r).observe(l,{attributes:!0,attributeFilter:["aria-selected"]})),l},e.prototype.updateHeader=function(e){var t=this.pivot.items.indexOf(e),n=this.pivot._headersContainerElement.children[t];n.innerHTML="";var i=m._syncRenderer(S);i(e,n)},e.prototype.setActiveHeader=function(e){var t=!1,i=this.pivot._headersContainerElement.querySelector("."+I._ClassNames.pivotHeaderSelected);i&&(i.classList.remove(I._ClassNames.pivotHeaderSelected),i.setAttribute("aria-selected","false"),t=this.pivot._headersContainerElement.contains(n.document.activeElement)),e.classList.add(I._ClassNames.pivotHeaderSelected),e.setAttribute("aria-selected","true"),t&&this.pivot._headersContainerElement.focus()},e.headersContainerLeadingMargin=12,e.headerHorizontalMargin=12,e}(),B=function(e){function t(t){if(e.call(this,t),this._firstRender=!0,this._transitionAnimation=a.wrap(),t._headersContainerElement.children.length&&C.isAnimationEnabled()){var n=t._headersContainerElement.querySelector("."+I._ClassNames.pivotHeaderSelected),i=0,r=0;t._rtl?(i=n.offsetLeft+n.offsetWidth+L.headerHorizontalMargin,r=t._getHeaderItemsWidth()-this.getCumulativeHeaderWidth(t.selectedIndex)-L.headersContainerLeadingMargin,r+=parseFloat(t._headersContainerElement.style.marginLeft)):(i=n.offsetLeft,i+=parseFloat(t._headersContainerElement.style.marginLeft),r=this.getCumulativeHeaderWidth(t.selectedIndex)+L.headersContainerLeadingMargin+L.headerHorizontalMargin);var o=i-r;this.render();for(var s=c._browserStyleEquivalents.transform.cssName,l="translateX("+o+"px)",u=0,d=t._headersContainerElement.children.length;d>u;u++)t._headersContainerElement.children[u].style[s]=l;this._transitionAnimation=C.executeTransition(t._headersContainerElement.querySelectorAll("."+I._ClassNames.pivotHeader),{property:s,delay:0,duration:A,timing:"ease-out",to:""})}else this.render()}return r(t,e),t.prototype.exit=function(){this._transitionAnimation.cancel()},t.prototype.render=function(){var e=this.pivot;if(!e._pendingRefresh&&e._items){if(h._disposeElement(e._headersContainerElement),m.empty(e._headersContainerElement),e._rtl?(e._headersContainerElement.style.marginLeft="0px",e._headersContainerElement.style.marginRight=L.headersContainerLeadingMargin+"px"):(e._headersContainerElement.style.marginLeft=L.headersContainerLeadingMargin+"px",e._headersContainerElement.style.marginRight="0px"),e._viewportElement.style.overflow=1===e.items.length?"hidden":"",e.items.length)for(var t=0;t<e.items.length;t++){var n=this.renderHeader(t,!0);e._headersContainerElement.appendChild(n),t===e.selectedIndex&&n.classList.add(I._ClassNames.pivotHeaderSelected)}this._firstRender=!1}},t.prototype.activateHeader=function(e){this.setActiveHeader(e),this.pivot._animateToPrevious=e._pivotItemIndex<this.pivot.selectedIndex,this.pivot.selectedIndex=e._pivotItemIndex,this.pivot._animateToPrevious=!1},t.prototype.handleNavigation=function(e,t,n){this._firstRender&&this.render(),this.setActiveHeader(this.pivot._headersContainerElement.children[t])},t.prototype.handleResize=function(){this.refreshHeadersState(!1)},t.prototype.handleHeaderChanged=function(e){this.updateHeader(e),this.refreshHeadersState(!0)},t}(L),R=function(e){function t(t){if(e.call(this,t),this._blocked=!1,this._firstRender=!0,this._transitionAnimation=a.wrap(),t._slideHeadersAnimation=a.wrap(),t._headersContainerElement.children.length&&C.isAnimationEnabled()){var n=this,i=function(){n._blocked=!1,n.render()};this._blocked=!0;var r=t._headersContainerElement.querySelector("."+I._ClassNames.pivotHeaderSelected),o=0,s=0;t._rtl?(o=t._getHeaderItemsWidth()-L.headersContainerLeadingMargin,s=r.offsetLeft,s+=L.headerHorizontalMargin,s+=r.offsetWidth,s+=parseFloat(t._headersContainerElement.style.marginLeft)):(o=L.headersContainerLeadingMargin,s=r.offsetLeft,s-=L.headerHorizontalMargin,s+=parseFloat(t._headersContainerElement.style.marginLeft));for(var l=o-s,u=0;u<t.selectedIndex;u++)t._headersContainerElement.appendChild(t._headersContainerElement.children[u].cloneNode(!0));var d=c._browserStyleEquivalents.transform.cssName;this._transitionAnimation=C.executeTransition(t._headersContainerElement.querySelectorAll("."+I._ClassNames.pivotHeader),{property:d,delay:0,duration:A,timing:"ease-out",to:"translateX("+l+"px)"}).then(i,i)}else this.render()}return r(t,e),t.prototype.exit=function(){this._transitionAnimation.cancel(),this.pivot._slideHeadersAnimation.cancel()},t.prototype.render=function(e){var t=this.pivot;if(!this._blocked&&!t._pendingRefresh&&t._items){var i=t._headersContainerElement.contains(n.document.activeElement);if(h._disposeElement(t._headersContainerElement),m.empty(t._headersContainerElement),1===t._items.length){var r=this.renderHeader(0,!0);r.classList.add(I._ClassNames.pivotHeaderSelected),t._headersContainerElement.appendChild(r),t._viewportElement.style.overflow="hidden",t._headersContainerElement.style.marginLeft="0px",t._headersContainerElement.style.marginRight="0px"}else if(t._items.length>1){var o=t._items.length+(e?2:1),s=.8*t._getHeaderItemsWidth(),a=t.selectedIndex-1;t._viewportElement.style.overflow&&(t._viewportElement.style.overflow="");for(var l=0;o>l;l++){-1===a?a=t._items.length-1:a===t._items.length&&(a=0);var r=this.renderHeader(a,!0);t._headersContainerElement.appendChild(r),r.offsetWidth>s&&(r.style.textOverflow="ellipsis",r.style.width=s+"px"),a===t.selectedIndex&&r.classList.add(I._ClassNames.pivotHeaderSelected),a++}if(!t._firstLoad&&!this._firstRender){var u,d;e?(u="",d="0"):(u="0",d="");var p=t._headersContainerElement.children[o-1];p.style.opacity=u;var f=.167;p.style[c._browserStyleEquivalents.transition.scriptName]="opacity "+C._animationTimeAdjustment(f)+"s",m._getComputedStyle(p).opacity,p.style.opacity=d}t._headersContainerElement.children[0].setAttribute("aria-hidden","true"),t._headersContainerElement.style.marginLeft="0px",t._headersContainerElement.style.marginRight="0px";var _=t._rtl?"marginRight":"marginLeft",g=t._headersContainerElement.children[0],v=m.getTotalWidth(g)-L.headersContainerLeadingMargin;if(g!==t._headersContainerElement.children[0])return;t._headersContainerElement.style[_]=-1*v+"px",t._prevButton=n.document.createElement("button"),t._prevButton.setAttribute("type","button"),m.addClass(t._prevButton,I._ClassNames.pivotNavButton),m.addClass(t._prevButton,I._ClassNames.pivotNavButtonPrev),t._prevButton.addEventListener("click",function(){t.locked||(t._rtl?t._goNext():t._goPrevious())}),t._headersContainerElement.appendChild(t._prevButton),t._prevButton.style.left=t._rtl?"0px":v+"px",t._nextButton=n.document.createElement("button"),t._nextButton.setAttribute("type","button"),m.addClass(t._nextButton,I._ClassNames.pivotNavButton),m.addClass(t._nextButton,I._ClassNames.pivotNavButtonNext),t._nextButton.addEventListener("click",function(){t.locked||(t._rtl?t._goPrevious():t._goNext())}),t._headersContainerElement.appendChild(t._nextButton),t._nextButton.style.right=t._rtl?v+"px":"0px"}t._headersContainerElement.children.length>1?1:0;i&&t._headersContainerElement.focus(),this._firstRender=!1}},t.prototype.activateHeader=function(e){e.previousSibling&&(this.pivot.selectedIndex=e._pivotItemIndex)},t.prototype.handleNavigation=function(e,t,n){
function i(e){return u?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}function r(){s._disposed||(o.render(e),s._slideHeadersAnimation=a.wrap())}var o=this,s=this.pivot;if(this._blocked||0>t||s._firstLoad)return void this.render(e);var l;if(e?l=s._headersContainerElement.children[0]:(n>t&&(t+=s._items.length),l=s._headersContainerElement.children[1+t-n]),!l)return void this.render(e);m.removeClass(s._headersContainerElement.children[1],I._ClassNames.pivotHeaderSelected),m.addClass(l,I._ClassNames.pivotHeaderSelected);var u=s._rtl,d=i(s._headersContainerElement.children[1])-i(l);u&&(d*=-1);var h;h=C.isAnimationEnabled()?C.executeTransition(s._headersContainerElement.querySelectorAll("."+I._ClassNames.pivotHeader),{property:c._browserStyleEquivalents.transform.cssName,delay:0,duration:A,timing:"ease-out",to:"translateX("+d+"px)"}):a.wrap(),s._slideHeadersAnimation=h.then(r,r)},t.prototype.handleResize=function(){this.refreshHeadersState(!1)},t.prototype.handleHeaderChanged=function(e){this.render(),this.refreshHeadersState(!0)},t}(L);u.Class.mix(D,_.createEventProperties(E.itemAnimationEnd,E.itemAnimationStart,E.selectionChanged)),u.Class.mix(D,d.DOMEventMixin)}),i("WinJS/Controls/Pivot",["require","exports","../Core/_Base","./Pivot/_Item"],function(e,t,n,i){i.touch;var r=null;n.Namespace.define("WinJS.UI",{Pivot:{get:function(){return r||e(["./Pivot/_Pivot"],function(e){r=e}),r.Pivot}}})}),i("WinJS/Controls/Hub/_Section",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Resources","../../ControlProcessor","../../Promise","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardBehavior"],function(e,t,n,i,r,o,s,a,l,u,c,d){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{HubSection:n.Namespace._lazy(function(){var e={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get seeMore(){return o._getWinJSString("ui/seeMore").value}},h=n.Class.define(function(n,i){if(n=n||t.document.createElement("DIV"),i=i||{},n.winControl)throw new r("WinJS.UI.HubSection.DuplicateConstruction",e.duplicateConstruction);n.winControl=this,this._element=n,c.addClass(this.element,h._ClassName.hubSection),c.addClass(this.element,"win-disposable"),this._headerElement=t.document.createElement("DIV"),this._headerElement.className=h._ClassName.hubSectionHeader,this._headerElement.innerHTML='<button type="button" role="link" class="'+h._ClassName.hubSectionInteractive+" "+h._ClassName.hubSectionHeaderTabStop+'"><div class="'+h._ClassName.hubSectionHeaderWrapper+'" tabindex="-1"><h2 class="win-type-subheader '+h._ClassName.hubSectionHeaderContent+'"></h2><span class="'+h._ClassName.hubSectionHeaderChevron+' win-type-body">'+e.seeMore+"</span></div></button>",this._headerTabStopElement=this._headerElement.firstElementChild,this._headerWrapperElement=this._headerTabStopElement.firstElementChild,this._headerContentElement=this._headerWrapperElement.firstElementChild,this._headerChevronElement=this._headerWrapperElement.lastElementChild,n.appendChild(this._headerElement),this._winKeyboard=new d._WinKeyboard(this._headerElement),this._contentElement=t.document.createElement("DIV"),this._contentElement.className=h._ClassName.hubSectionContent,this._contentElement.style.visibility="hidden",n.appendChild(this._contentElement);for(var o=this.element.firstChild;o!==this._headerElement;){var a=o.nextSibling;this._contentElement.appendChild(o),o=a}this._processors=[s.processAll],l.setOptions(this,i)},{element:{get:function(){return this._element}},isHeaderStatic:{get:function(){return this._isHeaderStatic},set:function(e){this._isHeaderStatic=e,this._isHeaderStatic?(this._headerTabStopElement.setAttribute("role","heading"),c.removeClass(this._headerTabStopElement,h._ClassName.hubSectionInteractive)):(this._headerTabStopElement.setAttribute("role","link"),c.addClass(this._headerTabStopElement,h._ClassName.hubSectionInteractive))}},contentElement:{get:function(){return this._contentElement}},header:{get:function(){return this._header},set:function(e){this._header=e,this._renderHeader()}},_setHeaderTemplate:function(e){this._template=c._syncRenderer(e),this._renderHeader()},_renderHeader:function(){this._template&&(u._disposeElement(this._headerContentElement),c.empty(this._headerContentElement),this._template(this,this._headerContentElement))},_process:function(){var e=this;return this._processed=(this._processors||[]).reduce(function(t,n){return t.then(function(){return n(e.contentElement)})},this._processed||a.as()),this._processors=null,this._processed},dispose:function(){this._disposed||(this._disposed=!0,this._processors=null,u._disposeElement(this._headerContentElement),u.disposeSubTree(this.contentElement))}},{_ClassName:{hubSection:"win-hub-section",hubSectionHeader:"win-hub-section-header",hubSectionHeaderTabStop:"win-hub-section-header-tabstop",hubSectionHeaderWrapper:"win-hub-section-header-wrapper",hubSectionInteractive:"win-hub-section-header-interactive",hubSectionHeaderContent:"win-hub-section-header-content",hubSectionHeaderChevron:"win-hub-section-header-chevron",hubSectionContent:"win-hub-section-content"},isDeclarativeControlContainer:i.markSupportedForProcessing(function(e,t){t!==s.processAll&&(e._processors=e._processors||[],e._processors.push(t),e._processed&&e._process())})});return h})})}),i("require-style!less/styles-hub",[],function(){}),i("require-style!less/colors-hub",[],function(){}),i("WinJS/Controls/Hub",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../_Accents","../Animations","../Animations/_TransitionAnimation","../BindingList","../ControlProcessor","../Promise","../_Signal","../Scheduler","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_UI","./ElementResizeInstrument","./Hub/_Section","require-style!less/styles-hub","require-style!less/colors-hub"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b,C){"use strict";l.createAccentRule(".win-semanticzoom-zoomedoutview .win-hub-section-header-interactive .win-hub-section-header-content,	             .win-hub-section-header-interactive .win-hub-section-header-chevron",[{name:"color",value:l.ColorTypes.accent}]),t.Namespace.define("WinJS.UI",{Hub:t.Namespace._lazy(function(){function l(t){var n=e.document.createTextNode("object"==typeof t.header?JSON.stringify(t.header):""+t.header);return n}var v=g.Key,w=r._createEventProperty,I={contentAnimating:"contentanimating",headerInvoked:"headerinvoked",loadingStateChanged:"loadingstatechanged"},S=500,E={scrollPos:"scrollTop",scrollSize:"scrollHeight",offsetPos:"offsetTop",offsetSize:"offsetHeight",oppositeOffsetSize:"offsetWidth",marginStart:"marginTop",marginEnd:"marginBottom",borderStart:"borderTopWidth",borderEnd:"borderBottomWidth",paddingStart:"paddingTop",paddingEnd:"paddingBottom"},x={scrollPos:"scrollLeft",scrollSize:"scrollWidth",offsetPos:"offsetLeft",offsetSize:"offsetWidth",oppositeOffsetSize:"offsetHeight",marginStart:"marginRight",marginEnd:"marginLeft",borderStart:"borderRightWidth",borderEnd:"borderLeftWidth",paddingStart:"paddingRight",paddingEnd:"paddingLeft"},P={scrollPos:"scrollLeft",scrollSize:"scrollWidth",offsetPos:"offsetLeft",offsetSize:"offsetWidth",oppositeOffsetSize:"offsetHeight",marginStart:"marginLeft",marginEnd:"marginRight",borderStart:"borderLeftWidth",borderEnd:"borderRightWidth",paddingStart:"paddingLeft",paddingEnd:"paddingRight"},k=t.Class.define(function(t,n){if(t=t||e.document.createElement("DIV"),n=n||{},t.winControl)throw new i("WinJS.UI.Hub.DuplicateConstruction",M.duplicateConstruction);this._id=t.id||g._uniqueID(t),this._writeProfilerMark("constructor,StartTM"),this._windowKeyDownHandlerBound=this._windowKeyDownHandler.bind(this),e.addEventListener("keydown",this._windowKeyDownHandlerBound),t.winControl=this,this._element=t,g.addClass(this.element,k._ClassName.hub),g.addClass(this.element,"win-disposable"),this._parse(),this._viewportElement=e.document.createElement("DIV"),this._viewportElement.className=k._ClassName.hubViewport,this._element.appendChild(this._viewportElement),this._viewportElement.setAttribute("role","group"),this._viewportElement.setAttribute("aria-label",M.hubViewportAriaLabel),this._surfaceElement=e.document.createElement("DIV"),this._surfaceElement.className=k._ClassName.hubSurface,this._viewportElement.appendChild(this._surfaceElement),this._visible=!1,this._viewportElement.style.opacity=0,n.orientation||(this._orientation=y.Orientation.horizontal,g.addClass(this.element,k._ClassName.hubHorizontal)),this._fireEntrance=!0,this._animateEntrance=!0,this._loadId=0,this.runningAnimations=new p.wrap,this._currentIndexForSezo=0,_.setOptions(this,n),g._addEventListener(this.element,"focusin",this._focusin.bind(this),!1),this.element.addEventListener("keydown",this._keyDownHandler.bind(this)),this.element.addEventListener("click",this._clickHandler.bind(this)),this._viewportElement.addEventListener("scroll",this._scrollHandler.bind(this)),this._resizeHandlerBound=this._resizeHandler.bind(this),this._elementResizeInstrument=new b._ElementResizeInstrument,this._element.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._resizeHandlerBound);var r=this;g._inDom(this.element).then(function(){r._disposed||r._elementResizeInstrument.addedToDom()}),g._resizeNotifier.subscribe(this.element,this._resizeHandlerBound),this._handleSectionChangedBind=this._handleSectionChanged.bind(this),this._handleSectionInsertedBind=this._handleSectionInserted.bind(this),this._handleSectionMovedBind=this._handleSectionMoved.bind(this),this._handleSectionRemovedBind=this._handleSectionRemoved.bind(this),this._handleSectionReloadBind=this._handleSectionReload.bind(this),this._refresh(),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},orientation:{get:function(){return this._orientation},set:function(e){if(e!==this._orientation){if(this._measured=!1,this._names){var t={};t[this._names.scrollPos]=0,g.setScrollPosition(this._viewportElement,t)}e===y.Orientation.vertical?(g.removeClass(this.element,k._ClassName.hubHorizontal),g.addClass(this.element,k._ClassName.hubVertical)):(e=y.Orientation.horizontal,g.removeClass(this.element,k._ClassName.hubVertical),g.addClass(this.element,k._ClassName.hubHorizontal)),this._orientation=e,f.schedule(this._updateSnapList.bind(this),f.Priority.idle)}}},sections:{get:function(){return this._pendingSections?this._pendingSections:this._sections},set:function(e){var t=!this._pendingSections;this._pendingSections=e,this._refresh(),t&&(this.scrollPosition=0)}},headerTemplate:{get:function(){return this._pendingHeaderTemplate?this._pendingHeaderTemplate:(this._headerTemplate||(this._headerTemplate=l),this._headerTemplate)},set:function(e){this._pendingHeaderTemplate=e||l,this._refresh()}},scrollPosition:{get:function(){return+this._pendingScrollLocation===this._pendingScrollLocation?this._pendingScrollLocation:(this._measure(),this._scrollPosition)},set:function(e){if(e=Math.max(0,e),this._pendingRefresh)this._pendingScrollLocation=e,this._pendingSectionOnScreen=null;else{this._measure();var t=Math.max(0,Math.min(this._scrollLength-this._viewportSize,e));this._scrollPosition=t;var n={};n[this._names.scrollPos]=t,g.setScrollPosition(this._viewportElement,n)}}},sectionOnScreen:{get:function(){if(+this._pendingSectionOnScreen===this._pendingSectionOnScreen)return this._pendingSectionOnScreen;this._measure();for(var e=0;e<this._sectionSizes.length;e++){var t=this._sectionSizes[e];if(t.offset+t.size-t.borderEnd-t.paddingEnd>this._scrollPosition+this._startSpacer+t.borderStart+t.paddingStart)return e}return-1},set:function(e){e=Math.max(0,e),this._pendingRefresh?(this._pendingSectionOnScreen=e,this._pendingScrollLocation=null):(this._measure(),e>=0&&e<this._sectionSizes.length&&this._scrollToSection(e))}},indexOfFirstVisible:{get:function(){this._measure();for(var e=0;e<this._sectionSizes.length;e++){var t=this._sectionSizes[e];if(t.offset+t.size-t.borderEnd-t.paddingEnd>this._scrollPosition)return e}return-1}},indexOfLastVisible:{get:function(){this._measure();for(var e=this._sectionSizes.length-1;e>=0;e--){var t=this._sectionSizes[e];if(t.offset+t.paddingStart+t.borderStart<this._scrollPosition+this._viewportSize)return e}return-1}},onheaderinvoked:w(I.headerInvoked),onloadingstatechanged:w(I.loadingStateChanged),oncontentanimating:w(I.contentAnimating),_refresh:function(){this._pendingRefresh||(this._loadId++,this._setState(k.LoadingState.loading),this._pendingRefresh=!0,f.schedule(this._refreshImpl.bind(this),f.Priority.high))},_refreshImpl:function(){if(!this._disposed){var e=p.wrap();if(this._pendingSections&&(this._animateEntrance=!0,this._fireEntrance=!this._visible,!this._fireEntrance&&(this._visible=!1,this._viewportElement.style.opacity=0,c.isAnimationEnabled()))){var t=this._fireEvent(k._EventName.contentAnimating,{type:k.AnimationType.contentTransition});t&&(this._viewportElement.style["-ms-overflow-style"]="none",e=u.fadeOut(this._viewportElement).then(function(){this._viewportElement.style["-ms-overflow-style"]=""}.bind(this))),this._animateEntrance=t}e.done(this._applyProperties.bind(this))}},_applyProperties:function(){if(!this._disposed){this._pendingRefresh=!1;var e=!1;this._pendingSections&&(e=!0,this._updateEvents(this._sections,this._pendingSections),this._sections&&this._sections.forEach(function(e){var t=e.element;t.parentElement.removeChild(t)}),this._sections=this._pendingSections,this._pendingSections=null),this._pendingHeaderTemplate&&(this._headerTemplate=this._pendingHeaderTemplate,this._pendingHeaderTemplate=null),this._assignHeaderTemplate(),e&&this._attachSections(),+this._pendingSectionOnScreen===this._pendingSectionOnScreen?this.sectionOnScreen=this._pendingSectionOnScreen:+this._pendingScrollLocation===this._pendingScrollLocation?this.scrollPosition=this._pendingScrollLocation:this.scrollPosition=0,this._pendingSectionOnScreen=null,this._pendingScrollLocation=null,this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionChanged:function(e){if(!this._pendingSections){var t=e.detail.newValue,n=e.detail.oldValue;if(t._setHeaderTemplate(this.headerTemplate),t.element!==n.element){if(t.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Hub.DuplicateSection",M.duplicateSection);this._surfaceElement.insertBefore(t.element,n.element),this._surfaceElement.removeChild(n.element),this._measured=!1,this._setState(k.LoadingState.loading),this._loadSections()}}},_handleSectionInserted:function(e){if(!this._pendingSections){var t=e.detail.index,n=e.detail.value;n._animation&&n._animation.cancel();var r,o=this._fireEvent(k._EventName.contentAnimating,{type:k.AnimationType.insert,index:t,section:n});if(o){for(var s=[],a=t+1;a<this.sections.length;a++)s.push(this.sections.getAt(a).element);r=new u._createUpdateListAnimation([n.element],[],s)}if(n.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Hub.DuplicateSection",M.duplicateSection);if(n._setHeaderTemplate(this.headerTemplate),t<this.sections.length-1?this._surfaceElement.insertBefore(n.element,this.sections.getAt(t+1).element):this._surfaceElement.appendChild(n.element),this._measured=!1,r){var l=r.execute();this.runningAnimations=p.join([this.runningAnimations,l])}this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionMoved:function(e){if(!this._pendingSections){var t=e.detail.newIndex,n=e.detail.value;t<this.sections.length-1?this._surfaceElement.insertBefore(n.element,this.sections.getAt(t+1).element):this._surfaceElement.appendChild(n.element),this._measured=!1,this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionRemoved:function(e){if(!this._pendingSections){var t=e.detail.value,n=e.detail.index,i=p.wrap(),r=this._fireEvent(k._EventName.contentAnimating,{type:k.AnimationType.remove,index:n,section:t});if(r){for(var o=[],s=n;s<this.sections.length;s++)o.push(this.sections.getAt(s).element);var a=new u._createUpdateListAnimation([],[t.element],o);this._measure();var l=t.element.offsetTop,c=t.element.offsetLeft;t.element.style.position="absolute",t.element.style.top=l,t.element.style.left=c,t.element.style.opacity=0,this._measured=!1,i=a.execute().then(function(){t.element.style.position="",t.element.style.top="",t.element.style.left="",t.element.style.opacity=1}.bind(this))}i.done(function(){this._disposed||(this._surfaceElement.removeChild(t.element),this._measured=!1)}.bind(this)),t._animation=i,this.runningAnimations=p.join([this.runningAnimations,i]),this._setState(k.LoadingState.loading),this._loadSections()}},_handleSectionReload:function(){this.sections=this.sections},_updateEvents:function(e,t){e&&(e.removeEventListener("itemchanged",this._handleSectionChangedBind),e.removeEventListener("iteminserted",this._handleSectionInsertedBind),e.removeEventListener("itemmoved",this._handleSectionMovedBind),e.removeEventListener("itemremoved",this._handleSectionRemovedBind),e.removeEventListener("reload",this._handleSectionReloadBind)),t&&(t.addEventListener("itemchanged",this._handleSectionChangedBind),t.addEventListener("iteminserted",this._handleSectionInsertedBind),t.addEventListener("itemmoved",this._handleSectionMovedBind),t.addEventListener("itemremoved",this._handleSectionRemovedBind),t.addEventListener("reload",this._handleSectionReloadBind))},_attachSections:function(){this._measured=!1;for(var e=0;e<this.sections.length;e++){var t=this._sections.getAt(e);if(t._animation&&t._animation.cancel(),t.element.parentNode===this._surfaceElement)throw new i("WinJS.UI.Hub.DuplicateSection",M.duplicateSection);this._surfaceElement.appendChild(t.element)}},_assignHeaderTemplate:function(){this._measured=!1;for(var e=0;e<this.sections.length;e++){var t=this._sections.getAt(e);t._setHeaderTemplate(this.headerTemplate)}},_loadSection:function(e){var t=this._sections.getAt(e);return t._process().then(function(){var e=t.contentElement.style;""!==e.visibility&&(e.visibility="")})},_loadSections:function(){function t(e){e.then(function(){f.schedule(n,f.Priority.idle)})}function n(){if(i===r._loadId&&!r._disposed)if(s.length){var e=s.shift(),n=r._loadSection(e);t(n)}else l.complete()}this._loadId++;var i=this._loadId,r=this,o=p.wrap(),s=[],a=p.wrap();if(this._showProgressPromise||(this._showProgressPromise=p.timeout(S).then(function(){this._disposed||(this._progressBar||(this._progressBar=e.document.createElement("progress"),g.addClass(this._progressBar,k._ClassName.hubProgress),this._progressBar.max=100),this._progressBar.parentNode||this.element.insertBefore(this._progressBar,this._viewportElement),this._showProgressPromise=null)}.bind(this),function(){this._showProgressPromise=null}.bind(this))),this.sections.length){var l=new m;a=l.promise;for(var d=[],h=Math.max(0,this.indexOfFirstVisible),_=Math.max(0,this.indexOfLastVisible),v=h;_>=v;v++)d.push(this._loadSection(v));for(h--,_++;h>=0||_<this.sections.length;)_<this.sections.length&&(s.push(_),_++),h>=0&&(s.push(h),h--);var y=p.join(d);y.done(function(){i!==this._loadId||r._disposed||(this._showProgressPromise&&this._showProgressPromise.cancel(),this._progressBar&&this._progressBar.parentNode&&this._progressBar.parentNode.removeChild(this._progressBar),f.schedule(function(){if(i===this._loadId&&!r._disposed&&!this._visible){if(this._visible=!0,this._viewportElement.style.opacity=1,this._animateEntrance&&c.isAnimationEnabled()){var t={type:k.AnimationType.entrance};(!this._fireEntrance||this._fireEvent(k._EventName.contentAnimating,t))&&(this._viewportElement.style["-ms-overflow-style"]="none",o=u.enterContent(this._viewportElement).then(function(){this._viewportElement.style["-ms-overflow-style"]="",this._viewportElement.onmousewheel=function(){}}.bind(this)))}this._element===e.document.activeElement&&this._moveFocusIn(this.sectionOnScreen)}},f.Priority.high,this,"WinJS.UI.Hub.entranceAnimation"))}.bind(this)),t(y)}else this._showProgressPromise&&this._showProgressPromise.cancel(),this._progressBar&&this._progressBar.parentNode&&this._progressBar.parentNode.removeChild(this._progressBar);p.join([this.runningAnimations,o,a]).done(function(){i!==this._loadId||r._disposed||(this.runningAnimations=p.wrap(),this._measured&&this._scrollLength!==this._viewportElement[this._names.scrollSize]&&(this._measured=!1),this._setState(k.LoadingState.complete),f.schedule(this._updateSnapList.bind(this),f.Priority.idle))}.bind(this))},loadingState:{get:function(){return this._loadingState}},_setState:function(t){if(t!==this._loadingState){this._writeProfilerMark("loadingStateChanged:"+t+",info"),this._loadingState=t;var n=e.document.createEvent("CustomEvent");n.initCustomEvent(k._EventName.loadingStateChanged,!0,!1,{loadingState:t}),this._element.dispatchEvent(n)}},_parse:function(){for(var e=[],t=this.element.firstElementChild;t;){h.processAll(t);var n=t.winControl;if(!n)throw new i("WinJS.UI.Hub.InvalidContent",M.invalidContent);e.push(n);var r=t.nextElementSibling;t.parentElement.removeChild(t),t=r}this.sections=new d.List(e)},_fireEvent:function(t,n){var i=e.document.createEvent("CustomEvent");return i.initCustomEvent(t,!0,!0,n),this.element.dispatchEvent(i)},_findHeaderTabStop:function(e){if(e.parentNode&&g._matchesSelector(e,".win-hub-section-header-tabstop, .win-hub-section-header-tabstop *")){for(;!g.hasClass(e,"win-hub-section-header-tabstop");)e=e.parentElement;return e}return null},_isInteractive:function(t){for(;t&&t!==e.document.body;){if(g.hasClass(t,"win-interactive"))return!0;t=t.parentElement}return!1},_clickHandler:function(e){var t=this._findHeaderTabStop(e.target);if(t&&!this._isInteractive(e.target)){var n=t.parentElement.parentElement.winControl;if(!n.isHeaderStatic){var i=this.sections.indexOf(n);this._fireEvent(k._EventName.headerInvoked,{index:i,section:n})}}},_resizeHandler:function(){this._measured=!1,f.schedule(this._updateSnapList.bind(this),f.Priority.idle)},_scrollHandler:function(){this._measured=!1,this._pendingSections||(this._pendingScrollLocation=null,this._pendingSectionOnScreen=null,this._pendingScrollHandler||(this._pendingScrollHandler=n._requestAnimationFrame(function(){this._pendingScrollHandler=null,this._pendingSections||this.loadingState!==k.LoadingState.complete&&this._loadSections()}.bind(this))))},_measure:function(){if(!this._measured||0===this._scrollLength){this._writeProfilerMark("measure,StartTM"),this._measured=!0,this._rtl="rtl"===g._getComputedStyle(this._element,null).direction,this.orientation===y.Orientation.vertical?this._names=E:this._rtl?this._names=x:this._names=P,this._viewportSize=this._viewportElement[this._names.offsetSize],this._viewportOppositeSize=this._viewportElement[this._names.oppositeOffsetSize],this._scrollPosition=g.getScrollPosition(this._viewportElement)[this._names.scrollPos],this._scrollLength=this._viewportElement[this._names.scrollSize];var e=g._getComputedStyle(this._surfaceElement);this._startSpacer=parseFloat(e[this._names.marginStart])+parseFloat(e[this._names.borderStart])+parseFloat(e[this._names.paddingStart]),this._endSpacer=parseFloat(e[this._names.marginEnd])+parseFloat(e[this._names.borderEnd])+parseFloat(e[this._names.paddingEnd]),this._sectionSizes=[];for(var t=0;t<this.sections.length;t++){var n=this.sections.getAt(t),i=g._getComputedStyle(n.element);this._sectionSizes[t]={offset:n.element[this._names.offsetPos],size:n.element[this._names.offsetSize],marginStart:parseFloat(i[this._names.marginStart]),marginEnd:parseFloat(i[this._names.marginEnd]),borderStart:parseFloat(i[this._names.borderStart]),borderEnd:parseFloat(i[this._names.borderEnd]),paddingStart:parseFloat(i[this._names.paddingStart]),paddingEnd:parseFloat(i[this._names.paddingEnd])},this._rtl&&this.orientation===y.Orientation.horizontal&&(this._sectionSizes[t].offset=this._viewportSize-(this._sectionSizes[t].offset+this._sectionSizes[t].size))}this._writeProfilerMark("measure,StopTM")}},_updateSnapList:function(){this._writeProfilerMark("updateSnapList,StartTM"),this._measure();for(var e="snapList(",t=0;t<this._sectionSizes.length;t++){t>0&&(e+=",");var n=this._sectionSizes[t];e+=n.offset-n.marginStart-this._startSpacer+"px"}e+=")";var i="",r="";this.orientation===y.Orientation.vertical?i=e:r=e,this._lastSnapPointY!==i&&(this._lastSnapPointY=i,this._viewportElement.style["-ms-scroll-snap-points-y"]=i),this._lastSnapPointX!==r&&(this._lastSnapPointX=r,this._viewportElement.style["-ms-scroll-snap-points-x"]=r),this._writeProfilerMark("updateSnapList,StopTM")},_scrollToSection:function(e,t){this._measure();var n=this._sectionSizes[e],i=Math.min(this._scrollLength-this._viewportSize,n.offset-n.marginStart-this._startSpacer);this._scrollTo(i,t)},_ensureVisible:function(e,t){this._measure();var n=this._ensureVisibleMath(e,this._scrollPosition);this._scrollTo(n,t)},_ensureVisibleMath:function(e,t){this._measure();var n=this._sectionSizes[e],i=Math.min(this._scrollLength-this._viewportSize,n.offset-n.marginStart-this._startSpacer),r=Math.max(0,n.offset+n.size+n.marginEnd+this._endSpacer-this._viewportSize+1);return t>i?t=i:r>t&&(t=Math.min(i,r)),t},_scrollTo:function(e,t){if(this._scrollPosition=e,t)this.orientation===y.Orientation.vertical?g._zoomTo(this._viewportElement,{contentX:0,contentY:this._scrollPosition,viewportX:0,viewportY:0}):g._zoomTo(this._viewportElement,{contentX:this._scrollPosition,contentY:0,viewportX:0,viewportY:0});else{var n={};n[this._names.scrollPos]=this._scrollPosition,g.setScrollPosition(this._viewportElement,n)}},_windowKeyDownHandler:function(e){if(e.keyCode===v.tab){this._tabSeenLast=!0;var t=this;n._yieldForEvents(function(){t._tabSeenLast=!1})}},_focusin:function(e){if(this._tabSeenLast){var t=this._findHeaderTabStop(e.target);if(t&&!this._isInteractive(e.target)){var n=this.sections.indexOf(t.parentElement.parentElement.winControl);n>-1&&this._ensureVisible(n,!0)}}for(var i=e.target;i&&!g.hasClass(i,C.HubSection._ClassName.hubSection);)i=i.parentElement;if(i){var n=this.sections.indexOf(i.winControl);n>-1&&(this._currentIndexForSezo=n)}if(e.target===this.element){var r;+this._sectionToFocus===this._sectionToFocus&&this._sectionToFocus>=0&&this._sectionToFocus<this.sections.length?(r=this._sectionToFocus,this._sectionToFocus=null):r=this.sectionOnScreen,this._moveFocusIn(r)}},_moveFocusIn:function(e){if(e>=0){for(var t=e;t<this.sections.length;t++){var n=this.sections.getAt(t),i=g._trySetActive(n._headerTabStopElement,this._viewportElement);if(i)return;if(g._setActiveFirstFocusableElement(n.contentElement,this._viewportElement))return}for(var t=e-1;t>=0;t--){var n=this.sections.getAt(t);if(g._setActiveFirstFocusableElement(n.contentElement,this._viewportElement))return;var i=g._trySetActive(n._headerTabStopElement,this._viewportElement);if(i)return}}},_keyDownHandler:function(e){if(!this._isInteractive(e.target)&&!g._hasCursorKeysBehaviors(e.target)){var t=this._rtl?v.rightArrow:v.leftArrow,n=this._rtl?v.leftArrow:v.rightArrow;if(e.keyCode===v.upArrow||e.keyCode===v.downArrow||e.keyCode===v.leftArrow||e.keyCode===v.rightArrow||e.keyCode===v.pageUp||e.keyCode===v.pageDown){var i=this._findHeaderTabStop(e.target);if(i){var r,o=this.sections.indexOf(i.parentElement.parentElement.winControl),s=!1;if(e.keyCode===v.pageDown||this.orientation===y.Orientation.horizontal&&e.keyCode===n||this.orientation===y.Orientation.vertical&&e.keyCode===v.downArrow){for(var a=o+1;a<this.sections.length;a++)if(this._tryFocus(a)){r=a;break}}else if(e.keyCode===v.pageUp||this.orientation===y.Orientation.horizontal&&e.keyCode===t||this.orientation===y.Orientation.vertical&&e.keyCode===v.upArrow)for(var a=o-1;a>=0;a--)if(this._tryFocus(a)){r=a;break}(e.keyCode===v.upArrow||e.keyCode===v.downArrow||e.keyCode===v.leftArrow||e.keyCode===v.rightArrow)&&(s=!0),+r===r&&(s?this._ensureVisible(r,!0):this._scrollToSection(r,!0),e.preventDefault())}}else if(e.keyCode===v.home||e.keyCode===v.end){this._measure();var l=Math.max(0,this._scrollLength-this._viewportSize);this._scrollTo(e.keyCode===v.home?0:l,!0),e.preventDefault()}}},_tryFocus:function(t){var n=this.sections.getAt(t);return g._setActive(n._headerTabStopElement,this._viewportElement),e.document.activeElement===n._headerTabStopElement},zoomableView:{get:function(){return this._zoomableView||(this._zoomableView=new T(this)),this._zoomableView}},_getPanAxis:function(){return this.orientation===y.Orientation.horizontal?"horizontal":"vertical"},_configureForZoom:function(){},_setCurrentItem:function(e,t){var n;n=this.orientation===y.Orientation.horizontal?e:t,this._measure(),n+=this._scrollPosition,this._currentIndexForSezo=this._sectionSizes.length-1;for(var i=1;i<this._sectionSizes.length;i++){var r=this._sectionSizes[i];if(r.offset-r.marginStart>n){this._currentIndexForSezo=i-1;break}}},_getCurrentItem:function(){var e;if(this._sectionSizes.length>0){this._measure();var t=Math.max(0,Math.min(this._currentIndexForSezo,this._sectionSizes.length)),n=this._sectionSizes[t];e=this.orientation===y.Orientation.horizontal?{left:Math.max(0,n.offset-n.marginStart-this._scrollPosition),top:0,width:n.size,height:this._viewportOppositeSize}:{left:0,top:Math.max(0,n.offset-n.marginStart-this._scrollPosition),width:this._viewportOppositeSize,height:n.size};var i=this.sections.getAt(t);return p.wrap({item:{data:i,index:t,groupIndexHint:t},position:e})}},_beginZoom:function(){this._viewportElement.style["-ms-overflow-style"]="none"},_positionItem:function(e,t){if(e.index>=0&&e.index<this._sectionSizes.length){this._measure();var n,i=this._sectionSizes[e.index];n=this.orientation===y.Orientation.horizontal?t.left:t.top,this._sectionToFocus=e.index;var r=i.offset-n,r=this._ensureVisibleMath(e.index,r);this._scrollPosition=r;var o={};o[this._names.scrollPos]=this._scrollPosition,g.setScrollPosition(this._viewportElement,o)}},_endZoom:function(){this._viewportElement.style["-ms-overflow-style"]=""},_writeProfilerMark:function(e){var t="WinJS.UI.Hub:"+this._id+":"+e;a(t),o.log&&o.log(t,null,"hubprofiler")},dispose:function(){if(!this._disposed){this._disposed=!0,e.removeEventListener("keydown",this._windowKeyDownHandlerBound),g._resizeNotifier.unsubscribe(this.element,this._resizeHandlerBound),this._elementResizeInstrument.dispose(),this._updateEvents(this._sections);for(var t=0;t<this.sections.length;t++)this.sections.getAt(t).dispose()}},forceLayout:function(){this._resizeHandler()}},{AnimationType:{entrance:"entrance",contentTransition:"contentTransition",insert:"insert",remove:"remove"},LoadingState:{loading:"loading",complete:"complete"},_ClassName:{hub:"win-hub",hubSurface:"win-hub-surface",hubProgress:"win-hub-progress",hubViewport:"win-hub-viewport",hubVertical:"win-hub-vertical",hubHorizontal:"win-hub-horizontal"},_EventName:{contentAnimating:I.contentAnimating,headerInvoked:I.headerInvoked,loadingStateChanged:I.loadingStateChanged}});t.Class.mix(k,_.DOMEventMixin);var T=t.Class.define(function(e){this._hub=e},{getPanAxis:function(){return this._hub._getPanAxis()},configureForZoom:function(e,t,n,i){this._hub._configureForZoom(e,t,n,i)},setCurrentItem:function(e,t){this._hub._setCurrentItem(e,t)},getCurrentItem:function(){return this._hub._getCurrentItem()},beginZoom:function(){this._hub._beginZoom()},positionItem:function(e,t){return this._hub._positionItem(e,t)},endZoom:function(e){this._hub._endZoom(e)}}),M={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get duplicateSection(){return"Hub duplicate sections: Each HubSection must be unique"},get invalidContent(){return"Invalid content: Hub content must be made up of HubSections."},get hubViewportAriaLabel(){return s._getWinJSString("ui/hubViewportAriaLabel").value}};return k})});
}),i("require-style!less/styles-lightdismissservice",[],function(){});var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};i("WinJS/_LightDismissService",["require","exports","./Application","./Core/_Base","./Core/_BaseUtils","./Utilities/_ElementUtilities","./Core/_Global","./Utilities/_KeyboardBehavior","./Core/_Log","./Core/_Resources"],function(e,t,n,i,o,s,a,l,u,c){e(["require-style!less/styles-lightdismissservice"]);var d=1e3,h={get closeOverlay(){return c._getWinJSString("ui/closeOverlay").value}};t._ClassNames={_clickEater:"win-clickeater"};t.LightDismissalReasons={tap:"tap",lostFocus:"lostFocus",escape:"escape",hardwareBackButton:"hardwareBackButton",windowResize:"windowResize",windowBlur:"windowBlur"},t.DismissalPolicies={light:function(e){switch(e.reason){case t.LightDismissalReasons.tap:case t.LightDismissalReasons.escape:return e.active?!0:(e.stopPropagation(),!1);case t.LightDismissalReasons.hardwareBackButton:return e.active?(e.preventDefault(),!0):(e.stopPropagation(),!1);case t.LightDismissalReasons.lostFocus:case t.LightDismissalReasons.windowResize:case t.LightDismissalReasons.windowBlur:return!0}},modal:function(e){switch(e.stopPropagation(),e.reason){case t.LightDismissalReasons.tap:case t.LightDismissalReasons.lostFocus:case t.LightDismissalReasons.windowResize:case t.LightDismissalReasons.windowBlur:return!1;case t.LightDismissalReasons.escape:return e.active;case t.LightDismissalReasons.hardwareBackButton:return e.preventDefault(),e.active}},sticky:function(e){return e.stopPropagation(),!1}};var p={keyDown:"keyDown",keyUp:"keyUp",keyPress:"keyPress"},m=function(){function e(e){this.element=e.element,this.element.tabIndex=e.tabIndex,this.onLightDismiss=e.onLightDismiss,e.onTakeFocus&&(this.onTakeFocus=e.onTakeFocus),e.onShouldLightDismiss&&(this.onShouldLightDismiss=e.onShouldLightDismiss),this._ldeOnKeyDownBound=this._ldeOnKeyDown.bind(this),this._ldeOnKeyUpBound=this._ldeOnKeyUp.bind(this),this._ldeOnKeyPressBound=this._ldeOnKeyPress.bind(this)}return e.prototype.restoreFocus=function(){var e=a.document.activeElement;if(e&&this.containsElement(e))return this._ldeCurrentFocus=e,!0;var t=!l._keyboardSeenLast;return this._ldeCurrentFocus&&this.containsElement(this._ldeCurrentFocus)&&s._tryFocusOnAnyElement(this._ldeCurrentFocus,t)},e.prototype._ldeOnKeyDown=function(e){this._ldeService.keyDown(this,e)},e.prototype._ldeOnKeyUp=function(e){this._ldeService.keyUp(this,e)},e.prototype._ldeOnKeyPress=function(e){this._ldeService.keyPress(this,e)},e.prototype.setZIndex=function(e){this.element.style.zIndex=e},e.prototype.getZIndexCount=function(){return 1},e.prototype.containsElement=function(e){return this.element.contains(e)},e.prototype.onTakeFocus=function(e){this.restoreFocus()||s._focusFirstFocusableElement(this.element,e)||s._tryFocusOnAnyElement(this.element,e)},e.prototype.onFocus=function(e){this._ldeCurrentFocus=e},e.prototype.onShow=function(e){this._ldeService=e,this.element.addEventListener("keydown",this._ldeOnKeyDownBound),this.element.addEventListener("keyup",this._ldeOnKeyUpBound),this.element.addEventListener("keypress",this._ldeOnKeyPressBound)},e.prototype.onHide=function(){this._ldeCurrentFocus=null,this._ldeService=null,this.element.removeEventListener("keydown",this._ldeOnKeyDownBound),this.element.removeEventListener("keyup",this._ldeOnKeyUpBound),this.element.removeEventListener("keypress",this._ldeOnKeyPressBound)},e.prototype.onKeyInStack=function(e){},e.prototype.onShouldLightDismiss=function(e){return!1},e.prototype.onLightDismiss=function(e){},e}(),f=function(e){function n(){e.apply(this,arguments)}return r(n,e),n.prototype.onKeyInStack=function(e){},n.prototype.onShouldLightDismiss=function(e){return t.DismissalPolicies.light(e)},n}(m);t.LightDismissableElement=f;var _=function(e){function n(){e.apply(this,arguments)}return r(n,e),n.prototype.onKeyInStack=function(e){e.stopPropagation()},n.prototype.onShouldLightDismiss=function(e){return t.DismissalPolicies.modal(e)},n}(m);t.ModalElement=_;var g=function(){function e(){}return e.prototype.setZIndex=function(e){},e.prototype.getZIndexCount=function(){return 1},e.prototype.containsElement=function(e){return a.document.body.contains(e)},e.prototype.onTakeFocus=function(e){this.currentFocus&&this.containsElement(this.currentFocus)&&s._tryFocusOnAnyElement(this.currentFocus,e)},e.prototype.onFocus=function(e){this.currentFocus=e},e.prototype.onShow=function(e){},e.prototype.onHide=function(){this.currentFocus=null},e.prototype.onKeyInStack=function(e){},e.prototype.onShouldLightDismiss=function(e){return!1},e.prototype.onLightDismiss=function(e){},e}(),v=function(){function e(){this._debug=!1,this._clients=[],this._notifying=!1,this._bodyClient=new g,this._updateDom_rendered={serviceActive:!1},this._clickEaterEl=this._createClickEater(),this._onBeforeRequestingFocusOnKeyboardInputBound=this._onBeforeRequestingFocusOnKeyboardInput.bind(this),this._onFocusInBound=this._onFocusIn.bind(this),this._onKeyDownBound=this._onKeyDown.bind(this),this._onWindowResizeBound=this._onWindowResize.bind(this),this._onClickEaterPointerUpBound=this._onClickEaterPointerUp.bind(this),this._onClickEaterPointerCancelBound=this._onClickEaterPointerCancel.bind(this),n.addEventListener("backclick",this._onBackClick.bind(this)),a.window.addEventListener("blur",this._onWindowBlur.bind(this)),this.shown(this._bodyClient)}return e.prototype.shown=function(e){var t=this._clients.indexOf(e);-1===t&&(this._clients.push(e),e.onShow(this),this._updateDom())},e.prototype.hidden=function(e){var t=this._clients.indexOf(e);-1!==t&&(this._clients.splice(t,1),e.setZIndex(""),e.onHide(),this._updateDom())},e.prototype.updated=function(e){this._updateDom()},e.prototype.keyDown=function(e,t){t.keyCode===s.Key.escape?this._escapePressed(t):this._dispatchKeyboardEvent(e,p.keyDown,t)},e.prototype.keyUp=function(e,t){this._dispatchKeyboardEvent(e,p.keyUp,t)},e.prototype.keyPress=function(e,t){this._dispatchKeyboardEvent(e,p.keyPress,t)},e.prototype.isShown=function(e){return-1!==this._clients.indexOf(e)},e.prototype.isTopmost=function(e){return e===this._clients[this._clients.length-1]},e.prototype._setDebug=function(e){this._debug=e},e.prototype._updateDom=function(e){e=e||{};var t=!!e.activeDismissableNeedsFocus,i=this._updateDom_rendered;if(!this._notifying){var r=this._clients.length>1;if(r!==i.serviceActive){if(r)n.addEventListener("beforerequestingfocusonkeyboardinput",this._onBeforeRequestingFocusOnKeyboardInputBound),s._addEventListener(a.document.documentElement,"focusin",this._onFocusInBound),a.document.documentElement.addEventListener("keydown",this._onKeyDownBound),a.window.addEventListener("resize",this._onWindowResizeBound),this._bodyClient.currentFocus=a.document.activeElement,a.document.body.appendChild(this._clickEaterEl);else{n.removeEventListener("beforerequestingfocusonkeyboardinput",this._onBeforeRequestingFocusOnKeyboardInputBound),s._removeEventListener(a.document.documentElement,"focusin",this._onFocusInBound),a.document.documentElement.removeEventListener("keydown",this._onKeyDownBound),a.window.removeEventListener("resize",this._onWindowResizeBound);var o=this._clickEaterEl.parentNode;o&&o.removeChild(this._clickEaterEl)}i.serviceActive=r}var u=0,c=d+1;this._clients.forEach(function(e,t){var n=c+u;e.setZIndex(""+n),c=n,u=e.getZIndexCount()+1}),r&&(this._clickEaterEl.style.zIndex=""+(c-1));var h=this._clients.length>0?this._clients[this._clients.length-1]:null;if(this._activeDismissable!==h&&(this._activeDismissable=h,t=!0),t){var p=!l._keyboardSeenLast;this._activeDismissable&&this._activeDismissable.onTakeFocus(p)}}},e.prototype._dispatchKeyboardEvent=function(e,t,n){var i=this._clients.indexOf(e);if(-1!==i)for(var r={type:t,keyCode:n.keyCode,propagationStopped:!1,stopPropagation:function(){this.propagationStopped=!0,n.stopPropagation()}},o=this._clients.slice(0,i+1),s=o.length-1;s>=0&&!r.propagationStopped;s--)o[s].onKeyInStack(r)},e.prototype._dispatchLightDismiss=function(e,t,n){if(this._notifying)return void(u.log&&u.log('_LightDismissService ignored dismiss trigger to avoid re-entrancy: "'+e+'"',"winjs _LightDismissService","warning"));if(t=t||this._clients.slice(0),0!==t.length){this._notifying=!0;for(var i={reason:e,active:!1,_stop:!1,stopPropagation:function(){this._stop=!0},_doDefault:!0,preventDefault:function(){this._doDefault=!1}},r=t.length-1;r>=0&&!i._stop;r--)i.active=this._activeDismissable===t[r],t[r].onShouldLightDismiss(i)&&t[r].onLightDismiss(i);return this._notifying=!1,this._updateDom(n),i._doDefault}},e.prototype._onBeforeRequestingFocusOnKeyboardInput=function(e){return!0},e.prototype._clickEaterTapped=function(){this._dispatchLightDismiss(t.LightDismissalReasons.tap)},e.prototype._onFocusIn=function(e){for(var n=e.target,i=this._clients.length-1;i>=0&&!this._clients[i].containsElement(n);i--);-1!==i&&this._clients[i].onFocus(n),i+1<this._clients.length&&this._dispatchLightDismiss(t.LightDismissalReasons.lostFocus,this._clients.slice(i+1),{activeDismissableNeedsFocus:!0})},e.prototype._onKeyDown=function(e){e.keyCode===s.Key.escape&&this._escapePressed(e)},e.prototype._escapePressed=function(e){e.preventDefault(),e.stopPropagation(),this._dispatchLightDismiss(t.LightDismissalReasons.escape)},e.prototype._onBackClick=function(e){var n=this._dispatchLightDismiss(t.LightDismissalReasons.hardwareBackButton);return!n},e.prototype._onWindowResize=function(e){this._dispatchLightDismiss(t.LightDismissalReasons.windowResize)},e.prototype._onWindowBlur=function(e){if(!this._debug)if(a.document.hasFocus()){var n=a.document.activeElement;n&&"IFRAME"===n.tagName&&!n.msLightDismissBlur&&(n.addEventListener("blur",this._onWindowBlur.bind(this),!1),n.msLightDismissBlur=!0)}else this._dispatchLightDismiss(t.LightDismissalReasons.windowBlur)},e.prototype._createClickEater=function(){var e=a.document.createElement("section");return e.className=t._ClassNames._clickEater,s._addEventListener(e,"pointerdown",this._onClickEaterPointerDown.bind(this),!0),e.addEventListener("click",this._onClickEaterClick.bind(this),!0),e.setAttribute("role","menuitem"),e.setAttribute("aria-label",h.closeOverlay),e.setAttribute("unselectable","on"),e},e.prototype._onClickEaterPointerDown=function(e){e.stopPropagation(),e.preventDefault(),this._clickEaterPointerId=e.pointerId,this._registeredClickEaterCleanUp||(s._addEventListener(a.window,"pointerup",this._onClickEaterPointerUpBound),s._addEventListener(a.window,"pointercancel",this._onClickEaterPointerCancelBound),this._registeredClickEaterCleanUp=!0)},e.prototype._onClickEaterPointerUp=function(e){var t=this;if(e.stopPropagation(),e.preventDefault(),e.pointerId===this._clickEaterPointerId){this._resetClickEaterPointerState();var n=a.document.elementFromPoint(e.clientX,e.clientY);n===this._clickEaterEl&&(this._skipClickEaterClick=!0,o._yieldForEvents(function(){t._skipClickEaterClick=!1}),this._clickEaterTapped())}},e.prototype._onClickEaterClick=function(e){e.stopPropagation(),e.preventDefault(),this._skipClickEaterClick||this._clickEaterTapped()},e.prototype._onClickEaterPointerCancel=function(e){e.pointerId===this._clickEaterPointerId&&this._resetClickEaterPointerState()},e.prototype._resetClickEaterPointerState=function(){this._registeredClickEaterCleanUp&&(s._removeEventListener(a.window,"pointerup",this._onClickEaterPointerUpBound),s._removeEventListener(a.window,"pointercancel",this._onClickEaterPointerCancelBound)),this._clickEaterPointerId=null,this._registeredClickEaterCleanUp=!1},e}(),y=new v;t.shown=y.shown.bind(y),t.hidden=y.hidden.bind(y),t.updated=y.updated.bind(y),t.isShown=y.isShown.bind(y),t.isTopmost=y.isTopmost.bind(y),t.keyDown=y.keyDown.bind(y),t.keyUp=y.keyUp.bind(y),t.keyPress=y.keyPress.bind(y),t._clickEaterTapped=y._clickEaterTapped.bind(y),t._onBackClick=y._onBackClick.bind(y),t._setDebug=y._setDebug.bind(y),i.Namespace.define("WinJS.UI._LightDismissService",{shown:t.shown,hidden:t.hidden,updated:t.updated,isShown:t.isShown,isTopmost:t.isTopmost,keyDown:t.keyDown,keyUp:t.keyUp,keyPress:t.keyPress,_clickEaterTapped:t._clickEaterTapped,_onBackClick:t._onBackClick,_setDebug:t._setDebug,LightDismissableElement:f,DismissalPolicies:t.DismissalPolicies,LightDismissalReasons:t.LightDismissalReasons,_ClassNames:t._ClassNames,_service:y})}),i("WinJS/Controls/_LegacyAppBar/_Constants",["exports","../../Core/_Base"],function(e,t){"use strict";t.Namespace._moduleDefine(e,null,{appBarClass:"win-navbar",firstDivClass:"win-firstdiv",finalDivClass:"win-finaldiv",invokeButtonClass:"win-navbar-invokebutton",ellipsisClass:"win-navbar-ellipsis",primaryCommandsClass:"win-primarygroup",secondaryCommandsClass:"win-secondarygroup",commandLayoutClass:"win-commandlayout",menuLayoutClass:"win-menulayout",topClass:"win-top",bottomClass:"win-bottom",showingClass:"win-navbar-opening",shownClass:"win-navbar-opened",hidingClass:"win-navbar-closing",hiddenClass:"win-navbar-closed",compactClass:"win-navbar-compact",minimalClass:"win-navbar-minimal",menuContainerClass:"win-navbar-menu",appBarPlacementTop:"top",appBarPlacementBottom:"bottom",appBarLayoutCustom:"custom",appBarLayoutCommands:"commands",appBarLayoutMenu:"menu",appBarInvokeButtonWidth:32,typeSeparator:"separator",typeContent:"content",typeButton:"button",typeToggle:"toggle",typeFlyout:"flyout",appBarCommandClass:"win-command",appBarCommandGlobalClass:"win-global",appBarCommandSelectionClass:"win-selection",commandHiddenClass:"win-command-hidden",sectionSelection:"selection",sectionGlobal:"global",sectionPrimary:"primary",sectionSecondary:"secondary",menuCommandClass:"win-command",menuCommandButtonClass:"win-command-button",menuCommandToggleClass:"win-command-toggle",menuCommandFlyoutClass:"win-command-flyout",menuCommandFlyoutActivatedClass:"win-command-flyout-activated",menuCommandSeparatorClass:"win-command-separator",_menuCommandInvokedEvent:"_invoked",menuClass:"win-menu",menuContainsToggleCommandClass:"win-menu-containstogglecommand",menuContainsFlyoutCommandClass:"win-menu-containsflyoutcommand",menuMouseSpacingClass:"win-menu-mousespacing",menuTouchSpacingClass:"win-menu-touchspacing",menuCommandHoverDelay:400,overlayClass:"win-overlay",flyoutClass:"win-flyout",flyoutLightClass:"win-ui-light",settingsFlyoutClass:"win-settingsflyout",scrollsClass:"win-scrolls",pinToRightEdge:-1,pinToBottomEdge:-1,separatorWidth:34,buttonWidth:68,narrowClass:"win-narrow",wideClass:"win-wide",_visualViewportClass:"win-visualviewport-space",commandPropertyMutated:"_commandpropertymutated",commandVisibilityChanged:"commandvisibilitychanged"})}),i("WinJS/Utilities/_KeyboardInfo",["require","exports","../Core/_BaseCoreUtils","../Core/_Global","../Core/_WinRT"],function(e,t,n,i,r){"use strict";var o={visualViewportClass:"win-visualviewport-space",scrollTimeout:150};t._KeyboardInfo,t._KeyboardInfo={get _visible(){try{return r.Windows.UI.ViewManagement.InputPane&&r.Windows.UI.ViewManagement.InputPane.getForCurrentView().occludedRect.height>0}catch(e){return!1}},get _extraOccluded(){var e=0;return!t._KeyboardInfo._isResized&&r.Windows.UI.ViewManagement.InputPane&&(e=r.Windows.UI.ViewManagement.InputPane.getForCurrentView().occludedRect.height),e},get _isResized(){var e=i.document.documentElement.clientHeight/i.innerHeight,t=i.document.documentElement.clientWidth/i.innerWidth;return.99>t/e},get _visibleDocBottom(){return t._KeyboardInfo._visibleDocTop+t._KeyboardInfo._visibleDocHeight},get _visibleDocHeight(){return t._KeyboardInfo._visualViewportHeight-t._KeyboardInfo._extraOccluded},get _visibleDocTop(){return 0},get _visibleDocBottomOffset(){return t._KeyboardInfo._extraOccluded},get _visualViewportHeight(){var e=t._KeyboardInfo._visualViewportSpace;return e.height},get _visualViewportWidth(){var e=t._KeyboardInfo._visualViewportSpace;return e.width},get _visualViewportSpace(){var e=i.document.body.querySelector("."+o.visualViewportClass);return e||(e=i.document.createElement("DIV"),e.className=o.visualViewportClass,i.document.body.appendChild(e)),e.getBoundingClientRect()},get _animationShowLength(){if(n.hasWinRT){if(r.Windows.UI.Core.AnimationMetrics){for(var e=r.Windows.UI.Core.AnimationMetrics,t=new e.AnimationDescription(e.AnimationEffect.showPanel,e.AnimationEffectTarget.primary),i=t.animations,o=0,s=0;s<i.size;s++){var a=i[s];o=Math.max(o,a.delay+a.duration)}return o}var l=300,u=50;return u+l}return 0},get _scrollTimeout(){return o.scrollTimeout},get _layoutViewportCoords(){var e=i.window.pageYOffset-i.document.documentElement.scrollTop,t=i.document.documentElement.clientHeight-(e+this._visibleDocHeight);return{visibleDocTop:e,visibleDocBottom:t}}}}),i("require-style!less/styles-overlay",[],function(){}),i("require-style!less/colors-overlay",[],function(){}),i("WinJS/Controls/Flyout/_Overlay",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Resources","../../Core/_WriteProfilerMark","../../_Accents","../../Animations","../../Application","../../ControlProcessor","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardInfo","../_LegacyAppBar/_Constants","require-style!less/styles-overlay","require-style!less/colors-overlay"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v){"use strict";u.createAccentRule("button[aria-checked=true].win-command:before,	         .win-menu-containsflyoutcommand button.win-command-flyout-activated:before",[{name:"background-color",value:u.ColorTypes.accent},{name:"border-color",value:u.ColorTypes.accent}]),u.createAccentRule(".win-flyout, .win-settingsflyout",[{name:"border-color",value:u.ColorTypes.accent}]),i.Namespace._moduleDefine(e,"WinJS.UI",{_Overlay:i.Namespace._lazy(function(){function e(e,n,i){var r=t.document.querySelectorAll("."+v.overlayClass);if(r)for(var o=r.length,s=0;o>s;s++){var a=r[s],l=a.winControl;if(!l._disposed&&l){var u=l[n](e);if(i&&u)return u}}}function r(e){if(!e)return[];"string"!=typeof e&&e&&e.length||(e=[e]);var n,i=[];for(n=0;n<e.length;n++)if(e[n])if("string"==typeof e[n]){var r=t.document.getElementById(e[n]);r&&i.push(r)}else e[n].element?i.push(e[n].element):i.push(e[n]);return i}var s=i.Class.define(function(){this._currentState=s.states.off,this._inputPaneShowing=this._inputPaneShowing.bind(this),this._inputPaneHiding=this._inputPaneHiding.bind(this),this._documentScroll=this._documentScroll.bind(this),this._windowResized=this._windowResized.bind(this)},{initialize:function(){this._toggleListeners(s.states.on)},reset:function(){this._toggleListeners(s.states.off),this._toggleListeners(s.states.on)},_inputPaneShowing:function(t){l(s.profilerString+"_showingKeyboard,StartTM"),e(t,"_showingKeyboard"),l(s.profilerString+"_showingKeyboard,StopTM")},_inputPaneHiding:function(t){l(s.profilerString+"_hidingKeyboard,StartTM"),e(t,"_hidingKeyboard"),l(s.profilerString+"_hidingKeyboard,StopTM")},_documentScroll:function(t){l(s.profilerString+"_checkScrollPosition,StartTM"),e(t,"_checkScrollPosition"),l(s.profilerString+"_checkScrollPosition,StopTM")},_windowResized:function(t){l(s.profilerString+"_baseResize,StartTM"),e(t,"_baseResize"),l(s.profilerString+"_baseResize,StopTM")},_toggleListeners:function(e){var i;if(this._currentState!==e){if(e===s.states.on?i="addEventListener":e===s.states.off&&(i="removeEventListener"),n.Windows.UI.ViewManagement.InputPane){var r=n.Windows.UI.ViewManagement.InputPane.getForCurrentView();r[i]("showing",this._inputPaneShowing,!1),r[i]("hiding",this._inputPaneHiding,!1),t.document[i]("scroll",this._documentScroll,!1)}t.addEventListener("resize",this._windowResized,!1),this._currentState=e}}},{profilerString:{get:function(){return"WinJS.UI._Overlay Global Listener:"}},states:{get:function(){return{off:0,on:1}}}}),u={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get mustContainCommands(){return"Invalid HTML: AppBars/Menus must contain only AppBarCommands/MenuCommands"},get closeOverlay(){return a._getWinJSString("ui/closeOverlay").value}},d=i.Class.define(function(e,t){this._baseOverlayConstructor(e,t)},{_baseOverlayConstructor:function(e,n){this._disposed=!1,e||(e=t.document.createElement("div"));var i=e.winControl;if(i)throw new o("WinJS.UI._Overlay.DuplicateConstruction",u.duplicateConstruction);this._element||(this._element=e),this._element.hasAttribute("tabIndex")||(this._element.tabIndex=-1),this._sticky=!1,this._doNext="",this._element.style.visibility="hidden",this._element.style.opacity=0,e.winControl=this,_.addClass(this._element,v.overlayClass),_.addClass(this._element,"win-disposable");var r=this._element.getAttribute("unselectable");(null===r||void 0===r)&&this._element.setAttribute("unselectable","on"),this._currentAnimateIn=this._baseAnimateIn,this._currentAnimateOut=this._baseAnimateOut,this._animationPromise=p.as(),this._queuedToShow=[],this._queuedToHide=[],this._queuedCommandAnimation=!1,n&&f.setOptions(this,n),d._globalEventListeners.initialize()},element:{get:function(){return this._element}},dispose:function(){this._disposed||(this._disposed=!0,this._dispose())},_dispose:function(){},_show:function(){this._baseShow()},_hide:function(){this._baseHide()},hidden:{get:function(){return"hidden"===this._element.style.visibility||"hiding"===this._element.winAnimating||"hide"===this._doNext},set:function(e){var t=this.hidden;!e&&t?this.show():e&&!t&&this.hide()}},addEventListener:function(e,t,n){return this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},_baseShow:function(){if(this._animating||this._needToHandleHidingKeyboard)return this._doNext="show",!1;if("visible"!==this._element.style.visibility){this._element.winAnimating="showing",this._element.style.display="",this._element.style.visibility="hidden",this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),this._beforeShow(),this._sendEvent(d.beforeShow),this._ensurePosition();var e=this;return this._animationPromise=this._currentAnimateIn().then(function(){e._baseEndShow()},function(){e._baseEndShow()}),!0}return!1},_beforeShow:function(){},_ensurePosition:function(){},_baseEndShow:function(){this._disposed||(this._element.setAttribute("aria-hidden","false"),this._element.winAnimating="","show"===this._doNext&&(this._doNext=""),this._sendEvent(d.afterShow),this._writeProfilerMark("show,StopTM"),m.schedule(this._checkDoNext,m.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"))},_baseHide:function(){if(this._animating)return this._doNext="hide",!1;if(this._needToHandleHidingKeyboard&&(this._element.style.visibility=""),"hidden"!==this._element.style.visibility){if(this._element.winAnimating="hiding",this._element.setAttribute("aria-hidden","true"),this._sendEvent(d.beforeHide),""===this._element.style.visibility)this._element.style.opacity=0,this._baseEndHide();else{var e=this;this._animationPromise=this._currentAnimateOut().then(function(){e._baseEndHide()},function(){e._baseEndHide()})}return!0}return!1},_baseEndHide:function(){this._disposed||(this._beforeEndHide(),this._element.style.visibility="hidden",this._element.style.display="none",this._element.winAnimating="",this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),"hide"===this._doNext&&(this._doNext=""),this._afterHide(),this._sendEvent(d.afterHide),this._writeProfilerMark("hide,StopTM"),m.schedule(this._checkDoNext,m.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"))},_beforeEndHide:function(){},_afterHide:function(){},_checkDoNext:function(){this._animating||this._needToHandleHidingKeyboard||this._disposed||("hide"===this._doNext?(this._hide(),this._doNext=""):this._queuedCommandAnimation?this._showAndHideQueue():"show"===this._doNext&&(this._show(),this._doNext=""))},_baseAnimateIn:function(){return this._element.style.opacity=0,this._element.style.visibility="visible",_._getComputedStyle(this._element,null).opacity,c.fadeIn(this._element)},_baseAnimateOut:function(){return this._element.style.opacity=1,_._getComputedStyle(this._element,null).opacity,c.fadeOut(this._element)},_animating:{get:function(){return!!this._element.winAnimating}},_sendEvent:function(e,n){if(!this._disposed){var i=t.document.createEvent("CustomEvent");i.initEvent(e,!0,!0,n||{}),this._element.dispatchEvent(i)}},_showCommands:function(e,t){var n=this._resolveCommands(e);this._showAndHideCommands(n.commands,[],t)},_hideCommands:function(e,t){var n=this._resolveCommands(e);this._showAndHideCommands([],n.commands,t)},_showOnlyCommands:function(e,t){var n=this._resolveCommands(e);this._showAndHideCommands(n.commands,n.others,t)},_showAndHideCommands:function(e,t,n){n||this.hidden&&!this._animating?(this._showAndHideFast(e,t),this._removeFromQueue(e,this._queuedToShow),this._removeFromQueue(t,this._queuedToHide)):(this._updateAnimateQueue(e,this._queuedToShow,this._queuedToHide),this._updateAnimateQueue(t,this._queuedToHide,this._queuedToShow))},_removeFromQueue:function(e,t){var n;for(n=0;n<e.length;n++){var i;for(i=0;i<t.length;i++)if(t[i]===e[n]){t.splice(i,1);break}}},_updateAnimateQueue:function(e,t,n){if(!this._disposed){var i;for(i=0;i<e.length;i++){var r;for(r=0;r<t.length&&t[r]!==e[i];r++);for(r===t.length&&(t[r]=e[i]),r=0;r<n.length;r++)if(n[r]===e[i]){n.splice(r,1);break}}this._queuedCommandAnimation||(this._animating||m.schedule(this._checkDoNext,m.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext"),this._queuedCommandAnimation=!0)}},_showAndHideFast:function(e,t){var n,i;for(n=0;n<e.length;n++)i=e[n],i&&i.style&&(i.style.visibility="",i.style.display="");for(n=0;n<t.length;n++)i=t[n],i&&i.style&&(i.style.visibility="hidden",i.style.display="none");this._commandsUpdated()},_showAndHideQueue:function(){if(this._queuedCommandAnimation=!1,this.hidden)this._showAndHideFast(this._queuedToShow,this._queuedToHide),m.schedule(this._checkDoNext,m.Priority.normal,this,"WinJS.UI._Overlay._checkDoNext");else{var e,n=this._queuedToShow,i=this._queuedToHide,r=this._findSiblings(n.concat(i));for(e=0;e<n.length;e++)n[e]&&n[e].style&&t.document.body.contains(n[e])?"hidden"!==n[e].style.visibility&&"0"!==n[e].style.opacity&&(r.push(n[e]),n.splice(e,1),e--):(n.splice(e,1),e--);for(e=0;e<i.length;e++)i[e]&&i[e].style&&t.document.body.contains(i[e])&&"hidden"!==i[e].style.visibility&&"0"!==i[e].style.opacity||(i.splice(e,1),e--);var o=this._baseBeginAnimateCommands(n,i,r),s=this;o?o.done(function(){s._baseEndAnimateCommands(i)},function(){s._baseEndAnimateCommands(i)}):m.schedule(function(){s._baseEndAnimateCommands([])},m.Priority.normal,null,"WinJS.UI._Overlay._endAnimateCommandsWithoutAnimation")}this._queuedToShow=[],this._queuedToHide=[]},_baseBeginAnimateCommands:function(e,t,n){this._beginAnimateCommands(e,t,this._getVisibleCommands(n));var i=null,r=null;t.length>0&&(r=c.createDeleteFromListAnimation(t,0===e.length?n:void 0)),e.length>0&&(i=c.createAddToListAnimation(e,n));for(var o=0,s=t.length;s>o;o++){var a=t[o].getBoundingClientRect(),l=_._getComputedStyle(t[o]);t[o].style.top=a.top-parseFloat(l.marginTop)+"px",t[o].style.left=a.left-parseFloat(l.marginLeft)+"px",t[o].style.opacity=0,t[o].style.position="fixed"}this._element.winAnimating="rearranging";var u=null;for(r&&(u=r.execute()),o=0;o<e.length;o++)e[o].style.visibility="",e[o].style.display="",e[o].style.opacity=1;if(i){var d=i.execute();u=u?p.join([u,d]):d}return u},_beginAnimateCommands:function(){},_getVisibleCommands:function(e){var t,n=e,i=[];n||(n=this.element.querySelectorAll(".win-command"));for(var r=0,o=n.length;o>r;r++)t=n[r].winControl||n[r],t.hidden||i.push(t);return i},_baseEndAnimateCommands:function(e){if(!this._disposed){var t;for(t=0;t<e.length;t++)e[t].style.position="",e[t].style.top="",e[t].style.left="",e[t].getBoundingClientRect(),e[t].style.visibility="hidden",e[t].style.display="none",e[t].style.opacity=1;this._element.winAnimating="",this._endAnimateCommands(),this._checkDoNext()}},_endAnimateCommands:function(){},_resolveCommands:function(e){e=r(e);var t={};t.commands=[],t.others=[];var n,i,o=this.element.querySelectorAll(".win-command");for(n=0;n<o.length;n++){var s=!1;for(i=0;i<e.length;i++)if(e[i]===o[n]){t.commands.push(o[n]),e.splice(i,1),s=!0;break}s||t.others.push(o[n])}return t},_findSiblings:function(e){var t,n,i=[],r=this.element.querySelectorAll(".win-command");for(t=0;t<r.length;t++){var o=!1;for(n=0;n<e.length;n++)if(e[n]===r[t]){e.splice(n,1),o=!0;break}o||i.push(r[t])}return i},_baseResize:function(e){this._resize(e)},_hideOrDismiss:function(){var e=this._element;e&&_.hasClass(e,v.settingsFlyoutClass)?this._dismiss():e&&_.hasClass(e,v.appBarClass)?this.close():this.hide()},_resize:function(){},_commandsUpdated:function(){},_checkScrollPosition:function(){},_showingKeyboard:function(){},_hidingKeyboard:function(){},_verifyCommandsOnly:function(e,t){for(var n=e.children,i=new Array(n.length),r=0;r<n.length;r++){if(!_.hasClass(n[r],"win-command")&&n[r].getAttribute("data-win-control")!==t)throw new o("WinJS.UI._Overlay.MustContainCommands",u.mustContainCommands);h.processAll(n[r]),i[r]=n[r].winControl}return i},_focusOnLastFocusableElementOrThis:function(){this._focusOnLastFocusableElement()||d._trySetActive(this._element)},_focusOnLastFocusableElement:function(){if(this._element.firstElementChild){var e=this._element.firstElementChild.tabIndex,n=this._element.lastElementChild.tabIndex;this._element.firstElementChild.tabIndex=-1,this._element.lastElementChild.tabIndex=-1;var i=_._focusLastFocusableElement(this._element);return i&&d._trySelect(t.document.activeElement),this._element.firstElementChild.tabIndex=e,this._element.lastElementChild.tabIndex=n,i}return!1},_focusOnFirstFocusableElementOrThis:function(){this._focusOnFirstFocusableElement()||d._trySetActive(this._element)},_focusOnFirstFocusableElement:function(e,n){if(this._element.firstElementChild){var i=this._element.firstElementChild.tabIndex,r=this._element.lastElementChild.tabIndex;this._element.firstElementChild.tabIndex=-1,this._element.lastElementChild.tabIndex=-1;var o=_._focusFirstFocusableElement(this._element,e,n);return o&&d._trySelect(t.document.activeElement),this._element.firstElementChild.tabIndex=i,this._element.lastElementChild.tabIndex=r,o}return!1},_writeProfilerMark:function(e){l("WinJS.UI._Overlay:"+this._id+":"+e)}},{_isFlyoutVisible:function(){for(var e=t.document.querySelectorAll("."+v.flyoutClass),n=0;n<e.length;n++){var i=e[n].winControl;if(i&&!i.hidden)return!0}return!1},_trySetActive:function(e,n){return e&&t.document.body&&t.document.body.contains(e)&&_._setActive(e,n)?e===t.document.activeElement:!1},_trySelect:function(e){try{e&&e.select&&e.select()}catch(t){}},_sizeOfDocument:function(){return{width:t.document.documentElement.offsetWidth,height:t.document.documentElement.offsetHeight}},_getParentControlUsingClassName:function(e,n){for(;e&&e!==t.document.body;){if(_.hasClass(e,n))return e.winControl;e=e.parentNode}return null},_globalEventListeners:new s,_hideAppBars:function(e,t){var n=e.map(function(e){return e.close(),e._animationPromise});return p.join(n)},_showAppBars:function(e,t){var n=e.map(function(e){return e._show(),e._animationPromise});return p.join(n)},_keyboardInfo:g._KeyboardInfo,_scrollTimeout:g._KeyboardInfo._scrollTimeout,beforeShow:"beforeshow",beforeHide:"beforehide",afterShow:"aftershow",afterHide:"afterhide",commonstrings:{get cannotChangeCommandsWhenVisible(){return"Invalid argument: You must call hide() before changing {0} commands"},get cannotChangeHiddenProperty(){return"Unable to set hidden property while parent {0} is visible."}}});return i.Class.mix(d,f.DOMEventMixin),d})})}),i("WinJS/Controls/Flyout",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../_Signal","../_LightDismissService","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_KeyboardBehavior","../Utilities/_Hoverable","./_LegacyAppBar/_Constants","./Flyout/_Overlay"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g){
"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{Flyout:n.Namespace._lazy(function(){function e(e,t){return p.convertToPixels(e,p._getComputedStyle(e,null)[t])}function f(t){return{marginTop:e(t,"marginTop"),marginBottom:e(t,"marginBottom"),marginLeft:e(t,"marginLeft"),marginRight:e(t,"marginRight"),totalWidth:p.getTotalWidth(t),totalHeight:p.getTotalHeight(t),contentWidth:p.getContentWidth(t),contentHeight:p.getContentHeight(t)}}var v=p.Key,y={get ariaLabel(){return a._getWinJSString("ui/flyoutAriaLabel").value},get noAnchor(){return"Invalid argument: Flyout anchor element not found in DOM."},get badPlacement(){return"Invalid argument: Flyout placement should be 'top' (default), 'bottom', 'left', 'right', 'auto', 'autohorizontal', or 'autovertical'."},get badAlignment(){return"Invalid argument: Flyout alignment should be 'center' (default), 'left', or 'right'."},get noCoordinates(){return"Invalid argument: Flyout coordinates must contain a valid x,y pair."}},b=o._createEventProperty,C=n.Class.define(function(e){this._onLightDismiss=e,this._currentlyFocusedClient=null,this._clients=[]},{shown:function(e){e._focusable=!0;var t=this._clients.indexOf(e);-1===t&&(this._clients.push(e),e.onShow(this),d.isShown(this)?(d.updated(this),this._activateTopFocusableClientIfNeeded()):d.shown(this))},hiding:function(e){var t=this._clients.indexOf(e);-1!==t&&(this._clients[t]._focusable=!1,this._activateTopFocusableClientIfNeeded())},hidden:function(e){var t=this._clients.indexOf(e);-1!==t&&(this._clients.splice(t,1),e.setZIndex(""),e.onHide(),0===this._clients.length?d.hidden(this):(d.updated(this),this._activateTopFocusableClientIfNeeded()))},keyDown:function(e,t){d.keyDown(this,t)},keyUp:function(e,t){d.keyUp(this,t)},keyPress:function(e,t){d.keyPress(this,t)},clients:{get:function(){return this._clients}},_clientForElement:function(e){for(var t=this._clients.length-1;t>=0;t--)if(this._clients[t].containsElement(e))return this._clients[t];return null},_focusableClientForElement:function(e){for(var t=this._clients.length-1;t>=0;t--)if(this._clients[t]._focusable&&this._clients[t].containsElement(e))return this._clients[t];return null},_getTopmostFocusableClient:function(){for(var e=this._clients.length-1;e>=0;e--){var t=this._clients[e];if(t&&t._focusable)return t}return null},_activateTopFocusableClientIfNeeded:function(){var e=this._getTopmostFocusableClient();if(e&&d.isTopmost(this)){var t=!m._keyboardSeenLast;e.onTakeFocus(t)}},setZIndex:function(e){this._clients.forEach(function(t,n){t.setZIndex(e+n)},this)},getZIndexCount:function(){return this._clients.length},containsElement:function(e){return!!this._clientForElement(e)},onTakeFocus:function(e){var n=this._focusableClientForElement(t.document.activeElement);!n&&-1!==this._clients.indexOf(this._currentlyFocusedClient)&&this._currentlyFocusedClient._focusable&&(n=this._currentlyFocusedClient),n||(n=this._getTopmostFocusableClient()),this._currentlyFocusedClient=n,n&&n.onTakeFocus(e)},onFocus:function(e){this._currentlyFocusedClient=this._clientForElement(e),this._currentlyFocusedClient&&this._currentlyFocusedClient.onFocus(e)},onShow:function(e){},onHide:function(){this._currentlyFocusedClient=null},onKeyInStack:function(e){var t=this._clients.indexOf(this._currentlyFocusedClient);if(-1!==t)for(var n=this._clients.slice(0,t+1),i=n.length-1;i>=0&&!e.propagationStopped;i--)n[i]._focusable&&n[i].onKeyInStack(e)},onShouldLightDismiss:function(e){return d.DismissalPolicies.light(e)},onLightDismiss:function(e){this._onLightDismiss(e)}}),w=n.Class.define(function(){var e=this;this._dismissableLayer=new C(function(t){t.reason===d.LightDismissalReasons.escape?e.collapseFlyout(e.getAt(e.length-1)):e.collapseAll()}),this._cascadingStack=[],this._handleKeyDownInCascade_bound=this._handleKeyDownInCascade.bind(this),this._inputType=null},{appendFlyout:function(e){if(s.log&&this.reentrancyLock&&s.log("_CascadeManager is attempting to append a Flyout through reentrancy.","winjs _CascadeManager","error"),this.indexOf(e)<0){var t=this.collapseAll;if(e._positionRequest instanceof S.AnchorPositioning){var n=this.indexOfElement(e._positionRequest.anchor);n>=0&&(t=function(){this.collapseFlyout(this.getAt(n+1))})}t.call(this),e.element.addEventListener("keydown",this._handleKeyDownInCascade_bound,!1),this._cascadingStack.push(e)}},collapseFlyout:function(e){if(!this.reentrancyLock&&e&&this.indexOf(e)>=0){this.reentrancyLock=!0;var t=new c;this.unlocked=t.promise;for(var n;this.length&&e!==n;)n=this._cascadingStack.pop(),n.element.removeEventListener("keydown",this._handleKeyDownInCascade_bound,!1),n._hide();0===this._cascadingStack.length&&(this._inputType=null),this.reentrancyLock=!1,this.unlocked=null,t.complete()}},flyoutShown:function(e){this._dismissableLayer.shown(e._dismissable)},flyoutHiding:function(e){this._dismissableLayer.hiding(e._dismissable)},flyoutHidden:function(e){this._dismissableLayer.hidden(e._dismissable)},collapseAll:function(){var e=this.getAt(0);e&&this.collapseFlyout(e)},indexOf:function(e){return this._cascadingStack.indexOf(e)},indexOfElement:function(e){for(var t=-1,n=0,i=this.length;i>n;n++){var r=this.getAt(n);if(r.element.contains(e)){t=n;break}}return t},length:{get:function(){return this._cascadingStack.length}},getAt:function(e){return this._cascadingStack[e]},handleFocusIntoFlyout:function(e){var t=this.indexOfElement(e.target);if(t>=0){var n=this.getAt(t+1);this.collapseFlyout(n)}},inputType:{get:function(){return this._inputType||(this._inputType=m._lastInputType),this._inputType}},dismissableLayer:{get:function(){return this._dismissableLayer}},_handleKeyDownInCascade:function(e){var t="rtl"===p._getComputedStyle(e.target).direction,n=t?v.rightArrow:v.leftArrow,i=e.target;if(e.keyCode===n){var r=this.indexOfElement(i);if(r>=1){var o=this.getAt(r);this.collapseFlyout(o),e.preventDefault()}}else(e.keyCode===v.alt||e.keyCode===v.F10)&&this.collapseAll()}}),I={top:{top:"50px",left:"0px",keyframe:"WinJS-showFlyoutTop"},bottom:{top:"-50px",left:"0px",keyframe:"WinJS-showFlyoutBottom"},left:{top:"0px",left:"50px",keyframe:"WinJS-showFlyoutLeft"},right:{top:"0px",left:"-50px",keyframe:"WinJS-showFlyoutRight"}},S={AnchorPositioning:n.Class.define(function(e,n,i){if("string"==typeof e?e=t.document.getElementById(e):e&&e.element&&(e=e.element),!e)throw new r("WinJS.UI.Flyout.NoAnchor",y.noAnchor);this.anchor=e,this.placement=n,this.alignment=i},{getTopLeft:function(e,t){function n(e){a(e)?(E=o(e)-S,b=g._Overlay._keyboardInfo._visibleDocTop,w=I.top):(E=s(e)-S,b=_.pinToBottomEdge,w=I.bottom),C=!0}function i(e,t){return(g._Overlay._keyboardInfo._visibleDocHeight-e.height)/2>=t.totalHeight}function o(e){return e.top-g._Overlay._keyboardInfo._visibleDocTop}function s(e){return g._Overlay._keyboardInfo._visibleDocBottom-e.bottom}function a(e){return o(e)>s(e)}function l(e,t){return b=e-t.totalHeight,w=I.top,b>=g._Overlay._keyboardInfo._visibleDocTop&&b+t.totalHeight<=g._Overlay._keyboardInfo._visibleDocBottom}function u(e,t){return b=e,w=I.bottom,b>=g._Overlay._keyboardInfo._visibleDocTop&&b+t.totalHeight<=g._Overlay._keyboardInfo._visibleDocBottom}function c(e,t){return v=e-t.totalWidth,w=I.left,v>=0&&v+t.totalWidth<=g._Overlay._keyboardInfo._visualViewportWidth}function d(e,t){return v=e,w=I.right,v>=0&&v+t.totalWidth<=g._Overlay._keyboardInfo._visualViewportWidth}function h(e,t){b=e.top+e.height/2-t.totalHeight/2,b<g._Overlay._keyboardInfo._visibleDocTop?b=g._Overlay._keyboardInfo._visibleDocTop:b+t.totalHeight>=g._Overlay._keyboardInfo._visibleDocBottom&&(b=_.pinToBottomEdge)}function p(e,t,n){if("center"===n)v=e.left+e.width/2-t.totalWidth/2;else if("left"===n)v=e.left;else{if("right"!==n)throw new r("WinJS.UI.Flyout.BadAlignment",y.badAlignment);v=e.right-t.totalWidth}0>v?v=0:v+t.totalWidth>=g._Overlay._keyboardInfo._visualViewportWidth&&(v=_.pinToRightEdge)}var m;try{m=this.anchor.getBoundingClientRect()}catch(f){throw new r("WinJS.UI.Flyout.NoAnchor",y.noAnchor)}var v,b,C,w,S=e.totalHeight-e.contentHeight,E=e.contentHeight,x=this.alignment;switch(this.placement){case"top":l(m.top,e)||(b=g._Overlay._keyboardInfo._visibleDocTop,C=!0,E=o(m)-S),p(m,e,x);break;case"bottom":u(m.bottom,e)||(b=_.pinToBottomEdge,C=!0,E=s(m)-S),p(m,e,x);break;case"left":c(m.left,e)||(v=0),h(m,e);break;case"right":d(m.right,e)||(v=_.pinToRightEdge),h(m,e);break;case"autovertical":l(m.top,e)||u(m.bottom,e)||n(m),p(m,e,x);break;case"autohorizontal":c(m.left,e)||d(m.right,e)||(v=_.pinToRightEdge),h(m,e);break;case"auto":i(m,e)?(l(m.top,e)||u(m.bottom,e),p(m,e,x)):c(m.left,e)||d(m.right,e)?h(m,e):(n(m),p(m,e,x));break;case"_cascade":u(m.top-e.marginTop,e)||l(m.bottom+e.marginBottom,e)||h(m,e);var P=3,k=m.right-e.marginLeft-P,T=m.left+e.marginRight+P;t?c(T,e)||d(k,e)||(v=0,w=I.left):d(k,e)||c(T,e)||(v=_.pinToRightEdge,w=I.right);break;default:throw new r("WinJS.UI.Flyout.BadPlacement",y.badPlacement)}return{left:v,top:b,animOffset:w,doesScroll:C,contentHeight:E,verticalMarginBorderPadding:S}}}),CoordinatePositioning:n.Class.define(function(e){if(e.clientX===+e.clientX&&e.clientY===+e.clientY){var t=e;e={x:t.clientX,y:t.clientY}}else if(e.x!==+e.x||e.y!==+e.y)throw new r("WinJS.UI.Flyout.NoCoordinates",y.noCoordinates);this.coordinates=e},{getTopLeft:function(e,t){var n=this.coordinates,i=e.totalWidth-e.marginLeft-e.marginRight,r=t?i:0,o=e.totalHeight-e.contentHeight,s=e.contentHeight,a=n.y-e.marginTop,l=n.x-e.marginLeft-r;return 0>a?a=0:a+e.totalHeight>g._Overlay._keyboardInfo._visibleDocBottom&&(a=_.pinToBottomEdge),0>l?l=0:l+e.totalWidth>g._Overlay._keyboardInfo._visualViewportWidth&&(l=_.pinToRightEdge),{left:l,top:a,verticalMarginBorderPadding:o,contentHeight:s,doesScroll:!1,animOffset:I.top}}})},E=n.Class.derive(g._Overlay,function(e,n){n=n||{},this._element=e||t.document.createElement("div"),this._id=this._element.id||p._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),this._baseFlyoutConstructor(this._element,n);var i=this._element.getElementsByTagName("*"),r=this._addFirstDiv();r.tabIndex=p._getLowestTabIndexInList(i);var o=this._addFinalDiv();return o.tabIndex=p._getHighestTabIndexInList(i),this._element.addEventListener("keydown",this._handleKeyDown,!0),this._writeProfilerMark("constructor,StopTM"),this},{_lastMaxHeight:null,_baseFlyoutConstructor:function(e,t){this._placement="auto",this._alignment="center",this._baseOverlayConstructor(e,t),this._element.style.visibilty="hidden",this._element.style.display="none",p.addClass(this._element,_.flyoutClass);var n=this;this._dismissable=new d.LightDismissableElement({element:this._element,tabIndex:this._element.hasAttribute("tabIndex")?this._element.tabIndex:-1,onLightDismiss:function(){n.hide()},onTakeFocus:function(e){n._dismissable.restoreFocus()||(p.hasClass(n.element,_.menuClass)?g._Overlay._trySetActive(n._element):n._focusOnFirstFocusableElementOrThis())}});var i=this._element.getAttribute("role");(null===i||""===i||void 0===i)&&(p.hasClass(this._element,_.menuClass)?this._element.setAttribute("role","menu"):this._element.setAttribute("role","dialog"));var r=this._element.getAttribute("aria-label");(null===r||""===r||void 0===r)&&this._element.setAttribute("aria-label",y.ariaLabel),this._currentAnimateIn=this._flyoutAnimateIn,this._currentAnimateOut=this._flyoutAnimateOut,p._addEventListener(this.element,"focusin",this._handleFocusIn.bind(this),!1)},anchor:{get:function(){return this._anchor},set:function(e){this._anchor=e}},placement:{get:function(){return this._placement},set:function(e){if("top"!==e&&"bottom"!==e&&"left"!==e&&"right"!==e&&"auto"!==e&&"autohorizontal"!==e&&"autovertical"!==e)throw new r("WinJS.UI.Flyout.BadPlacement",y.badPlacement);this._placement=e}},alignment:{get:function(){return this._alignment},set:function(e){if("right"!==e&&"left"!==e&&"center"!==e)throw new r("WinJS.UI.Flyout.BadAlignment",y.badAlignment);this._alignment=e}},disabled:{get:function(){return!!this._element.disabled},set:function(e){e=!!e;var t=!!this._element.disabled;t!==e&&(this._element.disabled=e,!this.hidden&&this._element.disabled&&this.hide())}},onbeforeshow:b(g._Overlay.beforeShow),onaftershow:b(g._Overlay.afterShow),onbeforehide:b(g._Overlay.beforeHide),onafterhide:b(g._Overlay.afterHide),_dispose:function(){h.disposeSubTree(this.element),this._hide(),E._cascadeManager.flyoutHidden(this),this.anchor=null},show:function(e,t,n){this._writeProfilerMark("show,StartTM"),this._positionRequest=new S.AnchorPositioning(e||this._anchor,t||this._placement,n||this._alignment),this._show()},_show:function(){this._baseFlyoutShow()},showAt:function(e){this._writeProfilerMark("show,StartTM"),this._positionRequest=new S.CoordinatePositioning(e),this._show()},hide:function(){this._writeProfilerMark("hide,StartTM"),this._hide()},_hide:function(){E._cascadeManager.collapseFlyout(this),this._baseHide()&&E._cascadeManager.flyoutHiding(this)},_beforeEndHide:function(){E._cascadeManager.flyoutHidden(this)},_baseFlyoutShow:function(){if(!this.disabled&&!this._disposed)if(E._cascadeManager.appendFlyout(this),this._element.winAnimating)this._doNext="show";else if(E._cascadeManager.reentrancyLock){this._doNext="show";var e=this;E._cascadeManager.unlocked.then(function(){e._checkDoNext()})}else if(this._baseShow()){if(!p.hasClass(this.element,"win-menu")){var t=this._element.getElementsByTagName("*"),n=this.element.querySelectorAll(".win-first");this.element.children.length&&!p.hasClass(this.element.children[0],_.firstDivClass)&&(n&&n.length>0&&n.item(0).parentNode.removeChild(n.item(0)),n=this._addFirstDiv()),n.tabIndex=p._getLowestTabIndexInList(t);var i=this.element.querySelectorAll(".win-final");p.hasClass(this.element.children[this.element.children.length-1],_.finalDivClass)||(i&&i.length>0&&i.item(0).parentNode.removeChild(i.item(0)),i=this._addFinalDiv()),i.tabIndex=p._getHighestTabIndexInList(t)}E._cascadeManager.flyoutShown(this)}},_lightDismiss:function(){E._cascadeManager.collapseAll()},_ensurePosition:function(){this._keyboardMovedUs=!1,this._clearAdjustedStyles(),this._setAlignment();var e=f(this._element),t="rtl"===p._getComputedStyle(this._element).direction;this._currentPosition=this._positionRequest.getTopLeft(e,t),this._currentPosition.top<0?(this._element.style.bottom=g._Overlay._keyboardInfo._visibleDocBottomOffset+"px",this._element.style.top="auto"):(this._element.style.top=this._currentPosition.top+"px",this._element.style.bottom="auto"),this._currentPosition.left<0?(this._element.style.right="0px",this._element.style.left="auto"):(this._element.style.left=this._currentPosition.left+"px",this._element.style.right="auto"),this._currentPosition.doesScroll&&(p.addClass(this._element,_.scrollsClass),this._lastMaxHeight=this._element.style.maxHeight,this._element.style.maxHeight=this._currentPosition.contentHeight+"px"),g._Overlay._keyboardInfo._visible&&(this._checkKeyboardFit(),this._keyboardMovedUs&&this._adjustForKeyboard())},_clearAdjustedStyles:function(){this._element.style.top="0px",this._element.style.bottom="auto",this._element.style.left="0px",this._element.style.right="auto",p.removeClass(this._element,_.scrollsClass),null!==this._lastMaxHeight&&(this._element.style.maxHeight=this._lastMaxHeight,this._lastMaxHeight=null),p.removeClass(this._element,"win-rightalign"),p.removeClass(this._element,"win-leftalign")},_setAlignment:function(){switch(this._positionRequest.alignment){case"left":p.addClass(this._element,"win-leftalign");break;case"right":p.addClass(this._element,"win-rightalign")}},_showingKeyboard:function(e){if(!this.hidden&&(e.ensuredFocusedElementInView=!0,this._checkKeyboardFit(),this._keyboardMovedUs)){this._element.style.opacity=0;var n=this;t.setTimeout(function(){n._adjustForKeyboard(),n._baseAnimateIn()},g._Overlay._keyboardInfo._animationShowLength)}},_resize:function(){if((!this.hidden||this._animating)&&this._needToHandleHidingKeyboard){var e=this;i._setImmediate(function(){(!e.hidden||e._animating)&&e._ensurePosition()}),this._needToHandleHidingKeyboard=!1}},_checkKeyboardFit:function(){var e=!1,t=g._Overlay._keyboardInfo._visibleDocHeight,n=this._currentPosition.contentHeight+this._currentPosition.verticalMarginBorderPadding;n>t?(e=!0,this._currentPosition.top=_.pinToBottomEdge,this._currentPosition.contentHeight=t-this._currentPosition.verticalMarginBorderPadding,this._currentPosition.doesScroll=!0):this._currentPosition.top>=0&&this._currentPosition.top+n>g._Overlay._keyboardInfo._visibleDocBottom?(this._currentPosition.top=_.pinToBottomEdge,e=!0):this._currentPosition.top===_.pinToBottomEdge&&(e=!0),this._keyboardMovedUs=e},_adjustForKeyboard:function(){this._currentPosition.doesScroll&&(this._lastMaxHeight||(p.addClass(this._element,_.scrollsClass),this._lastMaxHeight=this._element.style.maxHeight),this._element.style.maxHeight=this._currentPosition.contentHeight+"px"),this._checkScrollPosition(!0)},_hidingKeyboard:function(){if(!this.hidden||this._animating)if(g._Overlay._keyboardInfo._isResized)this._needToHandleHidingKeyboard=!0;else{var e=this;i._setImmediate(function(){(!e.hidden||e._animating)&&e._ensurePosition()})}},_checkScrollPosition:function(e){(!this.hidden||e)&&(this._currentPosition.top<0?(this._element.style.bottom=g._Overlay._keyboardInfo._visibleDocBottomOffset+"px",this._element.style.top="auto"):(this._element.style.top=this._currentPosition.top+"px",this._element.style.bottom="auto"))},_flyoutAnimateIn:function(){return this._keyboardMovedUs?this._baseAnimateIn():(this._element.style.opacity=1,this._element.style.visibility="visible",u.showPopup(this._element,this._currentPosition.animOffset))},_flyoutAnimateOut:function(){return this._keyboardMovedUs?this._baseAnimateOut():(this._element.style.opacity=0,u.hidePopup(this._element,this._currentPosition.animOffset))},_hideAllOtherFlyouts:function(e){for(var n=t.document.querySelectorAll("."+_.flyoutClass),i=0;i<n.length;i++){var r=n[i].winControl;r&&!r.hidden&&r!==e&&r.hide()}},_handleKeyDown:function(e){e.keyCode!==v.space&&e.keyCode!==v.enter||this!==t.document.activeElement?!e.shiftKey||e.keyCode!==v.tab||this!==t.document.activeElement||e.altKey||e.ctrlKey||e.metaKey||(e.preventDefault(),e.stopPropagation(),this.winControl._focusOnLastFocusableElementOrThis()):(e.preventDefault(),e.stopPropagation(),this.winControl.hide())},_handleFocusIn:function(e){this.element.contains(e.relatedTarget)||E._cascadeManager.handleFocusIntoFlyout(e)},_addFirstDiv:function(){var e=t.document.createElement("div");e.className=_.firstDivClass,e.style.display="inline",e.setAttribute("role","menuitem"),e.setAttribute("aria-hidden","true"),this._element.children[0]?this._element.insertBefore(e,this._element.children[0]):this._element.appendChild(e);var n=this;return p._addEventListener(e,"focusin",function(){n._focusOnLastFocusableElementOrThis()},!1),e},_addFinalDiv:function(){var e=t.document.createElement("div");e.className=_.finalDivClass,e.style.display="inline",e.setAttribute("role","menuitem"),e.setAttribute("aria-hidden","true"),this._element.appendChild(e);var n=this;return p._addEventListener(e,"focusin",function(){n._focusOnFirstFocusableElementOrThis()},!1),e},_writeProfilerMark:function(e){l("WinJS.UI.Flyout:"+this._id+":"+e)}},{_cascadeManager:new w});return E})})}),i("WinJS/Controls/CommandingSurface/_Constants",["require","exports"],function(e,t){t.ClassNames={controlCssClass:"win-commandingsurface",disposableCssClass:"win-disposable",tabStopClass:"win-commandingsurface-tabstop",contentClass:"win-commandingsurface-content",actionAreaCssClass:"win-commandingsurface-actionarea",actionAreaContainerCssClass:"win-commandingsurface-actionareacontainer",overflowButtonCssClass:"win-commandingsurface-overflowbutton",spacerCssClass:"win-commandingsurface-spacer",ellipsisCssClass:"win-commandingsurface-ellipsis",overflowAreaCssClass:"win-commandingsurface-overflowarea",overflowAreaContainerCssClass:"win-commandingsurface-overflowareacontainer",contentFlyoutCssClass:"win-commandingsurface-contentflyout",menuCssClass:"win-menu",menuContainsToggleCommandClass:"win-menu-containstogglecommand",insetOutlineClass:"win-commandingsurface-insetoutline",openingClass:"win-commandingsurface-opening",openedClass:"win-commandingsurface-opened",closingClass:"win-commandingsurface-closing",closedClass:"win-commandingsurface-closed",noneClass:"win-commandingsurface-closeddisplaynone",minimalClass:"win-commandingsurface-closeddisplayminimal",compactClass:"win-commandingsurface-closeddisplaycompact",fullClass:"win-commandingsurface-closeddisplayfull",overflowTopClass:"win-commandingsurface-overflowtop",overflowBottomClass:"win-commandingsurface-overflowbottom",commandHiddenClass:"win-commandingsurface-command-hidden",commandPrimaryOverflownPolicyClass:"win-commandingsurface-command-primary-overflown",commandSecondaryOverflownPolicyClass:"win-commandingsurface-command-secondary-overflown",commandSeparatorHiddenPolicyClass:"win-commandingsurface-command-separator-hidden"},t.EventNames={beforeOpen:"beforeopen",afterOpen:"afteropen",beforeClose:"beforeclose",afterClose:"afterclose",commandPropertyMutated:"_commandpropertymutated"},t.actionAreaCommandWidth=68,t.actionAreaSeparatorWidth=34,t.actionAreaOverflowButtonWidth=32,t.overflowCommandHeight=44,t.overflowSeparatorHeight=12,t.controlMinWidth=t.actionAreaOverflowButtonWidth,t.overflowAreaMaxWidth=480,t.heightOfMinimal=24,t.heightOfCompact=48,t.contentMenuCommandDefaultLabel="Custom content",t.defaultClosedDisplayMode="compact",t.defaultOpened=!1,t.defaultOverflowDirection="bottom",t.typeSeparator="separator",t.typeContent="content",t.typeButton="button",t.typeToggle="toggle",t.typeFlyout="flyout",t.commandSelector=".win-command",t.primaryCommandSection="primary",t.secondaryCommandSection="secondary"}),i("WinJS/Controls/ToolBar/_Constants",["require","exports","../CommandingSurface/_Constants"],function(e,t,n){t.ClassNames={controlCssClass:"win-toolbar",disposableCssClass:"win-disposable",actionAreaCssClass:"win-toolbar-actionarea",overflowButtonCssClass:"win-toolbar-overflowbutton",spacerCssClass:"win-toolbar-spacer",ellipsisCssClass:"win-toolbar-ellipsis",overflowAreaCssClass:"win-toolbar-overflowarea",contentFlyoutCssClass:"win-toolbar-contentflyout",emptytoolbarCssClass:"win-toolbar-empty",menuCssClass:"win-menu",menuContainsToggleCommandClass:"win-menu-containstogglecommand",openedClass:"win-toolbar-opened",closedClass:"win-toolbar-closed",compactClass:"win-toolbar-closeddisplaycompact",fullClass:"win-toolbar-closeddisplayfull",overflowTopClass:"win-toolbar-overflowtop",overflowBottomClass:"win-toolbar-overflowbottom",placeHolderCssClass:"win-toolbar-placeholder"},t.EventNames={beforeOpen:"beforeopen",afterOpen:"afteropen",beforeClose:"beforeclose",afterClose:"afterclose"},t.OverflowDirection={top:"top",bottom:"bottom"},t.overflowAreaMaxWidth=n.overflowAreaMaxWidth,t.controlMinWidth=n.controlMinWidth,t.defaultClosedDisplayMode="compact",t.defaultOpened=!1,t.typeSeparator="separator",t.typeContent="content",t.typeButton="button",t.typeToggle="toggle",t.typeFlyout="flyout",t.commandSelector=".win-command",t.primaryCommandSection="primary",t.secondaryCommandSection="secondary"}),i("WinJS/Controls/AppBar/_Icon",["exports","../../Core/_Base","../../Core/_Resources"],function(e,t,n){"use strict";var i=["previous","next","play","pause","edit","save","clear","delete","remove","add","cancel","accept","more","redo","undo","home","up","forward","right","back","left","favorite","camera","settings","video","sync","download","mail","find","help","upload","emoji","twopage","leavechat","mailforward","clock","send","crop","rotatecamera","people","closepane","openpane","world","flag","previewlink","globe","trim","attachcamera","zoomin","bookmarks","document","protecteddocument","page","bullets","comment","mail2","contactinfo","hangup","viewall","mappin","phone","videochat","switch","contact","rename","pin","musicinfo","go","keyboard","dockleft","dockright","dockbottom","remote","refresh","rotate","shuffle","list","shop","selectall","orientation","import","importall","browsephotos","webcam","pictures","savelocal","caption","stop","showresults","volume","repair","message","page2","calendarday","calendarweek","calendar","characters","mailreplyall","read","link","accounts","showbcc","hidebcc","cut","attach","paste","filter","copy","emoji2","important","mailreply","slideshow","sort","manage","allapps","disconnectdrive","mapdrive","newwindow","openwith","contactpresence","priority","uploadskydrive","gototoday","font","fontcolor","contact2","folder","audio","placeholder","view","setlockscreen","settile","cc","stopslideshow","permissions","highlight","disableupdates","unfavorite","unpin","openlocal","mute","italic","underline","bold","movetofolder","likedislike","dislike","like","alignright","aligncenter","alignleft","zoom","zoomout","openfile","otheruser","admin","street","map","clearselection","fontdecrease","fontincrease","fontsize","cellphone","reshare","tag","repeatone","repeatall","outlinestar","solidstar","calculator","directions","target","library","phonebook","memo","microphone","postupdate","backtowindow","fullscreen","newfolder","calendarreply","unsyncfolder","reporthacked","syncfolder","blockcontact","switchapps","addfriend","touchpointer","gotostart","zerobars","onebar","twobars","threebars","fourbars","scan","preview","hamburger"],r=i.reduce(function(e,t){return e[t]={get:function(){return n._getWinJSString("ui/appBarIcons/"+t).value}},e},{});t.Namespace._moduleDefine(e,"WinJS.UI.AppBarIcon",r)}),i("WinJS/Controls/AppBar/_Command",["exports","../../Core/_Global","../../Core/_WinRT","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Resources","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../Flyout/_Overlay","../Tooltip","../_LegacyAppBar/_Constants","./_Icon"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{AppBarCommand:i.Namespace._lazy(function(){function e(e){var n=this.winControl;if(n){if(n._type===p.typeToggle)n.selected=!n.selected;else if(n._type===p.typeFlyout&&n._flyout){var i=n._flyout;"string"==typeof i&&(i=t.document.getElementById(i)),i.show||(i=i.winControl),i&&i.show&&i.show(this,"autovertical")}n.onclick&&n.onclick(e)}}function f(e,t){var n=e[t],i=e.constructor.prototype,r=_(i,t)||{},o=r.get.bind(e)||function(){return n},s=r.set.bind(e)||function(e){n=e};Object.defineProperty(e,t,{get:function(){return o()},set:function(n){var i=o();s(n);var r=o();this._disposed||i===n||i===r||e._disposed||e._propertyMutations.dispatchEvent(p.commandPropertyMutated,{command:e,propertyName:t,oldValue:i,newValue:r})}})}function _(e,t){for(var n=null;e&&!n;)n=Object.getOwnPropertyDescriptor(e,t),e=Object.getPrototypeOf(e);return n}var g=i.Class.define(function(){this._observer=r._merge({},s.eventMixin)},{bind:function(e){this._observer.addEventListener(p.commandPropertyMutated,e)},unbind:function(e){this._observer.removeEventListener(p.commandPropertyMutated,e)},dispatchEvent:function(e,t){this._observer.dispatchEvent(e,t)}}),v={get ariaLabel(){return a._getWinJSString("ui/appBarCommandAriaLabel").value},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badClick(){return"Invalid argument: The onclick property for an {0} must be a function"},get badDivElement(){return"Invalid argument: For a content command, the element must be null or a div element"},get badHrElement(){return"Invalid argument: For a separator, the element must be null or an hr element"},get badButtonElement(){return"Invalid argument: For a button, toggle, or flyout command, the element must be null or a button element"},get badPriority(){return"Invalid argument: the priority of an {0} must be a non-negative integer"}},y=i.Class.define(function(t,n){if(t&&t.winControl)throw new o("WinJS.UI.AppBarCommand.DuplicateConstruction",v.duplicateConstruction);if(this._disposed=!1,n||(n={}),n.type||(this._type=p.typeButton),n.section=n.section||p.sectionPrimary,this._element=t,n.type===p.typeContent?this._createContent():n.type===p.typeSeparator?this._createSeparator():this._createButton(),c.addClass(this._element,"win-disposable"),this._element.winControl=this,c.addClass(this._element,p.appBarCommandClass),n.onclick&&(this.onclick=n.onclick),n.onclick=e,l.setOptions(this,n),this._type!==p.typeToggle||n.selected||(this.selected=!1),this._type!==p.typeSeparator){var i=this._element.getAttribute("role");(null===i||""===i||void 0===i)&&(i=this._type===p.typeToggle?"checkbox":this._type===p.typeContent?"group":"menuitem",this._element.setAttribute("role",i),this._type===p.typeFlyout&&this._element.setAttribute("aria-haspopup",!0));var r=this._element.getAttribute("aria-label");(null===r||""===r||void 0===r)&&this._element.setAttribute("aria-label",v.ariaLabel)}this._propertyMutations=new g;var s=this;b.forEach(function(e){f(s,e)})},{id:{get:function(){return this._element.id},set:function(e){e&&!this._element.id&&(this._element.id=e)}},type:{get:function(){return this._type},set:function(e){this._type||(e!==p.typeContent&&e!==p.typeFlyout&&e!==p.typeToggle&&e!==p.typeSeparator?this._type=p.typeButton:this._type=e)}},label:{get:function(){return this._label},set:function(e){this._label=e,this._labelSpan&&(this._labelSpan.textContent=this.label),!this.tooltip&&this._tooltipControl&&(this._tooltip=this.label,this._tooltipControl.innerHTML=this.label),this._element.setAttribute("aria-label",this.label),this._testIdenticalTooltip()}},icon:{get:function(){return this._icon},set:function(e){this._icon=m[e]||e,this._imageSpan&&(this._icon&&1===this._icon.length?(this._imageSpan.textContent=this._icon,this._imageSpan.style.backgroundImage="",this._imageSpan.style.msHighContrastAdjust="",c.addClass(this._imageSpan,"win-commandglyph")):(this._imageSpan.textContent="",this._imageSpan.style.backgroundImage=this._icon,this._imageSpan.style.msHighContrastAdjust="none",c.removeClass(this._imageSpan,"win-commandglyph")))}},onclick:{get:function(){return this._onclick},set:function(e){if(e&&"function"!=typeof e)throw new o("WinJS.UI.AppBarCommand.BadClick",a._formatString(v.badClick,"AppBarCommand"));this._onclick=e}},priority:{get:function(){return this._priority},set:function(e){if(!(void 0===e||"number"==typeof e&&e>=0))throw new o("WinJS.UI.AppBarCommand.BadPriority",a._formatString(v.badPriority,"AppBarCommand"));this._priority=e}},flyout:{get:function(){var e=this._flyout;return"string"==typeof e&&(e=t.document.getElementById(e)),e&&!e.element&&e.winControl&&(e=e.winControl),e},set:function(e){var t=e;t&&"string"!=typeof t&&(t.element&&(t=t.element),t&&(t.id?t=t.id:(t.id=c._uniqueID(t),t=t.id))),"string"==typeof t&&this._element.setAttribute("aria-owns",t),this._flyout=e}},section:{get:function(){return this._section},set:function(e){(!this._section||n.Windows.ApplicationModel.DesignMode.designModeEnabled)&&this._setSection(e)}},tooltip:{get:function(){return this._tooltip},set:function(e){this._tooltip=e,this._tooltipControl&&(this._tooltipControl.innerHTML=this._tooltip),this._testIdenticalTooltip()}},selected:{get:function(){return"true"===this._element.getAttribute("aria-checked")},set:function(e){this._element.setAttribute("aria-checked",e)}},element:{get:function(){return this._element}},disabled:{get:function(){return!!this._element.disabled},set:function(e){this._element.disabled=e}},hidden:{get:function(){return c.hasClass(this._element,p.commandHiddenClass)},set:function(e){if(e!==this.hidden){var t=this.hidden;e?c.addClass(this._element,p.commandHiddenClass):c.removeClass(this._element,p.commandHiddenClass),this._sendEvent(p.commandVisibilityChanged)||(t?c.addClass(this._element,p.commandHiddenClass):c.removeClass(this._element,p.commandHiddenClass))}}},firstElementFocus:{get:function(){return this._firstElementFocus||this._lastElementFocus||this._element},set:function(e){this._firstElementFocus=e===this.element?null:e,
this._updateTabStop()}},lastElementFocus:{get:function(){return this._lastElementFocus||this._firstElementFocus||this._element},set:function(e){this._lastElementFocus=e===this.element?null:e,this._updateTabStop()}},dispose:function(){this._disposed||(this._disposed=!0,this._tooltipControl&&this._tooltipControl.dispose(),this._type===p.typeContent&&u.disposeSubTree(this.element))},addEventListener:function(e,t,n){return this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},extraClass:{get:function(){return this._extraClass},set:function(e){this._extraClass&&c.removeClass(this._element,this._extraClass),this._extraClass=e,c.addClass(this._element,this._extraClass)}},_testIdenticalTooltip:function(){this._hideIfFullSize=this._label===this._tooltip},_createContent:function(){if(this._element){if("DIV"!==this._element.tagName)throw new o("WinJS.UI.AppBarCommand.BadDivElement",v.badDivElement)}else this._element=t.document.createElement("div");parseInt(this._element.getAttribute("tabIndex"),10)!==this._element.tabIndex&&(this._element.tabIndex=0)},_createSeparator:function(){if(this._element){if("HR"!==this._element.tagName)throw new o("WinJS.UI.AppBarCommand.BadHrElement",v.badHrElement)}else this._element=t.document.createElement("hr")},_createButton:function(){if(this._element){if("BUTTON"!==this._element.tagName)throw new o("WinJS.UI.AppBarCommand.BadButtonElement",v.badButtonElement);var e=this._element.getAttribute("type");(null===e||""===e||void 0===e)&&this._element.setAttribute("type","button"),this._element.innerHTML=""}else this._element=t.document.createElement("button");this._element.type="button",this._iconSpan=t.document.createElement("span"),this._iconSpan.setAttribute("aria-hidden","true"),this._iconSpan.className="win-commandicon",this._iconSpan.tabIndex=-1,this._element.appendChild(this._iconSpan),this._imageSpan=t.document.createElement("span"),this._imageSpan.setAttribute("aria-hidden","true"),this._imageSpan.className="win-commandimage",this._imageSpan.tabIndex=-1,this._iconSpan.appendChild(this._imageSpan),this._labelSpan=t.document.createElement("span"),this._labelSpan.setAttribute("aria-hidden","true"),this._labelSpan.className="win-label",this._labelSpan.tabIndex=-1,this._element.appendChild(this._labelSpan),this._tooltipControl=new h.Tooltip(this._element);var n=this;this._tooltipControl.addEventListener("beforeopen",function(){n._hideIfFullSize&&!d._Overlay._getParentControlUsingClassName(n._element.parentElement,p.reducedClass)&&n._tooltipControl.close()},!1)},_setSection:function(e){e||(e=p.sectionPrimary),this._section&&(this._section===p.sectionGlobal?c.removeClass(this._element,p.appBarCommandGlobalClass):this.section===p.sectionSelection&&c.removeClass(this._element,p.appBarCommandSelectionClass)),this._section=e,e===p.sectionGlobal?c.addClass(this._element,p.appBarCommandGlobalClass):e===p.sectionSelection&&c.addClass(this._element,p.appBarCommandSelectionClass)},_updateTabStop:function(){this._firstElementFocus||this._lastElementFocus?this.element.tabIndex=-1:this.element.tabIndex=0},_isFocusable:function(){return!this.hidden&&this._type!==p.typeSeparator&&!this.element.disabled&&(this.firstElementFocus.tabIndex>=0||this.lastElementFocus.tabIndex>=0)},_sendEvent:function(e,n){if(!this._disposed){var i=t.document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,n||{}),this._element.dispatchEvent(i)}}}),b=["label","disabled","flyout","extraClass","selected","onclick","hidden"];return y})}),i.Namespace._moduleDefine(e,"WinJS.UI",{Command:i.Namespace._lazy(function(){return e.AppBarCommand})})}),i("WinJS/Controls/Menu/_Command",["exports","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Resources","../../Promise","../../Utilities/_Control","../../Utilities/_ElementUtilities","../_LegacyAppBar/_Constants","../Flyout/_Overlay"],function(e,t,n,i,r,o,s,a,l,u){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{MenuCommand:n.Namespace._lazy(function(){var e={get ariaLabel(){return r._getWinJSString("ui/menuCommandAriaLabel").value},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badClick(){return"Invalid argument: The onclick property for an {0} must be a function"},get badHrElement(){return"Invalid argument: For a separator, the element must be null or an hr element"},get badButtonElement(){return"Invalid argument: For a button, toggle, or flyout command, the element must be null or a button element"}},c=n.Class.define(function(t,n){if(t&&t.winControl)throw new i("WinJS.UI.MenuCommand.DuplicateConstruction",e.duplicateConstruction);if(this._disposed=!1,n||(n={}),n.type||(this._type=l.typeButton),this._element=t,n.type===l.typeSeparator?this._createSeparator():this._createButton(),a.addClass(this._element,"win-disposable"),this._element.winControl=this,a.addClass(this._element,l.menuCommandClass),n.selected||n.type!==l.typeToggle||(this.selected=!1),n.onclick&&(this.onclick=n.onclick),n.onclick=this._handleClick.bind(this),s.setOptions(this,n),this._type!==l.typeSeparator){var r=this._element.getAttribute("role");(null===r||""===r||void 0===r)&&(r="menuitem",this._type===l.typeToggle&&(r="checkbox"),this._element.setAttribute("role",r),this._type===l.typeFlyout&&this._element.setAttribute("aria-haspopup",!0));var o=this._element.getAttribute("aria-label");(null===o||""===o||void 0===o)&&this._element.setAttribute("aria-label",e.ariaLabel)}},{id:{get:function(){return this._element.id},set:function(e){this._element.id||(this._element.id=e)}},type:{get:function(){return this._type},set:function(e){this._type||(e!==l.typeButton&&e!==l.typeFlyout&&e!==l.typeToggle&&e!==l.typeSeparator&&(e=l.typeButton),this._type=e,e===l.typeButton?a.addClass(this.element,l.menuCommandButtonClass):e===l.typeFlyout?(a.addClass(this.element,l.menuCommandFlyoutClass),this.element.addEventListener("keydown",this._handleKeyDown.bind(this),!1)):e===l.typeSeparator?a.addClass(this.element,l.menuCommandSeparatorClass):e===l.typeToggle&&a.addClass(this.element,l.menuCommandToggleClass))}},label:{get:function(){return this._label},set:function(e){this._label=e||"",this._labelSpan&&(this._labelSpan.textContent=this.label),this._element.setAttribute("aria-label",this.label)}},onclick:{get:function(){return this._onclick},set:function(t){if(t&&"function"!=typeof t)throw new i("WinJS.UI.MenuCommand.BadClick",r._formatString(e.badClick,"MenuCommand"));this._onclick=t}},flyout:{get:function(){var e=this._flyout;return"string"==typeof e&&(e=t.document.getElementById(e)),e&&!e.element&&(e=e.winControl),e},set:function(e){var t=e;t&&"string"!=typeof t&&(t.element&&(t=t.element),t&&(t.id?t=t.id:(t.id=a._uniqueID(t),t=t.id))),"string"==typeof t&&this._element.setAttribute("aria-owns",t),this._flyout!==e&&c._deactivateFlyoutCommand(this),this._flyout=e}},selected:{get:function(){return"true"===this._element.getAttribute("aria-checked")},set:function(e){this._element.setAttribute("aria-checked",!!e)}},element:{get:function(){return this._element}},disabled:{get:function(){return!!this._element.disabled},set:function(e){e=!!e,e&&this.type===l.typeFlyout&&c._deactivateFlyoutCommand(this),this._element.disabled=e}},hidden:{get:function(){return"hidden"===this._element.style.visibility},set:function(e){var t=u._Overlay._getParentControlUsingClassName(this._element,l.menuClass);if(t&&!t.hidden)throw new i("WinJS.UI.MenuCommand.CannotChangeHiddenProperty",r._formatString(u._Overlay.commonstrings.cannotChangeHiddenProperty,"Menu"));var n=this._element.style;e?(this.type===l.typeFlyout&&c._deactivateFlyoutCommand(this),n.visibility="hidden",n.display="none"):(n.visibility="",n.display="block")}},extraClass:{get:function(){return this._extraClass},set:function(e){this._extraClass&&a.removeClass(this._element,this._extraClass),this._extraClass=e,a.addClass(this._element,this._extraClass)}},dispose:function(){this._disposed||(this._disposed=!0)},addEventListener:function(e,t,n){return this._element.addEventListener(e,t,n)},removeEventListener:function(e,t,n){return this._element.removeEventListener(e,t,n)},_createSeparator:function(){if(this._element){if("HR"!==this._element.tagName)throw new i("WinJS.UI.MenuCommand.BadHrElement",e.badHrElement)}else this._element=t.document.createElement("hr")},_createButton:function(){if(this._element){if("BUTTON"!==this._element.tagName)throw new i("WinJS.UI.MenuCommand.BadButtonElement",e.badButtonElement)}else this._element=t.document.createElement("button");this._element.innerHTML='<div class="win-menucommand-liner"><span class="win-toggleicon" aria-hidden="true"></span><span class="win-label" aria-hidden="true"></span><span class="win-flyouticon" aria-hidden="true"></span></div>',this._element.type="button",this._menuCommandLiner=this._element.firstElementChild,this._toggleSpan=this._menuCommandLiner.firstElementChild,this._labelSpan=this._toggleSpan.nextElementSibling,this._flyoutSpan=this._labelSpan.nextElementSibling},_sendEvent:function(e,n){if(!this._disposed){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!0,!0,n||{}),this._element.dispatchEvent(i)}},_invoke:function(e){this.hidden||this.disabled||this._disposed||(this._type===l.typeToggle?this.selected=!this.selected:this._type===l.typeFlyout&&c._activateFlyoutCommand(this),e&&"click"===e.type&&this.onclick&&this.onclick(e),this._sendEvent(l._menuCommandInvokedEvent,{command:this}))},_handleClick:function(e){this._invoke(e)},_handleKeyDown:function(e){var t=a.Key,n="rtl"===a._getComputedStyle(this.element).direction,i=n?t.leftArrow:t.rightArrow;e.keyCode===i&&this.type===l.typeFlyout&&(this._invoke(e),e.preventDefault())}},{_activateFlyoutCommand:function(e){return new o(function(t,n){e=e.winControl||e;var i=e.flyout;i&&i.hidden&&i.show?(a.addClass(e.element,l.menuCommandFlyoutActivatedClass),i.element.setAttribute("aria-expanded","true"),i.addEventListener("beforehide",function r(){i.removeEventListener("beforehide",r,!1),a.removeClass(e.element,l.menuCommandFlyoutActivatedClass),i.element.removeAttribute("aria-expanded")},!1),i.addEventListener("aftershow",function o(){i.removeEventListener("aftershow",o,!1),t()},!1),i.show(e,"_cascade")):n()})},_deactivateFlyoutCommand:function(e){return new o(function(t){e=e.winControl||e,a.removeClass(e.element,l.menuCommandFlyoutActivatedClass);var n=e.flyout;n&&!n.hidden&&n.hide?(n.addEventListener("afterhide",function i(){n.removeEventListener("afterhide",i,!1),t()},!1),n.hide()):t()})}});return c})})});var r=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};return i("WinJS/Controls/CommandingSurface/_MenuCommand",["require","exports","../Menu/_Command"],function(e,t,n){var i=function(e){function t(t,n){n&&n.beforeInvoke&&(this._beforeInvoke=n.beforeInvoke),e.call(this,t,n)}return r(t,e),t.prototype._invoke=function(t){this._beforeInvoke&&this._beforeInvoke(t),e.prototype._invoke.call(this,t)},t}(n.MenuCommand);t._MenuCommand=i}),i("WinJS/Utilities/_OpenCloseMachine",["require","exports","../Core/_Global","../Promise","../_Signal"],function(e,t,n,i,r){"use strict";function o(e){return i._cancelBlocker(e,function(){e.cancel()})}function s(){}function a(e,t){e._interruptibleWorkPromises=e._interruptibleWorkPromises||[];var n=new r;e._interruptibleWorkPromises.push(t(n.promise)),n.complete()}function l(){(this._interruptibleWorkPromises||[]).forEach(function(e){e.cancel()})}var u={beforeOpen:"beforeopen",afterOpen:"afteropen",beforeClose:"beforeclose",afterClose:"afterclose",_openCloseStateSettled:"_openCloseStateSettled"},c=function(){function e(e){this._control=e,this._initializedSignal=new r,this._disposed=!1,this._setState(d.Init)}return e.prototype.exitInit=function(){this._initializedSignal.complete()},e.prototype.updateDom=function(){this._state.updateDom()},e.prototype.open=function(){this._state.open()},e.prototype.close=function(){this._state.close()},Object.defineProperty(e.prototype,"opened",{get:function(){return this._state.opened},set:function(e){e?this.open():this.close()},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._setState(d.Disposed),this._disposed=!0,this._control=null},e.prototype._setState=function(e,t){this._disposed||(this._state&&this._state.exit(),this._state=new e,this._state.machine=this,this._state.enter(t))},e.prototype._fireEvent=function(e,t){t=t||{};var i=t.detail||null,r=!!t.cancelable,o=n.document.createEvent("CustomEvent");return o.initCustomEvent(e,!0,r,i),this._control.eventElement.dispatchEvent(o)},e.prototype._fireBeforeOpen=function(){return this._fireEvent(u.beforeOpen,{cancelable:!0})},e.prototype._fireBeforeClose=function(){return this._fireEvent(u.beforeClose,{cancelable:!0})},e}();t.OpenCloseMachine=c;var d;!function(e){function t(){this.machine._control.onUpdateDom()}var n=function(){function e(){this.name="Init",this.exit=l,this.updateDom=s}return e.prototype.enter=function(){var e=this;a(this,function(t){return t.then(function(){return e.machine._initializedSignal.promise}).then(function(){e.machine._control.onUpdateDomWithIsOpened(e._opened),e.machine._setState(e._opened?d:i)})})},Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._opened=!0},e.prototype.close=function(){this._opened=!1},e}();e.Init=n;var i=function(){function e(){this.name="Closed",this.exit=s,this.opened=!1,this.close=s,this.updateDom=t}return e.prototype.enter=function(e){e=e||{},e.openIsPending&&this.open(),this.machine._fireEvent(u._openCloseStateSettled)},e.prototype.open=function(){this.machine._setState(r)},e}(),r=function(){function e(){this.name="BeforeOpen",this.exit=l,this.opened=!1,this.open=s,this.close=s,this.updateDom=t}return e.prototype.enter=function(){var e=this;a(this,function(t){return t.then(function(){return e.machine._fireBeforeOpen()}).then(function(t){t?e.machine._setState(c):e.machine._setState(i)})})},e}(),c=function(){function e(){this.name="Opening",this.exit=l,this.updateDom=s}return e.prototype.enter=function(){var e=this;a(this,function(t){return t.then(function(){return e._closeIsPending=!1,o(e.machine._control.onOpen())}).then(function(){e.machine._fireEvent(u.afterOpen)}).then(function(){e.machine._control.onUpdateDom(),e.machine._setState(d,{closeIsPending:e._closeIsPending})})})},Object.defineProperty(e.prototype,"opened",{get:function(){return!this._closeIsPending},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._closeIsPending=!1},e.prototype.close=function(){this._closeIsPending=!0},e}(),d=function(){function e(){this.name="Opened",this.exit=s,this.opened=!0,this.open=s,this.updateDom=t}return e.prototype.enter=function(e){e=e||{},e.closeIsPending&&this.close(),this.machine._fireEvent(u._openCloseStateSettled)},e.prototype.close=function(){this.machine._setState(h)},e}(),h=function(){function e(){this.name="BeforeClose",this.exit=l,this.opened=!0,this.open=s,this.close=s,this.updateDom=t}return e.prototype.enter=function(){var e=this;a(this,function(t){return t.then(function(){return e.machine._fireBeforeClose()}).then(function(t){t?e.machine._setState(p):e.machine._setState(d)})})},e}(),p=function(){function e(){this.name="Closing",this.exit=l,this.updateDom=s}return e.prototype.enter=function(){var e=this;a(this,function(t){return t.then(function(){return e._openIsPending=!1,o(e.machine._control.onClose())}).then(function(){e.machine._fireEvent(u.afterClose)}).then(function(){e.machine._control.onUpdateDom(),e.machine._setState(i,{openIsPending:e._openIsPending})})})},Object.defineProperty(e.prototype,"opened",{get:function(){return this._openIsPending},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._openIsPending=!0},e.prototype.close=function(){this._openIsPending=!1},e}(),m=function(){function e(){this.name="Disposed",this.enter=s,this.exit=s,this.opened=!1,this.open=s,this.close=s,this.updateDom=s}return e}();e.Disposed=m}(d||(d={}))}),i("require-style!less/styles-commandingsurface",[],function(){}),i("require-style!less/colors-commandingsurface",[],function(){}),i("WinJS/Controls/CommandingSurface/_CommandingSurface",["require","exports","../../Animations","../../Core/_Base","../../Core/_BaseUtils","../../BindingList","../../ControlProcessor","../CommandingSurface/_Constants","../AppBar/_Command","../CommandingSurface/_MenuCommand","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Core/_ErrorFromName","../../Core/_Events","../../Controls/Flyout","../../Core/_Global","../../Utilities/_Hoverable","../../Utilities/_KeyboardBehavior","../../Core/_Log","../../Promise","../../Core/_Resources","../../Scheduler","../../Utilities/_OpenCloseMachine","../../_Signal","../../Core/_WriteProfilerMark"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b,C,w,I,S,E){function x(e,t){t&&h.addClass(e,t)}function P(e,t){t&&h.removeClass(e,t)}function k(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function T(e,t){return e.filter(function(e){return-1!==t.indexOf(e)})}e(["require-style!less/styles-commandingsurface"]),e(["require-style!less/colors-commandingsurface"]);var M={get overflowButtonAriaLabel(){return C._getWinJSString("ui/commandingSurfaceOverflowButtonAriaLabel").value},get badData(){return"Invalid argument: The data property must an instance of a WinJS.Binding.List"},get mustContainCommands(){return"The commandingSurface can only contain WinJS.UI.Command or WinJS.UI.AppBarCommand controls"},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},A={bottom:"bottom",top:"top"},O={};O[A.top]=a.ClassNames.overflowTopClass,O[A.bottom]=a.ClassNames.overflowBottomClass;var D={none:"none",minimal:"minimal",compact:"compact",full:"full"},L={};L[D.none]=a.ClassNames.noneClass,L[D.minimal]=a.ClassNames.minimalClass,L[D.compact]=a.ClassNames.compactClass,L[D.full]=a.ClassNames.fullClass;var B=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),this._hoverable=g.isHoverable,this._dataChangedEvents=["itemchanged","iteminserted","itemmoved","itemremoved","reload"],this._updateDomImpl=function(){var e={closedDisplayMode:void 0,isOpenedMode:void 0,overflowDirection:void 0,overflowAlignmentOffset:void 0},t=function(){var t=e,i=n._dom;if(t.isOpenedMode!==n._isOpenedMode&&(n._isOpenedMode?(P(i.root,a.ClassNames.closedClass),x(i.root,a.ClassNames.openedClass),i.overflowButton.setAttribute("aria-expanded","true"),i.firstTabStop.tabIndex=0,i.finalTabStop.tabIndex=0,i.firstTabStop.setAttribute("x-ms-aria-flowfrom",i.finalTabStop.id),i.finalTabStop.setAttribute("aria-flowto",i.firstTabStop.id)):(P(i.root,a.ClassNames.openedClass),x(i.root,a.ClassNames.closedClass),i.overflowButton.setAttribute("aria-expanded","false"),i.firstTabStop.tabIndex=-1,i.finalTabStop.tabIndex=-1,i.firstTabStop.removeAttribute("x-ms-aria-flowfrom"),i.finalTabStop.removeAttribute("aria-flowto")),t.isOpenedMode=n._isOpenedMode),t.closedDisplayMode!==n.closedDisplayMode&&(P(i.root,L[t.closedDisplayMode]),x(i.root,L[n.closedDisplayMode]),t.closedDisplayMode=n.closedDisplayMode),t.overflowDirection!==n.overflowDirection&&(P(i.root,O[t.overflowDirection]),x(i.root,O[n.overflowDirection]),t.overflowDirection=n.overflowDirection),n._overflowAlignmentOffset!==t.overflowAlignmentOffset){var r=n._rtl?"left":"right",o=n._overflowAlignmentOffset+"px";i.overflowAreaContainer.style[r]=o}},i={newDataStage:3,measuringStage:2,layoutStage:1,idle:0},r=i.idle,o=function(){n._writeProfilerMark("_updateDomImpl_updateCommands,info");for(var e=r;e!==i.idle;){var t=e,o=!1;switch(e){case i.newDataStage:e=i.measuringStage,o=n._processNewData();break;case i.measuringStage:e=i.layoutStage,o=n._measure();break;case i.layoutStage:e=i.idle,o=n._layoutCommands()}if(!o){e=t;break}}r=e,e===i.idle?n._layoutCompleteCallback&&n._layoutCompleteCallback():n._minimalLayout()};return{get renderedState(){return{get closedDisplayMode(){return e.closedDisplayMode},get isOpenedMode(){return e.isOpenedMode},get overflowDirection(){return e.overflowDirection},get overflowAlignmentOffset(){return e.overflowAlignmentOffset}}},update:function(){t(),o()},dataDirty:function(){r=Math.max(i.newDataStage,r)},measurementsDirty:function(){r=Math.max(i.measuringStage,r)},layoutDirty:function(){r=Math.max(i.layoutStage,r)},get _currentLayoutStage(){return r}}}(),this._writeProfilerMark("constructor,StartTM"),e){if(e.winControl)throw new p("WinJS.UI._CommandingSurface.DuplicateConstruction",M.duplicateConstruction);t.data||(t=r._shallowCopy(t),t.data=t.data||this._getDataFromDOMElements(e))}this._initializeDom(e||_.document.createElement("div")),this._machine=t.openCloseMachine||new I.OpenCloseMachine({eventElement:this._dom.root,onOpen:function(){return n.synchronousOpen(),b.wrap()},onClose:function(){return n.synchronousClose(),b.wrap()},onUpdateDom:function(){n._updateDomImpl.update()},onUpdateDomWithIsOpened:function(e){e?n.synchronousOpen():n.synchronousClose()}}),this._disposed=!1,this._primaryCommands=[],this._secondaryCommands=[],this._refreshBound=this._refresh.bind(this),this._resizeHandlerBound=this._resizeHandler.bind(this),this._winKeyboard=new v._WinKeyboard(this._dom.root),this._refreshPending=!1,this._rtl=!1,this._initializedSignal=new S,this._isOpenedMode=a.defaultOpened,this._menuCommandProjections=[],this.overflowDirection=a.defaultOverflowDirection,this.closedDisplayMode=a.defaultClosedDisplayMode,this.opened=this._isOpenedMode,c.setOptions(this,t),h._resizeNotifier.subscribe(this._dom.root,this._resizeHandlerBound),this._dom.root.addEventListener("keydown",this._keyDownHandler.bind(this)),h._addEventListener(this._dom.firstTabStop,"focusin",function(){n._focusLastFocusableElementOrThis(!1)}),h._addEventListener(this._dom.finalTabStop,"focusin",function(){n._focusFirstFocusableElementOrThis(!1)}),h._inDom(this._dom.root).then(function(){n._rtl="rtl"===h._getComputedStyle(n._dom.root).direction,t.openCloseMachine||n._machine.exitInit(),n._initializedSignal.complete(),n._writeProfilerMark("constructor,StopTM")})}return Object.defineProperty(e.prototype,"element",{get:function(){return this._dom.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){if(this._writeProfilerMark("set_data,info"),e!==this.data){if(!(e instanceof o.List))throw new p("WinJS.UI._CommandingSurface.BadData",M.badData);this._data&&this._removeDataListeners(),this._data=e,this._addDataListeners(),this._dataUpdated()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closedDisplayMode",{get:function(){return this._closedDisplayMode},set:function(e){this._writeProfilerMark("set_closedDisplayMode,info");var t=e!==this._closedDisplayMode;D[e]&&t&&(this._updateDomImpl.layoutDirty(),this._closedDisplayMode=e,this._machine.updateDom())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overflowDirection",{get:function(){return this._overflowDirection},set:function(e){var t=e!==this._overflowDirection;A[e]&&t&&(this._overflowDirection=e,this._machine.updateDom())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return this._machine.opened},set:function(e){this._machine.opened=e},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._machine.open()},e.prototype.close=function(){this._machine.close()},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._machine.dispose(),h._resizeNotifier.unsubscribe(this._dom.root,this._resizeHandlerBound),this._contentFlyout&&(this._contentFlyout.dispose(),this._contentFlyout.element.parentNode.removeChild(this._contentFlyout.element)),d.disposeSubTree(this._dom.root))},e.prototype.forceLayout=function(){this._updateDomImpl.measurementsDirty(),this._machine.updateDom()},e.prototype.getBoundingRects=function(){return{commandingSurface:this._dom.root.getBoundingClientRect(),overflowArea:this._dom.overflowArea.getBoundingClientRect()}},e.prototype.getCommandById=function(e){if(this._data)for(var t=0,n=this._data.length;n>t;t++){var i=this._data.getAt(t);if(i.id===e)return i}return null},e.prototype.showOnlyCommands=function(e){if(this._data){for(var t=0,n=this._data.length;n>t;t++)this._data.getAt(t).hidden=!0;for(var t=0,n=e.length;n>t;t++){var i="string"==typeof e[t]?this.getCommandById(e[t]):e[t];i&&(i.hidden=!1)}}},e.prototype.takeFocus=function(e){this._focusFirstFocusableElementOrThis(e)},e.prototype._focusFirstFocusableElementOrThis=function(e){h._focusFirstFocusableElement(this._dom.content,e)||h._tryFocusOnAnyElement(this.element,e)},e.prototype._focusLastFocusableElementOrThis=function(e){h._focusLastFocusableElement(this._dom.content,e)||h._tryFocusOnAnyElement(this.element,e)},e.prototype.deferredDomUpate=function(){this._machine.updateDom()},e.prototype.createOpenAnimation=function(e){y.log&&this._updateDomImpl.renderedState.isOpenedMode&&y.log("The CommandingSurface should only attempt to create an open animation when it's not already opened");var t=this;return{execute:function(){h.addClass(t.element,a.ClassNames.openingClass);var i=t.getBoundingRects();return t._dom.overflowAreaContainer.style.width=i.overflowArea.width+"px",t._dom.overflowAreaContainer.style.height=i.overflowArea.height+"px",n._commandingSurfaceOpenAnimation({actionAreaClipper:t._dom.actionAreaContainer,actionArea:t._dom.actionArea,overflowAreaClipper:t._dom.overflowAreaContainer,overflowArea:t._dom.overflowArea,oldHeight:e,newHeight:i.commandingSurface.height,overflowAreaHeight:i.overflowArea.height,menuPositionedAbove:t.overflowDirection===A.top}).then(function(){h.removeClass(t.element,a.ClassNames.openingClass),t._clearAnimation()})}}},e.prototype.createCloseAnimation=function(e){y.log&&!this._updateDomImpl.renderedState.isOpenedMode&&y.log("The CommandingSurface should only attempt to create an closed animation when it's not already closed");var t=this.getBoundingRects().commandingSurface.height,i=this._dom.overflowArea.offsetHeight,r=(this._dom.overflowArea.offsetTop,this);return{execute:function(){return h.addClass(r.element,a.ClassNames.closingClass),n._commandingSurfaceCloseAnimation({actionAreaClipper:r._dom.actionAreaContainer,actionArea:r._dom.actionArea,overflowAreaClipper:r._dom.overflowAreaContainer,overflowArea:r._dom.overflowArea,oldHeight:t,newHeight:e,overflowAreaHeight:i,menuPositionedAbove:r.overflowDirection===A.top}).then(function(){h.removeClass(r.element,a.ClassNames.closingClass),r._clearAnimation()})}}},Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initializedSignal.promise},enumerable:!0,configurable:!0}),e.prototype._writeProfilerMark=function(e){E("WinJS.UI._CommandingSurface:"+this._id+":"+e)},e.prototype._initializeDom=function(e){var t=this;this._writeProfilerMark("_intializeDom,info"),e.winControl=this,this._id=e.id||h._uniqueID(e),e.hasAttribute("tabIndex")||(e.tabIndex=-1),h.addClass(e,a.ClassNames.controlCssClass),h.addClass(e,a.ClassNames.disposableCssClass);var n=_.document.createElement("div");h.addClass(n,a.ClassNames.contentClass),e.appendChild(n);var i=_.document.createElement("div");h.addClass(i,a.ClassNames.actionAreaCssClass);var r=document.createElement("div");h.addClass(r,a.ClassNames.insetOutlineClass);var o=_.document.createElement("div");h.addClass(o,a.ClassNames.actionAreaContainerCssClass),o.appendChild(i),o.appendChild(r),n.appendChild(o);var s=_.document.createElement("div");h.addClass(s,a.ClassNames.spacerCssClass),s.tabIndex=-1,i.appendChild(s);var l=_.document.createElement("button");l.tabIndex=0,l.innerHTML="<span class='"+a.ClassNames.ellipsisCssClass+"'></span>",l.setAttribute("aria-label",M.overflowButtonAriaLabel),h.addClass(l,a.ClassNames.overflowButtonCssClass),i.appendChild(l),l.addEventListener("click",function(){t.opened=!t.opened});var u=_.document.createElement("div");h.addClass(u,a.ClassNames.overflowAreaCssClass),h.addClass(u,a.ClassNames.menuCssClass);var c=_.document.createElement("DIV");h.addClass(c,a.ClassNames.insetOutlineClass);var d=_.document.createElement("div");h.addClass(d,a.ClassNames.overflowAreaContainerCssClass),d.appendChild(u),d.appendChild(c),n.appendChild(d);var p=_.document.createElement("div");h.addClass(p,a.ClassNames.spacerCssClass),p.tabIndex=-1,u.appendChild(p);var m=_.document.createElement("div");h.addClass(m,a.ClassNames.tabStopClass),h._ensureId(m),e.insertBefore(m,e.children[0]);var f=_.document.createElement("div");h.addClass(f,a.ClassNames.tabStopClass),h._ensureId(f),e.appendChild(f),this._dom={root:e,content:n,actionArea:i,actionAreaContainer:o,actionAreaSpacer:s,overflowButton:l,overflowArea:u,overflowAreaContainer:d,overflowAreaSpacer:p,firstTabStop:m,finalTabStop:f}},e.prototype._getFocusableElementsInfo=function(){var e=this,t={elements:[],focusedIndex:-1},n=Array.prototype.slice.call(this._dom.actionArea.children);return this._updateDomImpl.renderedState.isOpenedMode&&(n=n.concat(Array.prototype.slice.call(this._dom.overflowArea.children))),n.forEach(function(n){e._isElementFocusable(n)&&(t.elements.push(n),n.contains(_.document.activeElement)&&(t.focusedIndex=t.elements.length-1))}),t},e.prototype._dataUpdated=function(){var e=this;this._primaryCommands=[],this._secondaryCommands=[],this.data.length>0&&this.data.forEach(function(t){"secondary"===t.section?e._secondaryCommands.push(t):e._primaryCommands.push(t)}),this._updateDomImpl.dataDirty(),this._machine.updateDom()},e.prototype._refresh=function(){var e=this;this._refreshPending||(this._refreshPending=!0,this._batchDataUpdates(function(){e._refreshPending&&!e._disposed&&(e._refreshPending=!1,e._dataUpdated())}))},e.prototype._batchDataUpdates=function(e){w.schedule(function(){e()},w.Priority.high,null,"WinJS.UI._CommandingSurface._refresh")},e.prototype._addDataListeners=function(){var e=this;this._dataChangedEvents.forEach(function(t){e._data.addEventListener(t,e._refreshBound,!1)})},e.prototype._removeDataListeners=function(){var e=this;this._dataChangedEvents.forEach(function(t){e._data.removeEventListener(t,e._refreshBound,!1)})},e.prototype._isElementFocusable=function(e){var t=!1;if(e){var n=e.winControl;t=n?!this._hasAnyHiddenClasses(n)&&n.type!==a.typeSeparator&&!n.hidden&&!n.disabled&&(!n.firstElementFocus||n.firstElementFocus.tabIndex>=0||n.lastElementFocus.tabIndex>=0):"none"!==e.style.display&&"hidden"!==h._getComputedStyle(e).visibility&&e.tabIndex>=0}return t},e.prototype._clearHiddenPolicyClasses=function(e){h.removeClass(e.element,a.ClassNames.commandPrimaryOverflownPolicyClass),h.removeClass(e.element,a.ClassNames.commandSecondaryOverflownPolicyClass),h.removeClass(e.element,a.ClassNames.commandSeparatorHiddenPolicyClass)},e.prototype._hasHiddenPolicyClasses=function(e){return h.hasClass(e.element,a.ClassNames.commandPrimaryOverflownPolicyClass)||h.hasClass(e.element,a.ClassNames.commandSecondaryOverflownPolicyClass)||h.hasClass(e.element,a.ClassNames.commandSeparatorHiddenPolicyClass)},e.prototype._hasAnyHiddenClasses=function(e){return h.hasClass(e.element,a.ClassNames.commandHiddenClass)||this._hasHiddenPolicyClasses(e)},e.prototype._isCommandInActionArea=function(e){return e&&e.winControl&&e.parentElement===this._dom.actionArea},e.prototype._getLastElementFocus=function(e){return this._isCommandInActionArea(e)?e.winControl.lastElementFocus:e},e.prototype._getFirstElementFocus=function(e){return this._isCommandInActionArea(e)?e.winControl.firstElementFocus:e},e.prototype._keyDownHandler=function(e){if(!e.altKey){if(h._matchesSelector(e.target,".win-interactive, .win-interactive *"))return;var t,n=h.Key,i=this._getFocusableElementsInfo();if(i.elements.length)switch(e.keyCode){case this._rtl?n.rightArrow:n.leftArrow:case n.upArrow:var r=Math.max(0,i.focusedIndex-1);t=this._getLastElementFocus(i.elements[r%i.elements.length]);
break;case this._rtl?n.leftArrow:n.rightArrow:case n.downArrow:var r=Math.min(i.focusedIndex+1,i.elements.length-1);t=this._getFirstElementFocus(i.elements[r]);break;case n.home:var r=0;t=this._getFirstElementFocus(i.elements[r]);break;case n.end:var r=i.elements.length-1;t=this._getLastElementFocus(i.elements[r])}t&&t!==_.document.activeElement&&(t.focus(),e.preventDefault())}},e.prototype._getDataFromDOMElements=function(e){this._writeProfilerMark("_getDataFromDOMElements,info"),s.processAll(e,!0);for(var t,n=[],i=e.children.length,r=0;i>r;r++){if(t=e.children[r],!(t.winControl&&t.winControl instanceof l.AppBarCommand))throw new p("WinJS.UI._CommandingSurface.MustContainCommands",M.mustContainCommands);n.push(t.winControl)}return new o.List(n)},e.prototype._canMeasure=function(){return(this._updateDomImpl.renderedState.isOpenedMode||this._updateDomImpl.renderedState.closedDisplayMode===D.compact||this._updateDomImpl.renderedState.closedDisplayMode===D.full)&&_.document.body.contains(this._dom.root)&&this._dom.actionArea.offsetWidth>0},e.prototype._resizeHandler=function(){if(this._canMeasure()){var e=h._getPreciseContentWidth(this._dom.actionArea);this._cachedMeasurements&&this._cachedMeasurements.actionAreaContentBoxWidth!==e&&(this._cachedMeasurements.actionAreaContentBoxWidth=e,this._updateDomImpl.layoutDirty(),this._machine.updateDom())}else this._updateDomImpl.measurementsDirty()},e.prototype.synchronousOpen=function(){this._overflowAlignmentOffset=0,this._isOpenedMode=!0,this._updateDomImpl.update(),this._overflowAlignmentOffset=this._computeAdjustedOverflowAreaOffset(),this._updateDomImpl.update()},e.prototype._computeAdjustedOverflowAreaOffset=function(){y.log&&(!this._updateDomImpl.renderedState.isOpenedMode&&y.log("The CommandingSurface should only attempt to compute adjusted overflowArea offset  when it has been rendered opened"),0!==this._updateDomImpl.renderedState.overflowAlignmentOffset&&y.log("The CommandingSurface should only attempt to compute adjusted overflowArea offset  when it has been rendered with an overflowAlignementOffset of 0"));var e=(this._dom.overflowArea,this.getBoundingRects()),t=0;if(this._rtl){var n=window.innerWidth,i=e.overflowArea.right;t=Math.min(n-i,0)}else{var r=e.overflowArea.left;t=Math.min(0,r)}return t},e.prototype.synchronousClose=function(){this._isOpenedMode=!1,this._updateDomImpl.update()},e.prototype.updateDom=function(){this._updateDomImpl.update()},e.prototype._getDataChangeInfo=function(){var e=this,t=[],n=[],i=[],r=[],o=[],s=[],l=[],u=[],c=[],d=[];return Array.prototype.forEach.call(this._dom.actionArea.querySelectorAll(a.commandSelector),function(t){e._hasAnyHiddenClasses(t.winControl)||r.push(t),o.push(t)}),this.data.forEach(function(t){var n=t.hidden,i=n&&!h.hasClass(t.element,a.ClassNames.commandHiddenClass),r=!n&&h.hasClass(t.element,a.ClassNames.commandHiddenClass),o=h.hasClass(t.element,a.ClassNames.commandPrimaryOverflownPolicyClass);e._hasAnyHiddenClasses(t.element.winControl)||s.push(t.element),o?u.push(t.element):i?c.push(t.element):r&&d.push(t.element),l.push(t.element)}),n=k(o,l),i=T(r,s),t=k(l,o),{nextElements:l,prevElements:o,added:t,deleted:n,unchanged:i,hiding:c,showing:d,overflown:u}},e.prototype._processNewData=function(){var e=this;this._writeProfilerMark("_processNewData,info");var t=this._getDataChangeInfo(),i=n._createUpdateListAnimation(t.added.concat(t.showing).concat(t.overflown),t.deleted.concat(t.hiding),t.unchanged);return t.deleted.forEach(function(t){var n=t.winControl;n&&n._propertyMutations&&n._propertyMutations.unbind(e._refreshBound)}),t.added.forEach(function(t){var n=t.winControl;n&&n._propertyMutations&&n._propertyMutations.bind(e._refreshBound)}),t.prevElements.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)}),t.nextElements.forEach(function(t){e._dom.actionArea.appendChild(t)}),t.hiding.forEach(function(e){h.addClass(e,a.ClassNames.commandHiddenClass)}),t.showing.forEach(function(e){h.removeClass(e,a.ClassNames.commandHiddenClass)}),this._dom.actionArea.appendChild(this._dom.overflowButton),i.execute(),!0},e.prototype._measure=function(){var e=this;if(this._writeProfilerMark("_measure,info"),this._canMeasure()){var t=this._dom.overflowButton.style.display;this._dom.overflowButton.style.display="";var n=h._getPreciseTotalWidth(this._dom.overflowButton);this._dom.overflowButton.style.display=t;var i=h._getPreciseContentWidth(this._dom.actionArea),r=0,o=0,s={};return this._primaryCommands.forEach(function(t){var n=t.element.style.display;t.element.style.display="inline-block",t.type===a.typeContent?s[e._commandUniqueId(t)]=h._getPreciseTotalWidth(t.element):t.type===a.typeSeparator?r||(r=h._getPreciseTotalWidth(t.element)):o||(o=h._getPreciseTotalWidth(t.element)),t.element.style.display=n}),this._cachedMeasurements={contentCommandWidths:s,separatorWidth:r,standardCommandWidth:o,overflowButtonWidth:n,actionAreaContentBoxWidth:i},!0}return!1},e.prototype._layoutCommands=function(){var e=this;this._writeProfilerMark("_layoutCommands,StartTM");var t=[],n=[],i=[],r=[];this.data.forEach(function(i){e._clearHiddenPolicyClasses(i),i.hidden||(i.section===a.secondaryCommandSection?t.push(i):n.push(i))});var o=t.length>0,s=this._getVisiblePrimaryCommandsLocation(n,o);i=s.commandsForActionArea,r=s.commandsForOverflowArea,r.forEach(function(e){return h.addClass(e.element,a.ClassNames.commandPrimaryOverflownPolicyClass)}),t.forEach(function(e){return h.addClass(e.element,a.ClassNames.commandSecondaryOverflownPolicyClass)}),this._hideSeparatorsIfNeeded(i),h.empty(this._dom.overflowArea),this._menuCommandProjections.map(function(e){e.dispose()});var l=function(e){return e.type===a.typeContent},c=r.some(l)||t.some(l);c&&!this._contentFlyout&&(this._contentFlyoutInterior=_.document.createElement("div"),h.addClass(this._contentFlyoutInterior,a.ClassNames.contentFlyoutCssClass),this._contentFlyout=new f.Flyout,this._contentFlyout.element.appendChild(this._contentFlyoutInterior),_.document.body.appendChild(this._contentFlyout.element),this._contentFlyout.onbeforeshow=function(){h.empty(e._contentFlyoutInterior),h._reparentChildren(e._chosenCommand.element,e._contentFlyoutInterior)},this._contentFlyout.onafterhide=function(){h._reparentChildren(e._contentFlyoutInterior,e._chosenCommand.element)});var d=!1,p=[];if(r.forEach(function(t){t.type===a.typeToggle&&(d=!0),p.push(e._projectAsMenuCommand(t))}),r.length>0&&t.length>0){var m=new u._MenuCommand(null,{type:a.typeSeparator});p.push(m)}t.forEach(function(t){t.type===a.typeToggle&&(d=!0),p.push(e._projectAsMenuCommand(t))}),this._hideSeparatorsIfNeeded(p),p.forEach(function(t){e._dom.overflowArea.appendChild(t.element)}),this._menuCommandProjections=p,h[d?"addClass":"removeClass"](this._dom.overflowArea,a.ClassNames.menuContainsToggleCommandClass),p.length>0&&this._dom.overflowArea.appendChild(this._dom.overflowAreaSpacer);var g=this._needsOverflowButton(i.length>0,p.length>0);return this._dom.overflowButton.style.display=g?"":"none",this._writeProfilerMark("_layoutCommands,StopTM"),!0},e.prototype._getVisiblePrimaryCommandsInfo=function(e){for(var t=0,n=[],i=0,r=0,o=e.length-1;o>=0;o--){var s=e[o];i=void 0===s.priority?r--:s.priority,t=this._getCommandWidth(s),n.unshift({command:s,width:t,priority:i})}return n},e.prototype._getVisiblePrimaryCommandsLocation=function(e,t){for(var n=[],i=[],r=this._getVisiblePrimaryCommandsInfo(e),o=r.slice(0).sort(function(e,t){return e.priority-t.priority}),s=Number.MAX_VALUE,a=this._cachedMeasurements.actionAreaContentBoxWidth,l=this._needsOverflowButton(e.length>0,t),u=0,c=o.length;c>u;u++){a-=o[u].width;var d=l||u!==c-1?this._cachedMeasurements.overflowButtonWidth:0;if(d>a){s=o[u].priority-1;break}}return r.forEach(function(e){e.priority<=s?n.push(e.command):i.push(e.command)}),{commandsForActionArea:n,commandsForOverflowArea:i}},e.prototype._needsOverflowButton=function(e,t){return t?!0:this._hasExpandableActionArea()&&e?!0:!1},e.prototype._minimalLayout=function(){if(this.closedDisplayMode===D.minimal){var e=function(e){return!e.hidden},t=this.data.some(e);this._dom.overflowButton.style.display=t?"":"none"}},e.prototype._commandUniqueId=function(e){return h._uniqueID(e.element)},e.prototype._getCommandWidth=function(e){return e.type===a.typeContent?this._cachedMeasurements.contentCommandWidths[this._commandUniqueId(e)]:e.type===a.typeSeparator?this._cachedMeasurements.separatorWidth:this._cachedMeasurements.standardCommandWidth},e.prototype._projectAsMenuCommand=function(e){var t=this,n=new u._MenuCommand(null,{label:e.label,type:(e.type===a.typeContent?a.typeFlyout:e.type)||a.typeButton,disabled:e.disabled,flyout:e.flyout,beforeInvoke:function(){t._chosenCommand=n._originalICommand,t._chosenCommand.type===a.typeToggle&&(t._chosenCommand.selected=!t._chosenCommand.selected)}});return e.selected&&(n.selected=!0),e.extraClass&&(n.extraClass=e.extraClass),e.type===a.typeContent?(n.label||(n.label=a.contentMenuCommandDefaultLabel),n.flyout=this._contentFlyout):n.onclick=e.onclick,n._originalICommand=e,n},e.prototype._hideSeparatorsIfNeeded=function(e){var t,n=a.typeSeparator,i=e.length;e.forEach(function(e){e.type===a.typeSeparator&&n===a.typeSeparator&&h.addClass(e.element,a.ClassNames.commandSeparatorHiddenPolicyClass),n=e.type});for(var r=i-1;r>=0&&(t=e[r],t.type===a.typeSeparator);r--)h.addClass(t.element,a.ClassNames.commandSeparatorHiddenPolicyClass)},e.prototype._hasExpandableActionArea=function(){switch(this.closedDisplayMode){case D.none:case D.minimal:case D.compact:return!0;case D.full:default:return!1}},e.prototype._clearAnimation=function(){var e=r._browserStyleEquivalents.transform.scriptName;this._dom.actionAreaContainer.style[e]="",this._dom.actionArea.style[e]="",this._dom.overflowAreaContainer.style[e]="",this._dom.overflowArea.style[e]=""},e.ClosedDisplayMode=D,e.OverflowDirection=A,e.supportedForProcessing=!0,e}();t._CommandingSurface=B,i.Class.mix(B,m.createEventProperties(a.EventNames.beforeOpen,a.EventNames.afterOpen,a.EventNames.beforeClose,a.EventNames.afterClose)),i.Class.mix(B,c.DOMEventMixin)}),i("WinJS/Controls/CommandingSurface",["require","exports"],function(e,t){function n(){return i||e(["./CommandingSurface/_CommandingSurface"],function(e){i=e}),i._CommandingSurface}var i=null,r=Object.create({},{_CommandingSurface:{get:function(){return n()}}});return r}),i("require-style!less/styles-toolbar",[],function(){}),i("WinJS/Controls/ToolBar/_ToolBar",["require","exports","../../Core/_Base","../ToolBar/_Constants","../CommandingSurface","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Global","../../_LightDismissService","../../Core/_Resources","../../Utilities/_OpenCloseMachine","../../Core/_WriteProfilerMark"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m){function f(e,t){t&&a.addClass(e,t)}function _(e,t){t&&a.removeClass(e,t)}e(["require-style!less/styles-toolbar"]);var g={get ariaLabel(){return h._getWinJSString("ui/toolbarAriaLabel").value},get overflowButtonAriaLabel(){return h._getWinJSString("ui/toolbarOverflowButtonAriaLabel").value},get mustContainCommands(){return"The toolbar can only contain WinJS.UI.Command or WinJS.UI.AppBarCommand controls"},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},v={compact:"compact",full:"full"},y={};y[v.compact]=i.ClassNames.compactClass,y[v.full]=i.ClassNames.fullClass;var b=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),this._updateDomImpl_renderedState={isOpenedMode:void 0,closedDisplayMode:void 0,prevInlineWidth:void 0},this._writeProfilerMark("constructor,StartTM"),e&&e.winControl)throw new l("WinJS.UI.ToolBar.DuplicateConstruction",g.duplicateConstruction);this._initializeDom(e||c.document.createElement("div"));var s=new p.OpenCloseMachine({eventElement:this.element,onOpen:function(){var e=n._commandingSurface.createOpenAnimation(n._getClosedHeight());return n._synchronousOpen(),e.execute()},onClose:function(){var e=n._commandingSurface.createCloseAnimation(n._getClosedHeight());return e.execute().then(function(){n._synchronousClose()})},onUpdateDom:function(){n._updateDomImpl()},onUpdateDomWithIsOpened:function(e){n._isOpenedMode=e,n._updateDomImpl()}});this._handleShowingKeyboardBound=this._handleShowingKeyboard.bind(this),a._inputPaneListener.addEventListener(this._dom.root,"showing",this._handleShowingKeyboardBound),this._disposed=!1,this._cachedClosedHeight=null,this._commandingSurface=new r._CommandingSurface(this._dom.commandingSurfaceEl,{openCloseMachine:s}),f(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-actionarea"),i.ClassNames.actionAreaCssClass),f(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-overflowarea"),i.ClassNames.overflowAreaCssClass),f(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-overflowbutton"),i.ClassNames.overflowButtonCssClass),f(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-ellipsis"),i.ClassNames.ellipsisCssClass),this._isOpenedMode=i.defaultOpened,this._dismissable=new d.LightDismissableElement({element:this._dom.root,tabIndex:this._dom.root.hasAttribute("tabIndex")?this._dom.root.tabIndex:-1,onLightDismiss:function(){n.close()},onTakeFocus:function(e){n._dismissable.restoreFocus()||n._commandingSurface.takeFocus(e)}}),this.closedDisplayMode=i.defaultClosedDisplayMode,this.opened=this._isOpenedMode,o.setOptions(this,t),a._inDom(this.element).then(function(){return n._commandingSurface.initialized}).then(function(){s.exitInit(),n._writeProfilerMark("constructor,StopTM")})}return Object.defineProperty(e.prototype,"element",{get:function(){return this._dom.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._commandingSurface.data},set:function(e){this._commandingSurface.data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closedDisplayMode",{get:function(){return this._commandingSurface.closedDisplayMode},set:function(e){v[e]&&(this._commandingSurface.closedDisplayMode=e,this._cachedClosedHeight=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return this._commandingSurface.opened},set:function(e){this._commandingSurface.opened=e},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._commandingSurface.open()},e.prototype.close=function(){this._commandingSurface.close()},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,d.hidden(this._dismissable),this._commandingSurface.dispose(),this._synchronousClose(),a._inputPaneListener.removeEventListener(this._dom.root,"showing",this._handleShowingKeyboardBound),s.disposeSubTree(this.element))},e.prototype.forceLayout=function(){this._commandingSurface.forceLayout()},e.prototype.getCommandById=function(e){return this._commandingSurface.getCommandById(e)},e.prototype.showOnlyCommands=function(e){return this._commandingSurface.showOnlyCommands(e)},e.prototype._writeProfilerMark=function(e){m("WinJS.UI.ToolBar:"+this._id+":"+e)},e.prototype._initializeDom=function(e){this._writeProfilerMark("_intializeDom,info"),e.winControl=this,this._id=e.id||a._uniqueID(e),a.addClass(e,i.ClassNames.controlCssClass),a.addClass(e,i.ClassNames.disposableCssClass);var t=e.getAttribute("role");t||e.setAttribute("role","menubar");var n=e.getAttribute("aria-label");n||e.setAttribute("aria-label",g.ariaLabel);var r=document.createElement("DIV");a._reparentChildren(e,r),e.appendChild(r);var o=c.document.createElement("DIV");a.addClass(o,i.ClassNames.placeHolderCssClass),s.markDisposable(o,this.dispose.bind(this)),this._dom={root:e,commandingSurfaceEl:r,placeHolder:o}},e.prototype._handleShowingKeyboard=function(e){this.close()},e.prototype._synchronousOpen=function(){this._isOpenedMode=!0,this._updateDomImpl()},e.prototype._synchronousClose=function(){this._isOpenedMode=!1,this._updateDomImpl()},e.prototype._updateDomImpl=function(){var e=this._updateDomImpl_renderedState;e.isOpenedMode!==this._isOpenedMode&&(this._isOpenedMode?this._updateDomImpl_renderOpened():this._updateDomImpl_renderClosed(),e.isOpenedMode=this._isOpenedMode),e.closedDisplayMode!==this.closedDisplayMode&&(_(this._dom.root,y[e.closedDisplayMode]),f(this._dom.root,y[this.closedDisplayMode]),e.closedDisplayMode=this.closedDisplayMode),this._commandingSurface.updateDom()},e.prototype._getClosedHeight=function(){if(null===this._cachedClosedHeight){var e=this._isOpenedMode;this._isOpenedMode&&this._synchronousClose(),this._cachedClosedHeight=this._commandingSurface.getBoundingRects().commandingSurface.height,e&&this._synchronousOpen()}return this._cachedClosedHeight},e.prototype._updateDomImpl_renderOpened=function(){var e=this;this._updateDomImpl_renderedState.prevInlineWidth=this._dom.root.style.width;var t=this._dom.root.getBoundingClientRect(),n=a._getPreciseContentWidth(this._dom.root),r=a._getPreciseContentHeight(this._dom.root),o=a._getComputedStyle(this._dom.root),s=a._convertToPrecisePixels(o.paddingTop),l=a._convertToPrecisePixels(o.borderTopWidth),u=a._getPreciseMargins(this._dom.root),h=t.top+l+s,p=h+r,m=this._dom.placeHolder,f=m.style;f.width=t.width+"px",f.height=t.height+"px",f.marginTop=u.top+"px",f.marginRight=u.right+"px",f.marginBottom=u.bottom+"px",f.marginLeft=u.left+"px",a._maintainFocus(function(){e._dom.root.parentElement.insertBefore(m,e._dom.root),c.document.body.appendChild(e._dom.root),e._dom.root.style.width=n+"px",e._dom.root.style.left=t.left-u.left+"px";var r=0,o=c.innerHeight,s=h-r,l=o-p;s>l?(e._commandingSurface.overflowDirection=i.OverflowDirection.top,e._dom.root.style.bottom=o-t.bottom-u.bottom+"px"):(e._commandingSurface.overflowDirection=i.OverflowDirection.bottom,e._dom.root.style.top=r+t.top-u.top+"px"),a.addClass(e._dom.root,i.ClassNames.openedClass),a.removeClass(e._dom.root,i.ClassNames.closedClass)}),this._commandingSurface.synchronousOpen(),d.shown(this._dismissable)},e.prototype._updateDomImpl_renderClosed=function(){var e=this;a._maintainFocus(function(){if(e._dom.placeHolder.parentElement){var t=e._dom.placeHolder;t.parentElement.insertBefore(e._dom.root,t),t.parentElement.removeChild(t)}e._dom.root.style.top="",e._dom.root.style.right="",e._dom.root.style.bottom="",e._dom.root.style.left="",e._dom.root.style.width=e._updateDomImpl_renderedState.prevInlineWidth,a.addClass(e._dom.root,i.ClassNames.closedClass),a.removeClass(e._dom.root,i.ClassNames.openedClass)}),this._commandingSurface.synchronousClose(),d.hidden(this._dismissable)},e.ClosedDisplayMode=v,e.supportedForProcessing=!0,e}();t.ToolBar=b,n.Class.mix(b,u.createEventProperties(i.EventNames.beforeOpen,i.EventNames.afterOpen,i.EventNames.beforeClose,i.EventNames.afterClose)),n.Class.mix(b,o.DOMEventMixin)}),i("WinJS/Controls/ToolBar",["require","exports","../Core/_Base"],function(e,t,n){var i=null;n.Namespace.define("WinJS.UI",{ToolBar:{get:function(){return i||e(["./ToolBar/_ToolBar"],function(e){i=e}),i.ToolBar}}})}),i("WinJS/Controls/_LegacyAppBar/_Layouts",["exports","../../Animations/_TransitionAnimation","../../BindingList","../../Core/_BaseUtils","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Controls/ToolBar","../../Controls/ToolBar/_Constants","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../AppBar/_Command","./_Constants"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g){"use strict";o.Namespace._moduleDefine(e,"WinJS.UI",{_AppBarBaseLayout:o.Namespace._lazy(function(){var e=g.appBarLayoutCustom,t={get nullCommand(){return"Invalid argument: command must not be null"}},n=o.Class.define(function(e,t){this._disposed=!1,t=t||{},p.setOptions(this,t),e&&this.connect(e)},{className:{get:function(){return this._className}},type:{get:function(){return this._type||e}},commandsInOrder:{get:function(){var e=this.appBarEl.querySelectorAll("."+g.appBarCommandClass);return Array.prototype.map.call(e,function(e){return e.winControl})}},connect:function(e){this.className&&f.addClass(e,this.className),this.appBarEl=e},disconnect:function(){this.className&&f.removeClass(this.appBarEl,this.className),this.appBarEl=null,this.dispose()},layout:function(e){for(var t=e.length,n=0;t>n;n++){var i=this.sanitizeCommand(e[n]);this.appBarEl.appendChild(i._element)}},showCommands:function(e){this.appBarEl.winControl._showCommands(e)},showOnlyCommands:function(e){this.appBarEl.winControl._showOnlyCommands(e)},hideCommands:function(e){this.appBarEl.winControl._hideCommands(e)},sanitizeCommand:function(e){if(!e)throw new s("WinJS.UI.AppBar.NullCommand",t.nullCommand);return e=e.winControl||e,e._element||(e=new _.AppBarCommand(null,e)),e._element.parentElement&&e._element.parentElement.removeChild(e._element),e},dispose:function(){this._disposed=!0},disposeChildren:function(){var e=this.appBarEl.querySelectorAll("."+g.firstDivClass);e=e.length>=1?e[0]:null;var t=this.appBarEl.querySelectorAll("."+g.finalDivClass);t=t.length>=1?t[0]:null;for(var n=this.appBarEl.children,i=n.length,r=0;i>r;r++){var o=n[r];o!==e&&o!==t&&m.disposeSubTree(o)}},handleKeyDown:function(){},commandsUpdated:function(){},beginAnimateCommands:function(){},endAnimateCommands:function(){},scale:function(){},resize:function(){},positionChanging:function(e,t){return d.wrap()},setFocusOnShow:function(){this.appBarEl.winControl._setFocusToAppBar()}});return n})}),o.Namespace._moduleDefine(e,"WinJS.UI",{_AppBarCommandsLayout:o.Namespace._lazy(function(){var t=g.commandLayoutClass,n=g.appBarLayoutCommands,i=o.Class.derive(e._AppBarBaseLayout,function(i){e._AppBarBaseLayout.call(this,i,{_className:t,_type:n}),this._commandLayoutsInit(i)},{commandsInOrder:{get:function(){return this._originalCommands.filter(function(e){return this.appBarEl.contains(e.element)},this)}},layout:function(e){f.empty(this._primaryCommands),f.empty(this._secondaryCommands),this._originalCommands=[];for(var t=0,n=e.length;n>t;t++){var i=this.sanitizeCommand(e[t]);this._originalCommands.push(i),"primary"===i.section||"global"===i.section?this._primaryCommands.appendChild(i._element):this._secondaryCommands.appendChild(i._element)}this.appBarEl.appendChild(this._secondaryCommands),this.appBarEl.appendChild(this._primaryCommands),this._needToMeasureNewCommands=!0,h.schedule(function(){this._needToMeasureNewCommands&&!this._disposed&&this.scale()}.bind(this),h.Priority.idle,this,"WinJS._commandLayoutsMixin._scaleNewCommands")},disposeChildren:function(){m.disposeSubTree(this._primaryCommands),m.disposeSubTree(this._secondaryCommands)},handleKeyDown:function(e){var t=f.Key;if(!f._matchesSelector(e.target,".win-interactive, .win-interactive *")){var n="rtl"===f._getComputedStyle(this.appBarEl).direction,i=n?t.rightArrow:t.leftArrow,o=n?t.leftArrow:t.rightArrow;if(e.keyCode===i||e.keyCode===o||e.keyCode===t.home||e.keyCode===t.end){var s,a=this._primaryCommands.contains(r.document.activeElement),l=this._getFocusableCommandsInLogicalOrder(a);if(l.length)switch(e.keyCode){case i:var u=Math.max(-1,l.focusedIndex-1)+l.length;s=l[u%l.length].winControl.lastElementFocus;break;case o:var u=l.focusedIndex+1+l.length;s=l[u%l.length].winControl.firstElementFocus;break;case t.home:var u=0;s=l[u].winControl.firstElementFocus;break;case t.end:var u=l.length-1;s=l[u].winControl.lastElementFocus}s&&s!==r.document.activeElement&&(s.focus(),e.preventDefault())}}},commandsUpdated:function(e){var t=e?e:this.commandsInOrder.filter(function(e){return!e.hidden});this._fullSizeWidthOfLastKnownVisibleCommands=this._getWidthOfFullSizeCommands(t)},beginAnimateCommands:function(e,t,n){this._scaleAfterAnimations=!1;var i=this._getWidthOfFullSizeCommands(e)-this._getWidthOfFullSizeCommands(t);if(i>0){var r=n.concat(e);this.commandsUpdated(r),this.scale()}else 0>i&&(this._scaleAfterAnimations=!0)},endAnimateCommands:function(){this._scaleAfterAnimations&&(this.commandsUpdated(),this.scale())},resize:function(){this._disposed||(this._appBarTotalKnownWidth=null,this.appBarEl.winControl.opened&&this.scale())},disconnect:function(){e._AppBarBaseLayout.prototype.disconnect.call(this)},_getWidthOfFullSizeCommands:function(e){this._needToMeasureNewCommands&&this._measureContentCommands();var t=0,n=0,i=0;if(!e)return this._fullSizeWidthOfLastKnownVisibleCommands;for(var r,o=0,s=e.length;s>o;o++)r=e[o].winControl||e[o],r._type===g.typeSeparator?n++:r._type!==g.typeContent?i++:t+=r._fullSizeWidth;return t+=n*g.separatorWidth+i*g.buttonWidth},_getFocusableCommandsInLogicalOrder:function(){var e=this._secondaryCommands.children,t=this._primaryCommands.children,n=-1,i=function(e){for(var t=[],i=0,o=e.length;o>i;i++){var s=e[i];if(f.hasClass(s,g.appBarCommandClass)&&s.winControl){var a=s.contains(r.document.activeElement);(s.winControl._isFocusable()||a)&&(t.push(s),a&&(n=t.length-1))}}return t},o=Array.prototype.slice.call(e).concat(Array.prototype.slice.call(t)),s=i(o);return s.focusedIndex=n,s},_commandLayoutsInit:function(){this._primaryCommands=r.document.createElement("DIV"),this._secondaryCommands=r.document.createElement("DIV"),f.addClass(this._primaryCommands,g.primaryCommandsClass),f.addClass(this._secondaryCommands,g.secondaryCommandsClass)},_scaleHelper:function(){var e="minimal"===this.appBarEl.winControl.closedDisplayMode?g.appBarInvokeButtonWidth:0;return r.document.documentElement.clientWidth-e},_measureContentCommands:function(){if(r.document.body.contains(this.appBarEl)){this._needToMeasureNewCommands=!1;var e=f.hasClass(this.appBarEl,"win-navbar-closed");f.removeClass(this.appBarEl,"win-navbar-closed");var t=this.appBarEl.style.display;this.appBarEl.style.display="";for(var n,i,o=this.appBarEl.querySelectorAll("div."+g.appBarCommandClass),s=0,a=o.length;a>s;s++)i=o[s],i.winControl&&i.winControl._type===g.typeContent&&(n=i.style.display,i.style.display="",i.winControl._fullSizeWidth=f.getTotalWidth(i)||0,i.style.display=n);this.appBarEl.style.display=t,e&&f.addClass(this.appBarEl,"win-navbar-closed"),this.commandsUpdated()}}});return i})}),o.Namespace._moduleDefine(e,"WinJS.UI",{_AppBarMenuLayout:o.Namespace._lazy(function(){function s(e,n){var o=n.duration*t._animationFactor,s=i._browserStyleEquivalents.transition.scriptName;e.style[s]=o+"ms "+y.cssName+" "+n.timing,e.style[y.scriptName]=n.to;var a;return new d(function(t){var n=function(t){t.target===e&&t.propertyName===y.cssName&&a()},l=!1;a=function(){l||(r.clearTimeout(u),e.removeEventListener(i._browserEventEquivalents.transitionEnd,n),e.style[s]="",l=!0),t()};var u=r.setTimeout(function(){u=r.setTimeout(a,o)},50);e.addEventListener(i._browserEventEquivalents.transitionEnd,n)},function(){a()})}function a(e,t,n){var i=n.anchorTrailingEdge?n.to.total-n.from.total:n.from.total-n.to.total,r="width"===n.dimension?"translateX":"translateY",o=n.dimension,a=n.duration||367,l=n.timing||"cubic-bezier(0.1, 0.9, 0.2, 1)";e.style[o]=n.to.total+"px",e.style[y.scriptName]=r+"("+i+"px)",t.style[o]=n.to.content+"px",t.style[y.scriptName]=r+"("+-i+"px)",f._getComputedStyle(e).opacity,f._getComputedStyle(t).opacity;var u={duration:a,timing:l,to:""};return d.join([s(e,u),s(t,u)])}function h(e,t,n){var r=n.anchorTrailingEdge?n.from.total-n.to.total:n.to.total-n.from.total,o="width"===n.dimension?"translateX":"translateY",a=n.duration||367,l=n.timing||"cubic-bezier(0.1, 0.9, 0.2, 1)";e.style[y.scriptName]="",t.style[y.scriptName]="",f._getComputedStyle(e).opacity,f._getComputedStyle(t).opacity;var u={duration:a,timing:l},c=i._merge(u,{to:o+"("+r+"px)"}),h=i._merge(u,{to:o+"("+-r+"px)"});return d.join([s(e,c),s(t,h)])}function p(e,t,n){return n.to.total>n.from.total?a(e,t,n):n.to.total<n.from.total?h(e,t,n):d.as()}var _=g.menuLayoutClass,v=g.appBarLayoutMenu,y=i._browserStyleEquivalents.transform,b=o.Class.derive(e._AppBarBaseLayout,function(t){e._AppBarBaseLayout.call(this,t,{_className:_,_type:v}),this._tranformNames=i._browserStyleEquivalents.transform,this._animationCompleteBound=this._animationComplete.bind(this),this._positionToolBarBound=this._positionToolBar.bind(this)},{commandsInOrder:{get:function(){return this._originalCommands}},layout:function(e){this._writeProfilerMark("layout,info"),e=e||[],this._originalCommands=[];var t=this;e.forEach(function(e){t._originalCommands.push(t.sanitizeCommand(e))}),this._displayedCommands=this._originalCommands.slice(0),this._menu?f.empty(this._menu):(this._menu=r.document.createElement("div"),f.addClass(this._menu,g.menuContainerClass)),this.appBarEl.appendChild(this._menu),this._toolbarEl=r.document.createElement("div"),this._menu.appendChild(this._toolbarEl),this._createToolBar(e)},showCommands:function(e){var t=this._getCommandsElements(e),n=[],i=[],r=this;this._originalCommands.forEach(function(e){(t.indexOf(e.element)>=0||r._displayedCommands.indexOf(e)>=0)&&(i.push(e),n.push(e))}),this._displayedCommands=i,this._updateData(n)},showOnlyCommands:function(e){this._displayedCommands=[],this.showCommands(e)},hideCommands:function(e){var t=this._getCommandsElements(e),n=[],i=[],r=this;this._originalCommands.forEach(function(e){-1===t.indexOf(e.element)&&r._displayedCommands.indexOf(e)>=0&&(i.push(e),n.push(e))}),this._displayedCommands=i,this._updateData(n)},connect:function(t){this._writeProfilerMark("connect,info"),e._AppBarBaseLayout.prototype.connect.call(this,t),this._id=f._uniqueID(t)},resize:function(){this._writeProfilerMark("resize,info"),this._initialized&&(this._forceLayoutPending=!0)},positionChanging:function(e,t){return this._writeProfilerMark("positionChanging from:"+e+" to: "+t+",info"),this._animationPromise=this._animationPromise||d.wrap(),this._animating&&this._animationPromise.cancel(),this._animating=!0,"shown"===t||"shown"!==e&&"compact"===t?(this._positionToolBar(),this._animationPromise=this._animateToolBarEntrance()):"minimal"===e||"compact"===e||"hidden"===e?this._animationPromise=d.wrap():this._animationPromise=this._animateToolBarExit(),this._animationPromise.then(this._animationCompleteBound,this._animationCompleteBound),this._animationPromise},disposeChildren:function(){this._writeProfilerMark("disposeChildren,info"),this._toolbar&&m.disposeSubTree(this._toolbarEl),this._originalCommands=[],this._displayedCommands=[]},setFocusOnShow:function(){this.appBarEl.winControl._setFocusToAppBar(!0,this._menu)},_updateData:function(e){var t=f.hasClass(this.appBarEl,"win-navbar-closed"),i=f.hasClass(this.appBarEl,"win-navbar-opened");f.removeClass(this.appBarEl,"win-navbar-closed");var r=this.appBarEl.style.display;this.appBarEl.style.display="",this._toolbar.data=new n.List(e),t&&this._positionToolBar(),this.appBarEl.style.display=r,t&&f.addClass(this.appBarEl,"win-navbar-closed"),i&&(this._positionToolBar(),this._animateToolBarEntrance())},_getCommandsElements:function(e){if(!e)return[];"string"!=typeof e&&e&&e.length||(e=[e]);for(var t=[],n=0,i=e.length;i>n;n++)if(e[n])if("string"==typeof e[n]){var o=r.document.getElementById(e[n]);if(o)t.push(o);else for(var s=0,a=this._originalCommands.length;a>s;s++){var o=this._originalCommands[s].element;o.id===e[n]&&t.push(o)}}else e[n].element?t.push(e[n].element):t.push(e[n]);return t},_animationComplete:function(){this._disposed||(this._animating=!1)},_createToolBar:function(e){this._writeProfilerMark("_createToolBar,info");var t=f.hasClass(this.appBarEl,"win-navbar-closed");f.removeClass(this.appBarEl,"win-navbar-closed");var i=this.appBarEl.style.display;this.appBarEl.style.display="",this._toolbar=new u.ToolBar(this._toolbarEl,{data:new n.List(this._originalCommands),shownDisplayMode:"full"});var r=this;this._appbarInvokeButton=this.appBarEl.querySelector("."+g.invokeButtonClass),this._overflowButton=this._toolbarEl.querySelector("."+c.overflowButtonCssClass),this._overflowButton.addEventListener("click",function(){r._appbarInvokeButton.click()}),this._positionToolBar(),this.appBarEl.style.display=i,t&&f.addClass(this.appBarEl,"win-navbar-closed");
},_positionToolBar:function(){this._disposed||(this._writeProfilerMark("_positionToolBar,info"),this._initialized=!0)},_animateToolBarEntrance:function(){this._writeProfilerMark("_animateToolBarEntrance,info"),this._forceLayoutPending&&(this._forceLayoutPending=!1,this._toolbar.forceLayout(),this._positionToolBar());var e=this._isMinimal()?0:this.appBarEl.offsetHeight;if(this._isBottom()){var t=this._menu.offsetHeight-e;return this._executeTranslate(this._menu,"translateY("+-t+"px)")}return p(this._menu,this._toolbarEl,{from:{content:e,total:e},to:{content:this._menu.offsetHeight,total:this._menu.offsetHeight},dimension:"height",duration:400,timing:"ease-in"})},_animateToolBarExit:function(){this._writeProfilerMark("_animateToolBarExit,info");var e=this._isMinimal()?0:this.appBarEl.offsetHeight;return this._isBottom()?this._executeTranslate(this._menu,"none"):p(this._menu,this._toolbarEl,{from:{content:this._menu.offsetHeight,total:this._menu.offsetHeight},to:{content:e,total:e},dimension:"height",duration:400,timing:"ease-in"})},_executeTranslate:function(e,n){return t.executeTransition(e,{property:this._tranformNames.cssName,delay:0,duration:400,timing:"ease-in",to:n})},_isMinimal:function(){return"minimal"===this.appBarEl.winControl.closedDisplayMode},_isBottom:function(){return"bottom"===this.appBarEl.winControl.placement},_writeProfilerMark:function(e){l("WinJS.UI._AppBarMenuLayout:"+this._id+":"+e)}});return b})})}),i("WinJS/Controls/_LegacyAppBar",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Promise","../Scheduler","../_LightDismissService","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_KeyboardBehavior","./_LegacyAppBar/_Constants","./_LegacyAppBar/_Layouts","./AppBar/_Command","./AppBar/_Icon","./Flyout/_Overlay","../Application"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b,C,w,I){"use strict";i.Namespace._moduleDefine(e,"WinJS.UI",{_LegacyAppBar:i.Namespace._lazy(function(){function e(e){var n=t.document.querySelectorAll("."+v.appBarClass);if(n)for(var i=n.length,r=0;i>r;r++){var o=n[r],s=o.winControl;s&&!o.disabled&&s._manipulationChanged(e)}}var _={beforeOpen:"beforeopen",afterOpen:"afteropen",beforeClose:"beforeclose",afterClose:"afterclose"},b=s._createEventProperty,C={none:0,hidden:0,minimal:25,compact:48},I={none:"hidden",hidden:"hidden",minimal:"minimal",shown:"shown",compact:"compact"},S={none:"none",minimal:"minimal",compact:"compact"},E="shown",x="hidden",P=!1,k={get ariaLabel(){return a._getWinJSString("ui/appBarAriaLabel").value},get requiresCommands(){return"Invalid argument: commands must not be empty"},get cannotChangePlacementWhenVisible(){return"Invalid argument: The placement property cannot be set when the AppBar is visible, call hide() first"},get cannotChangeLayoutWhenVisible(){return"Invalid argument: The layout property cannot be set when the AppBar is visible, call hide() first"}},T=i.Class.derive(w._Overlay,function(n,i){this._initializing=!0,i=i||{},this._element=n||t.document.createElement("div"),this._id=this._element.id||f._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),f.addClass(this._element,v.appBarClass);var r=this;this._dismissable=new h.LightDismissableElement({element:this._element,tabIndex:this._element.hasAttribute("tabIndex")?this._element.tabIndex:-1,onLightDismiss:function(){r.close()},onTakeFocus:function(e){r._dismissable.restoreFocus()||r._layoutImpl.setFocusOnShow()}});var o=this._element.getAttribute("role");o||this._element.setAttribute("role","menubar");var s=this._element.getAttribute("aria-label");s||this._element.setAttribute("aria-label",k.ariaLabel),this._baseOverlayConstructor(this._element),this._lastPositionVisited=I.none,f.addClass(this._element,v.hiddenClass),this._invokeButton=t.document.createElement("button"),this._invokeButton.tabIndex=0,this._invokeButton.setAttribute("type","button"),this._invokeButton.innerHTML="<span class='"+v.ellipsisClass+"'></span>",f.addClass(this._invokeButton,v.invokeButtonClass),this._element.appendChild(this._invokeButton),this._invokeButton.addEventListener("click",function(){r.opened?r._hide():r._show()},!1),this._layout=v.appBarLayoutCustom,delete i._layout,this.placement=i.placement||v.appBarPlacementBottom,this.closedDisplayMode=i.closedDisplayMode||S.compact,p.setOptions(this,i);var a=this._commandsUpdated.bind(this);return this._element.addEventListener(v.commandVisibilityChanged,function(e){r._disposed||(r.opened&&e.preventDefault(),a())}),this._initializing=!1,this._setFocusToAppBarBound=this._setFocusToAppBar.bind(this),this._element.addEventListener("keydown",this._handleKeyDown.bind(this),!1),P||(t.document.addEventListener("MSManipulationStateChanged",e,!1),P=!0),this.closedDisplayMode===S.none&&this.layout===v.appBarLayoutCommands&&(this._element.style.display="none"),this._winKeyboard=new g._WinKeyboard(this._element),this._writeProfilerMark("constructor,StopTM"),this},{placement:{get:function(){return this._placement},set:function(e){var t=!1;if(n.Windows.ApplicationModel.DesignMode.designModeEnabled&&(this._hide(),t=!0),this.opened)throw new o("WinJS.UI._LegacyAppBar.CannotChangePlacementWhenVisible",k.cannotChangePlacementWhenVisible);this._placement=e===v.appBarPlacementTop?v.appBarPlacementTop:v.appBarPlacementBottom,this._placement===v.appBarPlacementTop?(f.addClass(this._element,v.topClass),f.removeClass(this._element,v.bottomClass)):this._placement===v.appBarPlacementBottom&&(f.removeClass(this._element,v.topClass),f.addClass(this._element,v.bottomClass)),this._ensurePosition(),t&&this._show()}},_layout:{get:function(){return this._layoutImpl.type},set:function(e){e!==v.appBarLayoutCommands&&e!==v.appBarLayoutCustom&&e!==v.appBarLayoutMenu;var t=!1;if(n.Windows.ApplicationModel.DesignMode.designModeEnabled&&(this._hide(),t=!0),this.opened)throw new o("WinJS.UI._LegacyAppBar.CannotChangeLayoutWhenVisible",k.cannotChangeLayoutWhenVisible);var i;this._initializing||(i=this._layoutImpl.commandsInOrder,this._layoutImpl.disconnect()),e===v.appBarLayoutCommands?this._layoutImpl=new y._AppBarCommandsLayout:e===v.appBarLayoutMenu?this._layoutImpl=new y._AppBarMenuLayout:this._layoutImpl=new y._AppBarBaseLayout,this._layoutImpl.connect(this._element),i&&i.length&&this._layoutCommands(i),t&&this._show()},configurable:!0},commands:{set:function(e){if(this.opened)throw new o("WinJS.UI._LegacyAppBar.CannotChangeCommandsWhenVisible",a._formatString(w._Overlay.commonstrings.cannotChangeCommandsWhenVisible,"_LegacyAppBar"));this._initializing||this._disposeChildren(),this._layoutCommands(e)}},_layoutCommands:function(e){f.empty(this._element),this._element.appendChild(this._invokeButton),Array.isArray(e)||(e=[e]),this._layoutImpl.layout(e)},closedDisplayMode:{get:function(){return this._closedDisplayMode},set:function(e){var t=this._closedDisplayMode;if(t!==e){var n=f.hasClass(this._element,v.hiddenClass)||f.hasClass(this._element,v.hidingClass);e===S.none?(this._closedDisplayMode=S.none,n&&t||(f.removeClass(this._element,v.minimalClass),f.removeClass(this._element,v.compactClass))):e===S.minimal?(this._closedDisplayMode=S.minimal,n&&t&&t!==S.none||(f.addClass(this._element,v.minimalClass),f.removeClass(this._element,v.compactClass))):(this._closedDisplayMode=S.compact,f.addClass(this._element,v.compactClass),f.removeClass(this._element,v.minimalClass)),this._layoutImpl.resize(),n&&this._changeVisiblePosition(I[this._closedDisplayMode])}}},opened:{get:function(){return!f.hasClass(this._element,v.hiddenClass)&&!f.hasClass(this._element,v.hidingClass)&&this._doNext!==I.minimal&&this._doNext!==I.compact&&this._doNext!==I.none},set:function(e){var t=this.opened;e&&!t?this._show():!e&&t&&this._hide()}},onbeforeopen:b(_.beforeOpen),onafteropen:b(_.afterOpen),onbeforeclose:b(_.beforeClose),onafterclose:b(_.afterClose),getCommandById:function(e){var t=this._layoutImpl.commandsInOrder.filter(function(t){return t.id===e||t.element.id===e});return 1===t.length?t[0]:0===t.length?null:t},showCommands:function(e){if(!e)throw new o("WinJS.UI._LegacyAppBar.RequiresCommands",k.requiresCommands);this._layoutImpl.showCommands(e)},hideCommands:function(e){if(!e)throw new o("WinJS.UI._LegacyAppBar.RequiresCommands",k.requiresCommands);this._layoutImpl.hideCommands(e)},showOnlyCommands:function(e){if(!e)throw new o("WinJS.UI._LegacyAppBar.RequiresCommands",k.requiresCommands);this._layoutImpl.showOnlyCommands(e)},open:function(){this._writeProfilerMark("show,StartTM"),this._show()},_show:function(){var e=I.shown,t=null;this.disabled||!f.hasClass(this._element,v.hiddenClass)&&!f.hasClass(this._element,v.hidingClass)||(t=E),this._changeVisiblePosition(e,t),t&&(this._updateFirstAndFinalDiv(),h.shown(this._dismissable))},close:function(){this._writeProfilerMark("hide,StartTM"),this._hide()},_hide:function(e){var e=e||I[this.closedDisplayMode],t=null;f.hasClass(this._element,v.hiddenClass)||f.hasClass(this._element,v.hidingClass)||(t=x),this._changeVisiblePosition(e,t)},_dispose:function(){m.disposeSubTree(this.element),h.hidden(this._dismissable),this._layoutImpl.dispose(),this.disabled=!0,this.close()},_disposeChildren:function(){this._layoutImpl.disposeChildren()},_handleKeyDown:function(e){this._invokeButton.contains(t.document.activeElement)||this._layoutImpl.handleKeyDown(e)},_visiblePixels:{get:function(){return{hidden:C.hidden,minimal:C.minimal,compact:Math.max(this._heightWithoutLabels||0,C.compact),shown:this._element.offsetHeight}}},_visiblePosition:{get:function(){return this._animating&&I[this._element.winAnimating]?this._element.winAnimating:this._lastPositionVisited}},_visible:{get:function(){return this._visiblePosition!==I.none}},_changeVisiblePosition:function(e,t){if(this._visiblePosition===e&&!this._keyboardObscured||this.disabled&&e!==I.disabled)this._afterPositionChange(null);else if(this._animating||this._needToHandleShowingKeyboard||this._needToHandleHidingKeyboard)this._doNext=e,this._afterPositionChange(null);else{this._element.winAnimating=e;var n=this._initializing?!1:!0,i=this._lastPositionVisited;this._element.style.display="";var r=e===I.hidden;this._keyboardObscured&&(r?n=!1:i=I.hidden,this._keyboardObscured=!1),t===E?this._beforeShow():t===x&&this._beforeHide(),this._ensurePosition(),this._element.style.opacity=1,this._element.style.visibility="visible",this._animationPromise=n?this._animatePositionChange(i,e):c.wrap(),this._animationPromise.then(function(){this._afterPositionChange(e,t)}.bind(this),function(){this._afterPositionChange(e,t)}.bind(this))}},_afterPositionChange:function(e,t){if(!this._disposed){if(e){e===I.minimal&&(f.addClass(this._element,v.minimalClass),f.removeClass(this._element,v.compactClass)),e===I.hidden&&this.closedDisplayMode===S.none&&(f.removeClass(this._element,v.minimalClass),f.removeClass(this._element,v.compactClass)),this._element.winAnimating="",this._lastPositionVisited=e,this._doNext===this._lastPositionVisited&&(this._doNext=""),t===x&&h.hidden(this._dismissable),e===I.hidden&&(this._element.style.visibility="hidden",this._element.style.display="none");var n=r._browserStyleEquivalents.transform.scriptName;this._element.style[n]="",t===E?this._afterShow():t===x&&this._afterHide(),d.schedule(this._checkDoNext,d.Priority.normal,this,"WinJS.UI._LegacyAppBar._checkDoNext")}this._afterPositionChangeCallBack()}},_afterPositionChangeCallBack:function(){},_beforeShow:function(){this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),this._layoutImpl.scale(),this.closedDisplayMode===S.compact&&(this._heightWithoutLabels=this._element.offsetHeight),f.removeClass(this._element,v.hiddenClass),f.addClass(this._element,v.showingClass),this._sendEvent(_.beforeOpen)},_afterShow:function(){f.removeClass(this._element,v.showingClass),f.addClass(this._element,v.shownClass),this._sendEvent(_.afterOpen),this._writeProfilerMark("show,StopTM")},_beforeHide:function(){f.removeClass(this._element,v.shownClass),f.addClass(this._element,v.hidingClass),this._sendEvent(_.beforeClose)},_afterHide:function(){this._queuedCommandAnimation&&(this._showAndHideFast(this._queuedToShow,this._queuedToHide),this._queuedToShow=[],this._queuedToHide=[]),f.removeClass(this._element,v.hidingClass),f.addClass(this._element,v.hiddenClass),this._sendEvent(_.afterClose),this._writeProfilerMark("hide,StopTM")},_animatePositionChange:function(e,t){var n,i=this._layoutImpl.positionChanging(e,t),r=this._visiblePixels[e],o=this._visiblePixels[t],s=Math.abs(o-r),a=this._placement===v.appBarPlacementTop?-s:s;if(this._placement===v.appBarPlacementTop&&(e===I.shown&&t===I.compact||e===I.compact&&t===I.shown)&&(a=0),o>r){var l={top:a+"px",left:"0px"};n=u.showEdgeUI(this._element,l,{mechanism:"transition"})}else{var d={top:a+"px",left:"0px"};n=u.hideEdgeUI(this._element,d,{mechanism:"transition"})}return c.join([i,n])},_checkDoNext:function(){this._animating||this._needToHandleShowingKeyboard||this._needToHandleHidingKeyboard||this._disposed||(this._doNext===I.disabled||this._doNext===I.hidden||this._doNext===I.minimal||this._doNext===I.compact?(this._hide(this._doNext),this._doNext=""):this._queuedCommandAnimation?this._showAndHideQueue():this._doNext===I.shown&&(this._show(),this._doNext=""))},_setFocusToAppBar:function(e,t){this._focusOnFirstFocusableElement(e,t)||w._Overlay._trySetActive(this._element,t)},_commandsUpdated:function(){this._initializing||(this._layoutImpl.commandsUpdated(),this._layoutImpl.scale())},_beginAnimateCommands:function(e,t,n){this._layoutImpl.beginAnimateCommands(e,t,n)},_endAnimateCommands:function(){this._layoutImpl.endAnimateCommands(),this._endAnimateCommandsCallBack()},_endAnimateCommandsCallBack:function(){},_getTopOfVisualViewport:function(){return w._Overlay._keyboardInfo._visibleDocTop},_getAdjustedBottom:function(){return w._Overlay._keyboardInfo._visibleDocBottomOffset},_showingKeyboard:function(e){if(this._keyboardObscured=!1,this._needToHandleHidingKeyboard=!1,!w._Overlay._keyboardInfo._visible||!this._alreadyInPlace()){this._needToHandleShowingKeyboard=!0,this.opened&&this._element.contains(t.document.activeElement)&&(e.ensuredFocusedElementInView=!0),this._visible&&this._placement!==v.appBarPlacementTop&&w._Overlay._isFlyoutVisible()?this._keyboardObscured=!0:this._scrollHappened=!1;var n=this;t.setTimeout(function(e){n._checkKeyboardTimer(e)},w._Overlay._keyboardInfo._animationShowLength+w._Overlay._scrollTimeout)}},_hidingKeyboard:function(){this._keyboardObscured=!1,this._needToHandleShowingKeyboard=!1,this._needToHandleHidingKeyboard=!0,w._Overlay._keyboardInfo._isResized||((this._visible||this._animating)&&(this._checkScrollPosition(),this._element.style.display=""),this._needToHandleHidingKeyboard=!1)},_resize:function(e){this._needToHandleShowingKeyboard?this._visible&&(this._placement===v.appBarPlacementTop||this._keyboardObscured||(this._element.style.display="none")):this._needToHandleHidingKeyboard&&(this._needToHandleHidingKeyboard=!1,(this._visible||this._animating)&&(this._checkScrollPosition(),this._element.style.display="")),this._initializing||this._layoutImpl.resize(e)},_checkKeyboardTimer:function(){this._scrollHappened||this._mayEdgeBackIn()},_manipulationChanged:function(e){0===e.currentState&&this._scrollHappened&&this._mayEdgeBackIn()},_mayEdgeBackIn:function(){if(this._needToHandleShowingKeyboard)if(this._needToHandleShowingKeyboard=!1,this._keyboardObscured||this._placement===v.appBarPlacementTop&&0===w._Overlay._keyboardInfo._visibleDocTop)this._checkDoNext();else{var e=this._visiblePosition;this._lastPositionVisited=I.hidden,this._changeVisiblePosition(e,!1)}this._scrollHappened=!1},_ensurePosition:function(){var e=this._computePositionOffset();this._element.style.bottom=e.bottom,this._element.style.top=e.top},_computePositionOffset:function(){var e={};return this._placement===v.appBarPlacementBottom?(e.bottom=this._getAdjustedBottom()+"px",e.top=""):this._placement===v.appBarPlacementTop&&(e.bottom="",e.top=this._getTopOfVisualViewport()+"px"),e},_checkScrollPosition:function(){return this._needToHandleShowingKeyboard?void(this._scrollHappened=!0):void((this._visible||this._animating)&&(this._ensurePosition(),this._checkDoNext()))},_alreadyInPlace:function(){var e=this._computePositionOffset();return e.top===this._element.style.top&&e.bottom===this._element.style.bottom},_updateFirstAndFinalDiv:function(){var e=this._element.querySelectorAll("."+v.firstDivClass);e=e.length>=1?e[0]:null;var n=this._element.querySelectorAll("."+v.finalDivClass);n=n.length>=1?n[0]:null,e&&this._element.children[0]!==e&&(e.parentNode.removeChild(e),e=null),n&&this._element.children[this._element.children.length-1]!==n&&(n.parentNode.removeChild(n),n=null),e||(e=t.document.createElement("div"),e.style.display="inline",e.className=v.firstDivClass,e.tabIndex=-1,e.setAttribute("aria-hidden","true"),f._addEventListener(e,"focusin",this._focusOnLastFocusableElementOrThis.bind(this),!1),this._element.children[0]?this._element.insertBefore(e,this._element.children[0]):this._element.appendChild(e)),n||(n=t.document.createElement("div"),n.style.display="inline",n.className=v.finalDivClass,n.tabIndex=-1,n.setAttribute("aria-hidden","true"),f._addEventListener(n,"focusin",this._focusOnFirstFocusableElementOrThis.bind(this),!1),this._element.appendChild(n)),this._element.children[this._element.children.length-2]!==this._invokeButton&&this._element.insertBefore(this._invokeButton,n);var i=this._element.getElementsByTagName("*"),r=f._getHighestTabIndexInList(i);this._invokeButton.tabIndex=r,e&&(e.tabIndex=f._getLowestTabIndexInList(i)),n&&(n.tabIndex=r)},_writeProfilerMark:function(e){l("WinJS.UI._LegacyAppBar:"+this._id+":"+e)}},{_Events:_});return T})})}),i("WinJS/Controls/Menu",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../Utilities/_KeyboardBehavior","./_LegacyAppBar/_Constants","./Flyout","./Flyout/_Overlay","./Menu/_Command"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{Menu:n.Namespace._lazy(function(){function e(e){var t=e.element||e;return l._matchesSelector(t,"."+d.menuClass+" ."+d.menuCommandClass)}var u=l.Key,f={get ariaLabel(){return o._getWinJSString("ui/menuAriaLabel").value},get requiresCommands(){return"Invalid argument: commands must not be empty"},get nullCommand(){return"Invalid argument: command must not be null"}},_=n.Class.derive(h.Flyout,function(e,n){n=n||{},this._element=e||t.document.createElement("div"),this._id=this._element.id||l._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),!n.commands&&this._element&&(n=i._shallowCopy(n),n.commands=this._verifyCommandsOnly(this._element,"WinJS.UI.MenuCommand"));var r="menu",o=null;this._element&&(r=this._element.getAttribute("role")||r,o=this._element.getAttribute("aria-label")||o),this._baseFlyoutConstructor(this._element,n),this._element.setAttribute("role",r),this._element.setAttribute("aria-label",o),this._element.addEventListener("keydown",this._handleKeyDown.bind(this),!0),this._element.addEventListener(d._menuCommandInvokedEvent,this._handleCommandInvoked.bind(this),!1),this._element.addEventListener("mouseover",this._handleMouseOver.bind(this),!1),this._element.addEventListener("mouseout",this._handleMouseOut.bind(this),!1),l.addClass(this._element,d.menuClass),this._winKeyboard=new c._WinKeyboard(this._element),this.hide(),this._writeProfilerMark("constructor,StopTM")},{commands:{set:function(e){if(!this.hidden)throw new r("WinJS.UI.Menu.CannotChangeCommandsWhenVisible",o._formatString(p._Overlay.commonstrings.cannotChangeCommandsWhenVisible,"Menu"));l.empty(this._element),Array.isArray(e)||(e=[e]);for(var t=e.length,n=0;t>n;n++)this._addCommand(e[n])}},getCommandById:function(e){for(var t=this.element.querySelectorAll("#"+e),n=[],i=0,r=t.length;r>i;i++)t[i].winControl&&n.push(t[i].winControl);return 1===n.length?n[0]:0===n.length?null:n},showCommands:function(e){if(!e)throw new r("WinJS.UI.Menu.RequiresCommands",f.requiresCommands);this._showCommands(e,!0)},hideCommands:function(e){if(!e)throw new r("WinJS.UI.Menu.RequiresCommands",f.requiresCommands);this._hideCommands(e,!0)},showOnlyCommands:function(e){if(!e)throw new r("WinJS.UI.Menu.RequiresCommands",f.requiresCommands);this._showOnlyCommands(e,!0)},_hide:function(){this._hoverPromise&&this._hoverPromise.cancel(),h.Flyout.prototype._hide.call(this)},_afterHide:function(){l.removeClass(this.element,d.menuMouseSpacingClass),l.removeClass(this.element,d.menuTouchSpacingClass)},_beforeShow:function(){l.hasClass(this.element,d.menuMouseSpacingClass)||l.hasClass(this.element,d.menuTouchSpacingClass)||l.addClass(this.element,h.Flyout._cascadeManager.inputType===c._InputTypes.mouse||h.Flyout._cascadeManager.inputType===c._InputTypes.keyboard?d.menuMouseSpacingClass:d.menuTouchSpacingClass),this._checkMenuCommands()},_addCommand:function(e){if(!e)throw new r("WinJS.UI.Menu.NullCommand",f.nullCommand);e._element||(e=new m.MenuCommand(null,e)),e._element.parentElement&&e._element.parentElement.removeChild(e._element),this._element.appendChild(e._element)},_dispose:function(){this._hoverPromise&&this._hoverPromise.cancel(),h.Flyout.prototype._dispose.call(this)},_commandsUpdated:function(){this.hidden||this._checkMenuCommands()},_checkMenuCommands:function(){var e=this._element.querySelectorAll(".win-command"),t=!1,n=!1;if(e)for(var i=0,r=e.length;r>i;i++){var o=e[i].winControl;o&&!o.hidden&&(t||o.type!==d.typeToggle||(t=!0),n||o.type!==d.typeFlyout||(n=!0))}l[t?"addClass":"removeClass"](this._element,d.menuContainsToggleCommandClass),l[n?"addClass":"removeClass"](this._element,d.menuContainsFlyoutCommandClass)},_handleKeyDown:function(e){e.keyCode===u.upArrow?(_._focusOnPreviousElement(this.element),e.preventDefault()):e.keyCode===u.downArrow?(_._focusOnNextElement(this.element),e.preventDefault()):e.keyCode!==u.space&&e.keyCode!==u.enter||this.element!==t.document.activeElement?e.keyCode===u.tab&&e.preventDefault():(e.preventDefault(),this.hide())},_handleFocusIn:function(t){var n=t.target;if(e(n)){var i=n.winControl;if(l.hasClass(i.element,d.menuCommandFlyoutActivatedClass))i.flyout.element.focus();else{var r=this.element.querySelector("."+d.menuCommandFlyoutActivatedClass);r&&m.MenuCommand._deactivateFlyoutCommand(r)}}else n===this.element&&h.Flyout.prototype._handleFocusIn.call(this,t)},_handleCommandInvoked:function(e){this._hoverPromise&&this._hoverPromise.cancel();var t=e.detail.command;t._type!==d.typeFlyout&&t._type!==d.typeSeparator&&this._lightDismiss()},_hoverPromise:null,_handleMouseOver:function(t){var n=t.target;if(e(n)){var i=n.winControl,r=this;n.focus&&(n.focus(),l.removeClass(n,"win-keyboard"),i.type===d.typeFlyout&&i.flyout&&i.flyout.hidden&&(this._hoverPromise=this._hoverPromise||a.timeout(d.menuCommandHoverDelay).then(function(){r.hidden||r._disposed||i._invoke(t),r._hoverPromise=null},function(){r._hoverPromise=null})))}},_handleMouseOut:function(n){var i=n.target;e(i)&&!i.contains(n.relatedTarget)&&(i===t.document.activeElement&&this.element.focus(),this._hoverPromise&&this._hoverPromise.cancel())},_writeProfilerMark:function(e){s("WinJS.UI.Menu:"+this._id+":"+e)}});return _._focusOnNextElement=function(e){var n=t.document.activeElement;do n=n===e?n.firstElementChild:n.nextElementSibling,n?n.focus():n=e;while(n!==t.document.activeElement)},_._focusOnPreviousElement=function(e){var n=t.document.activeElement;do n=n===e?n.lastElementChild:n.previousElementSibling,n?n.focus():n=e;while(n!==t.document.activeElement)},_})})}),i("WinJS/Controls/AutoSuggestBox/_SearchSuggestionManagerShim",["exports","../../_Signal","../../Core/_Base","../../Core/_BaseUtils","../../Core/_Events","../../BindingList"],function(e,t,n,i,r,o){"use strict";var s={reset:0,itemInserted:1,itemRemoved:2,itemChanged:3},a={Query:0,Result:1,Separator:2},l=n.Class.derive(Array,function(){},{reset:function(){this.length=0,this.dispatchEvent("vectorchanged",{collectionChange:s.reset,index:0})},insert:function(e,t){this.splice(e,0,t),this.dispatchEvent("vectorchanged",{collectionChange:s.itemInserted,index:e})},remove:function(e){this.splice(e,1),this.dispatchEvent("vectorchanged",{collectionChange:s.itemRemoved,index:e})}});n.Class.mix(l,r.eventMixin);var u=n.Class.define(function(){this._data=[]},{size:{get:function(){return this._data.length}},appendQuerySuggestion:function(e){this._data.push({kind:a.Query,text:e})},appendQuerySuggestions:function(e){e.forEach(this.appendQuerySuggestion.bind(this))},appendResultSuggestion:function(e,t,n,i,r){this._data.push({kind:a.Result,text:e,detailText:t,tag:n,imageUrl:i,imageAlternateText:r,image:null})},appendSearchSeparator:function(e){this._data.push({kind:a.Separator,text:e})}}),c=n.Class.define(function(e,t,n){this._queryText=e,this._language=t,this._linguisticDetails=n,this._searchSuggestionCollection=new u},{language:{get:function(){return this._language}},linguisticDetails:{get:function(){return this._linguisticDetails}},queryText:{get:function(){return this._queryText}},searchSuggestionCollection:{get:function(){return this._searchSuggestionCollection}},getDeferral:function(){return this._deferralSignal||(this._deferralSignal=new t)},_deferralSignal:null}),d=n.Class.define(function(){this._updateVector=this._updateVector.bind(this),this._suggestionVector=new l,this._query="",this._history={"":[]},this._dataSource=[],this.searchHistoryContext="",this.searchHistoryEnabled=!0},{addToHistory:function(e){if(e&&e.trim()){for(var t=this._history[this.searchHistoryContext],n=-1,i=0,r=t.length;r>i;i++){var o=t[i];if(o.text.toLowerCase()===e.toLowerCase()){n=i;break}}n>=0&&t.splice(n,1),t.splice(0,0,{text:e,kind:a.Query}),this._updateVector()}},clearHistory:function(){this._history[this.searchHistoryContext]=[],this._updateVector()},setLocalContentSuggestionSettings:function(e){},setQuery:function(e){function t(e){n._dataSource=e,n._updateVector()}var n=this;this._query=e;var i=new c(e);this.dispatchEvent("suggestionsrequested",{request:i}),i._deferralSignal?i._deferralSignal.promise.then(t.bind(this,i.searchSuggestionCollection._data)):t(i.searchSuggestionCollection._data)},searchHistoryContext:{get:function(){return""+this._searchHistoryContext},set:function(e){e=""+e,this._history[e]||(this._history[e]=[]),this._searchHistoryContext=e}},searchHistoryEnabled:{get:function(){return this._searchHistoryEnabled},set:function(e){this._searchHistoryEnabled=e}},suggestions:{get:function(){return this._suggestionVector}},_updateVector:function(){for(this.suggestions.insert(this.suggestions.length,{text:"",kind:a.Query});this.suggestions.length>1;)this.suggestions.remove(0);var e=0,t={};if(this.searchHistoryEnabled){var n=this._query.toLowerCase();this._history[this.searchHistoryContext].forEach(function(i){var r=i.text.toLowerCase();0===r.indexOf(n)&&(this.suggestions.insert(e,i),t[r]=!0,e++)},this)}this._dataSource.forEach(function(n){n.kind===a.Query?t[n.text.toLowerCase()]||(this.suggestions.insert(e,n),e++):(this.suggestions.insert(e,n),e++)},this),this.suggestions.remove(this.suggestions.length-1)}});n.Class.mix(d,r.eventMixin),n.Namespace._moduleDefine(e,null,{_CollectionChange:s,_SearchSuggestionKind:a,_SearchSuggestionManagerShim:d})}),i("require-style!less/styles-autosuggestbox",[],function(){}),i("require-style!less/colors-autosuggestbox",[],function(){}),i("WinJS/Controls/AutoSuggestBox",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementListUtilities","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../_Accents","../Animations","../BindingList","../Promise","./Repeater","./AutoSuggestBox/_SearchSuggestionManagerShim","require-style!less/styles-autosuggestbox","require-style!less/colors-autosuggestbox"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_){"use strict";d.createAccentRule("html.win-hoverable .win-autosuggestbox .win-autosuggestbox-suggestion-selected:hover",[{name:"background-color",value:d.ColorTypes.listSelectHover}]),d.createAccentRule(".win-autosuggestbox .win-autosuggestbox-suggestion-selected",[{name:"background-color",value:d.ColorTypes.listSelectRest}]),d.createAccentRule(".win-autosuggestbox .win-autosuggestbox-suggestion-selected.win-autosuggestbox-suggestion-selected:hover:active",[{name:"background-color",value:d.ColorTypes.listSelectPress}]);var g={asb:"win-autosuggestbox",asbDisabled:"win-autosuggestbox-disabled",asbFlyout:"win-autosuggestbox-flyout",asbFlyoutAbove:"win-autosuggestbox-flyout-above",asbBoxFlyoutHighlightText:"win-autosuggestbox-flyout-highlighttext",asbHitHighlightSpan:"win-autosuggestbox-hithighlight-span",asbInput:"win-autosuggestbox-input",asbInputFocus:"win-autosuggestbox-input-focus",asbSuggestionQuery:"win-autosuggestbox-suggestion-query",asbSuggestionResult:"win-autosuggestbox-suggestion-result",asbSuggestionResultText:"win-autosuggestbox-suggestion-result-text",asbSuggestionResultDetailedText:"win-autosuggestbox-suggestion-result-detailed-text",asbSuggestionSelected:"win-autosuggestbox-suggestion-selected",asbSuggestionSeparator:"win-autosuggestbox-suggestion-separator"};i.Namespace._moduleDefine(e,"WinJS.UI",{AutoSuggestBox:i.Namespace._lazy(function(){function e(e,n,i,r){function o(e,n,i){var r=t.document.createElement("span");return r.textContent=n,r.setAttribute("aria-hidden","true"),r.classList.add(g.asbHitHighlightSpan),e.insertBefore(r,i),r}if(i){l.query("."+g.asbHitHighlightSpan,e).forEach(function(e){e.parentNode.removeChild(e)});var s=e.firstChild,a=n.hits;!a&&r&&n.kind!==_._SearchSuggestionKind.Separator&&(a=r.find(i));for(var c=I._sortAndMergeHits(a),d=0,h=0;h<c.length;h++){var p=c[h];o(e,i.substring(d,p.startPosition),s),d=p.startPosition+p.length;var m=o(e,i.substring(p.startPosition,d),s);u.addClass(m,g.asbBoxFlyoutHighlightText)}d<i.length&&o(e,i.substring(d),s)}}function c(e){var t={ctrlKey:1,altKey:2,shiftKey:4},n=0;return e.ctrlKey&&(n|=t.ctrlKey),e.altKey&&(n|=t.altKey),e.shiftKey&&(n|=t.shiftKey),n}function d(n,i){function r(e){n._internalFocusMove=!0,n._inputElement.focus(),n._processSuggestionChosen(i,e)}var o=t.document.createElement("div"),a=new t.Image;a.style.opacity=0;var l=function(e){function t(){a.removeEventListener("load",t,!1),h.fadeIn(a)}a.addEventListener("load",t,!1),a.src=e};null!==i.image?i.image.openReadAsync().then(function(e){null!==e&&l(t.URL.createObjectURL(e,{oneTimeOnly:!0}))}):null!==i.imageUrl&&l(i.imageUrl),a.setAttribute("aria-hidden","true"),o.appendChild(a);var c=t.document.createElement("div");u.addClass(c,g.asbSuggestionResultText),e(c,i,i.text),c.title=i.text,c.setAttribute("aria-hidden","true"),o.appendChild(c);var d=t.document.createElement("br");c.appendChild(d);var p=t.document.createElement("span");u.addClass(p,g.asbSuggestionResultDetailedText),e(p,i,i.detailText),p.title=i.detailText,p.setAttribute("aria-hidden","true"),c.appendChild(p),u.addClass(o,g.asbSuggestionResult),u._addEventListener(o,"click",function(e){n._isFlyoutPointerDown||r(e)}),u._addEventListener(o,"pointerup",r),o.setAttribute("role","option");var m=s._formatString(w.ariaLabelResult,i.text,i.detailText);return o.setAttribute("aria-label",m),o}function v(n,i){function r(e){n._internalFocusMove=!0,n._inputElement.focus(),n._processSuggestionChosen(i,e)}var o=t.document.createElement("div");e(o,i,i.text),o.title=i.text,o.classList.add(g.asbSuggestionQuery),u._addEventListener(o,"click",function(e){n._isFlyoutPointerDown||r(e)}),u._addEventListener(o,"pointerup",r);var a=s._formatString(w.ariaLabelQuery,i.text);return o.setAttribute("role","option"),
o.setAttribute("aria-label",a),o}function y(e){var n=t.document.createElement("div");if(e.text.length>0){var i=t.document.createElement("div");i.textContent=e.text,i.title=e.text,i.setAttribute("aria-hidden","true"),n.appendChild(i)}n.insertAdjacentHTML("beforeend","<hr/>"),u.addClass(n,g.asbSuggestionSeparator),n.setAttribute("role","separator");var r=s._formatString(w.ariaLabelSeparator,e.text);return n.setAttribute("aria-label",r),n}var b=u.Key,C={querychanged:"querychanged",querysubmitted:"querysubmitted",resultsuggestionchosen:"resultsuggestionchosen",suggestionsrequested:"suggestionsrequested"},w={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get invalidSuggestionKind(){return"Error: Invalid suggestion kind."},get ariaLabel(){return s._getWinJSString("ui/autoSuggestBoxAriaLabel").value},get ariaLabelInputNoPlaceHolder(){return s._getWinJSString("ui/autoSuggestBoxAriaLabelInputNoPlaceHolder").value},get ariaLabelInputPlaceHolder(){return s._getWinJSString("ui/autoSuggestBoxAriaLabelInputPlaceHolder").value},get ariaLabelQuery(){return s._getWinJSString("ui/autoSuggestBoxAriaLabelQuery").value},get ariaLabelResult(){return s._getWinJSString("ui/autoSuggestBoxAriaLabelResult").value},get ariaLabelSeparator(){return s._getWinJSString("ui/autoSuggestBoxAriaLabelSeparator").value}},I=i.Class.define(function(e,n){if(e=e||t.document.createElement("div"),n=n||{},e.winControl)throw new r("WinJS.UI.AutoSuggestBox.DuplicateConstruction",w.duplicateConstruction);this._suggestionsChangedHandler=this._suggestionsChangedHandler.bind(this),this._suggestionsRequestedHandler=this._suggestionsRequestedHandler.bind(this),this._element=e,e.winControl=this,e.classList.add(g.asb),e.classList.add("win-disposable"),this._setupDOM(),this._setupSSM(),this._chooseSuggestionOnEnter=!1,this._currentFocusedIndex=-1,this._currentSelectedIndex=-1,this._flyoutOpenPromise=m.wrap(),this._lastKeyPressLanguage="",this._prevLinguisticDetails=this._getLinguisticDetails(),this._prevQueryText="",a.setOptions(this,n),this._hideFlyout()},{onresultsuggestionchosen:o._createEventProperty(C.resultsuggestionchosen),onquerychanged:o._createEventProperty(C.querychanged),onquerysubmitted:o._createEventProperty(C.querysubmitted),onsuggestionsrequested:o._createEventProperty(C.suggestionsrequested),element:{get:function(){return this._element}},chooseSuggestionOnEnter:{get:function(){return this._chooseSuggestionOnEnter},set:function(e){this._chooseSuggestionOnEnter=!!e}},disabled:{get:function(){return this._inputElement.disabled},set:function(e){this._inputElement.disabled!==!!e&&(e?this._disableControl():this._enableControl())}},placeholderText:{get:function(){return this._inputElement.placeholder},set:function(e){this._inputElement.placeholder=e,this._updateInputElementAriaLabel()}},queryText:{get:function(){return this._inputElement.value},set:function(e){this._inputElement.value="",this._inputElement.value=e}},searchHistoryDisabled:{get:function(){return!this._suggestionManager.searchHistoryEnabled},set:function(e){this._suggestionManager.searchHistoryEnabled=!e}},searchHistoryContext:{get:function(){return this._suggestionManager.searchHistoryContext},set:function(e){this._suggestionManager.searchHistoryContext=e}},dispose:function(){this._disposed||(this._flyoutOpenPromise.cancel(),this._suggestions.removeEventListener("vectorchanged",this._suggestionsChangedHandler),this._suggestionManager.removeEventListener("suggestionsrequested",this._suggestionsRequestedHandler),this._suggestionManager=null,this._suggestions=null,this._hitFinder=null,this._disposed=!0)},setLocalContentSuggestionSettings:function(e){this._suggestionManager.setLocalContentSuggestionSettings(e)},_setupDOM:function(){function e(e){return o._renderSuggestion(e)}var n=this._flyoutPointerReleasedHandler.bind(this),i=this._inputOrImeChangeHandler.bind(this);this._element.getAttribute("aria-label")||this._element.setAttribute("aria-label",w.ariaLabel),this._element.setAttribute("role","group"),this._inputElement=t.document.createElement("input"),this._inputElement.autocorrect="off",this._inputElement.type="search",this._inputElement.classList.add(g.asbInput),this._inputElement.classList.add("win-textbox"),this._inputElement.setAttribute("role","textbox"),this._inputElement.addEventListener("keydown",this._keyDownHandler.bind(this)),this._inputElement.addEventListener("keypress",this._keyPressHandler.bind(this)),this._inputElement.addEventListener("keyup",this._keyUpHandler.bind(this)),this._inputElement.addEventListener("focus",this._inputFocusHandler.bind(this)),this._inputElement.addEventListener("blur",this._inputBlurHandler.bind(this)),this._inputElement.addEventListener("input",i),this._inputElement.addEventListener("compositionstart",i),this._inputElement.addEventListener("compositionupdate",i),this._inputElement.addEventListener("compositionend",i),u._addEventListener(this._inputElement,"pointerdown",this._inputPointerDownHandler.bind(this)),this._updateInputElementAriaLabel(),this._element.appendChild(this._inputElement);var r=this._tryGetInputContext();r&&(r.addEventListener("MSCandidateWindowShow",this._msCandidateWindowShowHandler.bind(this)),r.addEventListener("MSCandidateWindowHide",this._msCandidateWindowHideHandler.bind(this))),this._flyoutElement=t.document.createElement("div"),this._flyoutElement.classList.add(g.asbFlyout),this._flyoutElement.addEventListener("blur",this._flyoutBlurHandler.bind(this)),u._addEventListener(this._flyoutElement,"pointerup",n),u._addEventListener(this._flyoutElement,"pointercancel",n),u._addEventListener(this._flyoutElement,"pointerout",n),u._addEventListener(this._flyoutElement,"pointerdown",this._flyoutPointerDownHandler.bind(this)),this._element.appendChild(this._flyoutElement);var o=this;this._suggestionsData=new p.List,this._repeaterElement=t.document.createElement("div"),this._repeater=new f.Repeater(this._repeaterElement,{data:this._suggestionsData,template:e}),u._ensureId(this._repeaterElement),this._repeaterElement.setAttribute("role","listbox"),this._repeaterElement.setAttribute("aria-live","polite"),this._flyoutElement.appendChild(this._repeaterElement)},_setupSSM:function(){this._suggestionManager=new _._SearchSuggestionManagerShim,this._suggestions=this._suggestionManager.suggestions,this._suggestions.addEventListener("vectorchanged",this._suggestionsChangedHandler),this._suggestionManager.addEventListener("suggestionsrequested",this._suggestionsRequestedHandler)},_hideFlyout:function(){this._isFlyoutShown()&&(this._flyoutElement.style.display="none")},_showFlyout:function(){var e=this._prevNumSuggestions||0;if(this._prevNumSuggestions=this._suggestionsData.length,(!this._isFlyoutShown()||e!==this._suggestionsData.length)&&0!==this._suggestionsData.length){this._flyoutElement.style.display="block";var n=this._inputElement.getBoundingClientRect(),i=this._flyoutElement.getBoundingClientRect(),r=t.document.documentElement.clientWidth,o=n.top,s=t.document.documentElement.clientHeight-n.bottom;this._flyoutBelowInput=s>=o,this._flyoutBelowInput?(this._flyoutElement.classList.remove(g.asbFlyoutAbove),this._flyoutElement.scrollTop=0):(this._flyoutElement.classList.add(g.asbFlyoutAbove),this._flyoutElement.scrollTop=this._flyoutElement.scrollHeight-this._flyoutElement.clientHeight),this._addFlyoutIMEPaddingIfRequired();var a;a="rtl"===u._getComputedStyle(this._flyoutElement).direction?n.right-i.width>=0||n.left+i.width>r:n.left+i.width>r&&n.right-i.width>=0,a?this._flyoutElement.style.left=n.width-i.width-this._element.clientLeft+"px":this._flyoutElement.style.left="-"+this._element.clientLeft+"px",this._flyoutElement.style.touchAction=this._flyoutElement.scrollHeight>i.height?"pan-y":"none",this._flyoutOpenPromise.cancel();var l=this._flyoutBelowInput?"WinJS-flyoutBelowASB-showPopup":"WinJS-flyoutAboveASB-showPopup";this._flyoutOpenPromise=h.showPopup(this._flyoutElement,{top:"0px",left:"0px",keyframe:l})}},_addFlyoutIMEPaddingIfRequired:function(){var e=this._tryGetInputContext();if(e&&this._isFlyoutShown()&&this._flyoutBelowInput){var t=this._flyoutElement.getBoundingClientRect(),n=e.getCandidateWindowClientRect(),i=this._inputElement.getBoundingClientRect(),r=i.bottom,o=i.bottom+t.height;if(!(n.top>o||n.bottom<r)){var s=h.createRepositionAnimation(this._flyoutElement);n.width<.45*i.width?this._flyoutElement.style.marginLeft=n.width+"px":this._flyoutElement.style.marginTop=n.bottom-n.top+4+"px",s.execute()}}},_findNextSuggestionElementIndex:function(e){for(var t=0>e?0:e+1,n=t;n<this._suggestionsData.length;n++)if(this._repeater.elementFromIndex(n)&&this._isSuggestionSelectable(this._suggestionsData.getAt(n)))return n;return-1},_findPreviousSuggestionElementIndex:function(e){for(var t=e>=this._suggestionsData.length?this._suggestionsData.length-1:e-1,n=t;n>=0;n--)if(this._repeater.elementFromIndex(n)&&this._isSuggestionSelectable(this._suggestionsData.getAt(n)))return n;return-1},_isFlyoutShown:function(){return"none"!==this._flyoutElement.style.display},_isSuggestionSelectable:function(e){return e.kind===_._SearchSuggestionKind.Query||e.kind===_._SearchSuggestionKind.Result},_processSuggestionChosen:function(e,t){this.queryText=e.text,e.kind===_._SearchSuggestionKind.Query?this._submitQuery(e.text,!1,t):e.kind===_._SearchSuggestionKind.Result&&this._fireEvent(C.resultsuggestionchosen,{tag:e.tag,keyModifiers:c(t),storageFile:null}),this._hideFlyout()},_selectSuggestionAtIndex:function(e){function t(e){var t=n._flyoutElement.getBoundingClientRect().bottom-n._flyoutElement.getBoundingClientRect().top;if(e.offsetTop+e.offsetHeight>n._flyoutElement.scrollTop+t){var i=e.offsetTop+e.offsetHeight-(n._flyoutElement.scrollTop+t);u._zoomTo(n._flyoutElement,{contentX:0,contentY:n._flyoutElement.scrollTop+i,viewportX:0,viewportY:0})}else e.offsetTop<n._flyoutElement.scrollTop&&u._zoomTo(n._flyoutElement,{contentX:0,contentY:e.offsetTop,viewportX:0,viewportY:0})}for(var n=this,i=null,r=0;r<this._suggestionsData.length;r++)i=this._repeater.elementFromIndex(r),r!==e?(i.classList.remove(g.asbSuggestionSelected),i.setAttribute("aria-selected","false")):(i.classList.add(g.asbSuggestionSelected),t(i),i.setAttribute("aria-selected","true"));this._currentSelectedIndex=e,i?this._inputElement.setAttribute("aria-activedescendant",this._repeaterElement.id+e):this._inputElement.hasAttribute("aria-activedescendant")&&this._inputElement.removeAttribute("aria-activedescendant")},_updateFakeFocus:function(){var e;e=this._isFlyoutShown()&&this._chooseSuggestionOnEnter?this._findNextSuggestionElementIndex(-1):-1,this._selectSuggestionAtIndex(e)},_updateQueryTextWithSuggestionText:function(e){e>=0&&e<this._suggestionsData.length&&(this.queryText=this._suggestionsData.getAt(e).text)},_disableControl:function(){this._isFlyoutShown()&&this._hideFlyout(),this._element.disabled=!0,this._element.classList.add(g.asbDisabled),this._inputElement.disabled=!0},_enableControl:function(){this._element.disabled=!1,this._element.classList.remove(g.asbDisabled),this._inputElement.disabled=!1,t.document.activeElement===this._element&&u._setActive(this._inputElement)},_fireEvent:function(e,n){var i=t.document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,n),this._element.dispatchEvent(i)},_getLinguisticDetails:function(e,t){function i(e,t,i,r,o){for(var s=null,a=[],l=0;l<e.length;l++)a[l]=r+e[l]+o;if(n.Windows.ApplicationModel.Search.SearchQueryLinguisticDetails)try{s=new n.Windows.ApplicationModel.Search.SearchQueryLinguisticDetails(a,t,i)}catch(u){}return s||(s={queryTextAlternatives:a,queryTextCompositionStart:t,queryTextCompositionLength:i}),s}var r=null;if(this._inputElement.value===this._prevQueryText&&e&&this._prevLinguisticDetails&&t)r=this._prevLinguisticDetails;else{var o=[],s=0,a=0,l="",u="";if(t){var c=this._tryGetInputContext();c&&c.getCompositionAlternatives&&(o=c.getCompositionAlternatives(),s=c.compositionStartOffset,a=c.compositionEndOffset-c.compositionStartOffset,this._inputElement.value!==this._prevQueryText||0===this._prevCompositionLength||a>0?(l=this._inputElement.value.substring(0,s),u=this._inputElement.value.substring(s+a)):(l=this._inputElement.value.substring(0,this._prevCompositionStart),u=this._inputElement.value.substring(this._prevCompositionStart+this._prevCompositionLength)))}r=i(o,s,a,l,u)}return r},_isElementInSearchControl:function(e){return this.element.contains(e)||this.element===e},_renderSuggestion:function(e){var t=null;if(!e)return t;if(e.kind===_._SearchSuggestionKind.Query)t=v(this,e);else if(e.kind===_._SearchSuggestionKind.Separator)t=y(e);else{if(e.kind!==_._SearchSuggestionKind.Result)throw new r("WinJS.UI.AutoSuggestBox.invalidSuggestionKind",w.invalidSuggestionKind);t=d(this,e)}return t},_shouldIgnoreInput:function(){var e=this._isProcessingDownKey||this._isProcessingUpKey||this._isProcessingTabKey||this._isProcessingEnterKey;return e||this._isFlyoutPointerDown},_submitQuery:function(e,t,i){this._disposed||(n.Windows.Globalization.Language&&(this._lastKeyPressLanguage=n.Windows.Globalization.Language.currentInputMethodLanguageTag),this._fireEvent(C.querysubmitted,{language:this._lastKeyPressLanguage,linguisticDetails:this._getLinguisticDetails(!0,t),queryText:e,keyModifiers:c(i)}),this._suggestionManager&&this._suggestionManager.addToHistory(this._inputElement.value,this._lastKeyPressLanguage))},_tryGetInputContext:function(){if(this._inputElement.msGetInputContext)try{return this._inputElement.msGetInputContext()}catch(e){return null}return null},_updateInputElementAriaLabel:function(){this._inputElement.setAttribute("aria-label",this._inputElement.placeholder?s._formatString(w.ariaLabelInputPlaceHolder,this._inputElement.placeholder):w.ariaLabelInputNoPlaceHolder)},_flyoutBlurHandler:function(e){this._isElementInSearchControl(t.document.activeElement)?this._internalFocusMove=!0:(this._element.classList.remove(g.asbInputFocus),this._hideFlyout())},_flyoutPointerDownHandler:function(e){function t(){if(i)for(var e=0;e<n._suggestionsData.length;e++)if(n._repeater.elementFromIndex(e)===i)return e;return-1}var n=this,i=e.target;for(this._isFlyoutPointerDown=!0;i&&i.parentNode!==this._repeaterElement;)i=i.parentNode;var r=t();r>=0&&r<this._suggestionsData.length&&this._currentFocusedIndex!==r&&this._isSuggestionSelectable(this._suggestionsData.getAt(r))&&(this._currentFocusedIndex=r,this._selectSuggestionAtIndex(r),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex)),e.preventDefault()},_flyoutPointerReleasedHandler:function(){if(this._isFlyoutPointerDown=!1,this._reflowImeOnPointerRelease){this._reflowImeOnPointerRelease=!1;var e=h.createRepositionAnimation(this._flyoutElement);this._flyoutElement.style.marginTop="",this._flyoutElement.style.marginLeft="",e.execute()}},_inputBlurHandler:function(e){this._isElementInSearchControl(t.document.activeElement)||(this._element.classList.remove(g.asbInputFocus),this._hideFlyout()),this.queryText=this._prevQueryText,this._isProcessingDownKey=!1,this._isProcessingUpKey=!1,this._isProcessingTabKey=!1,this._isProcessingEnterKey=!1},_inputFocusHandler:function(e){this._inputElement.value!==this._prevQueryText&&n.Windows.Data.Text.SemanticTextQuery&&(""!==this._inputElement.value?this._hitFinder=new n.Windows.Data.Text.SemanticTextQuery(this._inputElement.value,this._inputElement.lang):this._hitFinder=null),e.target!==this._inputElement||this._internalFocusMove||(this._showFlyout(),-1!==this._currentFocusedIndex?this._selectSuggestionAtIndex(this._currentFocusedIndex):this._updateFakeFocus(),this._suggestionManager.setQuery(this._inputElement.value,this._lastKeyPressLanguage,this._getLinguisticDetails(!0,!0))),this._internalFocusMove=!1,this._element.classList.add(g.asbInputFocus)},_inputOrImeChangeHandler:function(){function e(e){var n=!1;return(t._prevLinguisticDetails.queryTextCompositionStart!==e.queryTextCompositionStart||t._prevLinguisticDetails.queryTextCompositionLength!==e.queryTextCompositionLength||t._prevLinguisticDetails.queryTextAlternatives.length!==e.queryTextAlternatives.length)&&(n=!0),t._prevLinguisticDetails=e,n}var t=this;if(!this._shouldIgnoreInput()){var i=this._getLinguisticDetails(!1,!0),e=e(i);if((this._inputElement.value!==this._prevQueryText||0===this._prevCompositionLength||i.queryTextCompositionLength>0)&&(this._prevCompositionStart=i.queryTextCompositionStart,this._prevCompositionLength=i.queryTextCompositionLength),this._prevQueryText===this._inputElement.value&&!e)return;this._prevQueryText=this._inputElement.value,n.Windows.Globalization.Language&&(this._lastKeyPressLanguage=n.Windows.Globalization.Language.currentInputMethodLanguageTag),n.Windows.Data.Text.SemanticTextQuery&&(""!==this._inputElement.value?this._hitFinder=new n.Windows.Data.Text.SemanticTextQuery(this._inputElement.value,this._lastKeyPressLanguage):this._hitFinder=null),this._fireEvent(C.querychanged,{language:this._lastKeyPressLanguage,queryText:this._inputElement.value,linguisticDetails:i}),this._suggestionManager.setQuery(this._inputElement.value,this._lastKeyPressLanguage,i)}},_inputPointerDownHandler:function(){t.document.activeElement===this._inputElement&&-1!==this._currentSelectedIndex&&(this._currentFocusedIndex=-1,this._selectSuggestionAtIndex(this._currentFocusedIndex))},_keyDownHandler:function(e){function t(t){n._currentFocusedIndex=t,n._selectSuggestionAtIndex(t),e.preventDefault(),e.stopPropagation()}var n=this;if(this._lastKeyPressLanguage=e.locale,e.keyCode===b.tab?this._isProcessingTabKey=!0:e.keyCode===b.upArrow?this._isProcessingUpKey=!0:e.keyCode===b.downArrow?this._isProcessingDownKey=!0:e.keyCode===b.enter&&"ko"===e.locale&&(this._isProcessingEnterKey=!0),e.keyCode!==b.IME)if(e.keyCode===b.tab){var i=!0;e.shiftKey?-1!==this._currentFocusedIndex&&(t(-1),i=!1):-1===this._currentFocusedIndex&&(this._currentFocusedIndex=this._flyoutBelowInput?this._findNextSuggestionElementIndex(this._currentFocusedIndex):this._findPreviousSuggestionElementIndex(this._suggestionsData.length),-1!==this._currentFocusedIndex&&(t(this._currentFocusedIndex),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex),i=!1)),i&&this._hideFlyout()}else if(e.keyCode===b.escape)-1!==this._currentFocusedIndex?(this.queryText=this._prevQueryText,t(-1)):""!==this.queryText&&(this.queryText="",this._inputOrImeChangeHandler(null),e.preventDefault(),e.stopPropagation());else if(this._flyoutBelowInput&&e.keyCode===b.upArrow||!this._flyoutBelowInput&&e.keyCode===b.downArrow){var r;-1!==this._currentSelectedIndex?(r=this._findPreviousSuggestionElementIndex(this._currentSelectedIndex),-1===r&&(this.queryText=this._prevQueryText)):r=this._findPreviousSuggestionElementIndex(this._suggestionsData.length),t(r),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex)}else if(this._flyoutBelowInput&&e.keyCode===b.downArrow||!this._flyoutBelowInput&&e.keyCode===b.upArrow){var o=this._findNextSuggestionElementIndex(this._currentSelectedIndex);-1!==this._currentSelectedIndex&&-1===o&&(this.queryText=this._prevQueryText),t(o),this._updateQueryTextWithSuggestionText(this._currentFocusedIndex)}else e.keyCode===b.enter&&(-1===this._currentSelectedIndex?this._submitQuery(this._inputElement.value,!0,e):this._processSuggestionChosen(this._suggestionsData.getAt(this._currentSelectedIndex),e),this._hideFlyout())},_keyUpHandler:function(e){e.keyCode===b.tab?this._isProcessingTabKey=!1:e.keyCode===b.upArrow?this._isProcessingUpKey=!1:e.keyCode===b.downArrow?this._isProcessingDownKey=!1:e.keyCode===b.enter&&(this._isProcessingEnterKey=!1)},_keyPressHandler:function(e){this._lastKeyPressLanguage=e.locale},_msCandidateWindowHideHandler:function(){if(this._isFlyoutPointerDown)this._reflowImeOnPointerRelease=!0;else{var e=h.createRepositionAnimation(this._flyoutElement);this._flyoutElement.style.marginTop="",this._flyoutElement.style.marginLeft="",e.execute()}},_msCandidateWindowShowHandler:function(){this._addFlyoutIMEPaddingIfRequired(),this._reflowImeOnPointerRelease=!1},_suggestionsChangedHandler:function(n){var i=n.collectionChange||n.detail.collectionChange,r=+n.index===n.index?n.index:n.detail.index,o=_._CollectionChange;if(i===o.reset)this._isFlyoutShown()&&this._hideFlyout(),this._suggestionsData.splice(0,this._suggestionsData.length);else if(i===o.itemInserted){var s=this._suggestions[r];this._suggestionsData.splice(r,0,s),this._showFlyout()}else if(i===o.itemRemoved)1===this._suggestionsData.length&&(u._setActive(this._inputElement),this._hideFlyout()),this._suggestionsData.splice(r,1);else if(i===o.itemChanged){var s=this._suggestions[r];if(s!==this._suggestionsData.getAt(r))this._suggestionsData.setAt(r,s);else{var a=this._repeater.elementFromIndex(r);if(u.hasClass(a,g.asbSuggestionQuery))e(a,s,s.text);else{var l=a.querySelector("."+g.asbSuggestionResultText);if(l){e(l,s,s.text);var c=a.querySelector("."+g.asbSuggestionResultDetailedText);c&&e(c,s,s.detailText)}}}}t.document.activeElement===this._inputElement&&this._updateFakeFocus()},_suggestionsRequestedHandler:function(e){n.Windows.Globalization.Language&&(this._lastKeyPressLanguage=n.Windows.Globalization.Language.currentInputMethodLanguageTag);var t,i=e.request||e.detail.request;this._fireEvent(C.suggestionsrequested,{setPromise:function(e){t=i.getDeferral(),e.then(function(){t.complete()})},searchSuggestionCollection:i.searchSuggestionCollection,language:this._lastKeyPressLanguage,linguisticDetails:this._getLinguisticDetails(!0,!0),queryText:this._inputElement.value})}},{createResultSuggestionImage:function(e){return n.Windows.Foundation.Uri&&n.Windows.Storage.Streams.RandomAccessStreamReference?n.Windows.Storage.Streams.RandomAccessStreamReference.createFromUri(new n.Windows.Foundation.Uri(e)):e},_EventNames:C,_sortAndMergeHits:function(e){function t(e,t){var n=0;return e.startPosition<t.startPosition?n=-1:e.startPosition>t.startPosition&&(n=1),n}function n(e,t,n){if(0===n)e.push(t);else{var i=e[e.length-1],r=i.startPosition+i.length;if(t.startPosition<=r){var o=t.startPosition+t.length;o>r&&(i.length=o-i.startPosition)}else e.push(t)}return e}var i=[];if(e){for(var r=new Array(e.length),o=0;o<e.length;o++)r.push({startPosition:e[o].startPosition,length:e[o].length});r.sort(t),r.reduce(n,i)}return i}});return i.Class.mix(I,a.DOMEventMixin),I})}),e.ClassNames=g}),i("require-style!less/styles-searchbox",[],function(){}),i("require-style!less/colors-searchbox",[],function(){}),i("WinJS/Controls/SearchBox",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","./AutoSuggestBox","../_Accents","../Utilities/_Control","../Utilities/_ElementUtilities","./AutoSuggestBox/_SearchSuggestionManagerShim","../Application","require-style!less/styles-searchbox","require-style!less/colors-searchbox"],function(e,t,n,i,r,o,s,a,l,u,c,d){"use strict";a.createAccentRule("html.win-hoverable .win-searchbox-button:not(.win-searchbox-button-disabled):hover",[{name:"color",value:a.ColorTypes.accent}]),a.createAccentRule(".win-searchbox-button.win-searchbox-button:not(.win-searchbox-button-disabled):hover:active",[{name:"background-color",value:a.ColorTypes.accent}]),n.Namespace.define("WinJS.UI",{SearchBox:n.Namespace._lazy(function(){var i={searchBox:"win-searchbox",searchBoxDisabled:"win-searchbox-disabled",searchBoxInput:"win-searchbox-input",searchBoxInputFocus:"win-searchbox-input-focus",searchBoxButton:"win-searchbox-button",searchBoxFlyout:"win-searchbox-flyout",searchBoxFlyoutHighlightText:"win-searchbox-flyout-highlighttext",searchBoxHitHighlightSpan:"win-searchbox-hithighlight-span",searchBoxSuggestionResult:"win-searchbox-suggestion-result",searchBoxSuggestionResultText:"win-searchbox-suggestion-result-text",searchBoxSuggestionResultDetailedText:"win-searchbox-suggestion-result-detailed-text",searchBoxSuggestionSelected:"win-searchbox-suggestion-selected",searchBoxSuggestionQuery:"win-searchbox-suggestion-query",searchBoxSuggestionSeparator:"win-searchbox-suggestion-separator",searchBoxButtonInputFocus:"win-searchbox-button-input-focus",searchBoxButtonDisabled:"win-searchbox-button-disabled"},r={receivingfocusonkeyboardinput:"receivingfocusonkeyboardinput"},a={get invalidSearchBoxSuggestionKind(){return"Error: Invalid search suggestion kind."},get ariaLabel(){return o._getWinJSString("ui/searchBoxAriaLabel").value},get ariaLabelInputNoPlaceHolder(){return o._getWinJSString("ui/searchBoxAriaLabelInputNoPlaceHolder").value},get ariaLabelInputPlaceHolder(){return o._getWinJSString("ui/searchBoxAriaLabelInputPlaceHolder").value},get searchBoxDeprecated(){return"SearchBox is deprecated and may not be available in future releases. Instead use AutoSuggestBox."}},h=n.Class.derive(s.AutoSuggestBox,function(t,n){u._deprecated(a.searchBoxDeprecated),this._requestingFocusOnKeyboardInputHandlerBind=this._requestingFocusOnKeyboardInputHandler.bind(this),this._buttonElement=e.document.createElement("div"),this._focusOnKeyboardInput=!1,s.AutoSuggestBox.call(this,t,n),this.element.classList.add(i.searchBox),this._flyoutElement.classList.add(i.searchBoxFlyout),this._inputElement.classList.add(i.searchBoxInput),this._inputElement.addEventListener("blur",this._searchboxInputBlurHandler.bind(this)),this._inputElement.addEventListener("focus",this._searchboxInputFocusHandler.bind(this)),this._buttonElement.tabIndex=-1,this._buttonElement.classList.add(i.searchBoxButton),this._buttonElement.addEventListener("click",this._buttonClickHandler.bind(this)),u._addEventListener(this._buttonElement,"pointerdown",this._buttonPointerDownHandler.bind(this)),this.element.appendChild(this._buttonElement)},{focusOnKeyboardInput:{get:function(){return this._focusOnKeyboardInput},set:function(e){this._focusOnKeyboardInput&&!e?d._applicationListener.removeEventListener(this.element,"requestingfocusonkeyboardinput",this._requestingFocusOnKeyboardInputHandlerBind):!this._focusOnKeyboardInput&&e&&d._applicationListener.addEventListener(this.element,"requestingfocusonkeyboardinput",this._requestingFocusOnKeyboardInputHandlerBind),this._focusOnKeyboardInput=!!e}},dispose:function(){this._disposed||(s.AutoSuggestBox.prototype.dispose.call(this),this._focusOnKeyboardInput&&d._applicationListener.removeEventListener(this.element,"requestingfocusonkeyboardinput",this._requestingFocusOnKeyboardInputHandlerBind))},_disableControl:function(){s.AutoSuggestBox.prototype._disableControl.call(this),this._buttonElement.disabled=!0,this._buttonElement.classList.add(i.searchBoxButtonDisabled),this.element.classList.add(i.searchBoxDisabled)},_enableControl:function(){s.AutoSuggestBox.prototype._enableControl.call(this),this._buttonElement.disabled=!1,this._buttonElement.classList.remove(i.searchBoxButtonDisabled),this.element.classList.remove(i.searchBoxDisabled)},_renderSuggestion:function(e){var t=s.AutoSuggestBox.prototype._renderSuggestion.call(this,e);if(e.kind===c._SearchSuggestionKind.Query)t.classList.add(i.searchBoxSuggestionQuery);else if(e.kind===c._SearchSuggestionKind.Separator)t.classList.add(i.searchBoxSuggestionSeparator);else{t.classList.add(i.searchBoxSuggestionResult);var n=t.querySelector("."+s.ClassNames.asbSuggestionResultText);n.classList.add(i.searchBoxSuggestionResultText);var r=t.querySelector("."+s.ClassNames.asbSuggestionResultDetailedText);r.classList.add(i.searchBoxSuggestionResultDetailedText);for(var o=t.querySelectorAll("."+s.ClassNames.asbHitHighlightSpan),a=0,l=o.length;l>a;a++)o[a].classList.add(i.searchBoxHitHighlightSpan);for(var u=t.querySelectorAll("."+s.ClassNames.asbBoxFlyoutHighlightText),a=0,l=u.length;l>a;a++)u[a].classList.add(i.searchBoxFlyoutHighlightText)}return t},_selectSuggestionAtIndex:function(e){s.AutoSuggestBox.prototype._selectSuggestionAtIndex.call(this,e);var t=this.element.querySelector("."+i.searchBoxSuggestionSelected);t&&t.classList.remove(i.searchBoxSuggestionSelected);var n=this.element.querySelector("."+s.ClassNames.asbSuggestionSelected);n&&n.classList.add(i.searchBoxSuggestionSelected)},_shouldIgnoreInput:function(){var e=s.AutoSuggestBox.prototype._shouldIgnoreInput(),t=u._matchesSelector(this._buttonElement,":active");return e||t},_updateInputElementAriaLabel:function(){this._inputElement.setAttribute("aria-label",this._inputElement.placeholder?o._formatString(a.ariaLabelInputPlaceHolder,this._inputElement.placeholder):a.ariaLabelInputNoPlaceHolder)},_buttonPointerDownHandler:function(e){this._inputElement.focus(),e.preventDefault()},_buttonClickHandler:function(e){this._inputElement.focus(),this._submitQuery(this._inputElement.value,!0,e),this._hideFlyout()},_searchboxInputBlurHandler:function(){u.removeClass(this.element,i.searchBoxInputFocus),u.removeClass(this._buttonElement,i.searchBoxButtonInputFocus)},_searchboxInputFocusHandler:function(){u.addClass(this.element,i.searchBoxInputFocus),u.addClass(this._buttonElement,i.searchBoxButtonInputFocus)},_requestingFocusOnKeyboardInputHandler:function(){if(this._fireEvent(r.receivingfocusonkeyboardinput,null),e.document.activeElement!==this._inputElement)try{this._inputElement.focus()}catch(t){}}},{createResultSuggestionImage:function(e){return u._deprecated(a.searchBoxDeprecated),t.Windows.Foundation.Uri&&t.Windows.Storage.Streams.RandomAccessStreamReference?t.Windows.Storage.Streams.RandomAccessStreamReference.createFromUri(new t.Windows.Foundation.Uri(e)):e},_getKeyModifiers:function(e){var t={ctrlKey:1,altKey:2,shiftKey:4},n=0;return e.ctrlKey&&(n|=t.ctrlKey),e.altKey&&(n|=t.altKey),e.shiftKey&&(n|=t.shiftKey),n},_isTypeToSearchKey:function(e){return e.shiftKey||e.ctrlKey||e.altKey?!1:!0}});return n.Class.mix(h,l.DOMEventMixin),h})})}),i("WinJS/Controls/SettingsFlyout",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Events","../Core/_Resources","../Core/_WriteProfilerMark","../Animations","../Pages","../Promise","../_LightDismissService","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_ElementListUtilities","../Utilities/_Hoverable","./_LegacyAppBar/_Constants","./Flyout/_Overlay"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g){"use strict";n.Namespace.define("WinJS.UI",{SettingsFlyout:n.Namespace._lazy(function(){function i(){if(t.Windows.UI.ApplicationSettings.SettingsEdgeLocation){var e=t.Windows.UI.ApplicationSettings;return e.SettingsPane.edge===e.SettingsEdgeLocation.left}return!1}function f(e,t){for(var n,i,r=e.querySelectorAll("."+_.settingsFlyoutClass),o=0;o<r.length;o++)if(i=r[o].winControl){if(i.settingsCommandId===t){n=i;break}r[o].id===t&&(n=n||i)}return n}var v,y=p.Key,b=o._createEventProperty,C="narrow",w="wide",I=n.Class.derive(g._Overlay,function(t,n){p._deprecated(E.settingsFlyoutIsDeprecated),this._element=t||e.document.createElement("div"),this._id=this._element.id||p._uniqueID(this._element),this._writeProfilerMark("constructor,StartTM"),this._baseOverlayConstructor(this._element,n),this._addFirstDiv(),this._addFinalDiv(),this._element.addEventListener("keydown",this._handleKeyDown,!0),this._element.style.visibilty="hidden",this._element.style.display="none",p.addClass(this._element,_.settingsFlyoutClass);var i=this;this._dismissable=new d.LightDismissableElement({element:this._element,tabIndex:this._element.hasAttribute("tabIndex")?this._element.tabIndex:-1,onLightDismiss:function(){i.hide()},onTakeFocus:function(e){if(!i._dismissable.restoreFocus()){var t=i.element.querySelector("."+_.firstDivClass);t&&(t.msSettingsFlyoutFocusOut||(p._addEventListener(t,"focusout",function(){v=1},!1),t.msSettingsFlyoutFocusOut=!0),v=0,p._tryFocus(t,e))}}}),m.query("div.win-content",this._element).forEach(function(e){p._matchesSelector(e,".win-ui-dark, .win-ui-dark *")||p.addClass(e,_.flyoutLightClass)});var r=this._element.getAttribute("role");(null===r||""===r||void 0===r)&&this._element.setAttribute("role","dialog");var o=this._element.getAttribute("aria-label");(null===o||""===o||void 0===o)&&this._element.setAttribute("aria-label",E.ariaLabel),
this._currentAnimateIn=this._animateSlideIn,this._currentAnimateOut=this._animateSlideOut,this._writeProfilerMark("constructor,StopTM")},{width:{get:function(){return this._width},set:function(e){p._deprecated(E.widthDeprecationMessage),e!==this._width&&(this._width===C?p.removeClass(this._element,_.narrowClass):this._width===w&&p.removeClass(this._element,_.wideClass),this._width=e,this._width===C?p.addClass(this._element,_.narrowClass):this._width===w&&p.addClass(this._element,_.wideClass))}},settingsCommandId:{get:function(){return this._settingsCommandId},set:function(e){this._settingsCommandId=e}},disabled:{get:function(){return!!this._element.disabled},set:function(e){e=!!e;var t=!!this._element.disabled;t!==e&&(this._element.disabled=e,!this.hidden&&this._element.disabled&&this._dismiss())}},onbeforeshow:b(g._Overlay.beforeShow),onaftershow:b(g._Overlay.afterShow),onbeforehide:b(g._Overlay.beforeHide),onafterhide:b(g._Overlay.afterHide),show:function(){this.disabled||(this._writeProfilerMark("show,StartTM"),this._show())},_dispose:function(){d.hidden(this._dismissable),h.disposeSubTree(this.element),this._dismiss()},_show:function(){if(this._baseShow()){if(!p.hasClass(this.element.children[0],_.firstDivClass)){var e=this.element.querySelectorAll("."+_.firstDivClass);e&&e.length>0&&e.item(0).parentNode.removeChild(e.item(0)),this._addFirstDiv()}if(!p.hasClass(this.element.children[this.element.children.length-1],_.finalDivClass)){var t=this.element.querySelectorAll("."+_.finalDivClass);t&&t.length>0&&t.item(0).parentNode.removeChild(t.item(0)),this._addFinalDiv()}this._setBackButtonsAriaLabel(),d.shown(this._dismissable)}},_setBackButtonsAriaLabel:function(){for(var e,t=this.element.querySelectorAll(".win-backbutton"),n=0;n<t.length;n++)e=t[n].getAttribute("aria-label"),(null===e||""===e||void 0===e)&&t[n].setAttribute("aria-label",E.backbuttonAriaLabel)},hide:function(){this._writeProfilerMark("hide,StartTM"),this._hide()},_hide:function(){this._baseHide()},_beforeEndHide:function(){d.hidden(this._dismissable)},_animateSlideIn:function(){var e=i(),t=e?"-100px":"100px";m.query("div.win-content",this._element).forEach(function(e){l.enterPage(e,{left:t})});var n,r=this._element.offsetWidth;return e?(n={top:"0px",left:"-"+r+"px"},this._element.style.right="auto",this._element.style.left="0px"):(n={top:"0px",left:r+"px"},this._element.style.right="0px",this._element.style.left="auto"),this._element.style.opacity=1,this._element.style.visibility="visible",l.showPanel(this._element,n)},_animateSlideOut:function(){var e,t=this._element.offsetWidth;return i()?(e={top:"0px",left:t+"px"},this._element.style.right="auto",this._element.style.left="-"+t+"px"):(e={top:"0px",left:"-"+t+"px"},this._element.style.right="-"+t+"px",this._element.style.left="auto"),l.showPanel(this._element,e)},_fragmentDiv:{get:function(){return this._fragDiv},set:function(e){this._fragDiv=e}},_unloadPage:function(t){var n=t.currentTarget.winControl;n.removeEventListener(g._Overlay.afterHide,this._unloadPage,!1),c.as().then(function(){n._fragmentDiv&&(e.document.body.removeChild(n._fragmentDiv),n._fragmentDiv=null)})},_dismiss:function(){this.addEventListener(g._Overlay.afterHide,this._unloadPage,!1),this._hide()},_handleKeyDown:function(t){if(t.keyCode!==y.space&&t.keyCode!==y.enter||this.children[0]!==e.document.activeElement){if(t.shiftKey&&t.keyCode===y.tab&&this.children[0]===e.document.activeElement){t.preventDefault(),t.stopPropagation();for(var n=this.getElementsByTagName("*"),i=n.length-2;i>=0&&(n[i].focus(),n[i]!==e.document.activeElement);i--);}}else t.preventDefault(),t.stopPropagation(),this.winControl._dismiss()},_focusOnLastFocusableElementFromParent:function(){var t=e.document.activeElement;if(v&&t&&p.hasClass(t,_.firstDivClass)){var n=this.parentElement.getElementsByTagName("*");if(!(n.length<=2)){var i,r=n[n.length-1].tabIndex;if(r){for(i=n.length-2;i>0;i--)if(n[i].tabIndex===r){n[i].focus();break}}else for(i=n.length-2;i>0&&("DIV"===n[i].tagName&&null===n[i].getAttribute("tabIndex")||(n[i].focus(),n[i]!==e.document.activeElement));i--);}}},_focusOnFirstFocusableElementFromParent:function(){var t=e.document.activeElement;if(t&&p.hasClass(t,_.finalDivClass)){var n=this.parentElement.getElementsByTagName("*");if(!(n.length<=2)){var i,r=n[0].tabIndex;if(r){for(i=1;i<n.length-1;i++)if(n[i].tabIndex===r){n[i].focus();break}}else for(i=1;i<n.length-1&&("DIV"===n[i].tagName&&null===n[i].getAttribute("tabIndex")||(n[i].focus(),n[i]!==e.document.activeElement));i++);}}},_addFirstDiv:function(){for(var t=this._element.getElementsByTagName("*"),n=0,i=0;i<t.length;i++)0<t[i].tabIndex&&(0===n||t[i].tabIndex<n)&&(n=t[i].tabIndex);var r=e.document.createElement("div");r.className=_.firstDivClass,r.style.display="inline",r.setAttribute("role","menuitem"),r.setAttribute("aria-hidden","true"),r.tabIndex=n,p._addEventListener(r,"focusin",this._focusOnLastFocusableElementFromParent,!1),this._element.children[0]?this._element.insertBefore(r,this._element.children[0]):this._element.appendChild(r)},_addFinalDiv:function(){for(var t=this._element.getElementsByTagName("*"),n=0,i=0;i<t.length;i++)t[i].tabIndex>n&&(n=t[i].tabIndex);var r=e.document.createElement("div");r.className=_.finalDivClass,r.style.display="inline",r.setAttribute("role","menuitem"),r.setAttribute("aria-hidden","true"),r.tabIndex=n,p._addEventListener(r,"focusin",this._focusOnFirstFocusableElementFromParent,!1),this._element.appendChild(r)},_writeProfilerMark:function(e){a("WinJS.UI.SettingsFlyout:"+this._id+":"+e)}});I.show=function(){t.Windows.UI.ApplicationSettings.SettingsPane&&t.Windows.UI.ApplicationSettings.SettingsPane.show();for(var n=e.document.querySelectorAll('div[data-win-control="WinJS.UI.SettingsFlyout"]'),i=n.length,r=0;i>r;r++){var o=n[r].winControl;o&&o._dismiss()}};var S={event:void 0};I.populateSettings=function(e){if(S.event=e.detail,S.event.applicationcommands){var n=t.Windows.UI.ApplicationSettings;Object.keys(S.event.applicationcommands).forEach(function(e){var t=S.event.applicationcommands[e];t.title||(t.title=e);var i=new n.SettingsCommand(e,t.title,I._onSettingsCommand);S.event.e.request.applicationCommands.append(i)})}},I._onSettingsCommand=function(e){var t=e.id;S.event.applicationcommands&&S.event.applicationcommands[t]&&I.showSettings(t,S.event.applicationcommands[t].href)},I.showSettings=function(t,n){var i=f(e.document,t);if(i)i.show();else{if(!n)throw new r("WinJS.UI.SettingsFlyout.BadReference",E.badReference);var o=e.document.createElement("div");o=e.document.body.appendChild(o),u.render(n,o).then(function(){i=f(o,t),i?(i._fragmentDiv=o,i.show()):e.document.body.removeChild(o)})}};var E={get ariaLabel(){return s._getWinJSString("ui/settingsFlyoutAriaLabel").value},get badReference(){return"Invalid argument: Invalid href to settings flyout fragment"},get backbuttonAriaLabel(){return s._getWinJSString("ui/backbuttonarialabel").value},get widthDeprecationMessage(){return"SettingsFlyout.width may be altered or unavailable in future versions. Instead, style the CSS width property on elements with the .win-settingsflyout class."},get settingsFlyoutIsDeprecated(){return"SettingsFlyout is deprecated and may not be available in future releases. Instead, put settings on their own page within the app."}};return I})})}),i("require-style!less/styles-splitviewcommand",[],function(){}),i("require-style!less/colors-splitviewcommand",[],function(){}),i("WinJS/Controls/SplitView/Command",["exports","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Core/_Events","../../ControlProcessor","../../Utilities/_Control","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardBehavior","../AppBar/_Icon","require-style!less/styles-splitviewcommand","require-style!less/colors-splitviewcommand"],function(e,t,n,i,r,o,s,a,l,u){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{_WinPressed:n.Namespace._lazy(function(){var e=n.Class.define(function(e){this._element=e,a._addEventListener(this._element,"pointerdown",this._MSPointerDownButtonHandler.bind(this))},{_MSPointerDownButtonHandler:function(n){this._pointerUpBound||(this._pointerUpBound=this._MSPointerUpHandler.bind(this),this._pointerCancelBound=this._MSPointerCancelHandler.bind(this),this._pointerOverBound=this._MSPointerOverHandler.bind(this),this._pointerOutBound=this._MSPointerOutHandler.bind(this)),n.isPrimary&&(this._pointerId&&this._resetPointer(),a._matchesSelector(n.target,".win-interactive, .win-interactive *")||(this._pointerId=n.pointerId,a._addEventListener(t,"pointerup",this._pointerUpBound,!0),a._addEventListener(t,"pointercancel",this._pointerCancelBound),!0,a._addEventListener(this._element,"pointerover",this._pointerOverBound,!0),a._addEventListener(this._element,"pointerout",this._pointerOutBound,!0),a.addClass(this._element,e.winPressed)))},_MSPointerOverHandler:function(t){this._pointerId===t.pointerId&&a.addClass(this._element,e.winPressed)},_MSPointerOutHandler:function(t){this._pointerId===t.pointerId&&a.removeClass(this._element,e.winPressed)},_MSPointerCancelHandler:function(e){this._pointerId===e.pointerId&&this._resetPointer()},_MSPointerUpHandler:function(e){this._pointerId===e.pointerId&&this._resetPointer()},_resetPointer:function(){this._pointerId=null,a._removeEventListener(t,"pointerup",this._pointerUpBound,!0),a._removeEventListener(t,"pointercancel",this._pointerCancelBound,!0),a._removeEventListener(this._element,"pointerover",this._pointerOverBound,!0),a._removeEventListener(this._element,"pointerout",this._pointerOutBound,!0),a.removeClass(this._element,e.winPressed)},dispose:function(){this._disposed||(this._disposed=!0,this._resetPointer())}},{winPressed:"win-pressed"});return e}),SplitViewCommand:n.Namespace._lazy(function(){var c=a.Key,d={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},h={command:"win-splitviewcommand",commandButton:"win-splitviewcommand-button",commandButtonContent:"win-splitviewcommand-button-content",commandSplitButton:"win-splitviewcommand-splitbutton",commandSplitButtonOpened:"win-splitviewcommand-splitbutton-opened",commandIcon:"win-splitviewcommand-icon",commandLabel:"win-splitviewcommand-label"},p={invoked:"invoked",_splitToggle:"_splittoggle"},m=r._createEventProperty,f=n.Class.define(function(e,n){if(e=e||t.document.createElement("DIV"),n=n||{},e.winControl)throw new i("WinJS.UI.SplitViewCommand.DuplicateConstruction",d.duplicateConstruction);this._winKeyboard=new l._WinKeyboard(e),this._baseConstructor(e,n)},{_baseConstructor:function(e,t,n){this._classNames=n||h,e.winControl=this,this._element=e,a.addClass(this.element,this._classNames.command),a.addClass(this.element,"win-disposable"),this._tooltip=null,this._splitOpened=!1,this._buildDom(),e.addEventListener("keydown",this._keydownHandler.bind(this)),s.setOptions(this,t)},element:{get:function(){return this._element}},label:{get:function(){return this._label},set:function(e){this._label=e,this._labelEl.textContent=e}},tooltip:{get:function(){return this._tooltip},set:function(e){this._tooltip=e,this._tooltip||""===this._tooltip?this._element.setAttribute("title",this._tooltip):this._element.removeAttribute("title")}},icon:{get:function(){return this._icon},set:function(e){this._icon=u[e]||e,this._icon&&1===this._icon.length?(this._imageSpan.textContent=this._icon,this._imageSpan.style.backgroundImage="",this._imageSpan.style.msHighContrastAdjust="",this._imageSpan.style.display=""):this._icon&&this._icon.length>1?(this._imageSpan.textContent="",this._imageSpan.style.backgroundImage=this._icon,this._imageSpan.style.msHighContrastAdjust="none",this._imageSpan.style.display=""):(this._imageSpan.textContent="",this._imageSpan.style.backgroundImage="",this._imageSpan.style.msHighContrastAdjust="",this._imageSpan.style.display="none")}},oninvoked:m(p.invoked),_toggleSplit:function(){this._splitOpened=!this._splitOpened,this._splitOpened?(a.addClass(this._splitButtonEl,this._classNames.commandSplitButtonOpened),this._splitButtonEl.setAttribute("aria-expanded","true")):(a.removeClass(this._splitButtonEl,this._classNames.commandSplitButtonOpened),this._splitButtonEl.setAttribute("aria-expanded","false")),this._fireEvent(f._EventName._splitToggle)},_rtl:{get:function(){return"rtl"===a._getComputedStyle(this.element).direction}},_keydownHandler:function(e){if(!a._matchesSelector(e.target,".win-interactive, .win-interactive *")){var t=this._rtl?c.rightArrow:c.leftArrow,n=this._rtl?c.leftArrow:c.rightArrow;e.altKey||e.keyCode!==t&&e.keyCode!==c.home&&e.keyCode!==c.end||e.target!==this._splitButtonEl?e.altKey||e.keyCode!==n||!this.splitButton||e.target!==this._buttonEl&&!this._buttonEl.contains(e.target)?e.keyCode!==c.space&&e.keyCode!==c.enter||e.target!==this._buttonEl&&!this._buttonEl.contains(e.target)?e.keyCode!==c.space&&e.keyCode!==c.enter||e.target!==this._splitButtonEl||this._toggleSplit():this._invoke():(a._setActive(this._splitButtonEl),e.keyCode===n&&e.stopPropagation(),e.preventDefault()):(a._setActive(this._buttonEl),e.keyCode===t&&e.stopPropagation(),e.preventDefault())}},_getFocusInto:function(e){var t=this._rtl?c.rightArrow:c.leftArrow;return e===t&&this.splitButton?this._splitButtonEl:this._buttonEl},_buildDom:function(){var t='<div tabindex="0" role="button" class="'+this._classNames.commandButton+'"><div class="'+this._classNames.commandButtonContent+'"><div class="'+this._classNames.commandIcon+'"></div><div class="'+this._classNames.commandLabel+'"></div></div></div><div tabindex="-1" aria-expanded="false" class="'+this._classNames.commandSplitButton+'"></div>';this.element.insertAdjacentHTML("afterBegin",t),this._buttonEl=this.element.firstElementChild,this._buttonPressedBehavior=new e._WinPressed(this._buttonEl),this._contentEl=this._buttonEl.firstElementChild,this._imageSpan=this._contentEl.firstElementChild,this._imageSpan.style.display="none",this._labelEl=this._imageSpan.nextElementSibling,this._splitButtonEl=this._buttonEl.nextElementSibling,this._splitButtonPressedBehavior=new e._WinPressed(this._splitButtonEl),this._splitButtonEl.style.display="none",a._ensureId(this._buttonEl),this._splitButtonEl.setAttribute("aria-labelledby",this._buttonEl.id),this._buttonEl.addEventListener("click",this._handleButtonClick.bind(this));var n=new a._MutationObserver(this._splitButtonAriaExpandedPropertyChangeHandler.bind(this));n.observe(this._splitButtonEl,{attributes:!0,attributeFilter:["aria-expanded"]}),this._splitButtonEl.addEventListener("click",this._handleSplitButtonClick.bind(this));for(var i=this._splitButtonEl.nextSibling;i;)this._buttonEl.insertBefore(i,this._contentEl),"#text"!==i.nodeName&&o.processAll(i),i=this._splitButtonEl.nextSibling},_handleButtonClick:function(e){var t=e.target;a._matchesSelector(t,".win-interactive, .win-interactive *")||this._invoke()},_splitButtonAriaExpandedPropertyChangeHandler:function(){"true"===this._splitButtonEl.getAttribute("aria-expanded")!==this._splitOpened&&this._toggleSplit()},_handleSplitButtonClick:function(){this._toggleSplit()},_invoke:function(){this._fireEvent(f._EventName.invoked)},_fireEvent:function(e,n){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!0,!1,n),this.element.dispatchEvent(i)},dispose:function(){this._disposed||(this._disposed=!0,this._buttonPressedBehavior.dispose(),this._splitButtonPressedBehavior.dispose())}},{_ClassName:h,_EventName:p});return n.Class.mix(f,s.DOMEventMixin),f})})}),i("WinJS/Controls/NavBar/_Command",["exports","../../Core/_Global","../../Core/_Base","../../Core/_ErrorFromName","../../Navigation","../../Utilities/_ElementUtilities","../SplitView/Command"],function(e,t,n,i,r,o,s){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{NavBarCommand:n.Namespace._lazy(function(){var e={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get navBarCommandDeprecated(){return"NavBarCommand is deprecated and may not be available in future releases. If you were using a NavBarCommand inside of a SplitView, use SplitViewCommand instead."}},a={command:"win-navbarcommand",commandButton:"win-navbarcommand-button",commandButtonContent:"win-navbarcommand-button-content",commandSplitButton:"win-navbarcommand-splitbutton",commandSplitButtonOpened:"win-navbarcommand-splitbutton-opened",commandIcon:"win-navbarcommand-icon",commandLabel:"win-navbarcommand-label"},l=s.SplitViewCommand.prototype,u=n.Class.derive(s.SplitViewCommand,function(n,r){if(o._deprecated(e.navBarCommandDeprecated),n=n||t.document.createElement("DIV"),r=r||{},n.winControl)throw new i("WinJS.UI.NavBarCommand.DuplicateConstruction",e.duplicateConstruction);this._baseConstructor(n,r,a)},{element:{get:function(){return Object.getOwnPropertyDescriptor(l,"element").get.call(this)}},label:{get:function(){return Object.getOwnPropertyDescriptor(l,"label").get.call(this)},set:function(e){return Object.getOwnPropertyDescriptor(l,"label").set.call(this,e)}},tooltip:{get:function(){return Object.getOwnPropertyDescriptor(l,"tooltip").get.call(this)},set:function(e){return Object.getOwnPropertyDescriptor(l,"tooltip").set.call(this,e)}},icon:{get:function(){return Object.getOwnPropertyDescriptor(l,"icon").get.call(this)},set:function(e){return Object.getOwnPropertyDescriptor(l,"icon").set.call(this,e)}},location:{get:function(){return this._location},set:function(e){this._location=e}},oninvoked:{get:function(){return void 0},enumerable:!1},state:{get:function(){return this._state},set:function(e){this._state=e}},splitButton:{get:function(){return this._split},set:function(e){this._split=e,this._split?this._splitButtonEl.style.display="":this._splitButtonEl.style.display="none"}},splitOpened:{get:function(){return this._splitOpened},set:function(e){this._splitOpened!==!!e&&this._toggleSplit()}},dispose:function(){l.dispose.call(this)},_invoke:function(){this.location&&r.navigate(this.location,this.state),this._fireEvent(u._EventName._invoked)}},{_ClassName:a,_EventName:{_invoked:"_invoked",_splitToggle:"_splittoggle"}});return u})})}),i("WinJS/Controls/NavBar/_Container",["exports","../../Core/_Global","../../Core/_Base","../../Core/_BaseUtils","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Log","../../Core/_Resources","../../Core/_WriteProfilerMark","../../Animations","../../Animations/_TransitionAnimation","../../BindingList","../../ControlProcessor","../../Navigation","../../Promise","../../Scheduler","../../Utilities/_Control","../../Utilities/_ElementUtilities","../../Utilities/_KeyboardBehavior","../../Utilities/_UI","../_LegacyAppBar/_Constants","../Repeater","./_Command"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g,v,y,b,C,w){"use strict";function I(){return null===t.document.activeElement||t.document.activeElement===t.document.body}n.Namespace._moduleDefine(e,"WinJS.UI",{NavBarContainer:n.Namespace._lazy(function(){var e=g.Key,S=3e3,E=g._MSPointerEvent.MSPOINTER_TYPE_TOUCH||"touch",x=0,P=o._createEventProperty,k={invoked:"invoked",splittoggle:"splittoggle"},T={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get navBarContainerViewportAriaLabel(){return a._getWinJSString("ui/navBarContainerViewportAriaLabel").value},get navBarContainerIsDeprecated(){return"NavBarContainer is deprecated and may not be available in future releases. Instead, use a WinJS SplitView to display navigation targets within the app."}},M=n.Class.define(function(e,n){if(g._deprecated(T.navBarContainerIsDeprecated),e=e||t.document.createElement("DIV"),this._id=e.id||g._uniqueID(e),this._writeProfilerMark("constructor,StartTM"),n=n||{},e.winControl)throw new r("WinJS.UI.NavBarContainer.DuplicateConstruction",T.duplicateConstruction);e.winControl=this,this._element=e,g.addClass(this.element,M._ClassName.navbarcontainer),g.addClass(this.element,"win-disposable"),e.getAttribute("tabIndex")||(e.tabIndex=-1),this._focusCurrentItemPassivelyBound=this._focusCurrentItemPassively.bind(this),this._closeSplitAndResetBound=this._closeSplitAndReset.bind(this),this._currentManipulationState=x,this._panningDisabled=!g._supportsSnapPoints,this._fixedSize=!1,this._maxRows=1,this._sizes={},this._setupTree(),this._duringConstructor=!0,this._dataChangingBound=this._dataChanging.bind(this),this._dataChangedBound=this._dataChanged.bind(this),p.addEventListener("navigated",this._closeSplitAndResetBound),this.layout=n.layout||y.Orientation.horizontal,n.maxRows&&(this.maxRows=n.maxRows),n.template&&(this.template=n.template),n.data&&(this.data=n.data),n.fixedSize&&(this.fixedSize=n.fixedSize),_._setOptions(this,n,!0),this._duringConstructor=!1,n.currentIndex&&(this.currentIndex=n.currentIndex),this._updatePageUI(),f.schedule(function(){this._updateAppBarReference()},f.Priority.normal,this,"WinJS.UI.NavBarContainer_async_initialize"),this._writeProfilerMark("constructor,StopTM")},{element:{get:function(){return this._element}},template:{get:function(){return this._template},set:function(e){if(this._template=e,this._repeater){var n=this.element.contains(t.document.activeElement);this._duringConstructor||this._closeSplitIfOpen(),this._repeater.template=this._repeater.template,this._duringConstructor||(this._measured=!1,this._sizes.itemMeasured=!1,this._reset(),n&&this._keyboardBehavior._focus(0))}}},_render:function(e){var n=t.document.createElement("div"),i=this._template;i&&(i.render?i.render(e,n):i.winControl&&i.winControl.render?i.winControl.render(e,n):n.appendChild(i(e)));var r=new w.NavBarCommand(n,e);return r._element},data:{get:function(){return this._repeater&&this._repeater.data},set:function(e){e||(e=new d.List),this._duringConstructor||this._closeSplitIfOpen(),this._removeDataChangingEvents(),this._removeDataChangedEvents();var n=this.element.contains(t.document.activeElement);this._repeater||(this._surfaceEl.innerHTML="",this._repeater=new C.Repeater(this._surfaceEl,{template:this._render.bind(this)})),this._addDataChangingEvents(e),this._repeater.data=e,this._addDataChangedEvents(e),this._duringConstructor||(this._measured=!1,this._sizes.itemMeasured=!1,this._reset(),n&&this._keyboardBehavior._focus(0))}},maxRows:{get:function(){return this._maxRows},set:function(e){e=+e===e?e:1,this._maxRows=Math.max(1,e),this._duringConstructor||(this._closeSplitIfOpen(),this._measured=!1,this._reset())}},layout:{get:function(){return this._layout},set:function(e){e===y.Orientation.vertical?(this._layout=y.Orientation.vertical,g.removeClass(this.element,M._ClassName.horizontal),g.addClass(this.element,M._ClassName.vertical)):(this._layout=y.Orientation.horizontal,g.removeClass(this.element,M._ClassName.vertical),g.addClass(this.element,M._ClassName.horizontal)),this._viewportEl.style.msScrollSnapType="",this._zooming=!1,this._duringConstructor||(this._measured=!1,this._sizes.itemMeasured=!1,this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI(),this._closeSplitIfOpen())}},currentIndex:{get:function(){return this._keyboardBehavior.currentIndex},set:function(e){if(e===+e){var n=this.element.contains(t.document.activeElement);this._keyboardBehavior.currentIndex=e,this._ensureVisible(this._keyboardBehavior.currentIndex,!0),n&&this._keyboardBehavior._focus()}}},fixedSize:{get:function(){return this._fixedSize},set:function(e){this._fixedSize=!!e,this._duringConstructor||(this._closeSplitIfOpen(),this._measured?this._surfaceEl.children.length>0&&this._updateGridStyles():this._measure())}},oninvoked:P(k.invoked),onsplittoggle:P(k.splittoggle),forceLayout:function(){this._resizeHandler(),this._measured&&(this._scrollPosition=g.getScrollPosition(this._viewportEl)[this.layout===y.Orientation.horizontal?"scrollLeft":"scrollTop"]),this._duringForceLayout=!0,this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI(),this._duringForceLayout=!1},_updateAppBarReference:function(){if(!this._appBarEl||!this._appBarEl.contains(this.element)){this._appBarEl&&(this._appBarEl.removeEventListener("beforeopen",this._closeSplitAndResetBound),this._appBarEl.removeEventListener("beforeopen",this._resizeImplBound),this._appBarEl.removeEventListener("afteropen",this._focusCurrentItemPassivelyBound));for(var e=this.element.parentNode;e&&!g.hasClass(e,b.appBarClass);)e=e.parentNode;this._appBarEl=e,this._appBarEl&&(this._appBarEl.addEventListener("beforeopen",this._closeSplitAndResetBound),this._appBarEl.addEventListener("afteropen",this._focusCurrentItemPassivelyBound))}},_closeSplitAndReset:function(){this._closeSplitIfOpen(),this._reset()},_dataChanging:function(e){this._elementHadFocus=t.document.activeElement,this._currentSplitNavItem&&this._currentSplitNavItem.splitOpened&&("itemremoved"===e.type?this._surfaceEl.children[e.detail.index].winControl===this._currentSplitNavItem&&this._closeSplitIfOpen():"itemchanged"===e.type?this._surfaceEl.children[e.detail.index].winControl===this._currentSplitNavItem&&this._closeSplitIfOpen():"itemmoved"===e.type?this._surfaceEl.children[e.detail.oldIndex].winControl===this._currentSplitNavItem&&this._closeSplitIfOpen():"reload"===e.type&&this._closeSplitIfOpen())},_dataChanged:function(e){this._measured=!1,"itemremoved"===e.type?e.detail.index<this._keyboardBehavior.currentIndex?this._keyboardBehavior.currentIndex--:e.detail.index===this._keyboardBehavior.currentIndex&&(this._keyboardBehavior.currentIndex=this._keyboardBehavior.currentIndex,I()&&this._elementHadFocus&&this._keyboardBehavior._focus()):"itemchanged"===e.type?e.detail.index===this._keyboardBehavior.currentIndex&&I()&&this._elementHadFocus&&this._keyboardBehavior._focus():"iteminserted"===e.type?e.detail.index<=this._keyboardBehavior.currentIndex&&this._keyboardBehavior.currentIndex++:"itemmoved"===e.type?e.detail.oldIndex===this._keyboardBehavior.currentIndex&&(this._keyboardBehavior.currentIndex=e.detail.newIndex,I()&&this._elementHadFocus&&this._keyboardBehavior._focus()):"reload"===e.type&&(this._keyboardBehavior.currentIndex=0,I()&&this._elementHadFocus&&this._keyboardBehavior._focus()),this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI()},_focusCurrentItemPassively:function(){this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus()},_reset:function(){this._keyboardBehavior.currentIndex=0,this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus(0),this._viewportEl.style.msScrollSnapType="",this._zooming=!1,this._ensureVisible(0,!0),this._updatePageUI()},_removeDataChangedEvents:function(){this._repeater&&(this._repeater.data.removeEventListener("itemchanged",this._dataChangedBound),this._repeater.data.removeEventListener("iteminserted",this._dataChangedBound),this._repeater.data.removeEventListener("itemmoved",this._dataChangedBound),this._repeater.data.removeEventListener("itemremoved",this._dataChangedBound),this._repeater.data.removeEventListener("reload",this._dataChangedBound))},_addDataChangedEvents:function(){this._repeater&&(this._repeater.data.addEventListener("itemchanged",this._dataChangedBound),this._repeater.data.addEventListener("iteminserted",this._dataChangedBound),this._repeater.data.addEventListener("itemmoved",this._dataChangedBound),this._repeater.data.addEventListener("itemremoved",this._dataChangedBound),this._repeater.data.addEventListener("reload",this._dataChangedBound))},_removeDataChangingEvents:function(){this._repeater&&(this._repeater.data.removeEventListener("itemchanged",this._dataChangingBound),this._repeater.data.removeEventListener("iteminserted",this._dataChangingBound),this._repeater.data.removeEventListener("itemmoved",this._dataChangingBound),this._repeater.data.removeEventListener("itemremoved",this._dataChangingBound),this._repeater.data.removeEventListener("reload",this._dataChangingBound))},_addDataChangingEvents:function(e){e.addEventListener("itemchanged",this._dataChangingBound),e.addEventListener("iteminserted",this._dataChangingBound),e.addEventListener("itemmoved",this._dataChangingBound),e.addEventListener("itemremoved",this._dataChangingBound),e.addEventListener("reload",this._dataChangingBound)},_mouseleave:function(){this._mouseInViewport&&(this._mouseInViewport=!1,this._updateArrows())},_MSPointerDown:function(e){e.pointerType===E&&this._mouseInViewport&&(this._mouseInViewport=!1,this._updateArrows())},_MSPointerMove:function(e){e.pointerType!==E&&(this._mouseInViewport||(this._mouseInViewport=!0,this._updateArrows()))},_setupTree:function(){this._animateNextPreviousButtons=m.wrap(),this._element.addEventListener("mouseleave",this._mouseleave.bind(this)),g._addEventListener(this._element,"pointerdown",this._MSPointerDown.bind(this)),g._addEventListener(this._element,"pointermove",this._MSPointerMove.bind(this)),g._addEventListener(this._element,"focusin",this._focusHandler.bind(this),!1),this._pageindicatorsEl=t.document.createElement("div"),g.addClass(this._pageindicatorsEl,M._ClassName.pageindicators),this._element.appendChild(this._pageindicatorsEl),this._ariaStartMarker=t.document.createElement("div"),this._element.appendChild(this._ariaStartMarker),this._viewportEl=t.document.createElement("div"),g.addClass(this._viewportEl,M._ClassName.viewport),this._element.appendChild(this._viewportEl),this._viewportEl.setAttribute("role","group"),this._viewportEl.setAttribute("aria-label",T.navBarContainerViewportAriaLabel),this._boundResizeHandler=this._resizeHandler.bind(this),g._resizeNotifier.subscribe(this._element,this._boundResizeHandler),this._viewportEl.addEventListener("mselementresize",this._resizeHandler.bind(this)),this._viewportEl.addEventListener("scroll",this._scrollHandler.bind(this)),this._viewportEl.addEventListener("MSManipulationStateChanged",this._MSManipulationStateChangedHandler.bind(this)),this._ariaEndMarker=t.document.createElement("div"),this._element.appendChild(this._ariaEndMarker),this._surfaceEl=t.document.createElement("div"),g.addClass(this._surfaceEl,M._ClassName.surface),this._viewportEl.appendChild(this._surfaceEl),this._surfaceEl.addEventListener(w.NavBarCommand._EventName._invoked,this._navbarCommandInvokedHandler.bind(this)),this._surfaceEl.addEventListener(w.NavBarCommand._EventName._splitToggle,this._navbarCommandSplitToggleHandler.bind(this)),g._addEventListener(this._surfaceEl,"focusin",this._itemsFocusHandler.bind(this),!1),this._surfaceEl.addEventListener("keydown",this._keyDownHandler.bind(this));for(var e=this.element.firstElementChild;e!==this._pageindicatorsEl;)this._surfaceEl.appendChild(e),h.process(e),e=this.element.firstElementChild;this._leftArrowEl=t.document.createElement("div"),g.addClass(this._leftArrowEl,M._ClassName.navleftarrow),g.addClass(this._leftArrowEl,M._ClassName.navarrow),this._element.appendChild(this._leftArrowEl),this._leftArrowEl.addEventListener("click",this._goLeft.bind(this)),this._leftArrowEl.style.opacity=0,this._leftArrowEl.style.visibility="hidden",this._leftArrowFadeOut=m.wrap(),this._rightArrowEl=t.document.createElement("div"),g.addClass(this._rightArrowEl,M._ClassName.navrightarrow),g.addClass(this._rightArrowEl,M._ClassName.navarrow),this._element.appendChild(this._rightArrowEl),this._rightArrowEl.addEventListener("click",this._goRight.bind(this)),this._rightArrowEl.style.opacity=0,this._rightArrowEl.style.visibility="hidden",this._rightArrowFadeOut=m.wrap(),this._keyboardBehavior=new v._KeyboardBehavior(this._surfaceEl,{scroller:this._viewportEl}),this._winKeyboard=new v._WinKeyboard(this._surfaceEl)},_goRight:function(){this._sizes.rtl?this._goPrev():this._goNext()},_goLeft:function(){this._sizes.rtl?this._goNext():this._goPrev()},_goNext:function(){this._measure();var e=this._sizes.rowsPerPage*this._sizes.columnsPerPage,t=Math.min(Math.floor(this._keyboardBehavior.currentIndex/e)+1,this._sizes.pages-1);this._keyboardBehavior.currentIndex=Math.min(e*t,this._surfaceEl.children.length),this._keyboardBehavior._focus()},_goPrev:function(){this._measure();var e=this._sizes.rowsPerPage*this._sizes.columnsPerPage,t=Math.max(0,Math.floor(this._keyboardBehavior.currentIndex/e)-1);
this._keyboardBehavior.currentIndex=Math.max(e*t,0),this._keyboardBehavior._focus()},_currentPage:{get:function(){return this.layout===y.Orientation.horizontal&&(this._measure(),this._sizes.viewportOffsetWidth>0)?Math.min(this._sizes.pages-1,Math.round(this._scrollPosition/this._sizes.viewportOffsetWidth)):0}},_resizeHandler:function(){if(!this._disposed&&this._measured){var e=this.layout===y.Orientation.horizontal?this._sizes.viewportOffsetWidth!==parseFloat(g._getComputedStyle(this._viewportEl).width):this._sizes.viewportOffsetHeight!==parseFloat(g._getComputedStyle(this._viewportEl).height);e&&(this._measured=!1,this._pendingResize||(this._pendingResize=!0,this._resizeImplBound=this._resizeImplBound||this._resizeImpl.bind(this),this._updateAppBarReference(),this._appBarEl&&this._appBarEl.winControl&&!this._appBarEl.winControl.opened?(f.schedule(this._resizeImplBound,f.Priority.idle,null,"WinJS.UI.NavBarContainer._resizeImpl"),this._appBarEl.addEventListener("beforeopen",this._resizeImplBound)):this._resizeImpl()))}},_resizeImpl:function(){!this._disposed&&this._pendingResize&&(this._pendingResize=!1,this._appBarEl&&this._appBarEl.removeEventListener("beforeopen",this._resizeImplBound),this._keyboardBehavior.currentIndex=0,this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus(this._keyboardBehavior.currentIndex),this._closeSplitIfOpen(),this._ensureVisible(this._keyboardBehavior.currentIndex,!0),this._updatePageUI())},_keyDownHandler:function(n){var i=n.keyCode;if(!n.altKey&&(i===e.pageUp||i===e.pageDown)){var r=n.target;if(g._matchesSelector(r,".win-interactive, .win-interactive *"))return;var o=this._keyboardBehavior.currentIndex;this._measure();var s=this._sizes,a=Math.floor(o/(s.columnsPerPage*s.rowsPerPage)),l=null;if(i===e.pageUp){if(this.layout===y.Orientation.horizontal){var u=a*s.columnsPerPage*s.rowsPerPage;o===u&&this._surfaceEl.children[o].winControl._buttonEl===t.document.activeElement?o-=s.columnsPerPage*s.rowsPerPage:o=u}else{var c=this._surfaceEl.children[o],d=c.offsetTop,h=d+c.offsetHeight,p=this._zooming?this._zoomPosition:this._scrollPosition;if(d>=p&&h<p+s.viewportOffsetHeight)for(;o>0&&this._surfaceEl.children[o-1].offsetTop>p;)o--;if(this._keyboardBehavior.currentIndex===o){var m=h-s.viewportOffsetHeight;for(o=Math.max(0,o-1);o>0&&this._surfaceEl.children[o-1].offsetTop>m;)o--;l=o>0?this._surfaceEl.children[o].offsetTop-this._sizes.itemMarginTop:0}}o=Math.max(o,0),this._keyboardBehavior.currentIndex=o;var f=this._surfaceEl.children[o].winControl._buttonEl;null!==l&&this._scrollTo(l),g._setActive(f,this._viewportEl)}else{if(this.layout===y.Orientation.horizontal){var _=(a+1)*s.columnsPerPage*s.rowsPerPage-1;o===_?o+=s.columnsPerPage*s.rowsPerPage:o=_}else{var c=this._surfaceEl.children[this._keyboardBehavior.currentIndex],d=c.offsetTop,h=d+c.offsetHeight,p=this._zooming?this._zoomPosition:this._scrollPosition;if(d>=p&&h<p+s.viewportOffsetHeight)for(;o<this._surfaceEl.children.length-1&&this._surfaceEl.children[o+1].offsetTop+this._surfaceEl.children[o+1].offsetHeight<p+s.viewportOffsetHeight;)o++;if(o===this._keyboardBehavior.currentIndex){var v=d+s.viewportOffsetHeight;for(o=Math.min(this._surfaceEl.children.length-1,o+1);o<this._surfaceEl.children.length-1&&this._surfaceEl.children[o+1].offsetTop+this._surfaceEl.children[o+1].offsetHeight<v;)o++;l=o<this._surfaceEl.children.length-1?this._surfaceEl.children[o+1].offsetTop-this._sizes.viewportOffsetHeight:this._scrollLength-this._sizes.viewportOffsetHeight}}o=Math.min(o,this._surfaceEl.children.length-1),this._keyboardBehavior.currentIndex=o;var f=this._surfaceEl.children[o].winControl._buttonEl;null!==l&&this._scrollTo(l);try{g._setActive(f,this._viewportEl)}catch(b){}}}},_focusHandler:function(e){var t=e.target;this._surfaceEl.contains(t)||(this._skipEnsureVisible=!0,this._keyboardBehavior._focus(this._keyboardBehavior.currentIndex))},_itemsFocusHandler:function(e){var t=e.target;if(t!==this._surfaceEl){for(;t.parentNode!==this._surfaceEl;)t=t.parentNode;for(var n=-1;t;)n++,t=t.previousSibling;this._skipEnsureVisible?this._skipEnsureVisible=!1:this._ensureVisible(n)}},_ensureVisible:function(e,t){if(this._measure(),this.layout===y.Orientation.horizontal){var n=Math.floor(e/(this._sizes.rowsPerPage*this._sizes.columnsPerPage));this._scrollTo(n*this._sizes.viewportOffsetWidth,t)}else{var i,r=this._surfaceEl.children[e];i=e>0?r.offsetTop-this._sizes.itemMarginTop:0;var o;o=e<this._surfaceEl.children.length-1?this._surfaceEl.children[e+1].offsetTop-this._sizes.viewportOffsetHeight:this._scrollLength-this._sizes.viewportOffsetHeight;var s=this._zooming?this._zoomPosition:this._scrollPosition;s=Math.max(s,o),s=Math.min(s,i),this._scrollTo(s,t)}},_scrollTo:function(e,t){if(this._measure(),e=this.layout===y.Orientation.horizontal?Math.max(0,Math.min(this._scrollLength-this._sizes.viewportOffsetWidth,e)):Math.max(0,Math.min(this._scrollLength-this._sizes.viewportOffsetHeight,e)),t){if(Math.abs(this._scrollPosition-e)>1){this._zooming=!1,this._scrollPosition=e,this._updatePageUI(),this._duringForceLayout||this._closeSplitIfOpen();var n={};n[this.layout===y.Orientation.horizontal?"scrollLeft":"scrollTop"]=e,g.setScrollPosition(this._viewportEl,n)}}else(!this._zooming&&Math.abs(this._scrollPosition-e)>1||this._zooming&&Math.abs(this._zoomPosition-e)>1)&&(this._zoomPosition=e,this._zooming=!0,this.layout===y.Orientation.horizontal?(this._viewportEl.style.msScrollSnapType="none",g._zoomTo(this._viewportEl,{contentX:e,contentY:0,viewportX:0,viewportY:0})):g._zoomTo(this._viewportEl,{contentX:0,contentY:e,viewportX:0,viewportY:0}),this._closeSplitIfOpen())},_MSManipulationStateChangedHandler:function(e){this._currentManipulationState=e.currentState,e.currentState===e.MS_MANIPULATION_STATE_ACTIVE&&(this._viewportEl.style.msScrollSnapType="",this._zooming=!1),t.clearTimeout(this._manipulationStateTimeoutId),e.currentState===e.MS_MANIPULATION_STATE_STOPPED&&(this._manipulationStateTimeoutId=t.setTimeout(function(){this._viewportEl.style.msScrollSnapType="",this._zooming=!1,this._updateCurrentIndexIfPageChanged()}.bind(this),100))},_scrollHandler:function(){if(!this._disposed&&(this._measured=!1,!this._checkingScroll)){var e=this;this._checkingScroll=i._requestAnimationFrame(function(){if(!e._disposed){e._checkingScroll=null;var t=g.getScrollPosition(e._viewportEl)[e.layout===y.Orientation.horizontal?"scrollLeft":"scrollTop"];t!==e._scrollPosition&&(e._scrollPosition=t,e._closeSplitIfOpen()),e._updatePageUI(),e._zooming||e._currentManipulationState!==x||e._updateCurrentIndexIfPageChanged()}})}},_updateCurrentIndexIfPageChanged:function(){if(this.layout===y.Orientation.horizontal){this._measure();var e=this._currentPage,n=e*this._sizes.rowsPerPage*this._sizes.columnsPerPage,i=(e+1)*this._sizes.rowsPerPage*this._sizes.columnsPerPage-1;(this._keyboardBehavior.currentIndex<n||this._keyboardBehavior.currentIndex>i)&&(this._keyboardBehavior.currentIndex=n,this.element.contains(t.document.activeElement)&&this._keyboardBehavior._focus(this._keyboardBehavior.currentIndex))}},_measure:function(){if(!this._measured){this._resizeImpl(),this._writeProfilerMark("measure,StartTM");var e=this._sizes;e.rtl="rtl"===g._getComputedStyle(this._element).direction;var t=this._surfaceEl.children.length;if(t>0){if(!this._sizes.itemMeasured){this._writeProfilerMark("measureItem,StartTM");var n=this._surfaceEl.firstElementChild;n.style.margin="",n.style.width="";var i=g._getComputedStyle(n);e.itemOffsetWidth=parseFloat(g._getComputedStyle(n).width),0===n.offsetWidth&&(e.itemOffsetWidth=0),e.itemMarginLeft=parseFloat(i.marginLeft),e.itemMarginRight=parseFloat(i.marginRight),e.itemWidth=e.itemOffsetWidth+e.itemMarginLeft+e.itemMarginRight,e.itemOffsetHeight=parseFloat(g._getComputedStyle(n).height),0===n.offsetHeight&&(e.itemOffsetHeight=0),e.itemMarginTop=parseFloat(i.marginTop),e.itemMarginBottom=parseFloat(i.marginBottom),e.itemHeight=e.itemOffsetHeight+e.itemMarginTop+e.itemMarginBottom,e.itemOffsetWidth>0&&e.itemOffsetHeight>0&&(e.itemMeasured=!0),this._writeProfilerMark("measureItem,StopTM")}if(e.viewportOffsetWidth=parseFloat(g._getComputedStyle(this._viewportEl).width),0===this._viewportEl.offsetWidth&&(e.viewportOffsetWidth=0),e.viewportOffsetHeight=parseFloat(g._getComputedStyle(this._viewportEl).height),0===this._viewportEl.offsetHeight&&(e.viewportOffsetHeight=0),0===e.viewportOffsetWidth||0===e.itemOffsetHeight?this._measured=!1:this._measured=!0,this.layout===y.Orientation.horizontal){this._scrollPosition=g.getScrollPosition(this._viewportEl).scrollLeft,e.leadingEdge=this._leftArrowEl.offsetWidth+parseInt(g._getComputedStyle(this._leftArrowEl).marginLeft)+parseInt(g._getComputedStyle(this._leftArrowEl).marginRight);var r=e.viewportOffsetWidth-2*e.leadingEdge;e.maxColumns=e.itemWidth?Math.max(1,Math.floor(r/e.itemWidth)):1,e.rowsPerPage=Math.min(this.maxRows,Math.ceil(t/e.maxColumns)),e.columnsPerPage=Math.min(e.maxColumns,t),e.pages=Math.ceil(t/(e.columnsPerPage*e.rowsPerPage)),e.trailingEdge=e.leadingEdge,e.extraSpace=r-e.columnsPerPage*e.itemWidth,this._scrollLength=e.viewportOffsetWidth*e.pages,this._keyboardBehavior.fixedSize=e.rowsPerPage,this._keyboardBehavior.fixedDirection=v._KeyboardBehavior.FixedDirection.height,this._surfaceEl.style.height=e.itemHeight*e.rowsPerPage+"px",this._surfaceEl.style.width=this._scrollLength+"px"}else this._scrollPosition=this._viewportEl.scrollTop,e.leadingEdge=0,e.rowsPerPage=t,e.columnsPerPage=1,e.pages=1,e.trailingEdge=0,this._scrollLength=this._viewportEl.scrollHeight,this._keyboardBehavior.fixedSize=e.columnsPerPage,this._keyboardBehavior.fixedDirection=v._KeyboardBehavior.FixedDirection.width,this._surfaceEl.style.height="",this._surfaceEl.style.width="";this._updateGridStyles()}else e.pages=1,this._hasPreviousContent=!1,this._hasNextContent=!1,this._surfaceEl.style.height="",this._surfaceEl.style.width="";this._writeProfilerMark("measure,StopTM")}},_updateGridStyles:function(){for(var e=this._sizes,t=this._surfaceEl.children.length,n=0;t>n;n++){var i,r,o=this._surfaceEl.children[n],s="";if(this.layout===y.Orientation.horizontal){var a=Math.floor(n/e.rowsPerPage),l=a%e.columnsPerPage===0,u=a%e.columnsPerPage===e.columnsPerPage-1,c=e.trailingEdge;if(this.fixedSize)c+=e.extraSpace;else{var d=e.extraSpace-(e.maxColumns-e.columnsPerPage)*e.itemWidth;s=e.itemOffsetWidth+d/e.maxColumns+"px"}var h,p;e.rtl?(h=l?e.leadingEdge:0,p=u?c:0):(h=u?c:0,p=l?e.leadingEdge:0),i=h+e.itemMarginRight+"px",r=p+e.itemMarginLeft+"px"}else i="",r="";o.style.marginRight!==i&&(o.style.marginRight=i),o.style.marginLeft!==r&&(o.style.marginLeft=r),o.style.width!==s&&(o.style.width=s)}},_updatePageUI:function(){this._measure();var e=this._currentPage;this._hasPreviousContent=0!==e,this._hasNextContent=e<this._sizes.pages-1,this._updateArrows(),this._indicatorCount!==this._sizes.pages&&(this._indicatorCount=this._sizes.pages,this._pageindicatorsEl.innerHTML=new Array(this._sizes.pages+1).join('<span class="'+M._ClassName.indicator+'"></span>'));for(var t=0;t<this._pageindicatorsEl.children.length;t++)t===e?g.addClass(this._pageindicatorsEl.children[t],M._ClassName.currentindicator):g.removeClass(this._pageindicatorsEl.children[t],M._ClassName.currentindicator);if(this._sizes.pages>1?(this._viewportEl.style.overflowX=this._panningDisabled?"hidden":"",this._pageindicatorsEl.style.visibility=""):(this._viewportEl.style.overflowX="hidden",this._pageindicatorsEl.style.visibility="hidden"),this._sizes.pages<=1||this._layout!==y.Orientation.horizontal)this._ariaStartMarker.removeAttribute("aria-flowto"),this._ariaEndMarker.removeAttribute("x-ms-aria-flowfrom");else{var n=e*this._sizes.rowsPerPage*this._sizes.columnsPerPage,i=this._surfaceEl.children[n].winControl._buttonEl;g._ensureId(i),this._ariaStartMarker.setAttribute("aria-flowto",i.id);var r=Math.min(this._surfaceEl.children.length-1,(e+1)*this._sizes.rowsPerPage*this._sizes.columnsPerPage-1),o=this._surfaceEl.children[r].winControl._buttonEl;g._ensureId(o),this._ariaEndMarker.setAttribute("x-ms-aria-flowfrom",o.id)}},_closeSplitIfOpen:function(){this._currentSplitNavItem&&(this._currentSplitNavItem.splitOpened&&this._currentSplitNavItem._toggleSplit(),this._currentSplitNavItem=null)},_updateArrows:function(){var e=this._sizes.rtl?this._hasNextContent:this._hasPreviousContent,t=this._sizes.rtl?this._hasPreviousContent:this._hasNextContent,n=this;(this._mouseInViewport||this._panningDisabled)&&e?(this._leftArrowWaitingToFadeOut&&this._leftArrowWaitingToFadeOut.cancel(),this._leftArrowWaitingToFadeOut=null,this._leftArrowFadeOut&&this._leftArrowFadeOut.cancel(),this._leftArrowFadeOut=null,this._leftArrowEl.style.visibility="",this._leftArrowFadeIn=this._leftArrowFadeIn||u.fadeIn(this._leftArrowEl)):(e?this._leftArrowWaitingToFadeOut=this._leftArrowWaitingToFadeOut||m.timeout(c._animationTimeAdjustment(S)):(this._leftArrowWaitingToFadeOut&&this._leftArrowWaitingToFadeOut.cancel(),this._leftArrowWaitingToFadeOut=m.wrap()),this._leftArrowWaitingToFadeOut.then(function(){this._leftArrowFadeIn&&this._leftArrowFadeIn.cancel(),this._leftArrowFadeIn=null,this._leftArrowFadeOut=this._leftArrowFadeOut||u.fadeOut(this._leftArrowEl).then(function(){n._leftArrowEl.style.visibility="hidden"})}.bind(this))),(this._mouseInViewport||this._panningDisabled)&&t?(this._rightArrowWaitingToFadeOut&&this._rightArrowWaitingToFadeOut.cancel(),this._rightArrowWaitingToFadeOut=null,this._rightArrowFadeOut&&this._rightArrowFadeOut.cancel(),this._rightArrowFadeOut=null,this._rightArrowEl.style.visibility="",this._rightArrowFadeIn=this._rightArrowFadeIn||u.fadeIn(this._rightArrowEl)):(t?this._rightArrowWaitingToFadeOut=this._rightArrowWaitingToFadeOut||m.timeout(c._animationTimeAdjustment(S)):(this._rightArrowWaitingToFadeOut&&this._rightArrowWaitingToFadeOut.cancel(),this._rightArrowWaitingToFadeOut=m.wrap()),this._rightArrowWaitingToFadeOut.then(function(){this._rightArrowFadeIn&&this._rightArrowFadeIn.cancel(),this._rightArrowFadeIn=null,this._rightArrowFadeOut=this._rightArrowFadeOut||u.fadeOut(this._rightArrowEl).then(function(){n._rightArrowEl.style.visibility="hidden"})}.bind(this)))},_navbarCommandInvokedHandler:function(e){for(var t=e.target,n=-1;t;)n++,t=t.previousSibling;this._fireEvent(M._EventName.invoked,{index:n,navbarCommand:e.target.winControl,data:this._repeater?this._repeater.data.getAt(n):null})},_navbarCommandSplitToggleHandler:function(e){for(var t=e.target,n=-1;t;)n++,t=t.previousSibling;var i=e.target.winControl;this._closeSplitIfOpen(),i.splitOpened&&(this._currentSplitNavItem=i),this._fireEvent(M._EventName.splitToggle,{opened:i.splitOpened,index:n,navbarCommand:i,data:this._repeater?this._repeater.data.getAt(n):null})},_fireEvent:function(e,n){var i=t.document.createEvent("CustomEvent");i.initCustomEvent(e,!0,!1,n),this.element.dispatchEvent(i)},_writeProfilerMark:function(e){var t="WinJS.UI.NavBarContainer:"+this._id+":"+e;l(t),s.log&&s.log(t,null,"navbarcontainerprofiler")},dispose:function(){this._disposed||(this._disposed=!0,this._appBarEl&&(this._appBarEl.removeEventListener("beforeopen",this._closeSplitAndResetBound),this._appBarEl.removeEventListener("beforeopen",this._resizeImplBound)),p.removeEventListener("navigated",this._closeSplitAndResetBound),this._leftArrowWaitingToFadeOut&&this._leftArrowWaitingToFadeOut.cancel(),this._leftArrowFadeOut&&this._leftArrowFadeOut.cancel(),this._leftArrowFadeIn&&this._leftArrowFadeIn.cancel(),this._rightArrowWaitingToFadeOut&&this._rightArrowWaitingToFadeOut.cancel(),this._rightArrowFadeOut&&this._rightArrowFadeOut.cancel(),this._rightArrowFadeIn&&this._rightArrowFadeIn.cancel(),g._resizeNotifier.unsubscribe(this._element,this._boundResizeHandler),this._removeDataChangingEvents(),this._removeDataChangedEvents())}},{_ClassName:{navbarcontainer:"win-navbarcontainer",pageindicators:"win-navbarcontainer-pageindicator-box",indicator:"win-navbarcontainer-pageindicator",currentindicator:"win-navbarcontainer-pageindicator-current",vertical:"win-navbarcontainer-vertical",horizontal:"win-navbarcontainer-horizontal",viewport:"win-navbarcontainer-viewport",surface:"win-navbarcontainer-surface",navarrow:"win-navbarcontainer-navarrow",navleftarrow:"win-navbarcontainer-navleft",navrightarrow:"win-navbarcontainer-navright"},_EventName:{invoked:k.invoked,splitToggle:k.splittoggle}});return n.Class.mix(M,_.DOMEventMixin),M})})}),i("require-style!less/styles-navbar",[],function(){}),i("require-style!less/colors-navbar",[],function(){}),i("WinJS/Controls/NavBar",["../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_Events","../Core/_WriteProfilerMark","../Promise","../Scheduler","../Utilities/_ElementUtilities","../Utilities/_Hoverable","../_Accents","./_LegacyAppBar","./NavBar/_Command","./NavBar/_Container","require-style!less/styles-navbar","require-style!less/colors-navbar"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p){"use strict";c.createAccentRule("html.win-hoverable .win-navbarcommand-splitbutton.win-navbarcommand-splitbutton-opened:hover",[{name:"background-color",value:c.ColorTypes.listSelectHover}]),c.createAccentRule("html.win-hoverable .win-navbarcommand-splitbutton.win-navbarcommand-splitbutton-opened:hover.win-pressed",[{name:"background-color",value:c.ColorTypes.listSelectPress}]),c.createAccentRule(".win-navbarcommand-splitbutton.win-navbarcommand-splitbutton-opened",[{name:"background-color",value:c.ColorTypes.listSelectRest}]),c.createAccentRule(".win-navbarcommand-splitbutton.win-navbarcommand-splitbutton-opened.win-pressed",[{name:"background-color",value:c.ColorTypes.listSelectPress}]);var m="custom";n.Namespace.define("WinJS.UI",{NavBar:n.Namespace._lazy(function(){var u="childrenprocessed",c=r._createEventProperty,h=n.Class.derive(d._LegacyAppBar,function(e,n){l._deprecated(p.navBarIsDeprecated),n=n||{},n=i._shallowCopy(n),n.placement=n.placement||"top",n.layout=m,n.closedDisplayMode=n.closedDisplayMode||"minimal",d._LegacyAppBar.call(this,e,n),this._element.addEventListener("beforeopen",this._handleBeforeShow.bind(this)),l.addClass(this.element,h._ClassName.navbar),t.Windows.ApplicationModel.DesignMode.designModeEnabled?this._processChildren():a.schedule(this._processChildren.bind(this),a.Priority.idle,null,"WinJS.UI.NavBar.processChildren")},{closedDisplayMode:{get:function(){return this._closedDisplayMode},set:function(e){var t="none"===e?"none":"minimal";Object.getOwnPropertyDescriptor(d._LegacyAppBar.prototype,"closedDisplayMode").set.call(this,t),this._closedDisplayMode=t}},onchildrenprocessed:c(u),_processChildren:function(){if(!this._processed){this._processed=!0,this._writeProfilerMark("processChildren,StartTM");var e=this,t=s.as();return this._processors&&this._processors.forEach(function(n){for(var i=0,r=e.element.children.length;r>i;i++)!function(e){t=t.then(function(){n(e)})}(e.element.children[i])}),t.then(function(){e._writeProfilerMark("processChildren,StopTM"),e._fireEvent(h._EventName.childrenProcessed)},function(){e._writeProfilerMark("processChildren,StopTM"),e._fireEvent(h._EventName.childrenProcessed)})}return s.wrap()},_show:function(){if(!this.disabled){var e=this;this._processChildren().then(function(){d._LegacyAppBar.prototype._show.call(e)})}},_handleBeforeShow:function(){if(!this._disposed)for(var e=this.element.querySelectorAll(".win-navbarcontainer"),t=0;t<e.length;t++)e[t].winControl.forceLayout()},_fireEvent:function(t,n){var i=e.document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!1,n||{}),this.element.dispatchEvent(i)},_writeProfilerMark:function(e){o("WinJS.UI.NavBar:"+this._id+":"+e)}},{_ClassName:{navbar:"win-navbar"},_EventName:{childrenProcessed:u},isDeclarativeControlContainer:i.markSupportedForProcessing(function(e,t){if(e._processed)for(var n=0,i=e.element.children.length;i>n;n++)t(e.element.children[n]);else e._processors=e._processors||[],e._processors.push(t)})}),p={get navBarIsDeprecated(){return"NavBar is deprecated and may not be available in future releases. Instead, use a WinJS SplitView to display navigation targets within the app."}};return h})})}),i("require-style!less/styles-viewbox",[],function(){}),i("WinJS/Controls/ViewBox",["../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Scheduler","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities","../Utilities/_Hoverable","./ElementResizeInstrument","require-style!less/styles-viewbox"],function(e,t,n,i,r,o,s,a,l,u,c){"use strict";t.Namespace.define("WinJS.UI",{ViewBox:t.Namespace._lazy(function(){var r={get invalidViewBoxChildren(){return"ViewBox expects to be provided with only one child element"}},u=t.Class.define(function(t){this._disposed=!1,this._element=t||e.document.createElement("div");var n=this.element;n.winControl=this,l.addClass(n,"win-disposable"),l.addClass(n,"win-viewbox"),this._handleResizeBound=this._handleResize.bind(this),l._resizeNotifier.subscribe(n,this._handleResizeBound),this._elementResizeInstrument=new c._ElementResizeInstrument,n.appendChild(this._elementResizeInstrument.element),this._elementResizeInstrument.addEventListener("resize",this._handleResizeBound);var i=this;l._inDom(n).then(function(){i._disposed||i._elementResizeInstrument.addedToDom()}),this.forceLayout()},{_sizer:null,_element:null,element:{get:function(){return this._element}},_rtl:{get:function(){return"rtl"===l._getComputedStyle(this.element).direction}},_initialize:function(){var e=this.element,t=Array.prototype.slice.call(e.children);-1===t.indexOf(this._elementResizeInstrument.element)&&e.appendChild(this._elementResizeInstrument.element);var s=this;if(-1===t.indexOf(this._sizer)){var a=t.filter(function(e){return e!==s._elementResizeInstrument.element});if(n.validation&&1!==a.length)throw new i("WinJS.UI.ViewBox.InvalidChildren",r.invalidViewBoxChildren);this._sizer&&(this._sizer.onresize=null);var l=a[0];if(this._sizer=l,0===e.clientWidth&&0===e.clientHeight){var s=this;o.schedule(function(){s._updateLayout()},o.Priority.normal,null,"WinJS.UI.ViewBox._updateLayout")}}},_updateLayout:function(){var e=this._sizer;if(e){var t=this.element,i=e.clientWidth,r=e.clientHeight,o=t.clientWidth,s=t.clientHeight,a=o/i,l=s/r,u=Math.min(a,l),c=Math.abs(o-i*u)/2,d=Math.abs(s-r*u)/2,h=this._rtl;this._sizer.style[n._browserStyleEquivalents.transform.scriptName]="translate("+(h?"-":"")+c+"px,"+d+"px) scale("+u+")",this._sizer.style[n._browserStyleEquivalents["transform-origin"].scriptName]=h?"top right":"top left"}this._layoutCompleteCallback()},_handleResize:function(){if(!this._resizing){this._resizing=this._resizing||0,this._resizing++;try{this._updateLayout()}finally{this._resizing--}}},_layoutCompleteCallback:function(){},dispose:function(){this._disposed||(this.element&&l._resizeNotifier.unsubscribe(this.element,this._handleResizeBound),this._elementResizeInstrument.dispose(),this._disposed=!0,a.disposeSubTree(this._element))},forceLayout:function(){this._initialize(),this._updateLayout()}});return t.Class.mix(u,s.DOMEventMixin),u})})}),i("require-style!less/styles-contentdialog",[],function(){}),i("require-style!less/colors-contentdialog",[],function(){}),i("WinJS/Controls/ContentDialog",["../Application","../Utilities/_Dispose","../_Accents","../Promise","../_Signal","../_LightDismissService","../Core/_BaseUtils","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_Events","../Core/_ErrorFromName","../Core/_Resources","../Utilities/_Control","../Utilities/_ElementUtilities","../Utilities/_KeyboardInfo","../Utilities/_Hoverable","../Animations","require-style!less/styles-contentdialog","require-style!less/colors-contentdialog"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g){"use strict";n.createAccentRule(".win-contentdialog-dialog",[{name:"outline-color",value:n.ColorTypes.accent}]),u.Namespace.define("WinJS.UI",{ContentDialog:u.Namespace._lazy(function(){function e(e){if("undefined"==typeof b){var t=a.document.createElement("div");t.style.position="-ms-device-fixed",b="-ms-device-fixed"===m._getComputedStyle(t).position}return b}function n(e){return i._cancelBlocker(e,function(){e.cancel()})}function l(e){e.ensuredFocusedElementInView=!0,this.dialog._renderForInputPane(e.occludedRect.height)}function h(){this.dialog._clearInputPaneRendering()}function _(){}function v(e,t){e._interruptibleWorkPromises=e._interruptibleWorkPromises||[];var n=new r;e._interruptibleWorkPromises.push(t(e,n.promise)),n.complete()}function y(){(this._interruptibleWorkPromises||[]).forEach(function(e){e.cancel()})}var b,C={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get controlDisposed(){return"Cannot interact with the control after it has been disposed"},get contentDialogAlreadyShowing(){return"Cannot show a ContentDialog if there is already a ContentDialog that is showing"}},w={none:"none",primary:"primary",secondary:"secondary"},I={contentDialog:"win-contentdialog",backgroundOverlay:"win-contentdialog-backgroundoverlay",dialog:"win-contentdialog-dialog",title:"win-contentdialog-title",content:"win-contentdialog-content",commands:"win-contentdialog-commands",primaryCommand:"win-contentdialog-primarycommand",secondaryCommand:"win-contentdialog-secondarycommand",_verticalAlignment:"win-contentdialog-verticalalignment",_scroller:"win-contentdialog-scroller",_column0or1:"win-contentdialog-column0or1",_visible:"win-contentdialog-visible",_tabStop:"win-contentdialog-tabstop",_commandSpacer:"win-contentdialog-commandspacer",_deviceFixedSupported:"win-contentdialog-devicefixedsupported"},S={beforeShow:"beforeshow",afterShow:"aftershow",beforeHide:"beforehide",afterHide:"afterhide"},E={Init:u.Class.define(null,{name:"Init",hidden:!0,enter:function(){var e=this.dialog;e._dismissable=new o.ModalElement({element:e._dom.root,tabIndex:e._dom.root.hasAttribute("tabIndex")?e._dom.root.tabIndex:-1,onLightDismiss:function(){e.hide(w.none)},onTakeFocus:function(t){e._dismissable.restoreFocus()||m._tryFocusOnAnyElement(e._dom.dialog,t)}}),this.dialog._dismissedSignal=null,this.dialog._setState(E.Hidden,!1)},exit:_,show:function(){throw"It's illegal to call show on the Init state"},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Hidden:u.Class.define(null,{name:"Hidden",hidden:!0,enter:function(e){e&&this.show()},exit:_,show:function(){var e=this.dialog._dismissedSignal=new r;return this.dialog._setState(E.BeforeShow),e.promise},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),BeforeShow:u.Class.define(null,{name:"BeforeShow",hidden:!0,enter:function(){v(this,function(e,t){return t.then(function(){return e.dialog._fireBeforeShow()}).then(function(t){return t||e.dialog._cancelDismissalPromise(null),t}).then(function(t){t?e.dialog._setState(E.Showing):e.dialog._setState(E.Hidden,!1)})})},exit:y,show:function(){return i.wrapError(new d("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",C.contentDialogAlreadyShowing))},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Showing:u.Class.define(null,{name:"Showing",hidden:{get:function(){return!!this._pendingHide}},enter:function(){v(this,function(e,t){return t.then(function(){return e._pendingHide=null,m.addClass(e.dialog._dom.root,I._visible),e.dialog._addExternalListeners(),f._KeyboardInfo._visible&&e.dialog._renderForInputPane(),o.shown(e.dialog._dismissable),e.dialog._playEntranceAnimation()}).then(function(){e.dialog._fireEvent(S.afterShow)}).then(function(){e.dialog._setState(E.Shown,e._pendingHide)})})},exit:y,show:function(){if(this._pendingHide){var e=this._pendingHide.dismissalResult;return this._pendingHide=null,this.dialog._resetDismissalPromise(e,new r).promise}return i.wrapError(new d("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",C.contentDialogAlreadyShowing))},hide:function(e){this._pendingHide={dismissalResult:e}},onCommandClicked:_,onInputPaneShown:l,onInputPaneHidden:h}),Shown:u.Class.define(null,{name:"Shown",hidden:!1,enter:function(e){e&&this.hide(e.dismissalResult)},exit:_,show:function(){return i.wrapError(new d("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",C.contentDialogAlreadyShowing))},hide:function(e){this.dialog._setState(E.BeforeHide,e)},onCommandClicked:function(e){this.hide(e)},onInputPaneShown:l,onInputPaneHidden:h}),BeforeHide:u.Class.define(null,{name:"BeforeHide",hidden:!1,enter:function(e){v(this,function(t,n){return n.then(function(){return t.dialog._fireBeforeHide(e)}).then(function(n){n?t.dialog._setState(E.Hiding,e):t.dialog._setState(E.Shown,null)})})},exit:y,show:function(){return i.wrapError(new d("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",C.contentDialogAlreadyShowing))},hide:_,onCommandClicked:_,onInputPaneShown:l,onInputPaneHidden:h}),Hiding:u.Class.define(null,{name:"Hiding",hidden:{get:function(){return!this._showIsPending}},enter:function(e){v(this,function(t,n){return n.then(function(){t._showIsPending=!1,t.dialog._resetDismissalPromise(e,null)}).then(function(){return t.dialog._playExitAnimation()}).then(function(){t.dialog._removeExternalListeners(),o.hidden(t.dialog._dismissable),m.removeClass(t.dialog._dom.root,I._visible),t.dialog._clearInputPaneRendering(),t.dialog._fireAfterHide(e)}).then(function(){t.dialog._setState(E.Hidden,t._showIsPending)})})},exit:y,show:function(){return this._showIsPending?i.wrapError(new d("WinJS.UI.ContentDialog.ContentDialogAlreadyShowing",C.contentDialogAlreadyShowing)):(this._showIsPending=!0,this.dialog._dismissedSignal=new r,this.dialog._dismissedSignal.promise)},hide:function(e){this._showIsPending&&(this._showIsPending=!1,this.dialog._resetDismissalPromise(e,null))},onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_}),Disposed:u.Class.define(null,{name:"Disposed",hidden:!0,enter:function(){o.hidden(this.dialog._dismissable),this.dialog._removeExternalListeners(),this.dialog._dismissedSignal&&this.dialog._dismissedSignal.error(new d("WinJS.UI.ContentDialog.ControlDisposed",C.controlDisposed))},exit:_,show:function(){return i.wrapError(new d("WinJS.UI.ContentDialog.ControlDisposed",C.controlDisposed))},hide:_,onCommandClicked:_,onInputPaneShown:_,onInputPaneHidden:_})},x=u.Class.define(function(e,t){if(e&&e.winControl)throw new d("WinJS.UI.ContentDialog.DuplicateConstruction",C.duplicateConstruction);t=t||{},this._onInputPaneShownBound=this._onInputPaneShown.bind(this),this._onInputPaneHiddenBound=this._onInputPaneHidden.bind(this),this._onUpdateInputPaneRenderingBound=this._onUpdateInputPaneRendering.bind(this),this._disposed=!1,this._currentFocus=null,this._rendered={registeredForResize:!1,resizedForInputPane:!1,top:"",bottom:""},this._initializeDom(e||a.document.createElement("div")),this._setState(E.Init),this.title="",this.primaryCommandText="",this.primaryCommandDisabled=!1,this.secondaryCommandText="",this.secondaryCommandDisabled=!1,p.setOptions(this,t)},{element:{get:function(){return this._dom.root}},title:{get:function(){return this._title},set:function(e){e=e||"",this._title!==e&&(this._title=e,this._dom.title.textContent=e,this._dom.title.style.display=e?"":"none")}},primaryCommandText:{get:function(){return this._primaryCommandText},set:function(e){e=e||"",this._primaryCommandText!==e&&(this._primaryCommandText=e,this._dom.commands[0].textContent=e,this._updateCommandsUI())}},secondaryCommandText:{get:function(){return this._secondaryCommandText},set:function(e){e=e||"",this._secondaryCommandText!==e&&(this._secondaryCommandText=e,this._dom.commands[1].textContent=e,this._updateCommandsUI())}},primaryCommandDisabled:{get:function(){return this._primaryCommandDisabled},set:function(e){e=!!e,this._primaryCommandDisabled!==e&&(this._primaryCommandDisabled=e,this._dom.commands[0].disabled=e)}},secondaryCommandDisabled:{get:function(){return this._secondaryCommandDisabled},set:function(e){e=!!e,this._secondaryCommandDisabled!==e&&(this._secondaryCommandDisabled=e,this._dom.commands[1].disabled=e)}},hidden:{get:function(){return this._state.hidden},
set:function(e){if(!e&&this._state.hidden){var t=function(){};this.show().done(t,t)}else e&&!this._state.hidden&&this.hide(w.none)}},dispose:function(){this._disposed||(this._setState(E.Disposed),this._disposed=!0,m._resizeNotifier.unsubscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),t._disposeElement(this._dom.content))},show:function(){return this._state.show()},hide:function(e){this._state.hide(void 0===e?w.none:e)},_initializeDom:function(t){var n=a.document.createElement("div");n.className=I.content,m._reparentChildren(t,n),t.winControl=this,m.addClass(t,I.contentDialog),m.addClass(t,I._verticalAlignment),m.addClass(t,"win-disposable"),t.innerHTML='<div class="'+I.backgroundOverlay+'"></div><div class="'+I._tabStop+'"></div><div tabindex="-1" role="dialog" class="'+I.dialog+'"><h2 class="'+I.title+'" role="heading"></h2><div class="'+I._scroller+'"></div><div class="'+I.commands+'"><button type="button" class="'+I._commandSpacer+' win-button"></button><button type="button" class="'+I.primaryCommand+' win-button"></button><button type="button" class="'+I.secondaryCommand+' win-button"></button></div></div><div class="'+I._tabStop+'"></div><div class="'+I._column0or1+'"></div>';var i={};i.root=t,i.backgroundOverlay=i.root.firstElementChild,i.startBodyTab=i.backgroundOverlay.nextElementSibling,i.dialog=i.startBodyTab.nextElementSibling,i.title=i.dialog.firstElementChild,i.scroller=i.title.nextElementSibling,i.commandContainer=i.scroller.nextElementSibling,i.commandSpacer=i.commandContainer.firstElementChild,i.commands=[],i.commands.push(i.commandSpacer.nextElementSibling),i.commands.push(i.commands[0].nextElementSibling),i.endBodyTab=i.dialog.nextElementSibling,i.content=n,this._dom=i,i.scroller.appendChild(i.content),m._ensureId(i.title),m._ensureId(i.startBodyTab),m._ensureId(i.endBodyTab),i.dialog.setAttribute("aria-labelledby",i.title.id),i.startBodyTab.setAttribute("x-ms-aria-flowfrom",i.endBodyTab.id),i.endBodyTab.setAttribute("aria-flowto",i.startBodyTab.id),this._updateTabIndices(),i.root.addEventListener("keydown",this._onKeyDownEnteringElement.bind(this),!0),m._addEventListener(i.root,"pointerdown",this._onPointerDown.bind(this)),m._addEventListener(i.root,"pointerup",this._onPointerUp.bind(this)),i.root.addEventListener("click",this._onClick.bind(this)),m._addEventListener(i.startBodyTab,"focusin",this._onStartBodyTabFocusIn.bind(this)),m._addEventListener(i.endBodyTab,"focusin",this._onEndBodyTabFocusIn.bind(this)),i.commands[0].addEventListener("click",this._onCommandClicked.bind(this,w.primary)),i.commands[1].addEventListener("click",this._onCommandClicked.bind(this,w.secondary)),e()&&m.addClass(i.root,I._deviceFixedSupported)},_updateCommandsUI:function(){this._dom.commands[0].style.display=this.primaryCommandText?"":"none",this._dom.commands[1].style.display=this.secondaryCommandText?"":"none",this._dom.commandSpacer.style.display=this.primaryCommandText&&!this.secondaryCommandText||!this.primaryCommandText&&this.secondaryCommandText?"":"none"},_updateTabIndices:function(){this._updateTabIndicesThrottled||(this._updateTabIndicesThrottled=s._throttledFunction(100,this._updateTabIndicesImpl.bind(this))),this._updateTabIndicesThrottled()},_updateTabIndicesImpl:function(){var e=m._getHighAndLowTabIndices(this._dom.content);this._dom.startBodyTab.tabIndex=e.lowest,this._dom.commands[0].tabIndex=e.highest,this._dom.commands[1].tabIndex=e.highest,this._dom.endBodyTab.tabIndex=e.highest},_elementInDialog:function(e){return this._dom.dialog.contains(e)||e===this._dom.startBodyTab||e===this._dom.endBodyTab},_onCommandClicked:function(e){this._state.onCommandClicked(e)},_onPointerDown:function(e){e.stopPropagation(),this._elementInDialog(e.target)||e.preventDefault()},_onPointerUp:function(e){e.stopPropagation(),this._elementInDialog(e.target)||e.preventDefault()},_onClick:function(e){e.stopPropagation(),this._elementInDialog(e.target)||e.preventDefault()},_onKeyDownEnteringElement:function(e){e.keyCode===m.Key.tab&&this._updateTabIndices()},_onStartBodyTabFocusIn:function(){m._focusLastFocusableElement(this._dom.dialog)},_onEndBodyTabFocusIn:function(){m._focusFirstFocusableElement(this._dom.dialog)},_onInputPaneShown:function(e){this._state.onInputPaneShown(e.detail.originalEvent)},_onInputPaneHidden:function(){this._state.onInputPaneHidden()},_onUpdateInputPaneRendering:function(){this._renderForInputPane()},_setState:function(e,t){this._disposed||(this._state&&this._state.exit(),this._state=new e,this._state.dialog=this,this._state.enter(t))},_resetDismissalPromise:function(e,t){var n=this._dismissedSignal,i=this._dismissedSignal=t;return n.complete({result:e}),i},_cancelDismissalPromise:function(e){var t=this._dismissedSignal,n=this._dismissedSignal=e;return t.cancel(),n},_fireEvent:function(e,t){t=t||{};var n=t.detail||null,i=!!t.cancelable,r=a.document.createEvent("CustomEvent");return r.initCustomEvent(e,!0,i,n),this._dom.root.dispatchEvent(r)},_fireBeforeShow:function(){return this._fireEvent(S.beforeShow,{cancelable:!0})},_fireBeforeHide:function(e){return this._fireEvent(S.beforeHide,{detail:{result:e},cancelable:!0})},_fireAfterHide:function(e){this._fireEvent(S.afterHide,{detail:{result:e}})},_playEntranceAnimation:function(){return n(g.fadeIn(this._dom.root))},_playExitAnimation:function(){return n(g.fadeOut(this._dom.root))},_addExternalListeners:function(){m._inputPaneListener.addEventListener(this._dom.root,"showing",this._onInputPaneShownBound),m._inputPaneListener.addEventListener(this._dom.root,"hiding",this._onInputPaneHiddenBound)},_removeExternalListeners:function(){m._inputPaneListener.removeEventListener(this._dom.root,"showing",this._onInputPaneShownBound),m._inputPaneListener.removeEventListener(this._dom.root,"hiding",this._onInputPaneHiddenBound)},_shouldResizeForInputPane:function(){if(this._rendered.resizedForInputPane)return!0;var e=this._dom.dialog.getBoundingClientRect(),t=f._KeyboardInfo._visibleDocTop>e.top||f._KeyboardInfo._visibleDocBottom<e.bottom;return t},_renderForInputPane:function(){var e=this._rendered;if(e.registeredForResize||(m._resizeNotifier.subscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),e.registeredForResize=!0),this._shouldResizeForInputPane()){var t=f._KeyboardInfo._visibleDocTop+"px",n=f._KeyboardInfo._visibleDocBottomOffset+"px";if(e.top!==t&&(this._dom.root.style.top=t,e.top=t),e.bottom!==n&&(this._dom.root.style.bottom=n,e.bottom=n),!e.resizedForInputPane){this._dom.scroller.insertBefore(this._dom.title,this._dom.content),this._dom.root.style.height="auto";var i=a.document.activeElement;i&&this._dom.scroller.contains(i)&&i.scrollIntoView(),e.resizedForInputPane=!0}}},_clearInputPaneRendering:function(){var e=this._rendered;e.registeredForResize&&(m._resizeNotifier.unsubscribe(this._dom.root,this._onUpdateInputPaneRenderingBound),e.registeredForResize=!1),""!==e.top&&(this._dom.root.style.top="",e.top=""),""!==e.bottom&&(this._dom.root.style.bottom="",e.bottom=""),e.resizedForInputPane&&(this._dom.dialog.insertBefore(this._dom.title,this._dom.scroller),this._dom.root.style.height="",e.resizedForInputPane=!1)}},{DismissalResult:w,_ClassNames:I});return u.Class.mix(x,c.createEventProperties("beforeshow","aftershow","beforehide","afterhide")),u.Class.mix(x,p.DOMEventMixin),x})})}),i("require-style!less/styles-splitview",[],function(){}),i("require-style!less/colors-splitview",[],function(){}),i("WinJS/Controls/SplitView/_SplitView",["require","exports","../../Animations","../../Core/_Base","../../Core/_BaseUtils","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Global","../../_LightDismissService","../../Utilities/_OpenCloseMachine"],function(e,t,n,i,r,o,s,a,l,u,c,d,h){function p(e,t){t&&a.addClass(e,t)}function m(e,t){t&&a.removeClass(e,t)}function f(e,t){return t===b.width?{content:e.contentWidth,total:e.totalWidth}:{content:e.contentHeight,total:e.totalHeight}}e(["require-style!less/styles-splitview"]),e(["require-style!less/colors-splitview"]);var _=r._browserStyleEquivalents.transform,g={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},v={splitView:"win-splitview",pane:"win-splitview-pane",content:"win-splitview-content",paneClosed:"win-splitview-pane-closed",paneOpened:"win-splitview-pane-opened",_panePlaceholder:"win-splitview-paneplaceholder",_paneOutline:"win-splitview-paneoutline",_tabStop:"win-splitview-tabstop",_paneWrapper:"win-splitview-panewrapper",_contentWrapper:"win-splitview-contentwrapper",_animating:"win-splitview-animating",_placementLeft:"win-splitview-placementleft",_placementRight:"win-splitview-placementright",_placementTop:"win-splitview-placementtop",_placementBottom:"win-splitview-placementbottom",_closedDisplayNone:"win-splitview-closeddisplaynone",_closedDisplayInline:"win-splitview-closeddisplayinline",_openedDisplayInline:"win-splitview-openeddisplayinline",_openedDisplayOverlay:"win-splitview-openeddisplayoverlay"},y={beforeOpen:"beforeopen",afterOpen:"afteropen",beforeClose:"beforeclose",afterClose:"afterclose"},b={width:"width",height:"height"},C={none:"none",inline:"inline"},w={inline:"inline",overlay:"overlay"},I={left:"left",right:"right",top:"top",bottom:"bottom"},S={};S[C.none]=v._closedDisplayNone,S[C.inline]=v._closedDisplayInline;var E={};E[w.overlay]=v._openedDisplayOverlay,E[w.inline]=v._openedDisplayInline;var x={};x[I.left]=v._placementLeft,x[I.right]=v._placementRight,x[I.top]=v._placementTop,x[I.bottom]=v._placementBottom;var P=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),this._updateDomImpl_rendered={paneIsFirst:void 0,isOpenedMode:void 0,closedDisplayMode:void 0,openedDisplayMode:void 0,panePlacement:void 0,panePlaceholderWidth:void 0,panePlaceholderHeight:void 0,isOverlayShown:void 0,startPaneTabIndex:void 0,endPaneTabIndex:void 0},e&&e.winControl)throw new l("WinJS.UI.SplitView.DuplicateConstruction",g.duplicateConstruction);this._initializeDom(e||c.document.createElement("div")),this._machine=new h.OpenCloseMachine({eventElement:this._dom.root,onOpen:function(){n._cachedHiddenPaneThickness=null;var e=n._getHiddenPaneThickness();return n._isOpenedMode=!0,n._updateDomImpl(),a.addClass(n._dom.root,v._animating),n._playShowAnimation(e).then(function(){a.removeClass(n._dom.root,v._animating)})},onClose:function(){return a.addClass(n._dom.root,v._animating),n._playHideAnimation(n._getHiddenPaneThickness()).then(function(){a.removeClass(n._dom.root,v._animating),n._isOpenedMode=!1,n._updateDomImpl()})},onUpdateDom:function(){n._updateDomImpl()},onUpdateDomWithIsOpened:function(e){n._isOpenedMode=e,n._updateDomImpl()}}),this._disposed=!1,this._dismissable=new d.LightDismissableElement({element:this._dom.paneWrapper,tabIndex:-1,onLightDismiss:function(){n.closePane()},onTakeFocus:function(e){n._dismissable.restoreFocus()||a._tryFocusOnAnyElement(n._dom.pane,e)}}),this._cachedHiddenPaneThickness=null,this.paneOpened=!1,this.closedDisplayMode=C.inline,this.openedDisplayMode=w.overlay,this.panePlacement=I.left,o.setOptions(this,t),a._inDom(this._dom.root).then(function(){n._rtl="rtl"===a._getComputedStyle(n._dom.root).direction,n._updateTabIndices(),n._machine.exitInit()})}return Object.defineProperty(e.prototype,"element",{get:function(){return this._dom.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paneElement",{get:function(){return this._dom.pane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentElement",{get:function(){return this._dom.content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closedDisplayMode",{get:function(){return this._closedDisplayMode},set:function(e){C[e]&&this._closedDisplayMode!==e&&(this._closedDisplayMode=e,this._cachedHiddenPaneThickness=null,this._machine.updateDom())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openedDisplayMode",{get:function(){return this._openedDisplayMode},set:function(e){w[e]&&this._openedDisplayMode!==e&&(this._openedDisplayMode=e,this._cachedHiddenPaneThickness=null,this._machine.updateDom())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panePlacement",{get:function(){return this._panePlacement},set:function(e){I[e]&&this._panePlacement!==e&&(this._panePlacement=e,this._cachedHiddenPaneThickness=null,this._machine.updateDom())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paneOpened",{get:function(){return this._machine.opened},set:function(e){this._machine.opened=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._machine.dispose(),d.hidden(this._dismissable),s._disposeElement(this._dom.pane),s._disposeElement(this._dom.content))},e.prototype.openPane=function(){this._machine.open()},e.prototype.closePane=function(){this._machine.close()},e.prototype._initializeDom=function(e){var t=e.firstElementChild||c.document.createElement("div");a.addClass(t,v.pane),t.hasAttribute("tabIndex")||(t.tabIndex=-1);var n=c.document.createElement("div");a.addClass(n,v.content);for(var i=t.nextSibling;i;){var r=i.nextSibling;n.appendChild(i),i=r}var o=c.document.createElement("div");o.className=v._tabStop,a._ensureId(o);var s=c.document.createElement("div");s.className=v._tabStop,a._ensureId(s);var l=c.document.createElement("div");l.className=v._paneOutline;var u=c.document.createElement("div");u.className=v._paneWrapper,u.appendChild(o),u.appendChild(t),u.appendChild(l),u.appendChild(s);var d=c.document.createElement("div");d.className=v._panePlaceholder;var h=c.document.createElement("div");h.className=v._contentWrapper,h.appendChild(n),e.winControl=this,a.addClass(e,v.splitView),a.addClass(e,"win-disposable"),this._dom={root:e,pane:t,startPaneTab:o,endPaneTab:s,paneOutline:l,paneWrapper:u,panePlaceholder:d,content:n,contentWrapper:h},a._addEventListener(t,"keydown",this._onKeyDown.bind(this)),a._addEventListener(o,"focusin",this._onStartPaneTabFocusIn.bind(this)),a._addEventListener(s,"focusin",this._onEndPaneTabFocusIn.bind(this))},e.prototype._onKeyDown=function(e){e.keyCode===a.Key.tab&&this._updateTabIndices()},e.prototype._onStartPaneTabFocusIn=function(e){a._focusLastFocusableElement(this._dom.pane)},e.prototype._onEndPaneTabFocusIn=function(e){a._focusFirstFocusableElement(this._dom.pane)},e.prototype._measureElement=function(e){var t=a._getComputedStyle(e),n=a._getPositionRelativeTo(e,this._dom.root),i=parseInt(t.marginLeft,10),r=parseInt(t.marginTop,10);return{left:n.left-i,top:n.top-r,contentWidth:a.getContentWidth(e),contentHeight:a.getContentHeight(e),totalWidth:a.getTotalWidth(e),totalHeight:a.getTotalHeight(e)}},e.prototype._setContentRect=function(e){var t=this._dom.contentWrapper.style;t.left=e.left+"px",t.top=e.top+"px",t.height=e.contentHeight+"px",t.width=e.contentWidth+"px"},e.prototype._prepareAnimation=function(e,t){var n=this._dom.paneWrapper.style;n.position="absolute",n.left=e.left+"px",n.top=e.top+"px",n.height=e.totalHeight+"px",n.width=e.totalWidth+"px";var i=this._dom.contentWrapper.style;i.position="absolute",this._setContentRect(t)},e.prototype._clearAnimation=function(){var e=this._dom.paneWrapper.style;e.position="",e.left="",e.top="",e.height="",e.width="",e[_.scriptName]="";var t=this._dom.contentWrapper.style;t.position="",t.left="",t.top="",t.height="",t.width="",t[_.scriptName]="";var n=this._dom.pane.style;n.height="",n.width="",n[_.scriptName]=""},e.prototype._getHiddenContentRect=function(e,t,n){if(this.openedDisplayMode===w.overlay)return e;var i=this._rtl?I.left:I.right,r=this.panePlacement===i||this.panePlacement===I.bottom?0:1,o={content:n.content-t.content,total:n.total-t.total};return this._horizontal?{left:e.left-r*o.total,top:e.top,contentWidth:e.contentWidth+o.content,contentHeight:e.contentHeight,totalWidth:e.totalWidth+o.total,totalHeight:e.totalHeight}:{left:e.left,top:e.top-r*o.total,contentWidth:e.contentWidth,contentHeight:e.contentHeight+o.content,totalWidth:e.totalWidth,totalHeight:e.totalHeight+o.total}},Object.defineProperty(e.prototype,"_horizontal",{get:function(){return this.panePlacement===I.left||this.panePlacement===I.right},enumerable:!0,configurable:!0}),e.prototype._getHiddenPaneThickness=function(){if(null===this._cachedHiddenPaneThickness)if(this._closedDisplayMode===C.none)this._cachedHiddenPaneThickness={content:0,total:0};else{this._isOpenedMode&&(a.removeClass(this._dom.root,v.paneOpened),a.addClass(this._dom.root,v.paneClosed));var e=this._measureElement(this._dom.pane);this._cachedHiddenPaneThickness=f(e,this._horizontal?b.width:b.height),this._isOpenedMode&&(a.removeClass(this._dom.root,v.paneClosed),a.addClass(this._dom.root,v.paneOpened))}return this._cachedHiddenPaneThickness},e.prototype._playShowAnimation=function(e){var t=this,i=this._horizontal?b.width:b.height,r=this._measureElement(this._dom.pane),o=this._measureElement(this._dom.content),s=f(r,i),a=this._getHiddenContentRect(o,e,s);this._prepareAnimation(r,a);var l=function(){var r=t._rtl?I.left:I.right,o=.3,a=e.total+o*(s.total-e.total);return n._resizeTransition(t._dom.paneWrapper,t._dom.pane,{from:a,to:s.total,actualSize:s.total,dimension:i,anchorTrailingEdge:t.panePlacement===r||t.panePlacement===I.bottom})},u=function(){return t.openedDisplayMode===w.inline&&t._setContentRect(o),l()};return u().then(function(){t._clearAnimation()})},e.prototype._playHideAnimation=function(e){var t=this,i=this._horizontal?b.width:b.height,r=this._measureElement(this._dom.pane),o=this._measureElement(this._dom.content),s=f(r,i),a=this._getHiddenContentRect(o,e,s);this._prepareAnimation(r,o);var l=function(){var r=t._rtl?I.left:I.right,o=.3,a=s.total-o*(s.total-e.total);return n._resizeTransition(t._dom.paneWrapper,t._dom.pane,{from:a,to:e.total,actualSize:s.total,dimension:i,anchorTrailingEdge:t.panePlacement===r||t.panePlacement===I.bottom})},u=function(){return t.openedDisplayMode===w.inline&&t._setContentRect(a),l()};return u().then(function(){t._clearAnimation()})},e.prototype._updateTabIndices=function(){this._updateTabIndicesThrottled||(this._updateTabIndicesThrottled=r._throttledFunction(100,this._updateTabIndicesImpl.bind(this))),this._updateTabIndicesThrottled()},e.prototype._updateTabIndicesImpl=function(){var e=a._getHighAndLowTabIndices(this._dom.pane);this._highestPaneTabIndex=e.highest,this._lowestPaneTabIndex=e.lowest,this._machine.updateDom()},e.prototype._updateDomImpl=function(){var e=this._updateDomImpl_rendered,t=this.panePlacement===I.left||this.panePlacement===I.top;t!==e.paneIsFirst&&(t?(this._dom.root.appendChild(this._dom.panePlaceholder),this._dom.root.appendChild(this._dom.paneWrapper),this._dom.root.appendChild(this._dom.contentWrapper)):(this._dom.root.appendChild(this._dom.contentWrapper),this._dom.root.appendChild(this._dom.paneWrapper),this._dom.root.appendChild(this._dom.panePlaceholder))),e.paneIsFirst=t,e.isOpenedMode!==this._isOpenedMode&&(this._isOpenedMode?(a.removeClass(this._dom.root,v.paneClosed),a.addClass(this._dom.root,v.paneOpened)):(a.removeClass(this._dom.root,v.paneOpened),a.addClass(this._dom.root,v.paneClosed))),e.isOpenedMode=this._isOpenedMode,e.panePlacement!==this.panePlacement&&(m(this._dom.root,x[e.panePlacement]),p(this._dom.root,x[this.panePlacement]),e.panePlacement=this.panePlacement),e.closedDisplayMode!==this.closedDisplayMode&&(m(this._dom.root,S[e.closedDisplayMode]),p(this._dom.root,S[this.closedDisplayMode]),e.closedDisplayMode=this.closedDisplayMode),e.openedDisplayMode!==this.openedDisplayMode&&(m(this._dom.root,E[e.openedDisplayMode]),p(this._dom.root,E[this.openedDisplayMode]),e.openedDisplayMode=this.openedDisplayMode);var n=this._isOpenedMode&&this.openedDisplayMode===w.overlay,i=n?this._lowestPaneTabIndex:-1,r=n?this._highestPaneTabIndex:-1;e.startPaneTabIndex!==i&&(this._dom.startPaneTab.tabIndex=i,-1===i?this._dom.startPaneTab.removeAttribute("x-ms-aria-flowfrom"):this._dom.startPaneTab.setAttribute("x-ms-aria-flowfrom",this._dom.endPaneTab.id),e.startPaneTabIndex=i),e.endPaneTabIndex!==r&&(this._dom.endPaneTab.tabIndex=r,-1===r?this._dom.endPaneTab.removeAttribute("aria-flowto"):this._dom.endPaneTab.setAttribute("aria-flowto",this._dom.startPaneTab.id),e.endPaneTabIndex=r);var o,s;if(n){var l=this._getHiddenPaneThickness();this._horizontal?(o=l.total+"px",s=""):(o="",s=l.total+"px")}else o="",s="";if(e.panePlaceholderWidth!==o||e.panePlaceholderHeight!==s){var u=this._dom.panePlaceholder.style;u.width=o,u.height=s,e.panePlaceholderWidth=o,e.panePlaceholderHeight=s}e.isOverlayShown!==n&&(n?d.shown(this._dismissable):d.hidden(this._dismissable),e.isOverlayShown=n)},e.ClosedDisplayMode=C,e.OpenedDisplayMode=w,e.PanePlacement=I,e.supportedForProcessing=!0,e._ClassNames=v,e}();t.SplitView=P,i.Class.mix(P,u.createEventProperties(y.beforeOpen,y.afterOpen,y.beforeClose,y.afterClose)),i.Class.mix(P,o.DOMEventMixin)}),i("WinJS/Controls/SplitView",["require","exports","../Core/_Base"],function(e,t,n){var i=null;n.Namespace.define("WinJS.UI",{SplitView:{get:function(){return i||e(["./SplitView/_SplitView"],function(e){i=e}),i.SplitView}}})}),i("require-style!less/styles-splitviewpanetoggle",[],function(){}),i("require-style!less/colors-splitviewpanetoggle",[],function(){}),i("WinJS/Controls/SplitViewPaneToggle/_SplitViewPaneToggle",["require","exports","../../Core/_Base","../../Utilities/_Control","../../Utilities/_ElementUtilities","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Global","../../Utilities/_KeyboardBehavior","../../Utilities/_Hoverable"],function(e,t,n,i,r,o,s,a,l,u){function c(e){return e&&e.winControl}function d(e){var t=c(e);return t?t.paneOpened:!1}u.isHoverable,e(["require-style!less/styles-splitviewpanetoggle"]),e(["require-style!less/colors-splitviewpanetoggle"]);var h={splitViewPaneToggle:"win-splitviewpanetoggle"},p={invoked:"invoked"},m={get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"},get badButtonElement(){return"Invalid argument: The SplitViewPaneToggle's element must be a button element"}},f=function(){function e(e,t){if(void 0===t&&(t={}),this._updateDom_rendered={splitView:void 0},e&&e.winControl)throw new o("WinJS.UI.SplitViewPaneToggle.DuplicateConstruction",m.duplicateConstruction);this._onPaneStateSettledBound=this._onPaneStateSettled.bind(this),this._ariaExpandedMutationObserver=new r._MutationObserver(this._onAriaExpandedPropertyChanged.bind(this)),this._initializeDom(e||a.document.createElement("button")),this._disposed=!1,this.splitView=null,i.setOptions(this,t),this._initialized=!0,this._updateDom()}return Object.defineProperty(e.prototype,"element",{get:function(){return this._dom.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"splitView",{get:function(){return this._splitView},set:function(e){this._splitView=e,e&&(this._opened=d(e)),this._updateDom()},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._splitView&&this._removeListeners(this._splitView))},e.prototype._initializeDom=function(e){if("BUTTON"!==e.tagName)throw new o("WinJS.UI.SplitViewPaneToggle.BadButtonElement",m.badButtonElement);e.winControl=this,r.addClass(e,h.splitViewPaneToggle),r.addClass(e,"win-disposable"),e.hasAttribute("type")||(e.type="button"),new l._WinKeyboard(e),e.addEventListener("click",this._onClick.bind(this)),this._dom={root:e}},e.prototype._updateDom=function(){if(this._initialized&&!this._disposed){var e=this._updateDom_rendered;if(this._splitView!==e.splitView&&(e.splitView&&(this._dom.root.removeAttribute("aria-controls"),this._removeListeners(e.splitView)),this._splitView&&(r._ensureId(this._splitView),this._dom.root.setAttribute("aria-controls",this._splitView.id),this._addListeners(this._splitView)),e.splitView=this._splitView),this._splitView){var t=this._opened?"true":"false";r._setAttribute(this._dom.root,"aria-expanded",t);var n=c(this._splitView);n&&(n.paneOpened=this._opened)}}},e.prototype._addListeners=function(e){e.addEventListener("_openCloseStateSettled",this._onPaneStateSettledBound),this._ariaExpandedMutationObserver.observe(this._dom.root,{attributes:!0,attributeFilter:["aria-expanded"]})},e.prototype._removeListeners=function(e){e.removeEventListener("_openCloseStateSettled",this._onPaneStateSettledBound),this._ariaExpandedMutationObserver.disconnect()},e.prototype._fireEvent=function(e){var t=a.document.createEvent("CustomEvent");return t.initCustomEvent(e,!0,!1,null),this._dom.root.dispatchEvent(t)},e.prototype._onPaneStateSettled=function(e){e.target===this._splitView&&(this._opened=d(this._splitView),this._updateDom())},e.prototype._onAriaExpandedPropertyChanged=function(e){var t="true"===this._dom.root.getAttribute("aria-expanded");this._opened=t,this._updateDom()},e.prototype._onClick=function(e){this._invoked()},e.prototype._invoked=function(){this._disposed||(this._splitView&&(this._opened=!this._opened,this._updateDom()),this._fireEvent(p.invoked))},e._ClassNames=h,e.supportedForProcessing=!0,e}();t.SplitViewPaneToggle=f,n.Class.mix(f,s.createEventProperties(p.invoked)),n.Class.mix(f,i.DOMEventMixin)}),i("WinJS/Controls/SplitViewPaneToggle",["require","exports","../Core/_Base"],function(e,t,n){var i=null;n.Namespace.define("WinJS.UI",{SplitViewPaneToggle:{get:function(){return i||e(["./SplitViewPaneToggle/_SplitViewPaneToggle"],function(e){i=e}),i.SplitViewPaneToggle}}})}),i("WinJS/Controls/AppBar/_Constants",["require","exports","../CommandingSurface/_Constants"],function(e,t,n){t.ClassNames={controlCssClass:"win-appbar",disposableCssClass:"win-disposable",actionAreaCssClass:"win-appbar-actionarea",overflowButtonCssClass:"win-appbar-overflowbutton",spacerCssClass:"win-appbar-spacer",ellipsisCssClass:"win-appbar-ellipsis",overflowAreaCssClass:"win-appbar-overflowarea",contentFlyoutCssClass:"win-appbar-contentflyout",emptyappbarCssClass:"win-appbar-empty",menuCssClass:"win-menu",menuContainsToggleCommandClass:"win-menu-containstogglecommand",openedClass:"win-appbar-opened",closedClass:"win-appbar-closed",noneClass:"win-appbar-closeddisplaynone",minimalClass:"win-appbar-closeddisplayminimal",compactClass:"win-appbar-closeddisplaycompact",fullClass:"win-appbar-closeddisplayfull",placementTopClass:"win-appbar-top",placementBottomClass:"win-appbar-bottom"},t.EventNames={beforeOpen:"beforeopen",afterOpen:"afteropen",beforeClose:"beforeclose",afterClose:"afterclose",commandPropertyMutated:"_commandpropertymutated"},t.controlMinWidth=n.controlMinWidth,t.defaultClosedDisplayMode="compact",t.defaultOpened=!1,t.defaultPlacement="bottom",t.typeSeparator="separator",t.typeContent="content",t.typeButton="button",t.typeToggle="toggle",t.typeFlyout="flyout",t.commandSelector=".win-command",t.primaryCommandSection="primary",t.secondaryCommandSection="secondary"}),i("require-style!less/styles-appbar",[],function(){}),i("WinJS/Controls/AppBar/_AppBar",["require","exports","../../Core/_Base","../AppBar/_Constants","../CommandingSurface","../../Utilities/_Control","../../Utilities/_Dispose","../../Utilities/_ElementUtilities","../../Core/_ErrorFromName","../../Core/_Events","../../Core/_Global","../../Utilities/_KeyboardInfo","../../_LightDismissService","../../Promise","../../Core/_Resources","../../Utilities/_OpenCloseMachine","../../Core/_WriteProfilerMark"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_){function g(e,t){t&&a.addClass(e,t)}function v(e,t){t&&a.removeClass(e,t)}e(["require-style!less/styles-appbar"]);var y=d._KeyboardInfo,b={get ariaLabel(){return m._getWinJSString("ui/appBarAriaLabel").value},get overflowButtonAriaLabel(){return m._getWinJSString("ui/appBarOverflowButtonAriaLabel").value},get mustContainCommands(){return"The AppBar can only contain WinJS.UI.Command or WinJS.UI.AppBarCommand controls"},get duplicateConstruction(){return"Invalid argument: Controls may only be instantiated one time for each DOM element"}},C={none:"none",minimal:"minimal",compact:"compact",full:"full"},w={};w[C.none]=i.ClassNames.noneClass,w[C.minimal]=i.ClassNames.minimalClass,w[C.compact]=i.ClassNames.compactClass,w[C.full]=i.ClassNames.fullClass;var I={top:"top",bottom:"bottom"},S={};S[I.top]=i.ClassNames.placementTopClass,S[I.bottom]=i.ClassNames.placementBottomClass;var E=function(){function e(t,n){var s=this;if(void 0===n&&(n={}),this._updateDomImpl_renderedState={isOpenedMode:void 0,placement:void 0,closedDisplayMode:void 0,adjustedOffsets:{top:void 0,bottom:void 0}},this._writeProfilerMark("constructor,StartTM"),t&&t.winControl)throw new l("WinJS.UI.AppBar.DuplicateConstruction",b.duplicateConstruction);this._initializeDom(t||c.document.createElement("div"));var u=new f.OpenCloseMachine({eventElement:this.element,onOpen:function(){var t=s._commandingSurface.createOpenAnimation(s._getClosedHeight());return s.element.style.position="fixed",s._placement===e.Placement.top?s.element.style.top=d._KeyboardInfo._layoutViewportCoords.visibleDocTop+"px":s.element.style.bottom=d._KeyboardInfo._layoutViewportCoords.visibleDocBottom+"px",s._synchronousOpen(),t.execute().then(function(){s.element.style.position="",s.element.style.top=s._adjustedOffsets.top,s.element.style.bottom=s._adjustedOffsets.bottom})},onClose:function(){var t=s._commandingSurface.createCloseAnimation(s._getClosedHeight());return s.element.style.position="fixed",s._placement===e.Placement.top?s.element.style.top=d._KeyboardInfo._layoutViewportCoords.visibleDocTop+"px":s.element.style.bottom=d._KeyboardInfo._layoutViewportCoords.visibleDocBottom+"px",t.execute().then(function(){s._synchronousClose(),s.element.style.position="",s.element.style.top=s._adjustedOffsets.top,s.element.style.bottom=s._adjustedOffsets.bottom})},onUpdateDom:function(){s._updateDomImpl()},onUpdateDomWithIsOpened:function(e){s._isOpenedMode=e,s._updateDomImpl()}});this._handleShowingKeyboardBound=this._handleShowingKeyboard.bind(this),this._handleHidingKeyboardBound=this._handleHidingKeyboard.bind(this),a._inputPaneListener.addEventListener(this._dom.root,"showing",this._handleShowingKeyboardBound),a._inputPaneListener.addEventListener(this._dom.root,"hiding",this._handleHidingKeyboardBound),this._disposed=!1,this._cachedClosedHeight=null,this._commandingSurface=new r._CommandingSurface(this._dom.commandingSurfaceEl,{openCloseMachine:u}),g(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-actionarea"),i.ClassNames.actionAreaCssClass),g(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-overflowarea"),i.ClassNames.overflowAreaCssClass),g(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-overflowbutton"),i.ClassNames.overflowButtonCssClass),g(this._dom.commandingSurfaceEl.querySelector(".win-commandingsurface-ellipsis"),i.ClassNames.ellipsisCssClass),this._isOpenedMode=i.defaultOpened,this._dismissable=new h.LightDismissableElement({element:this._dom.root,tabIndex:this._dom.root.hasAttribute("tabIndex")?this._dom.root.tabIndex:-1,onLightDismiss:function(){s.close()},onTakeFocus:function(e){s._dismissable.restoreFocus()||s._commandingSurface.takeFocus(e)}}),this.closedDisplayMode=i.defaultClosedDisplayMode,this.placement=i.defaultPlacement,this.opened=this._isOpenedMode,o.setOptions(this,n),a._inDom(this.element).then(function(){return s._commandingSurface.initialized}).then(function(){u.exitInit(),s._writeProfilerMark("constructor,StopTM")})}return Object.defineProperty(e.prototype,"element",{get:function(){return this._dom.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._commandingSurface.data},set:function(e){this._commandingSurface.data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closedDisplayMode",{get:function(){return this._commandingSurface.closedDisplayMode},set:function(e){C[e]&&(this._commandingSurface.closedDisplayMode=e,this._cachedClosedHeight=null)},enumerable:!0,configurable:!0
}),Object.defineProperty(e.prototype,"placement",{get:function(){return this._placement},set:function(e){if(I[e]&&this._placement!==e){switch(this._placement=e,e){case I.top:this._commandingSurface.overflowDirection="bottom";break;case I.bottom:this._commandingSurface.overflowDirection="top"}this._adjustedOffsets=this._computeAdjustedOffsets(),this._commandingSurface.deferredDomUpate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return this._commandingSurface.opened},set:function(e){this._commandingSurface.opened=e},enumerable:!0,configurable:!0}),e.prototype.open=function(){this._commandingSurface.open()},e.prototype.close=function(){this._commandingSurface.close()},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,h.hidden(this._dismissable),this._commandingSurface.dispose(),a._inputPaneListener.removeEventListener(this._dom.root,"showing",this._handleShowingKeyboardBound),a._inputPaneListener.removeEventListener(this._dom.root,"hiding",this._handleHidingKeyboardBound),s.disposeSubTree(this.element))},e.prototype.forceLayout=function(){this._commandingSurface.forceLayout()},e.prototype.getCommandById=function(e){return this._commandingSurface.getCommandById(e)},e.prototype.showOnlyCommands=function(e){return this._commandingSurface.showOnlyCommands(e)},e.prototype._writeProfilerMark=function(e){_("WinJS.UI.AppBar:"+this._id+":"+e)},e.prototype._initializeDom=function(e){this._writeProfilerMark("_intializeDom,info"),e.winControl=this,this._id=e.id||a._uniqueID(e),a.addClass(e,i.ClassNames.controlCssClass),a.addClass(e,i.ClassNames.disposableCssClass);var t=e.getAttribute("role");t||e.setAttribute("role","menubar");var n=e.getAttribute("aria-label");n||e.setAttribute("aria-label",b.ariaLabel);var r=document.createElement("DIV");a._reparentChildren(e,r),e.appendChild(r),this._dom={root:e,commandingSurfaceEl:r}},e.prototype._handleShowingKeyboard=function(e){var t=this;if(this._dom.root.contains(c.document.activeElement)){var n=e.detail.originalEvent;n.ensuredFocusedElementInView=!0}var i=y._animationShowLength+y._scrollTimeout;return p.timeout(i).then(function(){t._shouldAdjustForShowingKeyboard()&&!t._disposed&&(t._adjustedOffsets=t._computeAdjustedOffsets(),t._commandingSurface.deferredDomUpate())})},e.prototype._shouldAdjustForShowingKeyboard=function(){return y._visible&&!y._isResized},e.prototype._handleHidingKeyboard=function(){this._adjustedOffsets=this._computeAdjustedOffsets(),this._commandingSurface.deferredDomUpate()},e.prototype._computeAdjustedOffsets=function(){var e={top:"",bottom:""};return this._placement===I.bottom?e.bottom=y._visibleDocBottomOffset+"px":this._placement===I.top&&(e.top=y._visibleDocTop+"px"),e},e.prototype._synchronousOpen=function(){this._isOpenedMode=!0,this._updateDomImpl()},e.prototype._synchronousClose=function(){this._isOpenedMode=!1,this._updateDomImpl()},e.prototype._updateDomImpl=function(){var e=this._updateDomImpl_renderedState;e.isOpenedMode!==this._isOpenedMode&&(this._isOpenedMode?this._updateDomImpl_renderOpened():this._updateDomImpl_renderClosed(),e.isOpenedMode=this._isOpenedMode),e.placement!==this.placement&&(v(this._dom.root,S[e.placement]),g(this._dom.root,S[this.placement]),e.placement=this.placement),e.closedDisplayMode!==this.closedDisplayMode&&(v(this._dom.root,w[e.closedDisplayMode]),g(this._dom.root,w[this.closedDisplayMode]),e.closedDisplayMode=this.closedDisplayMode),e.adjustedOffsets.top!==this._adjustedOffsets.top&&(this._dom.root.style.top=this._adjustedOffsets.top,e.adjustedOffsets.top=this._adjustedOffsets.top),e.adjustedOffsets.bottom!==this._adjustedOffsets.bottom&&(this._dom.root.style.bottom=this._adjustedOffsets.bottom,e.adjustedOffsets.bottom=this._adjustedOffsets.bottom),this._commandingSurface.updateDom()},e.prototype._getClosedHeight=function(){if(null===this._cachedClosedHeight){var e=this._isOpenedMode;this._isOpenedMode&&this._synchronousClose(),this._cachedClosedHeight=this._commandingSurface.getBoundingRects().commandingSurface.height,e&&this._synchronousOpen()}return this._cachedClosedHeight},e.prototype._updateDomImpl_renderOpened=function(){g(this._dom.root,i.ClassNames.openedClass),v(this._dom.root,i.ClassNames.closedClass),this._commandingSurface.synchronousOpen(),h.shown(this._dismissable)},e.prototype._updateDomImpl_renderClosed=function(){g(this._dom.root,i.ClassNames.closedClass),v(this._dom.root,i.ClassNames.openedClass),this._commandingSurface.synchronousClose(),h.hidden(this._dismissable)},e.ClosedDisplayMode=C,e.Placement=I,e.supportedForProcessing=!0,e}();t.AppBar=E,n.Class.mix(E,u.createEventProperties(i.EventNames.beforeOpen,i.EventNames.afterOpen,i.EventNames.beforeClose,i.EventNames.afterClose)),n.Class.mix(E,o.DOMEventMixin)}),i("WinJS/Controls/AppBar",["require","exports","../Core/_Base"],function(e,t,n){var i=null;n.Namespace.define("WinJS.UI",{AppBar:{get:function(){return i||e(["./AppBar/_AppBar"],function(e){i=e}),i.AppBar}}})}),i("ui",["WinJS/Core/_WinJS","WinJS/VirtualizedDataSource","WinJS/Vui","WinJS/Controls/IntrinsicControls","WinJS/Controls/ListView","WinJS/Controls/FlipView","WinJS/Controls/ItemContainer","WinJS/Controls/Repeater","WinJS/Controls/DatePicker","WinJS/Controls/TimePicker","WinJS/Controls/BackButton","WinJS/Controls/Rating","WinJS/Controls/ToggleSwitch","WinJS/Controls/SemanticZoom","WinJS/Controls/Pivot","WinJS/Controls/Hub","WinJS/Controls/Flyout","WinJS/Controls/_LegacyAppBar","WinJS/Controls/Menu","WinJS/Controls/SearchBox","WinJS/Controls/SettingsFlyout","WinJS/Controls/NavBar","WinJS/Controls/Tooltip","WinJS/Controls/ViewBox","WinJS/Controls/ContentDialog","WinJS/Controls/SplitView","WinJS/Controls/SplitViewPaneToggle","WinJS/Controls/SplitView/Command","WinJS/Controls/ToolBar","WinJS/Controls/AppBar"],function(e){"use strict";return e}),n(["WinJS/Core/_WinJS","ui"],function(t){a.WinJS=t,e.exports=t}),a.WinJS})}()}).call(t,function(){return this}())},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(199);i(t,r(o,i))},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(200);i(t,r(o,i))},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(201);i(t,r(o,i))},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(202);i(t,r(o,i))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="https://unindented.github.io/react-redux-winjs-example/";t.FRONT_URL=i;var r="https://fort.herokuapp.com";t.BACK_URL=r;var o=r.replace(/https?/,"ws")+"/realtime";t.REALTIME_URL=o;var s=r+"/api";t.API_URL=s;var a=s+"/groups";t.GROUPS_API_URL=a;var l=a+"/${ids.join(',')}";t.GROUPS_BY_ID_API_URL=l;var u=s+"/users";t.USERS_API_URL=u;var c=u+"/${ids.join(',')}";t.USERS_BY_ID_API_URL=c;var d=0;t.ARTIFICIAL_DELAY=d},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(256),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(268),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(269),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(270),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(271),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(277);i(t,r(o,i))},function(e,t,n){e.exports={"default":n(285),__esModule:!0}},function(e,t,n){e.exports={"default":n(286),__esModule:!0}},function(e,t,n){e.exports={"default":n(289),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(65),r=n(17)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=(t=Object(e))[r])?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var i=n(65);e.exports=0 in Object("z")?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var i=n(139),r=n(49),o=n(142),s=n(67),a=n(85),l=n(17)("iterator"),u=n(50),c=!([].keys&&"next"in[].keys()),d="@@iterator",h="keys",p="values",m=function(){return this};e.exports=function(e,t,f,_,g,v,y){n(299)(f,t,_);var b,C,w=function(e){switch(e){case h:return function(){return new f(this,e)};case p:return function(){return new f(this,e)}}return function(){return new f(this,e)}},I=t+" Iterator",S=e.prototype,E=S[l]||S[d]||g&&S[g],x=E||w(g);if(E){var P=n(13).getProto(x.call(new e));n(87)(P,I,!0),!i&&a(S,d)&&s(P,l,m)}if((!i||y)&&s(S,l,x),u[t]=x,u[I]=m,g)if(b={keys:v?x:w(h),values:g==p?x:w(p),entries:g!=p?x:w("entries")},y)for(C in b)C in S||o(S,C,b[C]);else r(r.P+r.F*c,t,b)}},function(e,t){e.exports=!0},function(e,t,n){e.exports=function(e,t){var i=n(49),r=(n(31).Object||{})[e]||Object[e],o={};o[e]=t(r),i(i.S+i.F*n(84)(function(){r(1)}),"Object",o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){e.exports=n(67)},function(e,t,n){var i=n(13).getDesc,r=n(68),o=n(64),s=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(66)(Function.call,i(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:s}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return u+e}function o(e,t){try{window.sessionStorage.setItem(r(e),JSON.stringify(t))}catch(n){if(n.name===c||0===window.sessionStorage.length)return void l["default"](!1,"[history] Unable to save state; sessionStorage is not available in Safari private mode");throw n}}function s(e){var t=window.sessionStorage.getItem(r(e));if(t)try{return JSON.parse(t)}catch(n){}return null}t.__esModule=!0,t.saveState=o,t.readState=s;var a=n(33),l=i(a),u="@@History/",c="QuotaExceededError"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){return a["default"](l.canUseDOM,"DOM history needs a DOM"),n.listen(e)}var n=d["default"](o({getUserConfirmation:u.getUserConfirmation},e,{go:u.go}));return o({},n,{listen:t})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(71),a=i(s),l=n(70),u=n(69),c=n(149),d=i(c);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return"string"==typeof e&&"/"===e.charAt(0)}function o(){var e=g.getHashPath();return r(e)?!0:(g.replaceHashPath("/"+e),!1)}function s(e,t,n){return e+(-1===e.indexOf("?")?"?":"&")+(t+"="+n)}function a(e,t){return e.replace(new RegExp("[?&]?"+t+"=[a-zA-Z0-9]+"),"")}function l(e,t){var n=e.match(new RegExp("\\?.*?\\b"+t+"=(.+?)\\b"));return n&&n[1]}function u(){function e(){var e=g.getHashPath(),t=void 0,n=void 0;return E?(t=l(e,E),e=a(e,E),t?n=v.readState(t):(n=null,t=x.createKey(),g.replaceHashPath(s(e,E,t)))):t=n=null,x.createLocation(e,n,void 0,t)}function t(t){function n(){o()&&i(e())}var i=t.transitionTo;return o(),g.addEventListener(window,"hashchange",n),function(){g.removeEventListener(window,"hashchange",n)}}function n(e){var t=e.basename,n=e.pathname,i=e.search,r=e.state,o=e.action,a=e.key;if(o!==f.POP){var l=(t||"")+n+i;E&&(l=s(l,E,a)),l===g.getHashPath()?h["default"](!1,"You cannot %s the same path using hash history",o):(E?v.saveState(a,r):e.key=e.state=null,o===f.PUSH?window.location.hash=l:g.replaceHashPath(l))}}function i(e){1===++P&&(k=t(x));var n=x.listenBefore(e);return function(){n(),0===--P&&k()}}function r(e){1===++P&&(k=t(x));var n=x.listen(e);return function(){n(),0===--P&&k()}}function u(e,t){h["default"](E||null==e,"You cannot use state without a queryKey it will be dropped"),x.pushState(e,t)}function d(e,t){h["default"](E||null==e,"You cannot use state without a queryKey it will be dropped"),x.replaceState(e,t)}function p(e){h["default"](T,"Hash history go(n) causes a full page reload in this browser"),x.go(e)}function y(e){return"#"+x.createHref(e)}function w(e){1===++P&&(k=t(x)),x.registerTransitionHook(e)}function I(e){x.unregisterTransitionHook(e),0===--P&&k()}var S=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];m["default"](_.canUseDOM,"Hash history needs a DOM");var E=S.queryKey;(void 0===E||E)&&(E="string"==typeof E?E:C);var x=b["default"](c({},S,{getCurrentLocation:e,finishTransition:n,saveState:v.saveState})),P=0,k=void 0,T=g.supportsGoWithoutReloadUsingHash();return c({},x,{listenBefore:i,listen:r,pushState:u,replaceState:d,go:p,createHref:y,registerTransitionHook:w,unregisterTransitionHook:I})}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=n(33),h=i(d),p=n(71),m=i(p),f=n(32),_=n(70),g=n(69),v=n(146),y=n(147),b=i(y),C="_k";t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return Math.random().toString(36).substr(2,e)}function o(e){var t=e.match(/^https?:\/\/[^\/]*/);return null==t?e:(c["default"](!1,'Location path must be pathname + query string only, not a fully qualified URL like "%s"',e),e.substring(t[0].length))}function s(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.key===t.key&&h["default"](e.state,t.state)}function a(){function e(e){return L.push(e),function(){L=L.filter(function(t){return t!==e})}}function t(){return F&&F.action===m.POP?B.indexOf(F.key):N?B.indexOf(N.key):-1}function n(e){var n=t();N=e,N.action===m.PUSH?B=[].concat(B.slice(0,n+1),[N.key]):N.action===m.REPLACE&&(B[n]=N.key),R.forEach(function(e){e(N)})}function i(e){if(R.push(e),N)e(N);else{var t=k();B=[t.key],n(t)}return function(){R=R.filter(function(t){return t!==e})}}function a(e,t){p.loopAsync(L.length,function(t,n,i){_["default"](L[t],e,function(e){null!=e?i(e):n()})},function(e){D&&"string"==typeof e?D(e,function(e){t(e!==!1)}):t(e!==!1)})}function u(e){N&&s(N,e)||(F=e,a(e,function(t){if(F===e)if(t)T(e),n(e);else if(N&&e.action===m.POP){var i=B.indexOf(N.key),r=B.indexOf(e.key);-1!==i&&-1!==r&&A(i-r)}}))}function c(e,t){u(w(t,e,m.PUSH,g()))}function d(e,t){u(w(t,e,m.REPLACE,g()))}function h(){A(-1)}function f(){A(1)}function g(){return r(O)}function b(e){return e}function C(e){return e}function w(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?m.POP:arguments[2],i=arguments.length<=3||void 0===arguments[3]?g():arguments[3],r=o(e),s="",a="",l=r.indexOf("#");-1!==l&&(a=r.substring(l),r=r.substring(0,l));var u=r.indexOf("?");return-1!==u&&(s=r.substring(u),r=r.substring(0,u)),""===r&&(r="/"),{pathname:r,search:s,hash:a,state:t,action:n,key:i}}function I(e){N?(S(N,e),n(N)):S(k(),e)}function S(e,t){e.state=l({},e.state,t),M(e.key,e.state)}function E(e){-1===L.indexOf(e)&&L.push(e)}function x(e){L=L.filter(function(t){return t!==e})}var P=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],k=P.getCurrentLocation,T=P.finishTransition,M=P.saveState,A=P.go,O=P.keyLength,D=P.getUserConfirmation;"number"!=typeof O&&(O=y);var L=[],B=[],R=[],N=void 0,F=void 0;return{listenBefore:e,listen:i,transitionTo:u,pushState:c,replaceState:d,go:A,goBack:h,goForward:f,createKey:g,createPath:b,createHref:C,createLocation:w,setState:v["default"](I,"setState is deprecated; use location.key to save state instead"),registerTransitionHook:v["default"](E,"registerTransitionHook is deprecated; use listenBefore instead"),unregisterTransitionHook:v["default"](x,"unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead")}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=n(33),c=i(u),d=n(348),h=i(d),p=n(342),m=n(32),f=n(89),_=i(f),g=n(51),v=i(g),y=6;t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})}function o(){function e(e,t){_[e]=t}function t(e){return _[e]}function n(){var e=m[f],n=e.key,i=e.basename,r=e.pathname,o=e.search,s=(i||"")+r+(o||""),a=void 0;return n?a=t(n):(a=null,n=h.createKey(),e.key=n),h.createLocation(s,a,void 0,n)}function i(e){var t=f+e;return t>=0&&t<m.length}function o(e){if(e){l["default"](i(e),"Cannot go(%s) there is not enough history",e),f+=e;var t=n();h.transitionTo(s({},t,{action:u.POP}))}}function a(t){switch(t.action){case u.PUSH:f+=1,f<m.length&&m.splice(f),m.push(t),e(t.key,t.state);break;case u.REPLACE:m[f]=t,e(t.key,t.state)}}var c=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(c)?c={entries:c}:"string"==typeof c&&(c={entries:[c]});var h=d["default"](s({},c,{getCurrentLocation:n,finishTransition:a,saveState:e,go:o})),p=c,m=p.entries,f=p.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(e){var t=h.createKey();return"string"==typeof e?{pathname:e,key:t}:"object"==typeof e&&e?s({},e,{key:t}):void l["default"](!1,"Unable to create history entry from %s",e)}),null==f?f=m.length-1:l["default"](f>=0&&f<m.length,"Current index must be >= 0 and < %s, was %s",m.length,f);var _=r(m);return h}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(71),l=i(a),u=n(32),c=n(149),d=i(c);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e){return function(){function t(e){return m&&null==e.basename&&(0===e.pathname.indexOf(m)?(e.pathname=e.pathname.substring(m.length),e.basename=m,""===e.pathname&&(e.pathname="/")):e.basename=""),e}function n(e){return m?m+e:e}function i(e){return _.listenBefore(function(n,i){l["default"](e,t(n),i)})}function o(e){return _.listen(function(n){e(t(n))})}function a(e,t){_.pushState(e,n(t))}function u(e,t){_.replaceState(e,n(t))}function c(e){return _.createPath(n(e))}function d(e){return _.createHref(n(e))}function h(){return t(_.createLocation.apply(_,arguments))}var p=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],m=p.basename,f=r(p,["basename"]),_=e(f);return s({},_,{listenBefore:i,listen:o,pushState:a,replaceState:u,createPath:c,createHref:d,createLocation:h})}}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(89),l=i(a);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(t){var n=e();return"string"==typeof n?((t||window.event).returnValue=n,n):void 0}return c.addEventListener(window,"beforeunload",t),function(){c.removeEventListener(window,"beforeunload",t)}}function o(e){return function(t){function n(){for(var e=void 0,t=0,n=p.length;null==e&&n>t;++t)e=p[t].call();return e}function i(e){return p.push(e),1===p.length&&(u.canUseDOM?d=r(n):l["default"](!1,"listenBeforeUnload only works in DOM environments")),function(){p=p.filter(function(t){return t!==e}),0===p.length&&d&&(d(),d=null)}}function o(e){u.canUseDOM&&-1===p.indexOf(e)&&(p.push(e),1===p.length&&(d=r(n)))}function a(e){p.length>0&&(p=p.filter(function(t){return t!==e}),0===p.length&&d())}var c=e(t),d=void 0,p=[];return s({},c,{listenBeforeUnload:i,registerBeforeUnloadHook:h["default"](o,"registerBeforeUnloadHook is deprecated; use listenBeforeUnload instead"),unregisterBeforeUnloadHook:h["default"](a,"unregisterBeforeUnloadHook is deprecated; use the callback returned from listenBeforeUnload instead")})}}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(33),l=i(a),u=n(70),c=n(69),d=n(51),h=i(d);t["default"]=o,e.exports=t["default"]},function(e,t){var n={};n.hexTable=new Array(256);for(var i=0;256>i;++i)n.hexTable[i]="%"+((16>i?"0":"")+i.toString(16)).toUpperCase();t.arrayToObject=function(e,t){for(var n=t.plainObjects?Object.create(null):{},i=0,r=e.length;r>i;++i)"undefined"!=typeof e[i]&&(n[i]=e[i]);return n},t.merge=function(e,n,i){if(!n)return e;if("object"!=typeof n)return Array.isArray(e)?e.push(n):"object"==typeof e?e[n]=!0:e=[e,n],e;if("object"!=typeof e)return e=[e].concat(n);Array.isArray(e)&&!Array.isArray(n)&&(e=t.arrayToObject(e,i));for(var r=Object.keys(n),o=0,s=r.length;s>o;++o){var a=r[o],l=n[a];Object.prototype.hasOwnProperty.call(e,a)?e[a]=t.merge(e[a],l,i):e[a]=l}return e},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;"string"!=typeof e&&(e=""+e);for(var t="",i=0,r=e.length;r>i;++i){var o=e.charCodeAt(i);45===o||46===o||95===o||126===o||o>=48&&57>=o||o>=65&&90>=o||o>=97&&122>=o?t+=e[i]:128>o?t+=n.hexTable[o]:2048>o?t+=n.hexTable[192|o>>6]+n.hexTable[128|63&o]:55296>o||o>=57344?t+=n.hexTable[224|o>>12]+n.hexTable[128|o>>6&63]+n.hexTable[128|63&o]:(++i,o=65536+((1023&o)<<10|1023&e.charCodeAt(i)),t+=n.hexTable[240|o>>18]+n.hexTable[128|o>>12&63]+n.hexTable[128|o>>6&63]+n.hexTable[128|63&o])}return t},t.compact=function(e,n){if("object"!=typeof e||null===e)return e;n=n||[];var i=n.indexOf(e);if(-1!==i)return n[i];if(n.push(e),Array.isArray(e)){for(var r=[],o=0,s=e.length;s>o;++o)"undefined"!=typeof e[o]&&r.push(e[o]);return r}var a=Object.keys(e);for(o=0,s=a.length;s>o;++o){var l=a[o];e[l]=t.compact(e[l],n)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){function i(e,t,n){for(var i=-1,o=r(t),s=o.length;++i<s;){var a=o[i],l=e[a],u=n(l,t[a],a,e,t);(u===u?u===l:l!==l)&&(void 0!==l||a in e)||(e[a]=u)}return e}var r=n(96);e.exports=i},function(e,t,n){function i(e,t){return null==t?e:r(t,o(t),e)}var r=n(357),o=n(96);e.exports=i},function(e,t){function n(e){return null==e?"":e+""}e.exports=n},function(e,t,n){function i(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}var r=n(379);e.exports=i},function(e,t,n){function i(e,t){var n=null==e?void 0:e[t];return r(n)?n:void 0}var r=n(374);e.exports=i},function(e,t,n){function i(e,t,n){if(!s(n))return!1;var i=typeof t;if("number"==i?r(n)&&o(t,n.length):"string"==i&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}var r=n(72),o=n(92),s=n(54);e.exports=i},function(e,t){var n=/<%=([\s\S]+?)%>/g;e.exports=n},function(e,t,n){function i(e){return r(e)?e:Object(e)}var r=n(54);e.exports=i},function(e,t,n){function i(e){return r(e)&&"string"==typeof e.message&&a.call(e)==o}var r=n(53),o="[object Error]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(o(e)||r(e))&&t||0;for(var n=e.constructor,i=-1,u="function"==typeof n&&n.prototype===e,d=Array(t),h=t>0;++i<t;)d[i]=i+"";for(var p in e)h&&s(p,t)||"constructor"==p&&(u||!c.call(e,p))||d.push(p);return d}var r=n(93),o=n(94),s=n(92),a=n(73),l=n(54),u=Object.prototype,c=u.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(358),r=n(157),o=n(368),s=n(369),a=n(91),l=a(function(e,t){return null==e?{}:"function"==typeof t[0]?s(e,r(t[0],t[1],3)):o(e,i(t))});e.exports=l},function(e,t){"use strict";function n(e){return e.shape({subscribe:e.func.isRequired,dispatch:e.func.isRequired,getState:e.func.isRequired})}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return 0===e.button}function l(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function u(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(2),p=i(h),m=p["default"].PropTypes,f=m.bool,_=m.object,g=m.string,v=m.func,y=function(e){function t(){o(this,t),e.apply(this,arguments)}return s(t,e),t.prototype.handleClick=function(e){var t=!0,n=void 0;this.props.onClick&&(n=this.props.onClick(e)),!l(e)&&a(e)&&((n===!1||e.defaultPrevented===!0)&&(t=!1),e.preventDefault(),t&&this.context.history.pushState(this.props.state,this.props.to,this.props.query))},t.prototype.render=function(){var e=this,t=this.props,n=t.to,i=t.query,o=t.hash,s=(t.state,t.activeClassName),a=t.activeStyle,l=t.onlyActiveOnIndex,d=r(t,["to","query","hash","state","activeClassName","activeStyle","onlyActiveOnIndex"]);d.onClick=function(t){return e.handleClick(t)};var h=this.context.history;return h&&(d.href=h.createHref(n,i),o&&(d.href+=o),(s||null!=a&&!u(a))&&h.isActive(n,i,l)&&(s&&(d.className+=""===d.className?s:" "+s),a&&(d.style=c({},d.style,a)))),p["default"].createElement("a",d)},d(t,null,[{key:"contextTypes",value:{history:_},enumerable:!0},{key:"propTypes",value:{to:g.isRequired,query:_,hash:g,state:_,activeStyle:_,activeClassName:g,onlyActiveOnIndex:f.isRequired,onClick:v},enumerable:!0},{key:"defaultProps",value:{onlyActiveOnIndex:!1,className:"",style:{}},enumerable:!0}]),t}(p["default"].Component);t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=i(a),u=n(27),c=i(u),d=n(36),h=n(55),p=n(35),m=l["default"].PropTypes,f=m.string,_=m.object,g=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.createRouteFromReactElement=function(e){var n=d.createRouteFromReactElement(e);return n.from&&(n.path=n.from),n.onEnter=function(e,i){var r=e.location,o=e.params,s=void 0;if("/"===n.to.charAt(0))s=h.formatPattern(n.to,o);else if(n.to){var a=e.routes.indexOf(n),l=t.getRoutePattern(e.routes,a-1),u=l.replace(/\/*$/,"/")+n.to;s=h.formatPattern(u,o)}else s=r.pathname;i(n.state||r.state,s,n.query||r.query)},n},t.getRoutePattern=function(e,t){for(var n="",i=t;i>=0;i--){var r=e[i],o=r.path||"";if(n=o.replace(/\/*$/,"/")+n,0===o.indexOf("/"))break}return"/"+n},t.prototype.render=function(){c["default"](!1,"<Redirect> elements are for router configuration only and should not be rendered")},s(t,null,[{key:"propTypes",value:{path:f,from:f,to:f.isRequired,query:_,state:_,onEnter:p.falsy,children:p.falsy},enumerable:!0}]),t}(l["default"].Component);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=i(a),u=n(27),c=i(u),d=n(399),h=i(d),p=l["default"].PropTypes,m=p.array,f=p.func,_=p.object,g=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.getChildContext=function(){return{history:this.props.history,location:this.props.location}},t.prototype.createElement=function(e,t){return null==e?null:this.props.createElement(e,t)},t.prototype.render=function(){var e=this,t=this.props,n=t.history,i=t.location,r=t.routes,o=t.params,s=t.components,a=null;return s&&(a=s.reduceRight(function(t,s,a){if(null==s)return t;var l=r[a],u=h["default"](l,o),c={history:n,location:i,params:o,route:l,routeParams:u,routes:r};if(t&&(c.children=t),"object"==typeof s){var d={};for(var p in s)s.hasOwnProperty(p)&&(d[p]=e.createElement(s[p],c));return d}return e.createElement(s,c)},a)),c["default"](null===a||a===!1||l["default"].isValidElement(a),"The root route must render a single element"),a},s(t,null,[{key:"propTypes",value:{history:_.isRequired,createElement:f.isRequired,location:_.isRequired,routes:m.isRequired,params:_.isRequired,components:m.isRequired},enumerable:!0},{key:"defaultProps",value:{createElement:l["default"].createElement},enumerable:!0},{key:"childContextTypes",value:{history:_.isRequired,location:_.isRequired},enumerable:!0}]),t}(l["default"].Component);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;
var r=n(395),o=i(r);t.Router=o["default"];var s=n(166),a=i(s);t.Link=a["default"];var l=n(389),u=i(l);t.IndexLink=u["default"];var c=n(390),d=i(c);t.IndexRedirect=d["default"];var h=n(391),p=i(h);t.IndexRoute=p["default"];var m=n(167),f=i(m);t.Redirect=f["default"];var _=n(393),g=i(_);t.Route=g["default"];var v=n(388),y=i(v);t.History=y["default"];var b=n(392),C=i(b);t.Lifecycle=C["default"];var w=n(394),I=i(w);t.RouteContext=I["default"];var S=n(98),E=i(S);t.useRoutes=E["default"];var x=n(36);t.createRoutes=x.createRoutes;var P=n(168),k=i(P);t.RoutingContext=k["default"];var T=n(35),M=i(T);t.PropTypes=M["default"];var A=n(401),O=i(A);t.match=O["default"];var D=i(r);t["default"]=D["default"]},function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},r=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){r.forEach(function(t){i[n(t,e)]=i[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:o};e.exports=s},function(e,t,n){"use strict";var i=n(170),r=n(11),o=(n(454),n(458)),s=n(465),a=n(468),l=(n(10),a(function(e){return s(e)})),u="cssFloat";r.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(u="styleFloat");var c={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(t+=l(n)+":",t+=o(n,i)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=o(r,t[r]);if("float"===r&&(r=u),s)n[r]=s;else{var a=i.shorthandPropertyExpansions[r];if(a)for(var l in a)n[l]="";else n[r]=""}}}};e.exports=c},function(e,t,n){"use strict";function i(){if(a)for(var e in l){var t=l[e],n=a.indexOf(e);if(s(n>-1),!u.plugins[n]){s(t.extractEvents),u.plugins[n]=t;var i=t.eventTypes;for(var o in i)s(r(i[o],t,o))}}}function r(e,t,n){s(!u.eventNameDispatchConfigs.hasOwnProperty(n)),u.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];o(a,t,n)}return!0}return e.registrationName?(o(e.registrationName,t,n),!0):!1}function o(e,t,n){s(!u.registrationNameModules[e]),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var s=n(3),a=null,l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){s(!a),a=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];l.hasOwnProperty(n)&&l[n]===r||(s(!l[n]),l[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){a=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=u.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r]}};e.exports=u},function(e,t,n){"use strict";function i(e,t){this.props=e,this.context=t}var r=n(110),o=n(3);n(10);i.prototype.setState=function(e,t){o("object"==typeof e||"function"==typeof e||null==e),r.enqueueSetState(this,e),t&&r.enqueueCallback(this,t)},i.prototype.forceUpdate=function(e){r.enqueueForceUpdate(this),e&&r.enqueueCallback(this,e)};e.exports=i},function(e,t,n){"use strict";var i=n(171),r=n(406),o=n(56),s=n(21),a=n(37),l=n(3),u=n(118),c={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},d={updatePropertyByID:function(e,t,n){var i=s.getNode(e);l(!c.hasOwnProperty(t)),null!=n?o.setValueForProperty(i,t,n):o.deleteValueForProperty(i,t)},deletePropertyByID:function(e,t,n){var i=s.getNode(e);l(!c.hasOwnProperty(t)),o.deleteValueForProperty(i,t,n)},updateStylesByID:function(e,t){var n=s.getNode(e);i.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=s.getNode(e);u(n,t)},updateTextContentByID:function(e,t){var n=s.getNode(e);r.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=s.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=s.getNode(e[n].parentID);r.processUpdates(e,t)}};a.measureMethods(d,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),e.exports=d},function(e,t,n){"use strict";var i=n(56),r=n(103),o=n(106),s=n(8),a=n(81),l=function(e){};s(l.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var r=a(this._stringText);return t.renderToStaticMarkup?r:"<span "+i.createMarkupForID(e)+">"+r+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,o.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){r.unmountIDFromEnvironment(this._rootNodeID)}}),e.exports=l},function(e,t,n){"use strict";function i(e){return o(document.documentElement,e)}var r=n(426),o=n(183),s=n(185),a=n(186),l={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=a(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),s(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if("undefined"==typeof i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(e,t)}};e.exports=l},function(e,t,n){"use strict";var i=n(452),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return e.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(r.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=i(e);return o===n}};e.exports=r},function(e,t,n){"use strict";var i=n(61),r=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});e.exports=r},function(e,t,n){"use strict";function i(e){function t(t,n,i,r,o){if(r=r||C,null==n[i]){var s=y[o];return t?new Error("Required "+s+" `"+i+"` was not specified in "+("`"+r+"`.")):null}return e(n,i,r,o)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,i,r){var o=t[n],s=f(o);if(s!==e){var a=y[r],l=_(o);return new Error("Invalid "+a+" `"+n+"` of type `"+l+"` "+("supplied to `"+i+"`, expected `"+e+"`."))}return null}return i(t)}function o(){return i(b.thatReturns(null))}function s(e){function t(t,n,i,r){var o=t[n];if(!Array.isArray(o)){var s=y[r],a=f(o);return new Error("Invalid "+s+" `"+n+"` of type "+("`"+a+"` supplied to `"+i+"`, expected an array."))}for(var l=0;l<o.length;l++){var u=e(o,l,i,r);if(u instanceof Error)return u}return null}return i(t)}function a(){function e(e,t,n,i){if(!g.isValidElement(e[t])){var r=y[i];return new Error("Invalid "+r+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return i(e)}function l(e){function t(t,n,i,r){if(!(t[n]instanceof e)){var o=y[r],s=e.name||C;return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+i+"`, expected instance of `"+s+"`."))}return null}return i(t)}function u(e){function t(t,n,i,r){for(var o=t[n],s=0;s<e.length;s++)if(o===e[s])return null;var a=y[r],l=JSON.stringify(e);return new Error("Invalid "+a+" `"+n+"` of value `"+o+"` "+("supplied to `"+i+"`, expected one of "+l+"."))}return i(t)}function c(e){function t(t,n,i,r){var o=t[n],s=f(o);if("object"!==s){var a=y[r];return new Error("Invalid "+a+" `"+n+"` of type "+("`"+s+"` supplied to `"+i+"`, expected an object."))}for(var l in o)if(o.hasOwnProperty(l)){var u=e(o,l,i,r);if(u instanceof Error)return u}return null}return i(t)}function d(e){function t(t,n,i,r){for(var o=0;o<e.length;o++){var s=e[o];if(null==s(t,n,i,r))return null}var a=y[r];return new Error("Invalid "+a+" `"+n+"` supplied to "+("`"+i+"`."))}return i(t)}function h(){function e(e,t,n,i){if(!m(e[t])){var r=y[i];return new Error("Invalid "+r+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return i(e)}function p(e){function t(t,n,i,r){var o=t[n],s=f(o);if("object"!==s){var a=y[r];return new Error("Invalid "+a+" `"+n+"` of type `"+s+"` "+("supplied to `"+i+"`, expected `object`."))}for(var l in e){var u=e[l];if(u){var c=u(o,l,i,r);if(c)return c}}return null}return i(t)}function m(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(m);if(null===e||g.isValidElement(e))return!0;e=v.extractIfFragment(e);for(var t in e)if(!m(e[t]))return!1;return!0;default:return!1}}function f(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function _(e){var t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var g=n(9),v=n(75),y=n(77),b=n(28),C="<<anonymous>>",w=a(),I=h(),S={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:o(),arrayOf:s,element:w,instanceOf:l,node:I,objectOf:c,oneOf:u,oneOfType:d,shape:p};e.exports=S},function(e,t,n){"use strict";function i(){this.listenersToPut=[]}var r=n(18),o=n(44),s=n(8);s(i.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];o.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(i),e.exports=i},function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:n};e.exports=i},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t,n){function i(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?i(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=n(466);e.exports=i},function(e,t,n){"use strict";function i(e){return null==e?null:a(e)?e:r.has(e)?o.getNodeFromInstance(e):(s(null==e.render||"function"!=typeof e.render),void s(!1))}var r=(n(20),n(46)),o=n(21),s=n(3),a=n(190);n(10);e.exports=i},function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}e.exports=n},function(e,t){function n(){try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t){"use strict";function n(e){var t=e&&(i&&e[i]||e[r]);return"function"==typeof t?t:void 0}var i="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";e.exports=n},function(e,t,n){function i(e){return o(!!s),h.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||("*"===e?s.innerHTML="<link />":s.innerHTML="<"+e+"></"+e+">",a[e]=!s.firstChild),a[e]?h[e]:null}var r=n(11),o=n(3),s=r.canUseDOM?document.createElement("div"):null,a={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,"<svg>","</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c,circle:d,clipPath:d,defs:d,ellipse:d,g:d,line:d,linearGradient:d,path:d,polygon:d,polyline:d,radialGradient:d,rect:d,stop:d,text:d};e.exports=i},function(e,t,n){"use strict";function i(){return!o&&r.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var r=n(11),o=null;e.exports=i},function(e,t){function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t){"use strict";function n(e){return e&&("INPUT"===e.nodeName&&i[e.type]||"TEXTAREA"===e.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t,n){"use strict";function i(e){return _[e]}function r(e,t){return e&&null!=e.key?s(e.key):t.toString(36)}function o(e){return(""+e).replace(g,i)}function s(e){return"$"+o(e)}function a(e,t,n,i,o){var l=typeof e;if(("undefined"===l||"boolean"===l)&&(e=null),null===e||"string"===l||"number"===l||u.isValidElement(e))return i(o,e,""===t?m+r(e,0):t,n),1;var d,_,g,v=0;if(Array.isArray(e))for(var y=0;y<e.length;y++)d=e[y],_=(""!==t?t+f:m)+r(d,y),g=n+v,v+=a(d,_,g,i,o);else{var b=h(e);if(b){var C,w=b.call(e);if(b!==e.entries)for(var I=0;!(C=w.next()).done;)d=C.value,_=(""!==t?t+f:m)+r(d,I++),g=n+v,v+=a(d,_,g,i,o);else for(;!(C=w.next()).done;){var S=C.value;S&&(d=S[1],_=(""!==t?t+f:m)+s(S[0])+f+r(d,0),g=n+v,v+=a(d,_,g,i,o))}}else if("object"===l){p(1!==e.nodeType);var E=c.extract(e);for(var x in E)E.hasOwnProperty(x)&&(d=E[x],_=(""!==t?t+f:m)+s(x)+f+r(d,0),g=n+v,v+=a(d,_,g,i,o))}}return v}function l(e,t,n){return null==e?0:a(e,"",0,t,n)}var u=n(9),c=n(75),d=n(45),h=n(187),p=n(3),m=(n(10),d.SEPARATOR),f=":",_={"=":"=0",".":"=1",":":"=2"},g=/[=.:]/g;e.exports=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){function n(){return u}function i(e){return c.push(e),function(){var t=c.indexOf(e);c.splice(t,1)}}function r(e){if(!s["default"](e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,u=l(u,e)}finally{d=!1}return c.slice().forEach(function(e){return e()}),e}function o(e){l=e,r({type:a.INIT})}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,u=t,c=[],d=!1;return r({type:a.INIT}),{dispatch:r,subscribe:i,getState:n,replaceReducer:o}}t.__esModule=!0,t["default"]=r;var o=n(195),s=i(o),a={INIT:"@@redux/INIT"};t.ActionTypes=a},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&i(n)===i(Object)}t.__esModule=!0,t["default"]=n;var i=function(e){return Function.prototype.toString.call(e)};e.exports=t["default"]},function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,i){return n[i]=t(e[i],i),n},{})}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){return e===t}function r(e){var t=arguments.length<=1||void 0===arguments[1]?i:arguments[1],n=null,r=null;return function(){for(var i=arguments.length,o=Array(i),s=0;i>s;s++)o[s]=arguments[s];return null!==n&&o.every(function(e,i){return t(e,n[i])})?r:(n=o,r=e.apply(void 0,o))}}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function s(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;t>r;r++)i[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),s=0;t>s;s++)r[s]=arguments[s];var a=0,l=r.pop(),u=o(r),c=e.apply(void 0,[function(){return a++,l.apply(void 0,arguments)}].concat(i)),d=function(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),o=2;i>o;o++)r[o-2]=arguments[o];var s=u.map(function(n){return n.apply(void 0,[e,t].concat(r))});return c.apply(void 0,n(s))};return d.recomputations=function(){return a},d}}function a(){return s(r).apply(void 0,arguments)}function l(e){var t=arguments.length<=1||void 0===arguments[1]?a:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];return t.reduce(function(e,t,i){return e[n[i]]=t,e},{})})}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultMemoize=r,t.createSelectorCreator=s,t.createSelector=a,t.createStructuredSelector=l},function(e,t,n){"use strict";var i=n(479);e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=i(e),a=i(t),l=s.length;if(l!==a.length)return!1;r=r||null;for(var u=Object.prototype.hasOwnProperty.bind(t),c=0;l>c;c++){var d=s[c];if(!u(d))return!1;var h=e[d],p=t[d],m=n?n.call(r,h,p,d):void 0;if(m===!1||void 0===m&&h!==p)return!1}return!0}},function(e,t,n){"use strict";function i(e){return{type:l.ADD_GROUP,payload:e}}function r(e){return{type:l.REMOVE_GROUP,payload:e}}function o(e){return{type:l.UPDATE_GROUP,payload:e}}function s(){return function(e,t){var n=t(),i=n.groups;i.count()||c.getGroups().then(function(t){return e({type:l.GET_GROUPS,payload:t})})["catch"](function(t){return e({type:l.GET_GROUPS,error:!0,payload:new Error("Cannot get groups: "+t.message)})})}}var a=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.addGroup=i,t.removeGroup=r,t.updateGroup=o,t.getGroups=s;var l=n(22),u=n(63),c=a(u)},function(e,t,n){"use strict";function i(e){return{type:r.SELECT_GROUP,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectGroup=i;var r=n(22)},function(e,t,n){"use strict";function i(e){return{type:r.SELECT_USER,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.selectUser=i;var r=n(22)},function(e,t,n){"use strict";function i(e){return{type:l.ADD_USER,payload:e}}function r(e){return{type:l.REMOVE_USER,payload:e}}function o(e){return{type:l.UPDATE_USER,payload:e}}function s(){return function(e,t){var n=t(),i=n.users;i.count()||c.getUsers().then(function(t){return e({type:l.GET_USERS,payload:t})})["catch"](function(t){return e({type:l.GET_USERS,error:!0,payload:new Error("Cannot get users: "+t.message)})})}}var a=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.addUser=i,t.removeUser=r,t.updateUser=o,t.getUsers=s;var l=n(22),u=n(63),c=a(u)},function(e,t,n){"use strict";var i=n(1)["default"],r=n(204),o=i(r);n(341),n(323);var s=new o["default"];s.renderTo(document.body)},function(e,t,n){"use strict";var i=n(5)["default"],r=n(4)["default"],o=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=o(s),l=n(347),u=n(248),c=o(u),d=function(){function e(){r(this,e)}return i(e,[{key:"renderTo",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{history:l.createHashHistory()}:arguments[1];a["default"].render(a["default"].createElement(c["default"],{history:t.history}),e)}}]),e}();t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(206),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(226),d=a(c),h=n(209),p=a(h),m=n(207),f=a(m),_=n(223),g=a(_),v=n(211),y=a(v);n(324);var b=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.state={paneOpened:!1}}return r(t,e),o(t,[{key:"handlePaneToggle",value:function(){this.setState({paneOpened:!this.state.paneOpened})}},{key:"handlePaneClosed",value:function(){this.setState({paneOpened:!1})}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.children,i=this.state.paneOpened,r=u["default"].createElement(g["default"],{onClick:this.handlePaneClosed.bind(this)}),o=u["default"].createElement(y["default"],null,n);return u["default"].createElement("div",{className:"Application win-type-base",role:"application"},u["default"].createElement(d["default"],{actions:t}),u["default"].createElement(p["default"],{paneOpened:i,onPaneToggle:this.handlePaneToggle.bind(this)}),u["default"].createElement(f["default"],{contentComponent:o,paneComponent:r,paneOpened:i,onPaneClosed:this.handlePaneClosed.bind(this)}))}}],[{key:"propTypes",value:{actions:l.PropTypes.object.isRequired,children:l.PropTypes.oneOfType([l.PropTypes.element,l.PropTypes.arrayOf(l.PropTypes.element)])},enumerable:!0}]),t}(l.Component);t["default"]=b,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(208),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(52),d=a(c);n(325);var h=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.contentComponent,n=e.paneComponent,i=e.paneOpened,r=e.onPaneClosed;return u["default"].createElement("div",{className:"ApplicationContent"},u["default"].createElement(d["default"].SplitView,{className:"ApplicationContent-split",contentComponent:t,paneComponent:n,paneOpened:i,onAfterClose:r}))}}],[{key:"propTypes",value:{contentComponent:l.PropTypes.element,paneComponent:l.PropTypes.element,paneOpened:l.PropTypes.bool,onPaneClosed:l.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{paneOpened:!1,onPaneClosed:function(){}},enumerable:!0}]),t}(l.Component);t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(210),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"],l=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=a(u),d=n(52),h=a(d),p=n(273),m=l(p),f=n(234),_=a(f);n(326);var g=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.paneOpened,n=e.onPaneToggle;return c["default"].createElement("header",{className:"ApplicationHeader win-ui-dark",role:"banner"},c["default"].createElement(_["default"],null),c["default"].createElement(h["default"].SplitViewPaneToggle,{className:"ApplicationHeader-toggle",paneOpened:t,onInvoked:n}),c["default"].createElement("h1",{className:"ApplicationHeader-title win-type-title"},m.getName()+" v"+m.getVersion()))}}],[{key:"propTypes",value:{paneOpened:u.PropTypes.bool,onPaneToggle:u.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{paneOpened:!1,onPaneToggle:function(){}},enumerable:!0}]),t}(u.Component);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(212),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l);n(327);var c=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props.children;return u["default"].createElement("div",{className:"Content",id:"main",role:"main"},e)}}],[{key:"propTypes",value:{children:l.PropTypes.oneOfType([l.PropTypes.element,l.PropTypes.arrayOf(l.PropTypes.element)])},enumerable:!0}]),t}(l.Component);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(214),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(26),d=a(c);n(328);var h=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props.group,t=e.get("name"),n=e.get("avatar");return u["default"].createElement("div",{className:"GroupItem"},u["default"].createElement("img",{className:"GroupItem-avatar",src:n,alt:""}),u["default"].createElement("span",{className:"GroupItem-name win-type-ellipsis"},t))}}],[{key:"propTypes",value:{group:d["default"].map.isRequired},enumerable:!0}]),t}(l.Component);t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(216),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"],l=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(34),c=a(u),d=n(2),h=a(d),p=n(26),m=a(p),f=n(52),_=a(f),g=n(120),v=a(g),y=n(126),b=a(y),C=n(82),w=a(C),I=n(213),S=a(I),E=n(131),x=l(E),P=function(e,t){var n=e.name,i=t.name;return i>n?-1:n>i?1:0},k=_["default"].reactRenderer(function(e){return h["default"].createElement(S["default"],{group:c["default"].fromJS(e.data)})}),T=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"handleSelectionChanged",value:function(e){var t=this.props,n=t.groups,i=t.history,r=e.currentTarget.winControl;x.getFirstSelectedItem(r).then(function(e){var t=n.get(e.id);i.pushState(null,"/groups/"+t.get("id"))})}},{key:"handleContentAnimating",value:function(e){"entrance"===e.detail.type&&e.preventDefault()}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedGroup,t=e&&e.get("id"),n=this.refs.list.winControl;x.setSelection(n,function(e){return e.id===t})}},{key:"render",value:function(){var e=this.props.groups,t=new v["default"].Binding.List(e.valueSeq().toJS()).createSorted(P);return h["default"].createElement(_["default"].ListView,{ref:"list",className:"GroupsList win-selectionstylefilled",layout:{type:v["default"].UI.ListLayout},itemDataSource:t.dataSource,itemTemplate:k,tapBehavior:"directSelect",selectionMode:"single",onSelectionChanged:this.handleSelectionChanged.bind(this),onContentAnimating:this.handleContentAnimating.bind(this)})}}],[{key:"propTypes",value:{groups:m["default"].map.isRequired,selectedGroup:m["default"].map},enumerable:!0},{key:"defaultProps",value:{onClick:function(){}},enumerable:!0}]);var n=t;return t=w["default"](t)||t,t=b["default"](t)||t}(d.Component);t["default"]=T,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(218),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=l(u),d=n(62),h=l(d),p=n(219),m=l(p),f=n(48),_=l(f);n(329);var g=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=a(e,["children"]);return c["default"].createElement("div",{className:"GroupsPage"},c["default"].createElement("div",{className:"GroupsPage-sidebar"},c["default"].createElement(m["default"],n)),c["default"].createElement("div",{className:"GroupsPage-main"},t||c["default"].createElement(_["default"],null)))}}],[{key:"propTypes",value:{children:u.PropTypes.oneOfType([u.PropTypes.element,u.PropTypes.arrayOf(u.PropTypes.element)])},enumerable:!0}]);var n=t;return t=h["default"](function(e,t){t.getGroups()})(t)||t}(u.Component);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(26),d=a(c),h=n(215),p=a(h);n(330);var m=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.groups,n=e.selectedGroup;return u["default"].createElement("div",{className:"GroupsSidebar"},u["default"].createElement(p["default"],{groups:t,selectedGroup:n}))}}],[{key:"propTypes",value:{groups:d["default"].map.isRequired,selectedGroup:d["default"].map},enumerable:!0}]),t}(l.Component);t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(222),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];
Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l);n(331);var c=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props.header;return u["default"].createElement("div",{className:"ListHeader"},e)}}],[{key:"propTypes",value:{header:l.PropTypes.string.isRequired},enumerable:!0}]),t}(l.Component);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(224),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(52),d=a(c),h=n(82),p=a(h);n(332);var m=[{url:"/groups",label:"Groups",icon:"people"},{url:"/users",label:"Users",icon:"contact"},{url:"/settings",label:"Settings",icon:"settings"}],f=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"handleClick",value:function(e){this.props.onClick(),this.props.history.pushState(null,e)}},{key:"render",value:function(){var e=this;return u["default"].createElement("nav",{className:"Navigation",role:"navigation"},m.map(function(t){return u["default"].createElement(d["default"].SplitView.Command,{className:"Navigation-command",key:t.url,label:t.label,icon:t.icon,onInvoked:e.handleClick.bind(e,t.url)})}))}}],[{key:"propTypes",value:{onClick:l.PropTypes.func},enumerable:!0},{key:"defaultProps",value:{onClick:function(){}},enumerable:!0}]);var n=t;return t=p["default"](t)||t}(l.Component);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l);n(333);var c=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"NoSelection win-type-title"},"No selection")}}]),t}(l.Component);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(227),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=n(63),c=a(u),d=n(275),h=a(d),p=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"componentDidMount",value:function(){var e=void 0;try{e=h.createConnection(),this.setState({connection:e})}catch(t){return void console.warn("Cannot connect to realtime: "+t.message)}this.props.actions;e.on("message",function(e){var t=JSON.parse(e.data);t.create&&t.create.user&&c.getUsersById(t.create.user).then(function(e){console.debug(e)}),console.debug(t)})}},{key:"componentDidUnmount",value:function(){this.state.connection.close()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return!1}}],[{key:"propTypes",value:{actions:l.PropTypes.object.isRequired},enumerable:!0}]),t}(l.Component);t["default"]=p,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(229),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(26),d=a(c),h=n(62),p=a(h),m=n(48),f=a(m);n(334);var _=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props.selectedGroup;if(!e)return u["default"].createElement(f["default"],null);var t=e.get("name"),n=e.get("avatar");return u["default"].createElement("div",{className:"SelectedGroupPage"},u["default"].createElement("h2",{className:"SelectedGroupPage-title win-type-title"},u["default"].createElement("img",{className:"SelectedGroupPage-avatar",src:n,alt:""}),u["default"].createElement("span",{className:"SelectedGroupPage-name"},t)))}}],[{key:"propTypes",value:{selectedGroup:d["default"].map},enumerable:!0}]);var n=t;return t=p["default"](["id"],function(e,t){t.selectGroup(e.id)},function(e,t){t.selectGroup(null)})(t)||t}(l.Component);t["default"]=_,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(231),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(26),d=a(c),h=n(62),p=a(h),m=n(48),f=a(m);n(335);var _=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props.selectedUser;if(!e)return u["default"].createElement(f["default"],null);var t=e.get("firstName")+" "+e.get("lastName"),n=e.get("avatar");return u["default"].createElement("div",{className:"SelectedUserPage"},u["default"].createElement("h2",{className:"SelectedUserPage-title win-type-title"},u["default"].createElement("img",{className:"SelectedUserPage-avatar",src:n,alt:""}),u["default"].createElement("span",{className:"SelectedUserPage-name"},t)))}}],[{key:"propTypes",value:{selectedUser:d["default"].map},enumerable:!0}]);var n=t;return t=p["default"](["id"],function(e,t){t.selectUser(e.id)},function(e,t){t.selectUser(null)})(t)||t}(l.Component);t["default"]=_,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l);n(336);var c=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"SettingsPage"},u["default"].createElement("h2",{className:"SettingsPage-title win-type-title"},"Settings"))}}]),t}(l.Component);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(235),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l);n(337);var c=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"handleClick",value:function(e){e.preventDefault(),document.querySelector('#main [tabindex]:not([tabindex^="-"])').focus()}},{key:"render",value:function(){return u["default"].createElement("a",{className:"SkipToContent win-ui-dark",href:"#",onClick:this.handleClick.bind(this)},"Skip to main content")}}]),t}(l.Component);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(237),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(26),d=a(c);n(338);var h=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props.user,t=e.get("firstName")+" "+e.get("lastName"),n=e.get("jobTitle"),i=e.get("avatar");return u["default"].createElement("div",{className:"UserItem"},u["default"].createElement("img",{className:"UserItem-avatar",src:i,alt:""}),u["default"].createElement("div",{className:"UserItem-info"},u["default"].createElement("span",{className:"UserItem-name win-type-ellipsis"},t),u["default"].createElement("span",{className:"UserItem-misc win-type-ellipsis"},n)))}}],[{key:"propTypes",value:{user:d["default"].map.isRequired},enumerable:!0}]),t}(l.Component);t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(239),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"],l=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(34),c=a(u),d=n(2),h=a(d),p=n(26),m=a(p),f=n(52),_=a(f),g=n(120),v=a(g),y=n(126),b=a(y),C=n(82),w=a(C),I=n(221),S=a(I),E=n(236),x=a(E),P=n(131),k=l(P),T=function(e){return e.firstName.charAt(0).toUpperCase()},M=function(e){return{title:T(e)}},A=function(e,t){var n=e.firstName,i=t.firstName;return i>n?-1:n>i?1:0},O=_["default"].reactRenderer(function(e){return h["default"].createElement(S["default"],{header:e.data.title})}),D=_["default"].reactRenderer(function(e){return h["default"].createElement(x["default"],{user:c["default"].fromJS(e.data)})}),L=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"handleSelectionChanged",value:function(e){var t=this.props,n=t.users,i=t.history,r=e.currentTarget.winControl;k.getFirstSelectedItem(r).then(function(e){var t=n.get(e.id);i.pushState(null,"/users/"+t.get("id"))})}},{key:"handleContentAnimating",value:function(e){"entrance"===e.detail.type&&e.preventDefault()}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedUser,t=e&&e.get("id"),n=this.refs.list.winControl;k.setSelection(n,function(e){return e.id===t})}},{key:"render",value:function(){var e=this.props.users,t=new v["default"].Binding.List(e.valueSeq().toJS()).createSorted(A).createGrouped(T,M);return h["default"].createElement(_["default"].ListView,{ref:"list",className:"UsersList win-selectionstylefilled",layout:{type:v["default"].UI.ListLayout},itemDataSource:t.dataSource,itemTemplate:D,groupDataSource:t.groups.dataSource,groupHeaderTemplate:O,tapBehavior:"directSelect",selectionMode:"single",onSelectionChanged:this.handleSelectionChanged.bind(this),onContentAnimating:this.handleContentAnimating.bind(this)})}}],[{key:"propTypes",value:{users:m["default"].map.isRequired,selectedUser:m["default"].map},enumerable:!0}]);var n=t;return t=w["default"](t)||t,t=b["default"](t)||t}(d.Component);t["default"]=L,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=l(u),d=n(62),h=l(d),p=n(242),m=l(p),f=n(48),_=l(f);n(339);var g=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=a(e,["children"]);return c["default"].createElement("div",{className:"UsersPage"},c["default"].createElement("div",{className:"UsersPage-sidebar"},c["default"].createElement(m["default"],n)),c["default"].createElement("div",{className:"UsersPage-main"},t||c["default"].createElement(_["default"],null)))}}],[{key:"propTypes",value:{children:u.PropTypes.oneOfType([u.PropTypes.element,u.PropTypes.arrayOf(u.PropTypes.element)])},enumerable:!0}]);var n=t;return t=h["default"](function(e,t){t.getUsers()})(t)||t}(u.Component);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(243),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(26),d=a(c),h=n(238),p=a(h);n(340);var m=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.selectedUser;return u["default"].createElement("div",{className:"UsersSidebar"},u["default"].createElement(p["default"],{users:t,selectedUser:n}))}}],[{key:"propTypes",value:{users:d["default"].map.isRequired,selectedUser:d["default"].map},enumerable:!0}]),t}(l.Component);t["default"]=m,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(245),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(40)["default"],u=n(1)["default"],c=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(95),h=u(d),p=n(2),m=u(p),f=n(39),_=n(41),g=n(205),v=u(g),y=n(121),b=c(y),C=n(124),w=c(C),I=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.children,i=a(e,["dispatch","children"]),r=h["default"]({},b,w);return m["default"].createElement(v["default"],l({},i,{actions:f.bindActionCreators(r,t)}),n)}}],[{key:"propTypes",value:{dispatch:p.PropTypes.func.isRequired,children:p.PropTypes.oneOfType([p.PropTypes.element,p.PropTypes.arrayOf(p.PropTypes.element)])},enumerable:!0}]);var n=t;return t=_.connect(function(e){return e})(t)||t}(p.Component);t["default"]=I,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(247),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(40)["default"],u=n(1)["default"],c=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(95),h=u(d),p=n(2),m=u(p),f=n(39),_=n(41),g=n(127),v=u(g),y=n(128),b=u(y),C=n(217),w=u(C),I=n(48),S=(u(I),n(121)),E=c(S),x=n(122),P=c(x),k=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.children,i=a(e,["dispatch","children"]),r=h["default"]({},E,P);return m["default"].createElement(w["default"],l({},i,{actions:f.bindActionCreators(r,t)}),n)}}],[{key:"propTypes",value:{dispatch:p.PropTypes.func.isRequired,children:p.PropTypes.oneOfType([p.PropTypes.element,p.PropTypes.arrayOf(p.PropTypes.element)])},enumerable:!0}]);var n=t;return t=_.connect(function(e){return{groups:v["default"](e),selectedGroup:b["default"](e)}})(t)||t}(p.Component);t["default"]=k,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(249),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"],l=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=a(u),d=n(169),h=n(39),p=n(474),m=a(p),f=n(41),_=n(244),g=a(_),v=n(246),y=a(v),b=n(250),C=a(b),w=n(254),I=a(w),S=n(252),E=a(S),x=n(232),P=a(x),k=n(259),T=l(k),M=h.applyMiddleware(m["default"])(h.createStore),A=h.combineReducers(T),O=M(A),D=function(e){return c["default"].createElement(d.Router,{history:e},c["default"].createElement(d.Route,{path:"/",component:g["default"]},c["default"].createElement(d.Route,{path:"groups",component:y["default"]},c["default"].createElement(d.Route,{path:":id",component:C["default"]})),c["default"].createElement(d.Route,{path:"users",component:I["default"]},c["default"].createElement(d.Route,{path:":id",component:E["default"]})),c["default"].createElement(d.Route,{path:"settings",component:P["default"]})))},L=function(e){function t(){s(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),o(t,[{key:"render",value:function(){var e=this.props.history;return c["default"].createElement(f.Provider,{store:O},D.bind(null,e))}}],[{key:"propTypes",value:{history:u.PropTypes.object.isRequired},enumerable:!0}]),t}(u.Component);t["default"]=L,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(251),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(40)["default"],u=n(1)["default"],c=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(2),h=u(d),p=n(39),m=n(41),f=n(128),_=u(f),g=n(228),v=u(g),y=n(122),b=c(y),C=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=a(e,["dispatch"]);return h["default"].createElement(v["default"],l({},n,{actions:p.bindActionCreators(b,t)}))}}],[{key:"propTypes",value:{dispatch:d.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=m.connect(function(e){return{selectedGroup:_["default"](e)}})(t)||t}(d.Component);t["default"]=C,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(253),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(40)["default"],u=n(1)["default"],c=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(2),h=u(d),p=n(39),m=n(41),f=n(129),_=u(f),g=n(230),v=u(g),y=n(123),b=c(y),C=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=a(e,["dispatch"]);return h["default"].createElement(v["default"],l({},n,{actions:p.bindActionCreators(b,t)}))}}],[{key:"propTypes",value:{dispatch:d.PropTypes.func.isRequired},enumerable:!0}]);var n=t;return t=m.connect(function(e){return{selectedUser:_["default"](e)}})(t)||t}(d.Component);t["default"]=C,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(255),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(30)["default"],l=n(40)["default"],u=n(1)["default"],c=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(95),h=u(d),p=n(2),m=u(p),f=n(39),_=n(41),g=n(130),v=u(g),y=n(129),b=u(y),C=n(240),w=u(C),I=n(124),S=c(I),E=n(123),x=c(E),P=function(e){function t(){s(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}r(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.children,i=a(e,["dispatch","children"]),r=h["default"]({},S,x);return m["default"].createElement(w["default"],l({},i,{actions:f.bindActionCreators(r,t)}),n)}}],[{key:"propTypes",value:{dispatch:p.PropTypes.func.isRequired,children:p.PropTypes.oneOfType([p.PropTypes.element,p.PropTypes.arrayOf(p.PropTypes.element)])},enumerable:!0}]);var n=t;return t=_.connect(function(e){return{users:v["default"](e),selectedUser:b["default"](e)}})(t)||t}(p.Component);t["default"]=P,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(198),o=i(r),s=function(e,t){return!o["default"](this.props,e)||!o["default"](this.state,t)};t["default"]=function(e){if(e.prototype.shouldComponentUpdate)throw new Error("Called on a component that already implements `shouldComponentUpdate`");return e.prototype.shouldComponentUpdate=s,e},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(40)["default"],r=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=r(o),a=n(169);t["default"]=function(e){return s["default"].createClass({mixins:[a.History],render:function(){return s["default"].createElement(e,i({},this.props,{history:this.history}))}})},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(6)["default"],r=n(7)["default"],o=n(5)["default"],s=n(4)["default"],a=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=a(l),c=n(164),d=a(c),h=n(198),p=a(h);t["default"]=function(e,t,n){return"function"==typeof e&&(n=t,t=e,e=[]),function(a){return function(c){function h(){s(this,h),i(Object.getPrototypeOf(h.prototype),"constructor",this).apply(this,arguments)}return r(h,c),o(h,[{key:"componentWillMount",value:function(){t&&t(d["default"](this.props.params,e),this.props.actions)}},{key:"componentWillUnmount",value:function(){n&&n(d["default"](this.props.params,e),this.props.actions)}},{key:"componentDidUpdate",value:function(n){var i=d["default"](this.props.params,e),r=d["default"](n.params,e);t&&!p["default"](i,r)&&t(i,this.props.actions)}},{key:"render",value:function(){return u["default"].createElement(a,this.props)}}],[{key:"propTypes",value:{actions:l.PropTypes.object.isRequired},enumerable:!0}]),h}(l.Component)}},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(282)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(260);t.groups=i(r);var o=n(262);t.selectedGroupId=i(o);var s=n(266);t.users=i(s);var a=n(264);t.selectedUserId=i(a)},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(261),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=i(r),s=n(22),a=o["default"].Map();t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?a:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t.error)return console.warn(t.payload.message),e;switch(t.type){case s.ADD_GROUP:return e.set(t.payload.get("id"),t.payload);case s.REMOVE_GROUP:return e["delete"](t.payload.get("id"));case s.UPDATE_GROUP:return e.set(t.payload.get("id"),t.payload);case s.GET_GROUPS:return t.payload;default:return e}},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(22);t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t.error)return console.warn(t.payload.message),e;switch(t.type){case i.SELECT_GROUP:return t.payload;default:return e}},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(265),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(22);t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t.error)return console.warn(t.payload.message),e;switch(t.type){case i.SELECT_USER:return t.payload;default:return e}},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(267),o=i(r);t["default"]=o["default"],e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),o=i(r),s=n(22),a=o["default"].Map();t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?a:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t.error)return console.warn(t.payload.message),e;switch(t.type){case s.ADD_USER:return e.set(t.payload.get("id"),t.payload);case s.REMOVE_USER:return e["delete"](t.payload.get("id"));case s.UPDATE_USER:return e.set(t.payload.get("id"),t.payload);case s.GET_USERS:return t.payload;default:return e}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.groups},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(197),o=n(127),s=i(o),a=function(e){return e.selectedGroupId};t["default"]=r.createSelector([s["default"],a],function(e,t){return e.get(t)}),e.exports=t["default"]},function(e,t,n){"use strict";var i=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(197),o=n(130),s=i(o),a=function(e){return e.selectedUserId};t["default"]=r.createSelector([s["default"],a],function(e,t){return e.get(t)}),e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.users},e.exports=t["default"]},function(e,t,n){"use strict";function i(){return v(f.GROUPS_API_URL).then(function(e){return c["default"].fromJS(w(e))})}function r(e){return v(f.GROUPS_BY_ID_API_URL,{ids:e.map(encodeURIComponent)}).then(function(e){return c["default"].fromJS(w(e))})}function o(){return v(f.USERS_API_URL).then(function(e){return c["default"].fromJS(I(e))})}function s(e){return v(f.USERS_BY_ID_API_URL,{ids:e.map(encodeURIComponent)}).then(function(e){return c["default"].fromJS(I(e))})}var a=n(134)["default"],l=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.getGroups=i,t.getGroupsById=r,t.getUsers=o,t.getUsersById=s;var u=n(34),c=l(u),d=n(164),h=l(d),p=n(376),m=l(p);n(483);var f=n(125),_=function(e){return e?function(t){return new a(function(n){setTimeout(function(){n(t)},e)})}:null},g=function(e){return e.json()},v=function(e,t){return fetch(m["default"](e)(t)).then(_(f.ARTIFICIAL_DELAY*(Math.random()+.5))).then(g)},y=function(e,t){return e=h["default"](e,[":id","id"].concat(t)),null==e.id&&(e.id=e[":id"],delete e[":id"]),null!=e.avatar&&(e.avatar=e.avatar+"?_="+e.id),e},b=function(e){return y(e,["name","description","avatar"])},C=function(e){return y(e,["firstName","lastName","jobTitle","avatar"])},w=function(e){return e["@graph"].reduce(function(e,t){return t=b(t),e[t.id]=t,e},{})},I=function(e){return e["@graph"].reduce(function(e,t){return t=C(t),e[t.id]=t,e},{})}},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(274);i(t,r(o,i))},function(e,t,n){"use strict";function i(){return a["default"].productName}function r(){return a["default"].version}var o=n(1)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.getName=i,t.getVersion=r;var s=n(354),a=o(s)},function(e,t,n){"use strict";var i=n(23)["default"],r=n(24)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=n(276);i(t,r(o,i))},function(e,t,n){"use strict";function i(){return new f}function r(e){return fetchApi(GROUPS_BY_ID_API_URL,{ids:e.map(encodeURIComponent)}).then(function(e){return h["default"].fromJS(generateGroups(e))})}function o(){return fetchApi(USERS_API_URL).then(function(e){return h["default"].fromJS(generateUsers(e))})}function s(e){return fetchApi(USERS_BY_ID_API_URL,{ids:e.map(encodeURIComponent)}).then(function(e){return h["default"].fromJS(generateUsers(e))})}var a=n(5)["default"],l=n(4)["default"],u=n(1)["default"],c=n(12)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=i,t.getGroupsById=r,t.getUsers=o,t.getUsersById=s;var d=n(34),h=u(d),p=n(63),m=(c(p),n(125)),f=function(){function e(){l(this,e),this.socket=new WebSocket(m.REALTIME_URL)}return a(e,[{key:"on",value:function(e,t){this.socket["on"+e]=t}},{key:"close",value:function(){this.socket.close()}}]),e}()},function(e,t,n){"use strict";function i(e){return e.selection.getItems().then(function(e){return e.map(function(e){return e.data})})}function r(e){return e.selection.getItems().then(function(e){return e.length>0?s.resolve(e[0].data):s.reject()})}function o(e,t){var n=e.itemDataSource.list.reduce(function(e,n,i){return t(n)&&e.push(i),e},[]);return e.selection.set(n)}var s=n(134)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedItems=i,t.getFirstSelectedItem=r,t.setSelection=o},function(e,t,n){e.exports={"default":n(283),__esModule:!0}},function(e,t,n){e.exports={"default":n(284),__esModule:!0}},function(e,t,n){e.exports={"default":n(287),__esModule:!0}},function(e,t,n){e.exports={"default":n(288),__esModule:!0}},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e["default"]:e},t.__esModule=!0},function(e,t,n){n(315),e.exports=n(31).Object.assign},function(e,t,n){var i=n(13);e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(13);e.exports=function(e,t,n){return i.setDesc(e,t,n)}},function(e,t,n){var i=n(13);n(316),e.exports=function(e,t){return i.getDesc(e,t)}},function(e,t,n){var i=n(13);n(317),e.exports=function(e){return i.getNames(e)}},function(e,t,n){n(318),e.exports=n(31).Object.setPrototypeOf},function(e,t,n){n(319),n(321),n(322),n(320),e.exports=n(31).Promise},function(e,t,n){var i=n(311),r=n(137),o=n(292),s=n(85);e.exports=n(84)(function(){var e=Object.assign,t={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=r})?function(e,t){for(var n=i(e),a=arguments.length,l=1;a>l;)for(var u,c=r(arguments[l++]),d=o(c),h=d.length,p=0;h>p;)s(c,u=d[p++])&&(n[u]=c[u]);return n}:Object.assign},function(e,t,n){var i=n(68),r=n(25).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(13);e.exports=function(e){var t=i.getKeys(e),n=i.getSymbols;if(n)for(var r,o=n(e),s=i.isEnum,a=0;o.length>a;)s.call(e,r=o[a++])&&t.push(r);return t}},function(e,t,n){var i=n(66),r=n(298),o=n(297),s=n(64),a=n(310),l=n(313);e.exports=function(e,t,n,u){var c,d,h,p=l(e),m=i(n,u,t?2:1),f=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(o(p))for(c=a(e.length);c>f;f++)t?m(s(d=e[f])[0],d[1]):m(e[f]);else for(h=p.call(e);!(d=h.next()).done;)r(h,m,d.value,t)}},function(e,t,n){var i={}.toString,r=n(88),o=n(13).getNames,s="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(t){return s.slice()}};e.exports.get=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(r(e))}},function(e,t,n){e.exports=n(25).document&&document.documentElement},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(50),r=n(17)("iterator");e.exports=function(e){return(i.Array||Array.prototype[r])===e}},function(e,t,n){var i=n(64);e.exports=function(e,t,n,r){
try{return r?t(i(n)[0],n[1]):t(n)}catch(o){var s=e["return"];throw void 0!==s&&i(s.call(e)),o}}},function(e,t,n){"use strict";var i=n(13),r={};n(67)(r,n(17)("iterator"),function(){return this}),e.exports=function(e,t,o){e.prototype=i.create(r,{next:n(141)(1,o)}),n(87)(e,t+" Iterator")}},function(e,t,n){var i=n(17)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}e.exports=function(e){if(!r)return!1;var t=!1;try{var n=[7],o=n[i]();o.next=function(){t=!0},n[i]=function(){return o},e(n)}catch(s){}return t}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i,r,o,s=n(25),a=n(309).set,l=s.MutationObserver||s.WebKitMutationObserver,u=s.process,c="process"==n(65)(u),d=function(){var e,t;for(c&&(e=u.domain)&&(u.domain=null,e.exit());i;)t=i.domain,t&&t.enter(),i.fn.call(),t&&t.exit(),i=i.next;r=void 0,e&&e.enter()};if(c)o=function(){u.nextTick(d)};else if(l){var h=1,p=document.createTextNode("");new l(d).observe(p,{characterData:!0}),o=function(){p.data=h=-h}}else o=function(){a.call(s,d)};e.exports=function(e){var t={fn:e,next:void 0,domain:c&&u.domain};r&&(r.next=t),i||(i=t,o()),r=t}},function(e,t,n){var i=n(142);e.exports=function(e,t){for(var n in t)i(e,n,t[n]);return e}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var i=n(25),r="__core-js_shared__",o=i[r]||(i[r]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){"use strict";var i=n(13),r=n(17)("species");e.exports=function(e){!n(86)||r in e||i.setDesc(e,r,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e}},function(e,t,n){var i=n(144),r=n(83);e.exports=function(e){return function(t,n){var o,s,a=String(r(t)),l=i(n),u=a.length;return 0>l||l>=u?e?"":void 0:(o=a.charCodeAt(l),55296>o||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):(o-55296<<10)+(s-56320)+65536)}}},function(e,t,n){"use strict";var i,r,o,s=n(66),a=n(296),l=n(295),u=n(291),c=n(25),d=c.process,h=c.setImmediate,p=c.clearImmediate,m=c.MessageChannel,f=0,_={},g="onreadystatechange",v=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},y=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++f]=function(){a("function"==typeof e?e:Function(e),t)},i(f),f},p=function(e){delete _[e]},"process"==n(65)(d)?i=function(e){d.nextTick(s(v,e,1))}:m?(r=new m,o=r.port2,r.port1.onmessage=y,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):i=g in u("script")?function(e){l.appendChild(u("script"))[g]=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){var i=n(144),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(83);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(136),r=n(17)("iterator"),o=n(50);e.exports=n(31).getIteratorMethod=function(e){return void 0!=e?e[r]||e["@@iterator"]||o[i(e)]:void 0}},function(e,t,n){"use strict";var i=n(312),r=n(301),o=n(50),s=n(88);n(138)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var i=n(49);i(i.S+i.F,"Object",{assign:n(290)})},function(e,t,n){var i=n(88);n(140)("getOwnPropertyDescriptor",function(e){return function(t,n){return e(i(t),n)}})},function(e,t,n){n(140)("getOwnPropertyNames",function(){return n(294).get})},function(e,t,n){var i=n(49);i(i.S,"Object",{setPrototypeOf:n(143).set})},function(e,t){},function(e,t,n){"use strict";var i,r=n(13),o=n(139),s=n(25),a=n(66),l=n(136),u=n(49),c=n(68),d=n(64),h=n(135),p=n(307),m=n(293),f=n(143).set,_=n(304),g=n(306),v=n(17)("species"),y=n(145)("record"),b=n(302),C="Promise",w=s.process,I="process"==l(w),S=s[C],E=function(e){var t=new S(function(){});return e&&(t.constructor=Object),S.resolve(t)===t},x=function(){function e(t){var n=new S(t);return f(n,e.prototype),n}var t=!1;try{if(t=S&&S.resolve&&E(),f(e,S),e.prototype=r.create(S.prototype,{constructor:{value:e}}),e.resolve(5).then(function(){})instanceof e||(t=!1),t&&n(86)){var i=!1;S.resolve(r.setDesc({},"then",{get:function(){i=!0}})),t=i}}catch(o){t=!1}return t}(),P=function(e){return c(e)&&(x?"Promise"==l(e):y in e)},k=function(e,t){return o&&e===S&&t===i?!0:_(e,t)},T=function(e){var t=d(e)[v];return void 0!=t?t:e},M=function(e){var t;return c(e)&&"function"==typeof(t=e.then)?t:!1},A=function(e,t){if(!e.n){e.n=!0;var n=e.c;b(function(){for(var i=e.v,r=1==e.s,o=0,a=function(t){var n,o,s=r?t.ok:t.fail;try{s?(r||(e.h=!0),n=s===!0?i:s(i),n===t.P?t.rej(TypeError("Promise-chain cycle")):(o=M(n))?o.call(n,t.res,t.rej):t.res(n)):t.rej(i)}catch(a){t.rej(a)}};n.length>o;)a(n[o++]);n.length=0,e.n=!1,t&&setTimeout(function(){var t,n,r=e.p;O(r)&&(I?w.emit("unhandledRejection",i,r):(t=s.onunhandledrejection)?t({promise:r,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)),e.a=void 0},1)})}},O=function(e){var t,n=e[y],i=n.a||n.c,r=0;if(n.h)return!1;for(;i.length>r;)if(t=i[r++],t.fail||!O(t.P))return!1;return!0},D=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),A(t,!0))},L=function(e){var t,n=this;if(!n.d){n.d=!0,n=n.r||n;try{(t=M(e))?b(function(){var i={r:n,d:!1};try{t.call(e,a(L,i,1),a(D,i,1))}catch(r){D.call(i,r)}}):(n.v=e,n.s=1,A(n,!1))}catch(i){D.call({r:n,d:!1},i)}}};x||(S=function(e){h(e);var t={p:p(this,S,C),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};this[y]=t;try{e(a(L,t,1),a(D,t,1))}catch(n){D.call(t,n)}},n(303)(S.prototype,{then:function(e,t){var n=d(d(this).constructor)[v],i={ok:"function"==typeof e?e:!0,fail:"function"==typeof t?t:!1},r=i.P=new(void 0!=n?n:S)(function(e,t){i.res=e,i.rej=t});h(i.res),h(i.rej);var o=this[y];return o.c.push(i),o.a&&o.a.push(i),o.s&&A(o,!1),r},"catch":function(e){return this.then(void 0,e)}})),u(u.G+u.W+u.F*!x,{Promise:S}),n(87)(S,C),g(S),g(i=n(31)[C]),u(u.S+u.F*!x,C,{reject:function(e){return new this(function(t,n){n(e)})}}),u(u.S+u.F*(!x||E(!0)),C,{resolve:function(e){return P(e)&&k(e.constructor,this)?e:new this(function(t){t(e)})}}),u(u.S+u.F*!(x&&n(300)(function(e){S.all(e)["catch"](function(){})})),C,{all:function(e){var t=T(this),n=[];return new t(function(i,o){m(e,!1,n.push,n);var s=n.length,a=Array(s);s?r.each.call(n,function(e,n){t.resolve(e).then(function(e){a[n]=e,--s||i(a)},o)}):i(a)})},race:function(e){var t=T(this);return new t(function(n,i){m(e,!1,function(e){t.resolve(e).then(n,i)})})}})},function(e,t,n){"use strict";var i=n(308)(!0);n(138)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){n(314);var i=n(50);i.NodeList=i.HTMLCollection=i.Array},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"index.html"},function(e,t){"use strict";function n(e,t,n){function i(){s=!0,n.apply(this,arguments)}function r(){s||(e>o?t.call(this,o++,r,i):i.apply(this,arguments))}var o=0,s=!1;r()}t.__esModule=!0,t.loopAsync=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){e=e||window.history.state||{};var t=c.getWindowPath(),n=e,i=n.key,r=void 0;return i?r=d.readState(i):(r=null,i=_.createKey(),f&&window.history.replaceState(o({},e,{key:i}),null,t)),_.createLocation(t,r,void 0,i)}function n(e){function n(e){void 0!==e.state&&i(t(e.state))}var i=e.transitionTo;return c.addEventListener(window,"popstate",n),function(){c.removeEventListener(window,"popstate",n)}}function i(e){var t=e.basename,n=e.pathname,i=e.search,r=e.hash,o=e.state,s=e.action,a=e.key;if(s!==l.POP){d.saveState(a,o);var u=(t||"")+n+i+r,c={key:a};s===l.PUSH?f?window.history.pushState(c,null,u):window.location.href=u:f?window.history.replaceState(c,null,u):window.location.replace(u)}}function r(e){1===++g&&(v=n(_));var t=_.listenBefore(e);return function(){t(),0===--g&&v()}}function s(e){1===++g&&(v=n(_));var t=_.listen(e);return function(){t(),0===--g&&v()}}function h(e){1===++g&&(v=n(_)),_.registerTransitionHook(e)}function m(e){_.unregisterTransitionHook(e),0===--g&&v()}a["default"](u.canUseDOM,"Browser history needs a DOM");var f=c.supportsHistory(),_=p["default"](o({},e,{getCurrentLocation:t,finishTransition:i,saveState:d.saveState})),g=0,v=void 0;return o({},_,{listenBefore:r,listen:s,registerTransitionHook:h,unregisterTransitionHook:m})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(71),a=i(s),l=n(32),u=n(70),c=n(69),d=n(146),h=n(147),p=i(h);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.match(/https?:\/\/[^\/]*/);return null==t?e:(a["default"](!1,'Location path must be pathname + query string only, not a fully qualified URL like "%s"',e),e.substring(t[0].length))}function o(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?c.POP:arguments[2],i=arguments.length<=3||void 0===arguments[3]?null:arguments[3];e=r(e);var o=e,s="",a="",l=o.indexOf("#");-1!==l&&(a=o.substring(l),o=o.substring(0,l));var u=o.indexOf("?");return-1!==u&&(s=o.substring(u),o=o.substring(0,u)),""===o&&(o="/"),{pathname:o,search:s,hash:a,state:t,action:n,key:i}}t.__esModule=!0;var s=n(33),a=i(s),l=n(51),u=i(l),c=n(32);t["default"]=u["default"](o,"Calling createLocation statically is deprecated; instead call the history.createLocation method - see docs/Location.md"),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(51),o=i(r),s=n(152),a=i(s);t["default"]=o["default"](a["default"],"enableBeforeUnload is deprecated, use useBeforeUnload instead"),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(51),o=i(r),s=n(90),a=i(s);t["default"]=o["default"](a["default"],"enableQueries is deprecated, use useQueries instead"),e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(343),o=i(r);t.createHistory=o["default"];var s=n(148),a=i(s);t.createHashHistory=a["default"];var l=n(150),u=i(l);t.createMemoryHistory=u["default"];var c=n(151),d=i(c);t.useBasename=d["default"];var h=n(152),p=i(h);t.useBeforeUnload=p["default"];var m=n(90),f=i(m);t.useQueries=f["default"];var _=n(32),g=i(_);t.Actions=g["default"];var v=n(344),y=i(v);t.createLocation=y["default"];var b=n(345),C=i(b);t.enableBeforeUnload=C["default"];var w=n(346),I=i(w);t.enableQueries=I["default"]},function(e,t,n){function i(e){return null===e||void 0===e}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:e.length>0&&"number"!=typeof e[0]?!1:!0:!1}function o(e,t,n){var o,c;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(l(e))return l(t)?(e=s.call(e),t=s.call(t),u(e,t,n)):!1;if(r(e)){if(!r(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var d=a(e),h=a(t)}catch(p){return!1}if(d.length!=h.length)return!1;for(d.sort(),h.sort(),o=d.length-1;o>=0;o--)if(d[o]!=h[o])return!1;for(o=d.length-1;o>=0;o--)if(c=d[o],!u(e[c],t[c],n))return!1;return typeof e==typeof t}var s=Array.prototype.slice,a=n(350),l=n(349),u=e.exports=function(e,t,n){return n||(n={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:o(e,t,n)}},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=r?n:i,t.supported=n,t.unsupported=i},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},function(e,t,n){var i=n(353),r=n(352);e.exports={stringify:i,parse:r}},function(e,t,n){var i=n(153),r={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1};r.parseValues=function(e,t){for(var n={},r=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0,s=r.length;s>o;++o){var a=r[o],l=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===l)n[i.decode(a)]="",t.strictNullHandling&&(n[i.decode(a)]=null);else{var u=i.decode(a.slice(0,l)),c=i.decode(a.slice(l+1));Object.prototype.hasOwnProperty.call(n,u)?n[u]=[].concat(n[u]).concat(c):n[u]=c}}return n},r.parseObject=function(e,t,n){if(!e.length)return t;var i,o=e.shift();if("[]"===o)i=[],i=i.concat(r.parseObject(e,t,n));else{i=n.plainObjects?Object.create(null):{};var s="["===o[0]&&"]"===o[o.length-1]?o.slice(1,o.length-1):o,a=parseInt(s,10),l=""+a;!isNaN(a)&&o!==s&&l===s&&a>=0&&n.parseArrays&&a<=n.arrayLimit?(i=[],i[a]=r.parseObject(e,t,n)):i[s]=r.parseObject(e,t,n)}return i},r.parseKeys=function(e,t,n){if(e){n.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,"[$1]"));var i=/^([^\[\]]*)/,o=/(\[[^\[\]]*\])/g,s=i.exec(e),a=[];if(s[1]){if(!n.plainObjects&&Object.prototype.hasOwnProperty(s[1])&&!n.allowPrototypes)return;a.push(s[1])}for(var l=0;null!==(s=o.exec(e))&&l<n.depth;)++l,(n.plainObjects||!Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))||n.allowPrototypes)&&a.push(s[1]);return s&&a.push("["+e.slice(s.index)+"]"),r.parseObject(a,t,n)}},e.exports=function(e,t){if(t=t||{},t.delimiter="string"==typeof t.delimiter||i.isRegExp(t.delimiter)?t.delimiter:r.delimiter,t.depth="number"==typeof t.depth?t.depth:r.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:r.arrayLimit,t.parseArrays=t.parseArrays!==!1,t.allowDots=t.allowDots!==!1,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:r.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:r.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:r.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:r.strictNullHandling,""===e||null===e||"undefined"==typeof e)return t.plainObjects?Object.create(null):{};for(var n="string"==typeof e?r.parseValues(e,t):e,o=t.plainObjects?Object.create(null):{},s=Object.keys(n),a=0,l=s.length;l>a;++a){var u=s[a],c=r.parseKeys(u,n[u],t);o=i.merge(o,c,t)}return i.compact(o)}},function(e,t,n){var i=n(153),r={delimiter:"&",arrayPrefixGenerators:{brackets:function(e,t){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e,t){return e}},strictNullHandling:!1};r.stringify=function(e,t,n,o,s){if("function"==typeof s)e=s(t,e);else if(i.isBuffer(e))e=e.toString();else if(e instanceof Date)e=e.toISOString();else if(null===e){if(o)return i.encode(t);e=""}if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[i.encode(t)+"="+i.encode(e)];var a=[];if("undefined"==typeof e)return a;for(var l=Array.isArray(s)?s:Object.keys(e),u=0,c=l.length;c>u;++u){var d=l[u];a=Array.isArray(e)?a.concat(r.stringify(e[d],n(t,d),n,o,s)):a.concat(r.stringify(e[d],t+"["+d+"]",n,o,s))}return a},e.exports=function(e,t){t=t||{};var n,i,o="undefined"==typeof t.delimiter?r.delimiter:t.delimiter,s="boolean"==typeof t.strictNullHandling?t.strictNullHandling:r.strictNullHandling;"function"==typeof t.filter?(i=t.filter,e=i("",e)):Array.isArray(t.filter)&&(n=i=t.filter);var a=[];if("object"!=typeof e||null===e)return"";var l;l=t.arrayFormat in r.arrayPrefixGenerators?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":"indices";var u=r.arrayPrefixGenerators[l];n||(n=Object.keys(e));for(var c=0,d=n.length;d>c;++c){var h=n[c];a=a.concat(r.stringify(e[h],h,u,s,i))}return a.join(o)}},function(e,t){e.exports={name:"react-redux-winjs-example",productName:"React+Redux+WinJS",description:"Example app using React, Redux and WinJS.",version:"0.0.0",license:"MIT","private":!0,main:"index.js",author:{name:"Daniel Perez Alvarez",email:"unindented@gmail.com",url:"https://unindented.org/"},repository:{type:"git",url:"git@github.com:unindented/react-redux-winjs-example.git"},scripts:{start:"grunt serve",test:"grunt test",release:"grunt release",publish:"git subtree push --prefix dist/web/ origin gh-pages"},dependencies:{history:"^1.9.0",immutable:"^3.7.5",lodash:"^3.10.1",react:"^0.13.3","react-immutable-proptypes":"^1.2.0","react-redux":"^3.0.1","react-router":"^1.0.0-rc1","react-winjs":"^2.4.0",redux:"^3.0.0","redux-thunk":"^1.0.0",reselect:"^2.0.0",shallowequal:"^0.2.2","whatwg-fetch":"^0.9.0",winjs:"^4.3.0"},devDependencies:{autoprefixer:"^6.0.0","babel-core":"^5.8.25","babel-runtime":"^5.8.25",coveralls:"^2.11.4",eslint:"^1.6.0","eslint-config-standard":"^4.4.0","eslint-config-standard-react":"^1.1.0","eslint-plugin-standard":"^1.3.0","eslint-plugin-react":"^3.3.1","jasmine-core":"^2.3.4","jasmine-jquery-matchers":"^1.0.0","jasmine-immutable-matchers":"^0.1.0",jquery:"^2.1.4",less:"^2.5.3","node-libs-browser":"^0.5.3",phantomjs:"^1.9.18",webpack:"^1.12.2","webpack-dev-server":"^1.12.0","loader-utils":"^0.2.11","babel-loader":"^5.3.2","css-loader":"^0.19.0","exports-loader":"^0.6.2","expose-loader":"^0.7.0","file-loader":"^0.8.4","imports-loader":"^0.6.4","istanbul-instrumenter-loader":"^0.1.3","json-loader":"^0.5.3","less-loader":"^2.2.1","postcss-loader":"^0.6.0","react-hot-loader":"^1.3.0","style-loader":"^0.12.3","wrap-loader":"^0.1.0","extract-text-webpack-plugin":"^0.8.2","stats-webpack-plugin":"^0.2.2",karma:"^0.13.10","karma-coverage":"^0.5.1","karma-jasmine":"^0.3.6","karma-sourcemap-loader":"^0.3.5","karma-webpack":"^1.7.0","karma-phantomjs-launcher":"^0.2.1","karma-chrome-launcher":"^0.2.1","karma-firefox-launcher":"^0.1.6","karma-opera-launcher":"^0.3.0","karma-safari-launcher":"^0.1.1","karma-ie-launcher":"^0.2.0",grunt:"^0.4.5","grunt-concurrent":"^2.0.3","grunt-contrib-clean":"^0.6.0","grunt-contrib-connect":"^0.11.2","grunt-legal-eagle":"^0.2.0","grunt-karma":"^0.12.1","grunt-webpack":"^1.0.11","load-grunt-config":"^0.17.2","fortune-example":"unindented/fortune-example"}}},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}e.exports=n},function(e,t){function n(e,t,n,i){return void 0!==e&&r.call(i,n)?e:t}var i=Object.prototype,r=i.hasOwnProperty;e.exports=n},function(e,t){function n(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}e.exports=n},function(e,t,n){function i(e,t,n,u){u||(u=[]);for(var c=-1,d=e.length;++c<d;){var h=e[c];l(h)&&a(h)&&(n||s(h)||o(h))?t?i(h,t,n,u):r(u,h):n||(u[u.length]=h)}return u}var r=n(355),o=n(93),s=n(94),a=n(72),l=n(53);e.exports=i},function(e,t,n){var i=n(364),r=i();e.exports=r},function(e,t,n){function i(e,t){return r(e,t,o)}var r=n(359),o=n(163);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}e.exports=n},function(e,t,n){function i(e){return s(function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=r(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&o(n[0],n[1],l)&&(a=3>s?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t})}var r=n(157),o=n(159),s=n(91);e.exports=i},function(e,t,n){function i(e){return function(t,n,i){for(var o=r(t),s=i(t),a=s.length,l=e?a:-1;e?l--:++l<a;){var u=s[l];if(n(o[u],u,o)===!1)break}return t}}var r=n(161);e.exports=i},function(e,t){function n(e){return i[e]}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};e.exports=n},function(e,t){function n(e){return"\\"+i[e]}var i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=n},function(e,t,n){var i=n(361),r=i("length");e.exports=r},function(e,t,n){function i(e,t){e=r(e);for(var n=-1,i=t.length,o={};++n<i;){var s=t[n];s in e&&(o[s]=e[s])}return o}var r=n(161);e.exports=i},function(e,t,n){function i(e,t){var n={};return r(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}var r=n(360);e.exports=i},function(e,t){var n=/<%-([\s\S]+?)%>/g;e.exports=n},function(e,t){var n=/<%([\s\S]+?)%>/g;e.exports=n},function(e,t,n){function i(e){for(var t=l(e),n=t.length,i=n&&e.length,u=!!i&&a(i)&&(o(e)||r(e)),d=-1,h=[];++d<n;){var p=t[d];(u&&s(p,i)||c.call(e,p))&&h.push(p)}return h}var r=n(93),o=n(94),s=n(92),a=n(73),l=n(163),u=Object.prototype,c=u.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return r(e)&&a.call(e)==o}var r=n(54),o="[object Function]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){return null==e?!1:r(e)?c.test(l.call(e)):o(e)&&s.test(e)}var r=n(373),o=n(53),s=/^\[object .+?Constructor\]$/,a=Object.prototype,l=Function.prototype.toString,u=a.hasOwnProperty,c=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return e=r(e),e&&a.test(e)?e.replace(s,o):e}var r=n(156),o=n(365),s=/[&<>"'`]/g,a=RegExp(s.source);e.exports=i},function(e,t,n){function i(e,t,n){var i=f.imports._.templateSettings||f;n&&h(e,t,n)&&(t=n=void 0),e=l(e),t=o(a({},n||t),i,r);var w,I,S=o(a({},t.imports),i.imports,r),E=p(S),x=u(S,E),P=0,k=t.interpolate||b,T="__p += '",M=RegExp((t.escape||b).source+"|"+k.source+"|"+(k===m?y:b).source+"|"+(t.evaluate||b).source+"|$","g"),A="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(M,function(t,n,i,r,o,s){return i||(i=r),T+=e.slice(P,s).replace(C,c),n&&(w=!0,T+="' +\n__e("+n+") +\n'"),o&&(I=!0,T+="';\n"+o+";\n__p += '"),i&&(T+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),P=s+t.length,t}),T+="';\n";var O=t.variable;O||(T="with (obj) {\n"+T+"\n}\n"),T=(I?T.replace(_,""):T).replace(g,"$1").replace(v,"$1;"),T="function("+(O||"obj")+") {\n"+(O?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(w?", __e = _.escape":"")+(I?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+T+"return __p\n}";var D=s(function(){return Function(E,A+"return "+T).apply(void 0,x)});if(D.source=T,d(D))throw D;return D}var r=n(356),o=n(154),s=n(378),a=n(155),l=n(156),u=n(362),c=n(366),d=n(162),h=n(159),p=n(96),m=n(160),f=n(377),_=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,v=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,C=/['\n\r\u2028\u2029\\]/g;e.exports=i},function(e,t,n){var i=n(375),r=n(370),o=n(371),s=n(160),a={escape:r,evaluate:o,interpolate:s,variable:"",imports:{_:{escape:i}}};e.exports=a},function(e,t,n){var i=n(162),r=n(91),o=r(function(e,t){try{return e.apply(void 0,t)}catch(n){return i(n)?n:new Error(n)}});e.exports=o},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=s["default"](e),n=l["default"](e);return{Provider:t,connect:n}}t.__esModule=!0,t["default"]=r;var o=n(382),s=i(o),a=n(381),l=i(a);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function a(e){var t=e.Component,n=e.PropTypes,i=c["default"](n);return function(n,a,u){function c(e,t){var n=e.getState(),i=P?y(n,t):y(n);return b["default"](m["default"](i),"`mapStateToProps` must return an object. Instead received %s.",i),i}function d(e,t){var n=e.dispatch,i=k?E(n,t):E(n);return b["default"](m["default"](i),"`mapDispatchToProps` must return an object. Instead received %s.",i),i}function p(e,t,n){var i=x(e,t,n);return b["default"](m["default"](i),"`mergeProps` must return an object. Instead received %s.",i),i}var f=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],g=Boolean(n),y=n||C,E=m["default"](a)?_["default"](a):a||w,x=u||I,P=y.length>1,k=E.length>1,T=f.pure,M=void 0===T?!0:T,A=S++;return function(n){var a=function(t){function i(e,n){r(this,i),t.call(this,e,n),this.version=A,this.store=e.store||n.store,b["default"](this.store,'Could not find "store" in either the context or '+('props of "'+this.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+this.constructor.displayName+'".')),this.stateProps=c(this.store,e),this.dispatchProps=d(this.store,e),this.state={storeState:null},this.updateState()}return o(i,t),i.prototype.shouldComponentUpdate=function(e,t){if(!M)return this.updateStateProps(e),this.updateDispatchProps(e),this.updateState(e),!0;var n=t.storeState!==this.state.storeState,i=!h["default"](e,this.props),r=!1,o=!1;return(n||i&&P)&&(r=this.updateStateProps(e)),i&&k&&(o=this.updateDispatchProps(e)),i||r||o?(this.updateState(e),!0):!1},i.prototype.computeNextState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];return p(this.stateProps,this.dispatchProps,e)},i.prototype.updateStateProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=c(this.store,e);return h["default"](t,this.stateProps)?!1:(this.stateProps=t,!0)},i.prototype.updateDispatchProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=d(this.store,e);return h["default"](t,this.dispatchProps)?!1:(this.dispatchProps=t,!0)},i.prototype.updateState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.nextState=this.computeNextState(e)},i.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},i.prototype.trySubscribe=function(){g&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},i.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},i.prototype.componentDidMount=function(){this.trySubscribe()},i.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},i.prototype.handleChange=function(){this.unsubscribe&&this.setState({storeState:this.store.getState()})},i.prototype.getWrappedInstance=function(){return this.refs.wrappedInstance},i.prototype.render=function(){return e.createElement(n,l({ref:"wrappedInstance"},this.nextState))},i}(t);return a.displayName="Connect("+s(n)+")",a.WrappedComponent=n,a.contextTypes={store:i},a.propTypes={store:i},v["default"](a,n)}}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t["default"]=a;var u=n(165),c=i(u),d=n(384),h=i(d),p=n(383),m=i(p),f=n(385),_=i(f),g=n(386),v=i(g),y=n(387),b=i(y),C=function(){return{}},w=function(e){return{dispatch:e}},I=function(e,t,n){return l({},n,e,t)},S=0;e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.version;if("string"!=typeof t)return!0;var n=t.split("."),i=parseInt(n[0],10),r=parseInt(n[1],10);return 0===i&&13===r}function a(e){function t(){p||h||(p=!0,console.error("With React 0.14 and later versions, you no longer need to wrap <Provider> child into a function."))}function n(){!p&&h&&(p=!0,console.error("With React 0.13, you need to wrap <Provider> child into a function. This restriction will be removed with React 0.14."))}function i(){m||(m=!0,console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}var a=e.Component,l=e.PropTypes,c=e.Children,d=u["default"](l),h=s(e),p=!1,m=!1,f=function(e){function s(t,n){r(this,s),e.call(this,t,n),this.store=t.store}return o(s,e),s.prototype.getChildContext=function(){return{store:this.store}},s.prototype.componentWillReceiveProps=function(e){var t=this.store,n=e.store;t!==n&&i()},s.prototype.render=function(){var e=this.props.children;return"function"==typeof e?(t(),e=e()):n(),c.only(e)},s}(a);return f.childContextTypes={store:d.isRequired},f.propTypes={store:d.isRequired,children:(h?l.func:l.element).isRequired},f}t.__esModule=!0,t["default"]=a;var l=n(165),u=i(l);e.exports=t["default"]},function(e,t){"use strict";function n(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&i(n)===i(Object)}t.__esModule=!0,t["default"]=n;var i=function(e){return Function.prototype.toString.call(e)};e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!r.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return function(t){return r.bindActionCreators(e,t)}}t.__esModule=!0,t["default"]=i;var r=n(39);e.exports=t["default"]},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;++o)n[r[o]]||i[r[o]]||(e[r[o]]=t[r[o]]);return e}},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,s,a],c=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return u[c++]}))}throw l.framesToPop=1,l}};e.exports=i},function(e,t,n){"use strict";t.__esModule=!0;var i=n(35),r={contextTypes:{history:i.history},componentWillMount:function(){this.history=this.context.history}};t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{
"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(2),l=i(a),u=n(166),c=i(u),d=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.prototype.render=function(){return l["default"].createElement(c["default"],s({},this.props,{onlyActiveOnIndex:!0}))},t}(l["default"].Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=i(a),u=n(27),c=i(u),d=n(42),h=i(d),p=n(167),m=i(p),f=n(35),_=l["default"].PropTypes,g=_.string,v=_.object,y=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.createRouteFromReactElement=function(e,t){t?t.indexRoute=m["default"].createRouteFromReactElement(e):h["default"](!1,"An <IndexRedirect> does not make sense at the root of your route config")},t.prototype.render=function(){c["default"](!1,"<IndexRedirect> elements are for router configuration only and should not be rendered")},s(t,null,[{key:"propTypes",value:{to:g.isRequired,query:v,state:v,onEnter:f.falsy,children:f.falsy},enumerable:!0}]),t}(l["default"].Component);t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=i(a),u=n(27),c=i(u),d=n(42),h=i(d),p=n(36),m=n(35),f=l["default"].PropTypes,_=f.bool,g=f.func,v=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.createRouteFromReactElement=function(e,t){t?t.indexRoute=p.createRouteFromReactElement(e):h["default"](!1,"An <IndexRoute> does not make sense at the root of your route config")},t.prototype.render=function(){c["default"](!1,"<IndexRoute> elements are for router configuration only and should not be rendered")},s(t,null,[{key:"propTypes",value:{path:m.falsy,ignoreScrollBehavior:_,component:m.component,components:m.components,getComponents:g},enumerable:!0}]),t}(l["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(2),o=i(r),s=n(27),a=i(s),l=o["default"].PropTypes.object,u={contextTypes:{history:l.isRequired,route:l},propTypes:{route:l},componentDidMount:function(){a["default"](this.routerWillLeave,"The Lifecycle mixin requires you to define a routerWillLeave method");var e=this.props.route||this.context.route;a["default"](e,"The Lifecycle mixin must be used on either a) a <Route component> or b) a descendant of a <Route component> that uses the RouteContext mixin"),this._unlistenBeforeLeavingRoute=this.context.history.listenBeforeLeavingRoute(e,this.routerWillLeave)},componentWillUnmount:function(){this._unlistenBeforeLeavingRoute&&this._unlistenBeforeLeavingRoute()}};t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=i(a),u=n(42),c=i(u),d=n(27),h=i(d),p=n(36),m=n(35),f=l["default"].PropTypes,_=f.string,g=f.bool,v=f.func,y=function(e){function t(){r(this,t),e.apply(this,arguments)}return o(t,e),t.createRouteFromReactElement=function(e){var t=p.createRouteFromReactElement(e);return t.handler&&(c["default"](!1,"<Route handler> is deprecated, use <Route component> instead"),t.component=t.handler,delete t.handler),t},t.prototype.render=function(){h["default"](!1,"<Route> elements are for router configuration only and should not be rendered")},s(t,null,[{key:"propTypes",value:{path:_,ignoreScrollBehavior:g,handler:m.component,component:m.component,components:m.components,getComponents:v},enumerable:!0}]),t}(l["default"].Component);t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(2),o=i(r),s=o["default"].PropTypes.object,a={propTypes:{route:s.isRequired},childContextTypes:{route:s.isRequired},getChildContext:function(){return{route:this.props.route}}};t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),l=i(a),u=n(42),c=i(u),d=n(148),h=i(d),p=n(36),m=n(168),f=i(m),_=n(98),g=i(_),v=n(35),y=l["default"].PropTypes,b=y.func,C=y.object,w=function(e){function t(n,i){r(this,t),e.call(this,n,i),this.state={location:null,routes:null,params:null,components:null}}return o(t,e),s(t,null,[{key:"propTypes",value:{history:C,children:v.routes,routes:v.routes,createElement:b,onError:b,onUpdate:b,parseQueryString:b,stringifyQuery:b},enumerable:!0}]),t.prototype.handleError=function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.history,i=t.children,r=t.routes,o=t.parseQueryString,s=t.stringifyQuery,a=n?function(){return n}:h["default"];this.history=g["default"](a)({routes:p.createRoutes(r||i),parseQueryString:o,stringifyQuery:s}),this._unlisten=this.history.listen(function(t,n){t?e.handleError(t):e.setState(n,e.props.onUpdate)})},t.prototype.componentWillReceiveProps=function(e){c["default"](e.history===this.props.history,"You cannot change <Router history>; it will be ignored")},t.prototype.componentWillUnmount=function(){this._unlisten&&this._unlisten()},t.prototype.render=function(){var e=this.state,t=e.location,n=e.routes,i=e.params,r=e.components,o=this.props.createElement;return null==t?null:l["default"].createElement(f["default"],{history:this.history,createElement:o,location:t,routes:n,params:i,components:r})},t}(l["default"].Component);t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){return function(n,i,r){e.apply(t,arguments),e.length<3&&r()}}function r(e){return e.reduce(function(e,t){return t.onEnter&&e.push(i(t.onEnter,t)),e},[])}function o(e,t,n){function i(e,t,n){s={pathname:t,query:n,state:e}}var o=r(e);if(!o.length)return void n();var s=void 0;a.loopAsync(o.length,function(e,n,r){o[e](t,i,function(e){e||s?r(e,s):n()})},n)}function s(e){for(var t=0,n=e.length;n>t;++t)e[t].onLeave&&e[t].onLeave.call(e[t])}t.__esModule=!0,t.runEnterHooks=o,t.runLeaveHooks=s;var a=n(97)},function(e,t,n){"use strict";function i(e,t,n){if(!e.path)return!1;var i=s.getParamNames(e.path);return i.some(function(e){return t.params[e]!==n.params[e]})}function r(e,t){return e.location.search!==t.location.search}function o(e,t){var n=e&&e.routes,o=t.routes,s=void 0,a=void 0;return n?(s=n.filter(function(n){return-1===o.indexOf(n)||i(n,e,t)||r(e,t)}),s.reverse(),a=o.filter(function(e){return-1===n.indexOf(e)||-1!==s.indexOf(e)})):(s=[],a=o),{leaveRoutes:s,enterRoutes:a}}t.__esModule=!0;var s=n(55);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n){t.component||t.components?n(null,t.component||t.components):t.getComponent?t.getComponent(e,n):t.getComponents?t.getComponents(e,n):n()}function r(e,t){o.mapAsync(e.routes,function(t,n,r){i(e.location,t,r)},t)}t.__esModule=!0;var o=n(97);t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){var n={};if(!e.path)return n;var i=r.getParamNames(e.path);for(var o in t)t.hasOwnProperty(o)&&-1!==i.indexOf(o)&&(n[o]=t[o]);return n}t.__esModule=!0;var r=n(55);t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return i(e,t[n])});if("object"==typeof e){for(var n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||!i(e[n],t[n])))return!1;return!0}return String(e)===String(t)}function r(e,t,n){return e.every(function(e,i){return String(t[i])===String(n[e])})}function o(e,t,n){for(var i=void 0,o=void 0,s="",a=0,l=t.length;l>a;++a){i=t[a],o=i.path||"","/"!==o.charAt(0)&&(o=s.replace(/\/*$/,"/")+o);var c=u.matchPattern(o,e),d=c.remainingPathname,h=c.paramNames,p=c.paramValues;if(""===d&&r(h,p,n))return i;s=o}return null}function s(e,t,n,i){var r=o(e,t,n);return null==r?!1:i?t.length>1&&t[t.length-1]===r.indexRoute:!0}function a(e,t){return null==t?null==e:null==e?!0:i(e,t)}function l(e,t,n,i,r,o){return null==i?!1:s(e,r,o,n)?a(t,i.query):!1}t.__esModule=!0;var u=n(55);t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=e.routes,i=e.location,r=e.parseQueryString,s=e.stringifyQuery,l=e.basename;a["default"](i,"match needs a location");var u=f({routes:h.createRoutes(n),parseQueryString:r,stringifyQuery:s,basename:l});"string"==typeof i&&(i=u.createLocation(i)),u.match(i,function(e,n,i){t(e,n,i&&o({},i,{history:u}))})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(27),a=i(s),l=n(150),u=i(l),c=n(151),d=i(c),h=n(36),p=n(98),m=i(p),f=m["default"](d["default"](u["default"]));t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n){e.childRoutes?n(null,e.childRoutes):e.getChildRoutes?e.getChildRoutes(t,function(e,t){n(e,!e&&d.createRoutes(t))}):n()}function r(e,t,n){e.indexRoute?n(null,e.indexRoute):e.getIndexRoute?e.getIndexRoute(t,function(e,t){n(e,!e&&d.createRoutes(t)[0])}):n()}function o(e,t,n){return t.reduceRight(function(e,t,i){var r=n&&n[i];return Array.isArray(e[t])?e[t].unshift(r):t in e?e[t]=[r,e[t]]:e[t]=r,e},e)}function s(e,t){return o({},e,t)}function a(e,t,n,o){var a=t.path||"";"/"!==a.charAt(0)&&(a=e.replace(/\/*$/,"/")+a);var u=c.matchPattern(a,n.pathname),d=u.remainingPathname,h=u.paramNames,p=u.paramValues,m=""===d;m&&t.path?!function(){var e={routes:[t],params:s(h,p)};r(t,n,function(t,n){t?o(t):(n&&e.routes.push(n),o(null,e))})}():null!=d||t.childRoutes?i(t,n,function(e,i){e?o(e):i?l(i,n,function(e,n){e?o(e):n?(n.routes.unshift(t),o(null,n)):o()},a):o()}):o()}function l(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?"":arguments[3];u.loopAsync(e.length,function(n,r,o){a(i,e[n],t,function(e,t){e||t?o(e,t):r()})},n)}t.__esModule=!0;var u=n(97),c=n(55),d=n(36);t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";function i(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case k.topCompositionStart:return T.compositionStart;case k.topCompositionEnd:return T.compositionEnd;case k.topCompositionUpdate:return T.compositionUpdate}}function s(e,t){return e===k.topKeyDown&&t.keyCode===C}function a(e,t){switch(e){case k.topKeyUp:return-1!==b.indexOf(t.keyCode);case k.topKeyDown:return t.keyCode!==C;case k.topKeyPress:case k.topMouseDown:case k.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,i){var r,u;if(w?r=o(e):A?a(e,i)&&(r=T.compositionEnd):s(e,i)&&(r=T.compositionStart),!r)return null;E&&(A||r!==T.compositionStart?r===T.compositionEnd&&A&&(u=A.getData()):A=_.getPooled(t));var c=g.getPooled(r,n,i);if(u)c.data=u;else{var d=l(i);null!==d&&(c.data=d)}return m.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case k.topCompositionEnd:return l(t);case k.topKeyPress:var n=t.which;return n!==x?null:(M=!0,P);case k.topTextInput:var i=t.data;return i===P&&M?null:i;default:return null}}function d(e,t){if(A){if(e===k.topCompositionEnd||a(e,t)){var n=A.getData();return _.release(A),A=null,n}return null}switch(e){case k.topPaste:return null;case k.topKeyPress:return t.which&&!r(t)?String.fromCharCode(t.which):null;case k.topCompositionEnd:return E?null:t.data;default:return null}}function h(e,t,n,i){var r;if(r=S?c(e,i):d(e,i),!r)return null;var o=v.getPooled(T.beforeInput,n,i);return o.data=r,m.accumulateTwoPhaseDispatches(o),o}var p=n(14),m=n(58),f=n(11),_=n(411),g=n(445),v=n(448),y=n(29),b=[9,13,27,32],C=229,w=f.canUseDOM&&"CompositionEvent"in window,I=null;f.canUseDOM&&"documentMode"in document&&(I=document.documentMode);var S=f.canUseDOM&&"TextEvent"in window&&!I&&!i(),E=f.canUseDOM&&(!w||I&&I>8&&11>=I),x=32,P=String.fromCharCode(x),k=p.topLevelTypes,T={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[k.topCompositionEnd,k.topKeyPress,k.topTextInput,k.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[k.topBlur,k.topCompositionEnd,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[k.topBlur,k.topCompositionStart,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[k.topBlur,k.topCompositionUpdate,k.topKeyDown,k.topKeyPress,k.topKeyUp,k.topMouseDown]}},M=!1,A=null,O={eventTypes:T,extractEvents:function(e,t,n,i){return[u(e,t,n,i),h(e,t,n,i)]}};e.exports=O},function(e,t,n){"use strict";function i(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function r(e){var t=I.getPooled(k.change,M,e);b.accumulateTwoPhaseDispatches(t),w.batchedUpdates(o,t)}function o(e){y.enqueueEvents(e),y.processEventQueue()}function s(e,t){T=e,M=t,T.attachEvent("onchange",r)}function a(){T&&(T.detachEvent("onchange",r),T=null,M=null)}function l(e,t,n){return e===P.topChange?n:void 0}function u(e,t,n){e===P.topFocus?(a(),s(t,n)):e===P.topBlur&&a()}function c(e,t){T=e,M=t,A=e.value,O=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(T,"value",B),T.attachEvent("onpropertychange",h)}function d(){T&&(delete T.value,T.detachEvent("onpropertychange",h),T=null,M=null,A=null,O=null)}function h(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==A&&(A=t,r(e))}}function p(e,t,n){return e===P.topInput?n:void 0}function m(e,t,n){e===P.topFocus?(d(),c(t,n)):e===P.topBlur&&d()}function f(e,t,n){return e!==P.topSelectionChange&&e!==P.topKeyUp&&e!==P.topKeyDown||!T||T.value===A?void 0:(A=T.value,M)}function _(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function g(e,t,n){return e===P.topClick?n:void 0}var v=n(14),y=n(57),b=n(58),C=n(11),w=n(16),I=n(38),S=n(117),E=n(191),x=n(29),P=v.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:x({onChange:null}),captured:x({onChangeCapture:null})},dependencies:[P.topBlur,P.topChange,P.topClick,P.topFocus,P.topInput,P.topKeyDown,P.topKeyUp,P.topSelectionChange]}},T=null,M=null,A=null,O=null,D=!1;C.canUseDOM&&(D=S("change")&&(!("documentMode"in document)||document.documentMode>8));var L=!1;C.canUseDOM&&(L=S("input")&&(!("documentMode"in document)||document.documentMode>9));var B={get:function(){return O.get.call(this)},set:function(e){A=""+e,O.set.call(this,e)}},R={eventTypes:k,extractEvents:function(e,t,n,r){var o,s;if(i(t)?D?o=l:s=u:E(t)?L?o=p:(o=f,s=m):_(t)&&(o=g),o){var a=o(e,t,n);if(a){var c=I.getPooled(k.change,a,r);return b.accumulateTwoPhaseDispatches(c),c}}s&&s(e,t,n)}};e.exports=R},function(e,t){"use strict";var n=0,i={createReactRootIndex:function(){return n++}};e.exports=i},function(e,t,n){"use strict";function i(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r=n(407),o=n(178),s=n(471),a=n(3),l={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:s,processUpdates:function(e,t){for(var n,l=null,u=null,c=0;c<e.length;c++)if(n=e[c],n.type===o.MOVE_EXISTING||n.type===o.REMOVE_NODE){var d=n.fromIndex,h=n.parentNode.childNodes[d],p=n.parentID;a(h),l=l||{},l[p]=l[p]||[],l[p][d]=h,u=u||[],u.push(h)}var m=r.dangerouslyRenderMarkup(t);if(u)for(var f=0;f<u.length;f++)u[f].parentNode.removeChild(u[f]);for(var _=0;_<e.length;_++)switch(n=e[_],n.type){case o.INSERT_MARKUP:i(n.parentNode,m[n.markupIndex],n.toIndex);break;case o.MOVE_EXISTING:i(n.parentNode,l[n.parentID][n.fromIndex],n.toIndex);break;case o.TEXT_CONTENT:s(n.parentNode,n.textContent);break;case o.REMOVE_NODE:}}};e.exports=l},function(e,t,n){"use strict";function i(e){return e.substring(1,e.indexOf(" "))}var r=n(11),o=n(457),s=n(28),a=n(188),l=n(3),u=/^(<[^ \/>]+)/,c="data-danger-index",d={dangerouslyRenderMarkup:function(e){l(r.canUseDOM);for(var t,n={},d=0;d<e.length;d++)l(e[d]),t=i(e[d]),t=a(t)?t:"*",n[t]=n[t]||[],n[t][d]=e[d];var h=[],p=0;for(t in n)if(n.hasOwnProperty(t)){var m,f=n[t];for(m in f)if(f.hasOwnProperty(m)){var _=f[m];f[m]=_.replace(u,"$1 "+c+'="'+m+'" ')}for(var g=o(f.join(""),s),v=0;v<g.length;++v){var y=g[v];y.hasAttribute&&y.hasAttribute(c)&&(m=+y.getAttribute(c),y.removeAttribute(c),l(!h.hasOwnProperty(m)),h[m]=y,p+=1)}}return l(p===h.length),l(h.length===e.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){l(r.canUseDOM),l(t),l("html"!==e.tagName.toLowerCase());var n=o(t,s)[0];e.parentNode.replaceChild(n,e)}};e.exports=d},function(e,t,n){"use strict";var i=n(29),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null}),i({AnalyticsEventPlugin:null}),i({MobileSafariClickEventPlugin:null})];e.exports=r},function(e,t,n){"use strict";var i=n(14),r=n(58),o=n(78),s=n(21),a=n(29),l=i.topLevelTypes,u=s.getFirstReactDOM,c={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},d=[null,null],h={eventTypes:c,extractEvents:function(e,t,n,i){if(e===l.topMouseOver&&(i.relatedTarget||i.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var a;if(t.window===t)a=t;else{var h=t.ownerDocument;a=h?h.defaultView||h.parentWindow:window}var p,m;if(e===l.topMouseOut?(p=t,m=u(i.relatedTarget||i.toElement)||a):(p=a,m=t),p===m)return null;var f=p?s.getID(p):"",_=m?s.getID(m):"",g=o.getPooled(c.mouseLeave,f,i);g.type="mouseleave",g.target=p,g.relatedTarget=m;var v=o.getPooled(c.mouseEnter,_,i);return v.type="mouseenter",v.target=m,v.relatedTarget=p,r.accumulateEnterLeaveDispatches(g,v,f,_),d[0]=g,d[1]=v,d}};e.exports=h},function(e,t,n){var i=n(28),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:i}},registerDefault:function(){}};e.exports=r},function(e,t,n){"use strict";function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=n(18),o=n(8),s=n(189);o(i.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[s()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,r=this.getText(),o=r.length;for(e=0;i>e&&n[e]===r[e];e++);var s=i-e;for(t=1;s>=t&&n[i-t]===r[o-t];t++);var a=t>1?1-t:void 0;return this._fallbackText=r.slice(e,a),this._fallbackText}}),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";var i,r=n(43),o=n(11),s=r.injection.MUST_USE_ATTRIBUTE,a=r.injection.MUST_USE_PROPERTY,l=r.injection.HAS_BOOLEAN_VALUE,u=r.injection.HAS_SIDE_EFFECTS,c=r.injection.HAS_NUMERIC_VALUE,d=r.injection.HAS_POSITIVE_NUMERIC_VALUE,h=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(o.canUseDOM){var p=document.implementation;i=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var m={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:s|l,allowTransparency:s,alt:null,async:l,autoComplete:null,autoPlay:l,cellPadding:null,cellSpacing:null,charSet:s,checked:a|l,classID:s,className:i?s:a,cols:s|d,colSpan:null,content:null,contentEditable:null,contextMenu:s,controls:a|l,coords:null,crossOrigin:null,data:null,dateTime:s,defer:l,dir:null,disabled:s|l,download:h,draggable:null,encType:null,form:s,formAction:s,formEncType:s,formMethod:s,formNoValidate:l,formTarget:s,frameBorder:s,headers:null,height:s,hidden:s|l,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,label:null,lang:null,list:s,loop:a|l,low:null,manifest:s,marginHeight:null,marginWidth:null,max:null,maxLength:s,media:s,mediaGroup:null,method:null,min:null,multiple:a|l,muted:a|l,name:null,noValidate:l,open:l,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|l,rel:null,required:l,role:s,rows:s|d,rowSpan:null,sandbox:null,scope:null,scoped:l,scrolling:null,seamless:s|l,selected:a|l,shape:null,size:s|d,sizes:s,span:d,spellCheck:null,src:null,srcDoc:a,srcSet:s,start:c,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|u,width:s,wmode:s,autoCapitalize:null,autoCorrect:null,itemProp:s,itemScope:s|l,itemType:s,itemID:s,itemRef:s,property:null,unselectable:s},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=m},function(e,t,n){"use strict";var i=n(14),r=n(28),o=i.topLevelTypes,s={eventTypes:null,extractEvents:function(e,t,n,i){if(e===o.topTouchStart){var s=i.target;s&&!s.onclick&&(s.onclick=r)}}};e.exports=s},function(e,t,n){"use strict";var i=n(100),r=n(416),o=n(173),s=n(15),a=n(105),l=n(20),u=n(9),c=(n(59),n(418)),d=n(175),h=n(429),p=n(45),m=n(21),f=n(37),_=n(179),g=n(47),v=n(438),y=n(8),b=n(184),C=n(469);h.inject();var w=u.createElement,I=u.createFactory,S=u.cloneElement,E=f.measure("React","render",m.render),x={Children:{map:r.map,forEach:r.forEach,count:r.count,only:C},Component:o,DOM:c,PropTypes:_,initializeTouchEvents:function(e){i.useTouchEvents=e},createClass:s.createClass,createElement:w,cloneElement:S,createFactory:I,createMixin:function(e){return e},constructAndRenderComponent:m.constructAndRenderComponent,constructAndRenderComponentByID:m.constructAndRenderComponentByID,findDOMNode:b,render:E,renderToString:v.renderToString,renderToStaticMarkup:v.renderToStaticMarkup,unmountComponentAtNode:m.unmountComponentAtNode,isValidElement:u.isValidElement,withContext:a.withContext,__spread:y};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:l,InstanceHandles:p,Mount:m,Reconciler:g,TextComponent:d});x.version="0.13.3",e.exports=x},function(e,t,n){"use strict";var i=n(47),r=n(459),o=n(116),s=n(119),a={instantiateChildren:function(e,t,n){var i=r(e);for(var s in i)if(i.hasOwnProperty(s)){var a=i[s],l=o(a,null);i[s]=l}return i},updateChildren:function(e,t,n,a){var l=r(t);if(!l&&!e)return null;var u;for(u in l)if(l.hasOwnProperty(u)){var c=e&&e[u],d=c&&c._currentElement,h=l[u];if(s(d,h))i.receiveComponent(c,h,n,a),l[u]=c;else{c&&i.unmountComponent(c,u);var p=o(h,null);l[u]=p}}for(u in e)!e.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||i.unmountComponent(e[u]);return l},unmountChildren:function(e){for(var t in e){var n=e[t];i.unmountComponent(n)}}};e.exports=a},function(e,t,n){"use strict";function i(e,t){this.forEachFunction=e,this.forEachContext=t}function r(e,t,n,i){var r=e;r.forEachFunction.call(r.forEachContext,t,i)}function o(e,t,n){if(null==e)return e;var o=i.getPooled(t,n);p(e,r,o),i.release(o)}function s(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function a(e,t,n,i){var r=e,o=r.mapResult,s=!o.hasOwnProperty(n);if(s){var a=r.mapFunction.call(r.mapContext,t,i);o[n]=a}}function l(e,t,n){if(null==e)return e;var i={},r=s.getPooled(i,t,n);return p(e,a,r),s.release(r),h.create(i)}function u(e,t,n,i){return null}function c(e,t){return p(e,u,null)}var d=n(18),h=n(75),p=n(192),m=(n(10),d.twoArgumentPooler),f=d.threeArgumentPooler;d.addPoolingTo(i,m),d.addPoolingTo(s,f);var _={forEach:o,map:l,count:c};e.exports=_},function(e,t,n){"use strict";function i(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var r=n(104),o=n(105),s=n(20),a=n(9),l=(n(59),n(46)),u=n(108),c=n(76),d=n(37),h=n(109),p=(n(77),n(47)),m=n(16),f=n(8),_=n(80),g=n(3),v=n(119),y=(n(10),1),b={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=y++,this._rootNodeID=e;var i=this._processProps(this._currentElement.props),r=this._processContext(this._currentElement._context),o=c.getComponentClassForElement(this._currentElement),s=new o(i,r);s.props=i,s.context=r,s.refs=_,this._instance=s,l.set(s,this);var a=s.state;void 0===a&&(s.state=a=null),g("object"==typeof a&&!Array.isArray(a)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var d,h,m=u.currentlyMountingInstance;u.currentlyMountingInstance=this;try{s.componentWillMount&&(s.componentWillMount(),this._pendingStateQueue&&(s.state=this._processPendingState(s.props,s.context))),d=this._getValidatedChildContext(n),h=this._renderValidatedComponent(d)}finally{u.currentlyMountingInstance=m}this._renderedComponent=this._instantiateReactComponent(h,this._currentElement.type);var f=p.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,d));return s.componentDidMount&&t.getReactMountReady().enqueue(s.componentDidMount,s),f},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=u.currentlyUnmountingInstance;u.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{u.currentlyUnmountingInstance=t}}p.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,l.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=a.cloneAndReplaceProps(n,f({},n.props,e)),m.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return _;var n=this._currentElement.type.contextTypes;if(!n)return _;t={};for(var i in n)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){g("object"==typeof t.constructor.childContextTypes);for(var i in n)g(i in t.constructor.childContextTypes);return n}return null},_mergeChildContext:function(e,t){return t?f({},e,t):e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var r=this.getName();for(var o in e)if(e.hasOwnProperty(o)){var s;try{g("function"==typeof e[o]),s=e[o](t,o,r,n)}catch(a){s=a}if(s instanceof Error){i(this);n===h.prop}}},receiveComponent:function(e,t,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(t,i,e,r,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&p.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),i=(this.getName()||"ReactCompositeComponent",0);i<n.length;i++){n[i]}},updateComponent:function(e,t,n,i,r){var o=this._instance,s=o.context,a=o.props;t!==n&&(s=this._processContext(n._context),a=this._processProps(n.props),o.componentWillReceiveProps&&o.componentWillReceiveProps(a,s));var l=this._processPendingState(a,s),u=this._pendingForceUpdate||!o.shouldComponentUpdate||o.shouldComponentUpdate(a,l,s);u?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,a,l,s,e,r)):(this._currentElement=n,this._context=r,o.props=a,o.state=l,o.context=s)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(r&&1===i.length)return i[0];for(var o=f({},r?i[0]:n.state),s=r?1:0;s<i.length;s++){
var a=i[s];f(o,"function"==typeof a?a.call(n,o,e,t):a)}return o},_performComponentUpdate:function(e,t,n,i,r,o){var s=this._instance,a=s.props,l=s.state,u=s.context;s.componentWillUpdate&&s.componentWillUpdate(t,n,i),this._currentElement=e,this._context=o,s.props=t,s.state=n,s.context=i,this._updateRenderedComponent(r,o),s.componentDidUpdate&&r.getReactMountReady().enqueue(s.componentDidUpdate.bind(s,a,l,u),s)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,r=this._getValidatedChildContext(),o=this._renderValidatedComponent(r);if(v(i,o))p.receiveComponent(n,o,e,this._mergeChildContext(t,r));else{var s=this._rootNodeID,a=n._rootNodeID;p.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(o,this._currentElement.type);var l=p.mountComponent(this._renderedComponent,s,e,this._mergeChildContext(t,r));this._replaceNodeWithMarkupByID(a,l)}},_replaceNodeWithMarkupByID:function(e,t){r.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(e){var t,n=o.current;o.current=this._mergeChildContext(this._currentElement._context,e),s.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{o.current=n,s.current=null}return g(null===t||t===!1||a.isValidElement(t)),t},attachRef:function(e,t){var n=this.getPublicInstance(),i=n.refs===_?n.refs={}:n.refs;i[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};d.measureMethods(b,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var C={Mixin:b};e.exports=C},function(e,t,n){"use strict";function i(e){return r.createFactory(e)}var r=n(9),o=(n(59),n(467)),s=o({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},i);e.exports=s},function(e,t,n){"use strict";var i=n(74),r=n(19),o=n(15),s=n(9),a=n(61),l=s.createFactory("button"),u=a({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),c=o.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[i,r],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&u[t]||(e[t]=this.props[t]);return l(e,this.props.children)}});e.exports=c},function(e,t,n){"use strict";var i=n(14),r=n(102),o=n(19),s=n(15),a=n(9),l=a.createFactory("form"),u=s.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[o,r],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(i.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(i.topLevelTypes.topSubmit,"submit")}});e.exports=u},function(e,t,n){"use strict";var i=n(14),r=n(102),o=n(19),s=n(15),a=n(9),l=a.createFactory("iframe"),u=s.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[o,r],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(i.topLevelTypes.topLoad,"load")}});e.exports=u},function(e,t,n){"use strict";var i=n(14),r=n(102),o=n(19),s=n(15),a=n(9),l=a.createFactory("img"),u=s.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[o,r],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(i.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(i.topLevelTypes.topError,"error")}});e.exports=u},function(e,t,n){"use strict";function i(){this.isMounted()&&this.forceUpdate()}var r=n(74),o=n(56),s=n(101),a=n(19),l=n(15),u=n(9),c=n(21),d=n(16),h=n(8),p=n(3),m=u.createFactory("input"),f={},_=l.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[r,s.Mixin,a],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=h({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=s.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=s.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,m(e,this.props.children)},componentDidMount:function(){var e=c.getID(this.getDOMNode());f[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=c.getID(e);delete f[t]},componentDidUpdate:function(e,t,n){var i=this.getDOMNode();null!=this.props.checked&&o.setValueForProperty(i,"checked",this.props.checked||!1);var r=s.getValue(this);null!=r&&o.setValueForProperty(i,"value",""+r)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(t=n.call(this,e)),d.asap(i,this);var r=this.props.name;if("radio"===this.props.type&&null!=r){for(var o=this.getDOMNode(),a=o;a.parentNode;)a=a.parentNode;for(var l=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),u=0,h=l.length;h>u;u++){var m=l[u];if(m!==o&&m.form===o.form){var _=c.getID(m);p(_);var g=f[_];p(g),d.asap(i,g)}}}return t}});e.exports=_},function(e,t,n){"use strict";var i=n(19),r=n(15),o=n(9),s=(n(10),o.createFactory("option")),a=r.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[i],componentWillMount:function(){},render:function(){return s(this.props,this.props.children)}});e.exports=a},function(e,t,n){"use strict";function i(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=a.getValue(this);null!=e&&this.isMounted()&&o(this,e)}}function r(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function o(e,t){var n,i,r,o=e.getDOMNode().options;if(e.props.multiple){for(n={},i=0,r=t.length;r>i;i++)n[""+t[i]]=!0;for(i=0,r=o.length;r>i;i++){var s=n.hasOwnProperty(o[i].value);o[i].selected!==s&&(o[i].selected=s)}}else{for(n=""+t,i=0,r=o.length;r>i;i++)if(o[i].value===n)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}var s=n(74),a=n(101),l=n(19),u=n(15),c=n(9),d=n(16),h=n(8),p=c.createFactory("select"),m=u.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[s,a.Mixin,l],propTypes:{defaultValue:r,value:r},render:function(){var e=h({},this.props);return e.onChange=this._handleChange,e.value=null,p(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=a.getValue(this);null!=e?o(this,e):null!=this.props.defaultValue&&o(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=a.getValue(this);null!=t?(this._pendingUpdate=!1,o(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?o(this,this.props.defaultValue):o(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=a.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,d.asap(i,this),t}});e.exports=m},function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var o=r.text.length,s=o+i;return{start:o,end:s}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,s=t.focusOffset,a=t.getRangeAt(0),l=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=l?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var d=i(c.startContainer,c.startOffset,c.endContainer,c.endOffset),h=d?0:c.toString().length,p=h+u,m=document.createRange();m.setStart(n,r),m.setEnd(o,s);var f=m.collapsed;return{start:f?p:h,end:f?h:p}}function s(e,t){var n,i,r=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,r=Math.min(t.start,i),o="undefined"==typeof t.end?r:Math.min(t.end,i);if(!n.extend&&r>o){var s=o;o=r,r=s}var a=u(e,r),l=u(e,o);if(a&&l){var d=document.createRange();d.setStart(a.node,a.offset),n.removeAllRanges(),r>o?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=n(11),u=n(461),c=n(189),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:d?r:o,setOffsets:d?s:a};e.exports=h},function(e,t,n){"use strict";function i(){this.isMounted()&&this.forceUpdate()}var r=n(74),o=n(56),s=n(101),a=n(19),l=n(15),u=n(9),c=n(16),d=n(8),h=n(3),p=(n(10),u.createFactory("textarea")),m=l.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[r,s.Mixin,a],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(h(null==e),Array.isArray(t)&&(h(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=s.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=d({},this.props);return h(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,p(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var i=s.getValue(this);if(null!=i){var r=this.getDOMNode();o.setValueForProperty(r,"value",""+i)}},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(t=n.call(this,e)),c.asap(i,this),t}});e.exports=m},function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var r=n(16),o=n(79),s=n(8),a=n(28),l={initialize:a,close:function(){h.isBatchingUpdates=!1}},u={initialize:a,close:r.flushBatchedUpdates.bind(r)},c=[u,l];s(i.prototype,o.Mixin,{getTransactionWrappers:function(){return c}});var d=new i,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,r){var o=h.isBatchingUpdates;h.isBatchingUpdates=!0,o?e(t,n,i,r):d.perform(e,null,t,n,i,r)}};e.exports=h},function(e,t,n){"use strict";function i(e){return m.createClass({tagName:e.toUpperCase(),render:function(){return new k(e,null,null,null,null,this.props)}})}function r(){M.EventEmitter.injectReactEventListener(T),M.EventPluginHub.injectEventPluginOrder(l),M.EventPluginHub.injectInstanceHandle(A),M.EventPluginHub.injectMount(O),M.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:R,EnterLeaveEventPlugin:u,ChangeEventPlugin:s,MobileSafariClickEventPlugin:h,SelectEventPlugin:L,BeforeInputEventPlugin:o}),M.NativeComponent.injectGenericComponentClass(g),M.NativeComponent.injectTextComponentClass(P),M.NativeComponent.injectAutoWrapper(i),M.Class.injectMixin(p),M.NativeComponent.injectComponentClasses({button:v,form:y,iframe:w,img:b,input:I,option:S,select:E,textarea:x,html:F("html"),head:F("head"),body:F("body")}),M.DOMProperty.injectDOMPropertyConfig(d),M.DOMProperty.injectDOMPropertyConfig(N),M.EmptyComponent.injectEmptyComponent("noscript"),M.Updates.injectReconcileTransaction(D),M.Updates.injectBatchingStrategy(_),M.RootIndex.injectCreateReactRootIndex(c.canUseDOM?a.createReactRootIndex:B.createReactRootIndex),M.Component.injectEnvironment(f),M.DOMComponent.injectIDOperations(C)}var o=n(403),s=n(404),a=n(405),l=n(408),u=n(409),c=n(11),d=n(412),h=n(413),p=n(19),m=n(15),f=n(103),_=n(428),g=n(106),v=n(419),y=n(420),b=n(422),C=n(174),w=n(421),I=n(423),S=n(424),E=n(425),x=n(427),P=n(175),k=n(9),T=n(432),M=n(433),A=n(45),O=n(21),D=n(436),L=n(441),B=n(442),R=n(443),N=n(440),F=n(456);e.exports={inject:r}},function(e,t){"use strict";var n={guard:function(e,t){return e}};e.exports=n},function(e,t,n){"use strict";function i(e){r.enqueueEvents(e),r.processEventQueue()}var r=n(57),o={handleTopLevel:function(e,t,n,o){var s=r.extractEvents(e,t,n,o);i(s)}};e.exports=o},function(e,t,n){"use strict";function i(e){var t=d.getID(e),n=c.getReactRootIDFromNodeID(t),i=d.findReactContainerForID(n),r=d.getFirstReactDOM(i);return r}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){for(var t=d.getFirstReactDOM(m(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=i(n);for(var r=0,o=e.ancestors.length;o>r;r++){t=e.ancestors[r];var s=d.getID(t)||"";_._handleTopLevel(e.topLevelType,t,s,e.nativeEvent)}}function s(e){var t=f(window);e(t)}var a=n(410),l=n(11),u=n(18),c=n(45),d=n(21),h=n(16),p=n(8),m=n(115),f=n(463);p(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),u.addPoolingTo(r,u.twoArgumentPooler);var _={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){_._handleTopLevel=e},setEnabled:function(e){_._enabled=!!e},isEnabled:function(){return _._enabled},trapBubbledEvent:function(e,t,n){var i=n;return i?a.listen(i,t,_.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var i=n;return i?a.capture(i,t,_.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=s.bind(null,e);a.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(_._enabled){var n=r.getPooled(e,t);try{h.batchedUpdates(o,n)}finally{r.release(n)}}}};e.exports=_},function(e,t,n){"use strict";var i=n(43),r=n(57),o=n(104),s=n(15),a=n(107),l=n(44),u=n(76),c=n(106),d=n(37),h=n(181),p=n(16),m={Component:o.injection,Class:s.injection,DOMComponent:c.injection,DOMProperty:i.injection,EmptyComponent:a.injection,EventPluginHub:r.injection,EventEmitter:l.injection,NativeComponent:u.injection,Perf:d.injection,RootIndex:h.injection,Updates:p.injection};e.exports=m},function(e,t,n){"use strict";function i(e,t,n){m.push({parentID:e,parentNode:null,type:c.INSERT_MARKUP,markupIndex:f.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function r(e,t,n){m.push({parentID:e,parentNode:null,type:c.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function o(e,t){m.push({parentID:e,parentNode:null,type:c.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function s(e,t){m.push({parentID:e,parentNode:null,type:c.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function a(){m.length&&(u.processChildrenUpdates(m,f),l())}function l(){m.length=0,f.length=0}var u=n(104),c=n(178),d=n(47),h=n(415),p=0,m=[],f=[],_={Mixin:{mountChildren:function(e,t,n){var i=h.instantiateChildren(e,t,n);this._renderedChildren=i;var r=[],o=0;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s],l=this._rootNodeID+s,u=d.mountComponent(a,l,t,n);a._mountIndex=o,r.push(u),o++}return r},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var i in n)n.hasOwnProperty(i)&&this._unmountChildByName(n[i],i);this.setTextContent(e),t=!1}finally{p--,p||(t?l():a())}},updateChildren:function(e,t,n){p++;var i=!0;try{this._updateChildren(e,t,n),i=!1}finally{p--,p||(i?l():a())}},_updateChildren:function(e,t,n){var i=this._renderedChildren,r=h.updateChildren(i,e,t,n);if(this._renderedChildren=r,r||i){var o,s=0,a=0;for(o in r)if(r.hasOwnProperty(o)){var l=i&&i[o],u=r[o];l===u?(this.moveChild(l,a,s),s=Math.max(l._mountIndex,s),l._mountIndex=a):(l&&(s=Math.max(l._mountIndex,s),this._unmountChildByName(l,o)),this._mountChildByNameAtIndex(u,o,a,t,n)),a++}for(o in i)!i.hasOwnProperty(o)||r&&r.hasOwnProperty(o)||this._unmountChildByName(i[o],o)}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){i(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){o(this._rootNodeID,e._mountIndex)},setTextContent:function(e){s(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,i,r){var o=this._rootNodeID+t,s=d.mountComponent(e,o,i,r);e._mountIndex=n,this.createChild(e,s)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};e.exports=_},function(e,t,n){"use strict";var i=n(3),r={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){i(r.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){i(r.isValidOwner(n)),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};e.exports=r},function(e,t,n){"use strict";function i(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=l.getPooled()}var r=n(99),o=n(18),s=n(44),a=n(176),l=n(180),u=n(79),c=n(8),d={initialize:a.getSelectionInformation,close:a.restoreSelection},h={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},m={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},f=[m,d,h,p],_={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,l.release(this.putListenerQueue),this.putListenerQueue=null}};c(i.prototype,u.Mixin,_),o.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(435),s={};s.attachRefs=function(e,t){var n=t.ref;null!=n&&i(n,e,t._owner)},s.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},s.detachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},e.exports=s},function(e,t,n){"use strict";function i(e){d(o.isValidElement(e));var t;try{var n=s.createReactRootID();return t=l.getPooled(!1),t.perform(function(){var i=c(e,null),r=i.mountComponent(n,t,u);return a.addChecksumToMarkup(r)},null)}finally{l.release(t)}}function r(e){d(o.isValidElement(e));var t;try{var n=s.createReactRootID();return t=l.getPooled(!0),t.perform(function(){var i=c(e,null);return i.mountComponent(n,t,u)},null)}finally{l.release(t)}}var o=n(9),s=n(45),a=n(177),l=n(439),u=n(80),c=n(116),d=n(3);e.exports={renderToString:i,renderToStaticMarkup:r}},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=o.getPooled(null),this.putListenerQueue=s.getPooled()}var r=n(18),o=n(99),s=n(180),a=n(79),l=n(8),u=n(28),c={initialize:function(){this.reactMountReady.reset()},close:u},d={initialize:function(){this.putListenerQueue.reset()},close:u},h=[d,c],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};l(i.prototype,a.Mixin,p),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";var i=n(43),r=i.injection.MUST_USE_ATTRIBUTE,o={Properties:{clipPath:r,cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};e.exports=o},function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&a.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e){if(v||null==f||f!==u())return null;var t=i(f);if(!g||!h(g,t)){g=t;var n=l.getPooled(m.select,_,e);return n.type="select",n.target=f,s.accumulateTwoPhaseDispatches(n),n}}var o=n(14),s=n(58),a=n(176),l=n(38),u=n(186),c=n(191),d=n(29),h=n(472),p=o.topLevelTypes,m={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},f=null,_=null,g=null,v=!1,y={eventTypes:m,extractEvents:function(e,t,n,i){switch(e){case p.topFocus:(c(t)||"true"===t.contentEditable)&&(f=t,_=n,g=null);break;case p.topBlur:f=null,_=null,g=null;break;case p.topMouseDown:v=!0;break;case p.topContextMenu:case p.topMouseUp:return v=!1,r(i);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return r(i)}}};e.exports=y},function(e,t){"use strict";var n=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};e.exports=i},function(e,t,n){"use strict";var i=n(14),r=n(100),o=n(58),s=n(444),a=n(38),l=n(447),u=n(449),c=n(78),d=n(446),h=n(450),p=n(60),m=n(451),f=n(113),_=n(3),g=n(29),v=(n(10),i.topLevelTypes),y={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},b={topBlur:y.blur,topClick:y.click,topContextMenu:y.contextMenu,topCopy:y.copy,topCut:y.cut,topDoubleClick:y.doubleClick,topDrag:y.drag,topDragEnd:y.dragEnd,topDragEnter:y.dragEnter,topDragExit:y.dragExit,topDragLeave:y.dragLeave,topDragOver:y.dragOver,topDragStart:y.dragStart,topDrop:y.drop,topError:y.error,topFocus:y.focus,topInput:y.input,topKeyDown:y.keyDown,topKeyPress:y.keyPress,topKeyUp:y.keyUp,topLoad:y.load,topMouseDown:y.mouseDown,topMouseMove:y.mouseMove,topMouseOut:y.mouseOut,topMouseOver:y.mouseOver,topMouseUp:y.mouseUp,topPaste:y.paste,topReset:y.reset,topScroll:y.scroll,topSubmit:y.submit,topTouchCancel:y.touchCancel,topTouchEnd:y.touchEnd,topTouchMove:y.touchMove,topTouchStart:y.touchStart,topWheel:y.wheel};for(var C in b)b[C].dependencies=[C];var w={eventTypes:y,executeDispatch:function(e,t,n){var i=r.executeDispatch(e,t,n);i===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,i){var r=b[e];if(!r)return null;var g;switch(e){case v.topInput:case v.topLoad:case v.topError:case v.topReset:case v.topSubmit:g=a;break;case v.topKeyPress:if(0===f(i))return null;case v.topKeyDown:case v.topKeyUp:g=u;break;case v.topBlur:case v.topFocus:g=l;break;case v.topClick:if(2===i.button)return null;case v.topContextMenu:case v.topDoubleClick:case v.topMouseDown:case v.topMouseMove:case v.topMouseOut:case v.topMouseOver:case v.topMouseUp:g=c;break;case v.topDrag:case v.topDragEnd:case v.topDragEnter:case v.topDragExit:case v.topDragLeave:case v.topDragOver:case v.topDragStart:case v.topDrop:g=d;break;case v.topTouchCancel:case v.topTouchEnd:case v.topTouchMove:case v.topTouchStart:g=h;break;case v.topScroll:g=p;break;case v.topWheel:g=m;break;case v.topCopy:case v.topCut:case v.topPaste:g=s}_(g);var y=g.getPooled(r,n,i);return o.accumulateTwoPhaseDispatches(y),y}};e.exports=w},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(38),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(38),o={data:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(78),o={dataTransfer:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(60),o={relatedTarget:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(38),o={data:null};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(60),o=n(113),s=n(460),a=n(114),l={key:s,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(i,l),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(60),o=n(114),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(78),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,o),e.exports=i},function(e,t){"use strict";function n(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%i,n=(n+t)%i;return t|n<<16}var i=65521;e.exports=n},function(e,t){function n(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function i(e){return r(e.replace(o,"ms-"))}var r=n(453),o=/^-ms-/;e.exports=i},function(e,t,n){function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return i(e)?Array.isArray(e)?e.slice():o(e):[e]}var o=n(473);e.exports=r},function(e,t,n){"use strict";function i(e){var t=o.createFactory(e),n=r.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){s(!1)},render:function(){return t(this.props)}});return n}var r=n(15),o=n(9),s=n(3);e.exports=i},function(e,t,n){function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var n=u;l(!!u);var r=i(e),o=r&&a(r);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(l(t),s(d).forEach(t));for(var h=s(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var o=n(11),s=n(455),a=n(188),l=n(3),u=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;
e.exports=r},function(e,t,n){"use strict";function i(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var i=isNaN(t);return i||0===t||o.hasOwnProperty(e)&&o[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=n(170),o=r.isUnitlessNumber;e.exports=i},function(e,t,n){"use strict";function i(e,t,n){var i=e,r=!i.hasOwnProperty(n);r&&null!=t&&(i[n]=t)}function r(e){if(null==e)return e;var t={};return o(e,i,t),t}var o=n(192);n(10);e.exports=r},function(e,t,n){"use strict";function i(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?s[e.keyCode]||"Unidentified":""}var r=n(113),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=i},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function r(e,t){for(var r=n(e),o=0,s=0;r;){if(3===r.nodeType){if(s=o+r.textContent.length,t>=o&&s>=t)return{node:r,offset:t-o};o=s}r=n(i(r))}}e.exports=r},function(e,t){"use strict";function n(e){return e?e.nodeType===i?e.documentElement:e.firstChild:null}var i=9;e.exports=n},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t){function n(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=n},function(e,t,n){"use strict";function i(e){return r(e).replace(o,"-ms-")}var r=n(464),o=/^ms-/;e.exports=i},function(e,t,n){function i(e){return r(e)&&3==e.nodeType}var r=n(190);e.exports=i},function(e,t){"use strict";function n(e,t,n){if(!e)return null;var r={};for(var o in e)i.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}var i=Object.prototype.hasOwnProperty;e.exports=n},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t,n){"use strict";function i(e){return o(r.isValidElement(e)),e}var r=n(9),o=n(3);e.exports=i},function(e,t,n){"use strict";function i(e){return'"'+r(e)+'"'}var r=n(81);e.exports=i},function(e,t,n){"use strict";var i=n(11),r=n(81),o=n(118),s=function(e,t){e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(s=function(e,t){o(e,r(t))})),e.exports=s},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}e.exports=n},function(e,t,n){function i(e){var t=e.length;if(r(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),r("number"==typeof t),r(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),o=0;t>o;o++)i[o]=e[o];return i}var r=n(3);e.exports=i},function(e,t){"use strict";function n(e){var t=e.dispatch,n=e.getState;return function(e){return function(i){return"function"==typeof i?i(t,n):e(i)}}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,i){var r=e(n,i),s=r.dispatch,l=[],u={getState:r.getState,dispatch:function(e){return s(e)}};return l=t.map(function(e){return e(u)}),s=a["default"].apply(void 0,l)(r.dispatch),o({},r,{dispatch:s})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t["default"]=r;var s=n(194),a=i(s);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function o(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e||void 0===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');return a["default"](e,function(e){return r(e,t)})}t.__esModule=!0,t["default"]=o;var s=n(196),a=i(s);e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=t&&t.type,i=n&&'"'+n.toString()+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+i+". To ignore an action, you must explicitly return the previous state."}function o(e){Object.keys(e).forEach(function(t){var n=e[t],i=n(void 0,{type:a.ActionTypes.INIT});if("undefined"==typeof i)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var r="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:r}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+a.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function s(e){var t,n=h["default"](e,function(e){return"function"==typeof e});try{o(n)}catch(i){t=i}var s=c["default"](n,function(){return void 0});return function(e,i){if(void 0===e&&(e=s),t)throw t;var o=c["default"](n,function(t,n){var o=t(e[n],i);if("undefined"==typeof o){var s=r(n,i);throw new Error(s)}return o});return o}}t.__esModule=!0,t["default"]=s;var a=n(193),l=n(195),u=(i(l),n(196)),c=i(u),d=n(478),h=i(d);e.exports=t["default"]},function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,i){return t(e[i])&&(n[i]=e[i]),n},{})}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&s(v(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?g:t,e>-1&&e%1==0&&t>e}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function a(e){for(var t=u(e),n=t.length,i=n&&e.length,r=!!i&&s(i)&&(h(e)||d(e)),a=-1,l=[];++a<n;){var c=t[a];(r&&o(c,i)||f.call(e,c))&&l.push(c)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(h(e)||d(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,a=Array(t),u=t>0;++i<t;)a[i]=i+"";for(var c in e)u&&o(c,t)||"constructor"==c&&(r||!f.call(e,c))||a.push(c);return a}var c=n(480),d=n(481),h=n(482),p=/^\d+$/,m=Object.prototype,f=m.hasOwnProperty,_=c(Object,"keys"),g=9007199254740991,v=i("length"),y=_?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):l(e)?_(e):[]}:a;e.exports=y},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function r(e){return o(e)&&h.call(e)==a}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:r(e)?p.test(c.call(e)):n(e)&&l.test(e)}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&o(d(e))}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&c>=e}function s(e){return n(e)&&r(e)&&l.call(e,"callee")&&!u.call(e,"callee")}var a=Object.prototype,l=a.hasOwnProperty,u=a.propertyIsEnumerable,c=9007199254740991,d=i("length");e.exports=s},function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function o(e){return s(e)&&m.call(e)==u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?f.test(h.call(e)):n(e)&&c.test(e)}var l="[object Array]",u="[object Function]",c=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,m=d.toString,f=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=i(Array,"isArray"),g=9007199254740991,v=_||function(e){return n(e)&&r(e.length)&&m.call(e)==l};e.exports=v},function(e,t){!function(){"use strict";function e(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function t(e){return"string"!=typeof e&&(e=e.toString()),e}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function r(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function o(e){var t=new FileReader;return t.readAsArrayBuffer(e),r(t)}function s(e){var t=new FileReader;return t.readAsText(e),r(t)}function a(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(p.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(p.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},p.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(c)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function u(e,t){if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new n(t.headers),this.method=l(t.method||"GET"),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)}function c(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function d(e){var t=new n,i=e.getAllResponseHeaders().trim().split("\n");return i.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();t.append(i,r)}),t}function h(e,t){t||(t={}),this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||""}if(!self.fetch){n.prototype.append=function(n,i){n=e(n),i=t(i);var r=this.map[n];r||(r=[],this.map[n]=r),r.push(i)},n.prototype["delete"]=function(t){delete this.map[e(t)]},n.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},n.prototype.getAll=function(t){return this.map[e(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(n,i){this.map[e(n)]=[t(i)]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)};var p={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self},m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];a.call(u.prototype),a.call(h.prototype),self.Headers=n,self.Request=u,self.Response=h,self.fetch=function(e,t){var n;return n=u.prototype.isPrototypeOf(e)&&!t?e:new u(e,t),new Promise(function(e,t){function i(){return"responseURL"in r?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):void 0}var r=new XMLHttpRequest;r.onload=function(){var n=1223===r.status?204:r.status;if(100>n||n>599)return void t(new TypeError("Network request failed"));var o={status:n,statusText:r.statusText,headers:d(r),url:i()},s="response"in r?r.response:r.responseText;e(new h(s,o))},r.onerror=function(){t(new TypeError("Network request failed"))},r.open(n.method,n.url,!0),"include"===n.credentials&&(r.withCredentials=!0),"responseType"in r&&p.blob&&(r.responseType="blob"),n.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0}}()},function(module,exports,__webpack_require__){var require,__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(global){/*! Copyright (c) Microsoft Corporation.  All Rights Reserved. Licensed under the MIT License. See License.txt in the project root for license information. */
!function(){var globalObject="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};!function(e){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=e,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function(WinJS){var require,define;return function(){"use strict";function e(e,t){e=e||"";var n=e.split("/");return n.pop(),t.map(function(e){if("."===e[0]){var t=e.split("/"),i=n.slice(0);return t.forEach(function(e){".."===e?i.pop():"."!==e&&i.push(e)}),i.join("/")}return e})}function t(t,r,o){return t.map(function(t){if("exports"===t)return o;if("require"===t)return function(t,n){require(e(r,t),n)};var s=i[t];if(!s)throw new Error("Undefined dependency: "+t);return s.resolved||(s.resolved=n(s.dependencies,s.factory,t,s.exports),"undefined"==typeof s.resolved&&(s.resolved=s.exports)),s.resolved})}function n(e,n,i,r){var o=t(e,i,r);return n&&n.apply?n.apply(null,o):n}var i={};define=function(t,n,r){Array.isArray(n)||(r=n,n=[]);var o={dependencies:e(t,n),factory:r};-1!==n.indexOf("exports")&&(o.exports={}),i[t]=o},require=function(e,t){Array.isArray(e)||(e=[e]),n(e,t)}}(),define("amd",function(){}),define("WinJS/Core/_WinJS",{}),define("WinJS/Core/_Global",[],function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};return e}),define("WinJS/Core/_BaseCoreUtils",["./_Global"],function(e){"use strict";function t(e){return e.supportedForProcessing=!0,e}var n=!!e.Windows;return{hasWinRT:n,markSupportedForProcessing:t,_setImmediate:e.setImmediate?e.setImmediate.bind(e):function(t){e.setTimeout(t,0)}}}),define("WinJS/Core/_WriteProfilerMark",["./_Global"],function(e){"use strict";return e.msWriteProfilerMark||function(){}}),define("WinJS/Core/_Base",["./_WinJS","./_Global","./_BaseCoreUtils","./_WriteProfilerMark"],function(e,t,n,i){"use strict";function r(e,t,n){var i,r,o,s=Object.keys(t),a=Array.isArray(e);for(r=0,o=s.length;o>r;r++){var l=s[r],u=95!==l.charCodeAt(0),c=t[l];!c||"object"!=typeof c||void 0===c.value&&"function"!=typeof c.get&&"function"!=typeof c.set?u?a?e.forEach(function(e){e[l]=c}):e[l]=c:(i=i||{},i[l]={value:c,enumerable:u,configurable:!0,writable:!0}):(void 0===c.enumerable&&(c.enumerable=u),n&&c.setName&&"function"==typeof c.setName&&c.setName(n+"."+l),i=i||{},i[l]=c)}i&&(a?e.forEach(function(e){Object.defineProperties(e,i)}):Object.defineProperties(e,i))}return function(){function n(n,i){var r=n||{};if(i){var o=i.split(".");r===t&&"WinJS"===o[0]&&(r=e,o.splice(0,1));for(var s=0,a=o.length;a>s;s++){var l=o[s];r[l]||Object.defineProperty(r,l,{value:{},writable:!1,enumerable:!0,configurable:!0}),r=r[l]}}return r}function o(e,t,i){var o=n(e,t);return i&&r(o,i,t||"<ANONYMOUS>"),o}function s(e,n){return o(t,e,n)}function a(e){var t,n,r=c.uninitialized;return{setName:function(e){t=e},get:function(){switch(r){case c.initialized:return n;case c.uninitialized:r=c.working;try{i("WinJS.Namespace._lazy:"+t+",StartTM"),n=e()}finally{i("WinJS.Namespace._lazy:"+t+",StopTM"),r=c.uninitialized}return e=null,r=c.initialized,n;case c.working:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(e){switch(r){case c.working:throw"Illegal: reentrancy on initialization";default:r=c.initialized,n=e}},enumerable:!0,configurable:!0}}function l(e,i,o){var s=[e],a=null;return i&&(a=n(t,i),s.push(a)),r(s,o,i||"<ANONYMOUS>"),a}var u=e;u.Namespace||(u.Namespace=Object.create(Object.prototype));var c={uninitialized:1,working:2,initialized:3};Object.defineProperties(u.Namespace,{defineWithParent:{value:o,writable:!0,enumerable:!0,configurable:!0},define:{value:s,writable:!0,enumerable:!0,configurable:!0},_lazy:{value:a,writable:!0,enumerable:!0,configurable:!0},_moduleDefine:{value:l,writable:!0,enumerable:!0,configurable:!0}})}(),function(){function t(e,t,i){return e=e||function(){},n.markSupportedForProcessing(e),t&&r(e.prototype,t),i&&r(e,i),e}function i(e,i,o,s){if(e){i=i||function(){};var a=e.prototype;return i.prototype=Object.create(a),n.markSupportedForProcessing(i),Object.defineProperty(i.prototype,"constructor",{value:i,writable:!0,configurable:!0,enumerable:!0}),o&&r(i.prototype,o),s&&r(i,s),i}return t(i,o,s)}function o(e){e=e||function(){};var t,n;for(t=1,n=arguments.length;n>t;t++)r(e.prototype,arguments[t]);return e}e.Namespace.define("WinJS.Class",{define:t,derive:i,mix:o})}(),{Namespace:e.Namespace,Class:e.Class}}),define("WinJS/Core/_ErrorFromName",["./_Base"],function(e){"use strict";var t=e.Class.derive(Error,function(e,t){this.name=e,this.message=t||e},{},{supportedForProcessing:!1});return e.Namespace.define("WinJS",{ErrorFromName:t}),t}),define("WinJS/Core/_WinRT",["exports","./_Global","./_Base"],function(e,t,n){"use strict";e.msGetWeakWinRTProperty=t.msGetWeakWinRTProperty,e.msSetWeakWinRTProperty=t.msSetWeakWinRTProperty;var i=["Windows.ApplicationModel.DesignMode.designModeEnabled","Windows.ApplicationModel.Resources.Core.ResourceContext","Windows.ApplicationModel.Resources.Core.ResourceManager","Windows.ApplicationModel.Search.SearchQueryLinguisticDetails","Windows.Data.Text.SemanticTextQuery","Windows.Foundation.Collections.CollectionChange","Windows.Foundation.Diagnostics","Windows.Foundation.Uri","Windows.Globalization.ApplicationLanguages","Windows.Globalization.Calendar","Windows.Globalization.DateTimeFormatting","Windows.Globalization.Language","Windows.Phone.UI.Input.HardwareButtons","Windows.Storage.ApplicationData","Windows.Storage.CreationCollisionOption","Windows.Storage.BulkAccess.FileInformationFactory","Windows.Storage.FileIO","Windows.Storage.FileProperties.ThumbnailType","Windows.Storage.FileProperties.ThumbnailMode","Windows.Storage.FileProperties.ThumbnailOptions","Windows.Storage.KnownFolders","Windows.Storage.Search.FolderDepth","Windows.Storage.Search.IndexerOption","Windows.Storage.Streams.RandomAccessStreamReference","Windows.UI.ApplicationSettings.SettingsEdgeLocation","Windows.UI.ApplicationSettings.SettingsCommand","Windows.UI.ApplicationSettings.SettingsPane","Windows.UI.Core.AnimationMetrics","Windows.UI.Core.SystemNavigationManager","Windows.UI.Input.EdgeGesture","Windows.UI.Input.EdgeGestureKind","Windows.UI.Input.PointerPoint","Windows.UI.ViewManagement.HandPreference","Windows.UI.ViewManagement.InputPane","Windows.UI.ViewManagement.UIColorType","Windows.UI.ViewManagement.UISettings","Windows.UI.WebUI.Core.WebUICommandBar","Windows.UI.WebUI.Core.WebUICommandBarBitmapIcon","Windows.UI.WebUI.Core.WebUICommandBarClosedDisplayMode","Windows.UI.WebUI.Core.WebUICommandBarIconButton","Windows.UI.WebUI.Core.WebUICommandBarSymbolIcon","Windows.UI.WebUI.WebUIApplication"],r=!1;try{t.Windows.UI.ViewManagement.InputPane.getForCurrentView(),r=!0}catch(o){}i.forEach(function(i){var o=i.split("."),s={};s[o[o.length-1]]={get:function(){return r?o.reduce(function(e,t){return e?e[t]:null},t):null}},n.Namespace.defineWithParent(e,o.slice(0,-1).join("."),s)})}),define("WinJS/Core/_Events",["exports","./_Base"],function(e,t){"use strict";function n(e){var t="_on"+e+"state";return{get:function(){var e=this[t];return e&&e.userHandler},set:function(n){var i=this[t];n?(i||(i={wrapper:function(e){return i.userHandler(e)},userHandler:n},Object.defineProperty(this,t,{value:i,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(e,i.wrapper,!1)),i.userHandler=n):i&&(this.removeEventListener(e,i.wrapper,!1),this[t]=null)},enumerable:!0}}function i(){for(var e={},t=0,i=arguments.length;i>t;t++){var r=arguments[t];e["on"+r]=n(r)}return e}var r=t.Class.define(function(e,t,n){this.detail=t,this.target=n,this.timeStamp=Date.now(),this.type=e},{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),o={_listeners:null,addEventListener:function(e,t,n){n=n||!1,this._listeners=this._listeners||{};for(var i=this._listeners[e]=this._listeners[e]||[],r=0,o=i.length;o>r;r++){var s=i[r];if(s.useCapture===n&&s.listener===t)return}i.push({listener:t,useCapture:n})},dispatchEvent:function(e,t){var n=this._listeners&&this._listeners[e];if(n){var i=new r(e,t,this);n=n.slice(0,n.length);for(var o=0,s=n.length;s>o&&!i._stopImmediatePropagationCalled;o++)n[o].listener(i);return i.defaultPrevented||!1}return!1},removeEventListener:function(e,t,n){n=n||!1;var i=this._listeners&&this._listeners[e];if(i)for(var r=0,o=i.length;o>r;r++){var s=i[r];if(s.listener===t&&s.useCapture===n){i.splice(r,1),0===i.length&&delete this._listeners[e];break}}}};t.Namespace._moduleDefine(e,"WinJS.Utilities",{_createEventProperty:n,createEventProperties:i,eventMixin:o})}),define("require-json",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("require-json!strings/en-us/Microsoft.WinJS.resjson",{"tv/scrollViewerPageDown":"Page Down","tv/scrollViewerPageUp":"Page Up","ui/appBarAriaLabel":"App Bar","ui/appBarCommandAriaLabel":"App Bar Item","ui/appBarOverflowButtonAriaLabel":"View more","ui/autoSuggestBoxAriaLabel":"Autosuggestbox","ui/autoSuggestBoxAriaLabelInputNoPlaceHolder":"Autosuggestbox, enter to submit query, esc to clear text","ui/autoSuggestBoxAriaLabelInputPlaceHolder":"Autosuggestbox, {0}, enter to submit query, esc to clear text","ui/autoSuggestBoxAriaLabelQuery":"Suggestion: {0}","_ui/autoSuggestBoxAriaLabelQuery.comment":"Suggestion: query text (example: Suggestion: contoso)","ui/autoSuggestBoxAriaLabelSeparator":"Separator: {0}","_ui/autoSuggestBoxAriaLabelSeparator.comment":"Separator: separator text (example: Separator: People or Separator: Apps)","ui/autoSuggestBoxAriaLabelResult":"Result: {0}, {1}","_ui/autoSuggestBoxAriaLabelResult.comment":"Result: text, detailed text (example: Result: contoso, www.contoso.com)","ui/averageRating":"Average Rating","ui/backbuttonarialabel":"Back","ui/chapterSkipBackMediaCommandDisplayText":"Chapter back","ui/chapterSkipForwardMediaCommandDisplayText":"Chapter forward","ui/clearYourRating":"Clear your rating","ui/closedCaptionsLabelNone":"Off","ui/closedCaptionsMediaCommandDisplayText":"Closed captioning","ui/closeOverlay":"Close","ui/commandingSurfaceAriaLabel":"CommandingSurface","ui/commandingSurfaceOverflowButtonAriaLabel":"View more","ui/datePicker":"Date Picker","ui/fastForwardMediaCommandDisplayText":"Fast forward","ui/fastForwardFeedbackDisplayText":" {0}X","ui/fastForwardFeedbackSlowMotionDisplayText":"0.5X","ui/flipViewPanningContainerAriaLabel":"Scrolling Container","ui/flyoutAriaLabel":"Flyout","ui/goToFullScreenButtonLabel":"Go full screen","ui/goToLiveMediaCommandDisplayText":"LIVE","ui/hubViewportAriaLabel":"Scrolling Container","ui/listViewViewportAriaLabel":"Scrolling Container","ui/mediaErrorAborted":"Playback was interrupted. Please try again.","ui/mediaErrorNetwork":"There was a network connection error.","ui/mediaErrorDecode":"The content could not be decoded","ui/mediaErrorSourceNotSupported":"This content type is not supported.","ui/mediaErrorUnknown":"There was an unknown error.","ui/mediaPlayerAudioTracksButtonLabel":"Audio tracks","ui/mediaPlayerCastButtonLabel":"Cast","ui/mediaPlayerChapterSkipBackButtonLabel":"Previous","ui/mediaPlayerChapterSkipForwardButtonLabel":"Next","ui/mediaPlayerClosedCaptionsButtonLabel":"Closed captions","ui/mediaPlayerFastForwardButtonLabel":"Fast forward","ui/mediaPlayerFullscreenButtonLabel":"Fullscreen","ui/mediaPlayerLiveButtonLabel":"LIVE","ui/mediaPlayerNextTrackButtonLabel":"Next","ui/mediaPlayerOverlayActiveOptionIndicator":"(On)","ui/mediaPlayerPauseButtonLabel":"Pause","ui/mediaPlayerPlayButtonLabel":"Play","ui/mediaPlayerPlayFromBeginningButtonLabel":"Replay","ui/mediaPlayerPlayRateButtonLabel":"Playback rate","ui/mediaPlayerPreviousTrackButtonLabel":"Previous","ui/mediaPlayerRewindButtonLabel":"Rewind","ui/mediaPlayerStopButtonLabel":"Stop","ui/mediaPlayerTimeSkipBackButtonLabel":"8 second replay","ui/mediaPlayerTimeSkipForwardButtonLabel":"30 second skip","ui/mediaPlayerToggleSnapButtonLabel":"Snap","ui/mediaPlayerVolumeButtonLabel":"Volume","ui/mediaPlayerZoomButtonLabel":"Zoom","ui/menuCommandAriaLabel":"Menu Item","ui/menuAriaLabel":"Menu","ui/navBarContainerViewportAriaLabel":"Scrolling Container","ui/nextTrackMediaCommandDisplayText":"Next track","ui/off":"Off","ui/on":"On","ui/pauseMediaCommandDisplayText":"Pause","ui/playFromBeginningMediaCommandDisplayText":"Play again","ui/playbackRateHalfSpeedLabel":"0.5x","ui/playbackRateNormalSpeedLabel":"Normal","ui/playbackRateOneAndHalfSpeedLabel":"1.5x","ui/playbackRateDoubleSpeedLabel":"2x","ui/playMediaCommandDisplayText":"Play","ui/pivotAriaLabel":"Pivot","ui/pivotViewportAriaLabel":"Scrolling Container","ui/replayMediaCommandDisplayText":"Play again","ui/rewindMediaCommandDisplayText":"Rewind","ui/rewindFeedbackDisplayText":" {0}X","ui/rewindFeedbackSlowMotionDisplayText":"0.5X","ui/searchBoxAriaLabel":"Searchbox","ui/searchBoxAriaLabelInputNoPlaceHolder":"Searchbox, enter to submit query, esc to clear text","ui/searchBoxAriaLabelInputPlaceHolder":"Searchbox, {0}, enter to submit query, esc to clear text","ui/searchBoxAriaLabelButton":"Click to submit query","ui/seeMore":"See more","ui/selectAMPM":"Select A.M P.M","ui/selectDay":"Select Day","ui/selectHour":"Select Hour","ui/selectMinute":"Select Minute","ui/selectMonth":"Select Month","ui/selectYear":"Select Year","ui/settingsFlyoutAriaLabel":"Settings Flyout","ui/stopMediaCommandDisplayText":"Stop","ui/tentativeRating":"Tentative Rating","ui/timePicker":"Time Picker","ui/timeSeparator":":","ui/timeSkipBackMediaCommandDisplayText":"Skip back","ui/timeSkipForwardMediaCommandDisplayText":"Skip forward","ui/toolbarAriaLabel":"ToolBar","ui/toolbarOverflowButtonAriaLabel":"View more","ui/unrated":"Unrated","ui/userRating":"User Rating","ui/zoomMediaCommandDisplayText":"Zoom","ui/appBarIcons/previous":"","_ui/appBarIcons/previous.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/next":"","_ui/appBarIcons/next.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/play":"","_ui/appBarIcons/play.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/pause":"","_ui/appBarIcons/pause.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/edit":"","_ui/appBarIcons/edit.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/save":"","_ui/appBarIcons/save.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/clear":"","_ui/appBarIcons/clear.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/delete":"","_ui/appBarIcons/delete.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/remove":"","_ui/appBarIcons/remove.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/add":"","_ui/appBarIcons/add.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cancel":"","_ui/appBarIcons/cancel.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/accept":"","_ui/appBarIcons/accept.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/more":"","_ui/appBarIcons/more.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/redo":"","_ui/appBarIcons/redo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/undo":"","_ui/appBarIcons/undo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/home":"","_ui/appBarIcons/home.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/up":"","_ui/appBarIcons/up.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/forward":"","_ui/appBarIcons/forward.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/right":"","_ui/appBarIcons/right.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/back":"","_ui/appBarIcons/back.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/left":"","_ui/appBarIcons/left.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/favorite":"","_ui/appBarIcons/favorite.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/camera":"","_ui/appBarIcons/camera.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/settings":"","_ui/appBarIcons/settings.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/video":"","_ui/appBarIcons/video.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/sync":"","_ui/appBarIcons/sync.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/download":"","_ui/appBarIcons/download.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mail":"","_ui/appBarIcons/mail.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/find":"","_ui/appBarIcons/find.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/help":"","_ui/appBarIcons/help.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/upload":"","_ui/appBarIcons/upload.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/emoji":"","_ui/appBarIcons/emoji.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/twopage":"","_ui/appBarIcons/twopage.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/leavechat":"","_ui/appBarIcons/leavechat.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mailforward":"","_ui/appBarIcons/mailforward.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/clock":"","_ui/appBarIcons/clock.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/send":"","_ui/appBarIcons/send.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/crop":"","_ui/appBarIcons/crop.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/rotatecamera":"","_ui/appBarIcons/rotatecamera.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/people":"","_ui/appBarIcons/people.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/closepane":"","_ui/appBarIcons/closepane.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openpane":"","_ui/appBarIcons/openpane.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/world":"","_ui/appBarIcons/world.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/flag":"","_ui/appBarIcons/flag.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/previewlink":"","_ui/appBarIcons/previewlink.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/globe":"","_ui/appBarIcons/globe.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/trim":"","_ui/appBarIcons/trim.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/attachcamera":"","_ui/appBarIcons/attachcamera.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zoomin":"","_ui/appBarIcons/zoomin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/bookmarks":"","_ui/appBarIcons/bookmarks.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/document":"","_ui/appBarIcons/document.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/protecteddocument":"","_ui/appBarIcons/protecteddocument.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/page":"","_ui/appBarIcons/page.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/bullets":"","_ui/appBarIcons/bullets.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/comment":"","_ui/appBarIcons/comment.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mail2":"","_ui/appBarIcons/mail2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contactinfo":"","_ui/appBarIcons/contactinfo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/hangup":"","_ui/appBarIcons/hangup.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/viewall":"","_ui/appBarIcons/viewall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mappin":"","_ui/appBarIcons/mappin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/phone":"","_ui/appBarIcons/phone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/videochat":"","_ui/appBarIcons/videochat.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/switch":"","_ui/appBarIcons/switch.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contact":"","_ui/appBarIcons/contact.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/rename":"","_ui/appBarIcons/rename.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/pin":"","_ui/appBarIcons/pin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/musicinfo":"","_ui/appBarIcons/musicinfo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/go":"","_ui/appBarIcons/go.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/keyboard":"","_ui/appBarIcons/keyboard.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dockleft":"","_ui/appBarIcons/dockleft.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dockright":"","_ui/appBarIcons/dockright.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dockbottom":"","_ui/appBarIcons/dockbottom.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/remote":"","_ui/appBarIcons/remote.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/refresh":"","_ui/appBarIcons/refresh.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/rotate":"","_ui/appBarIcons/rotate.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/shuffle":"","_ui/appBarIcons/shuffle.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/list":"","_ui/appBarIcons/list.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/shop":"","_ui/appBarIcons/shop.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/selectall":"","_ui/appBarIcons/selectall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/orientation":"","_ui/appBarIcons/orientation.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/import":"","_ui/appBarIcons/import.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/importall":"","_ui/appBarIcons/importall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/browsephotos":"","_ui/appBarIcons/browsephotos.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/webcam":"","_ui/appBarIcons/webcam.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/pictures":"","_ui/appBarIcons/pictures.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/savelocal":"","_ui/appBarIcons/savelocal.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/caption":"","_ui/appBarIcons/caption.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/stop":"","_ui/appBarIcons/stop.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/showresults":"","_ui/appBarIcons/showresults.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/volume":"","_ui/appBarIcons/volume.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/repair":"","_ui/appBarIcons/repair.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/message":"","_ui/appBarIcons/message.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/page2":"","_ui/appBarIcons/page2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendarday":"","_ui/appBarIcons/calendarday.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendarweek":"","_ui/appBarIcons/calendarweek.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendar":"","_ui/appBarIcons/calendar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/characters":"","_ui/appBarIcons/characters.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mailreplyall":"","_ui/appBarIcons/mailreplyall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/read":"","_ui/appBarIcons/read.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/link":"","_ui/appBarIcons/link.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/accounts":"","_ui/appBarIcons/accounts.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/showbcc":"","_ui/appBarIcons/showbcc.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/hidebcc":"","_ui/appBarIcons/hidebcc.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cut":"","_ui/appBarIcons/cut.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/attach":"","_ui/appBarIcons/attach.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/paste":"","_ui/appBarIcons/paste.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/filter":"","_ui/appBarIcons/filter.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/copy":"","_ui/appBarIcons/copy.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/emoji2":"","_ui/appBarIcons/emoji2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/important":"","_ui/appBarIcons/important.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mailreply":"","_ui/appBarIcons/mailreply.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/slideshow":"","_ui/appBarIcons/slideshow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/sort":"","_ui/appBarIcons/sort.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/manage":"","_ui/appBarIcons/manage.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/allapps":"","_ui/appBarIcons/allapps.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/disconnectdrive":"","_ui/appBarIcons/disconnectdrive.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mapdrive":"","_ui/appBarIcons/mapdrive.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/newwindow":"","_ui/appBarIcons/newwindow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openwith":"","_ui/appBarIcons/openwith.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contactpresence":"","_ui/appBarIcons/contactpresence.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/priority":"","_ui/appBarIcons/priority.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/uploadskydrive":"","_ui/appBarIcons/uploadskydrive.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/gototoday":"","_ui/appBarIcons/gototoday.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/font":"","_ui/appBarIcons/font.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontcolor":"","_ui/appBarIcons/fontcolor.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/contact2":"","_ui/appBarIcons/contact2.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/folder":"","_ui/appBarIcons/folder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/audio":"","_ui/appBarIcons/audio.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/placeholder":"","_ui/appBarIcons/placeholder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/view":"","_ui/appBarIcons/view.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/setlockscreen":"","_ui/appBarIcons/setlockscreen.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/settile":"","_ui/appBarIcons/settile.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cc":"","_ui/appBarIcons/cc.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/stopslideshow":"","_ui/appBarIcons/stopslideshow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/permissions":"","_ui/appBarIcons/permissions.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/highlight":"","_ui/appBarIcons/highlight.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/disableupdates":"","_ui/appBarIcons/disableupdates.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/unfavorite":"","_ui/appBarIcons/unfavorite.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/unpin":"","_ui/appBarIcons/unpin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openlocal":"","_ui/appBarIcons/openlocal.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/mute":"","_ui/appBarIcons/mute.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/italic":"","_ui/appBarIcons/italic.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/underline":"","_ui/appBarIcons/underline.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/bold":"","_ui/appBarIcons/bold.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/movetofolder":"","_ui/appBarIcons/movetofolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/likedislike":"","_ui/appBarIcons/likedislike.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/dislike":"","_ui/appBarIcons/dislike.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/like":"","_ui/appBarIcons/like.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/alignright":"","_ui/appBarIcons/alignright.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/aligncenter":"","_ui/appBarIcons/aligncenter.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/alignleft":"","_ui/appBarIcons/alignleft.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zoom":"","_ui/appBarIcons/zoom.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zoomout":"","_ui/appBarIcons/zoomout.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/openfile":"","_ui/appBarIcons/openfile.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/otheruser":"","_ui/appBarIcons/otheruser.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/admin":"","_ui/appBarIcons/admin.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/street":"","_ui/appBarIcons/street.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/map":"","_ui/appBarIcons/map.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/clearselection":"","_ui/appBarIcons/clearselection.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontdecrease":"","_ui/appBarIcons/fontdecrease.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontincrease":"","_ui/appBarIcons/fontincrease.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fontsize":"","_ui/appBarIcons/fontsize.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/cellphone":"","_ui/appBarIcons/cellphone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/reshare":"","_ui/appBarIcons/reshare.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/tag":"","_ui/appBarIcons/tag.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/repeatone":"","_ui/appBarIcons/repeatone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/repeatall":"","_ui/appBarIcons/repeatall.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/outlinestar":"","_ui/appBarIcons/outlinestar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/solidstar":"","_ui/appBarIcons/solidstar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calculator":"","_ui/appBarIcons/calculator.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/directions":"","_ui/appBarIcons/directions.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/target":"","_ui/appBarIcons/target.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/library":"","_ui/appBarIcons/library.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/phonebook":"","_ui/appBarIcons/phonebook.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/memo":"","_ui/appBarIcons/memo.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/microphone":"","_ui/appBarIcons/microphone.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/postupdate":"","_ui/appBarIcons/postupdate.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/backtowindow":"","_ui/appBarIcons/backtowindow.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fullscreen":"","_ui/appBarIcons/fullscreen.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/newfolder":"","_ui/appBarIcons/newfolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/calendarreply":"","_ui/appBarIcons/calendarreply.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/unsyncfolder":"","_ui/appBarIcons/unsyncfolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/reporthacked":"","_ui/appBarIcons/reporthacked.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/syncfolder":"","_ui/appBarIcons/syncfolder.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/blockcontact":"","_ui/appBarIcons/blockcontact.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/switchapps":"","_ui/appBarIcons/switchapps.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/addfriend":"","_ui/appBarIcons/addfriend.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/touchpointer":"","_ui/appBarIcons/touchpointer.comment":"{Locked=qps-ploc,qps-plocm}",
"ui/appBarIcons/gotostart":"","_ui/appBarIcons/gotostart.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/zerobars":"","_ui/appBarIcons/zerobars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/onebar":"","_ui/appBarIcons/onebar.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/twobars":"","_ui/appBarIcons/twobars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/threebars":"","_ui/appBarIcons/threebars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/fourbars":"","_ui/appBarIcons/fourbars.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/scan":"","_ui/appBarIcons/scan.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/preview":"","_ui/appBarIcons/preview.comment":"{Locked=qps-ploc,qps-plocm}","ui/appBarIcons/hamburger":"","_ui/appBarIcons/hamburger.comment":"{Locked=qps-ploc,qps-plocm}"}),define("WinJS/Core/_Resources",["exports","./_Global","./_WinRT","./_Base","./_Events","require-json!strings/en-us/Microsoft.WinJS.resjson"],function(e,t,n,i,r,o){"use strict";function s(e){var t=v("ms-resource:///Microsoft.WinJS/"+e);return t.empty&&(t=a(e)),t}function a(e){var t=o[e];return"string"==typeof t&&(t={value:t}),t||{value:e,empty:!0}}function l(e){var t=arguments;return t.length>1&&(e=e.replace(/({{)|(}})|{(\d+)}|({)|(})/g,function(e,n,i,r,o,s){if(o||s)throw l(_.malformedFormatStringInput,o||s);return n&&"{"||i&&"}"||t[(0|r)+1]})),e}var u,c,d=!1,h="contextchanged",p=i.Class.mix(i.Class.define(null,{},{supportedForProcessing:!1}),r.eventMixin),m=new p,f=r._createEventProperty,_={get malformedFormatStringInput(){return"Malformed, did you mean to escape your '{0}'?"}};i.Namespace.define("WinJS.Resources",{_getWinJSString:s}),i.Namespace._moduleDefine(e,"WinJS.Resources",{addEventListener:function(t,i,r){if(n.Windows.ApplicationModel.Resources.Core.ResourceManager&&!d&&t===h)try{var o=e._getResourceContext();o?o.qualifierValues.addEventListener("mapchanged",function(t){e.dispatchEvent(h,{qualifier:t.key,changed:t.target[t.key]})},!1):n.Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",function(t){e.dispatchEvent(h,{qualifier:t.key,changed:t.target[t.key]})},!1),d=!0}catch(s){}m.addEventListener(t,i,r)},removeEventListener:m.removeEventListener.bind(m),dispatchEvent:m.dispatchEvent.bind(m),_formatString:l,_getStringWinRT:function(t){if(!u){var i=n.Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{u=i.getSubtree("Resources")}catch(r){}u||(u=i)}var o,s,a;try{var l=e._getResourceContext();a=l?u.getValue(t,l):u.getValue(t),a&&(o=a.valueAsString,void 0===o&&(o=a.toString()))}catch(r){}if(!o)return e._getStringJS(t);try{s=a.getQualifierValue("Language")}catch(r){return{value:o}}return{value:o,lang:s}},_getStringJS:function(e){var n=t.strings&&t.strings[e];return"string"==typeof n&&(n={value:n}),n||{value:e,empty:!0}},_getResourceContext:function(){if(t.document&&"undefined"==typeof c){var e=n.Windows.ApplicationModel.Resources.Core.ResourceContext;c=e.getForCurrentView?e.getForCurrentView():null}return c},oncontextchanged:f(h)});var g=n.Windows.ApplicationModel.Resources.Core.ResourceManager?e._getStringWinRT:e._getStringJS,v=function(e){return g(e)};i.Namespace._moduleDefine(e,null,{_formatString:l,_getWinJSString:s}),i.Namespace._moduleDefine(e,"WinJS.Resources",{getString:{get:function(){return v},set:function(e){v=e}}})}),define("WinJS/Core/_Trace",["./_Global"],function(e){"use strict";function t(e){return e}return{_traceAsyncOperationStarting:e.Debug&&e.Debug.msTraceAsyncOperationStarting&&e.Debug.msTraceAsyncOperationStarting.bind(e.Debug)||t,_traceAsyncOperationCompleted:e.Debug&&e.Debug.msTraceAsyncOperationCompleted&&e.Debug.msTraceAsyncOperationCompleted.bind(e.Debug)||t,_traceAsyncCallbackStarting:e.Debug&&e.Debug.msTraceAsyncCallbackStarting&&e.Debug.msTraceAsyncCallbackStarting.bind(e.Debug)||t,_traceAsyncCallbackCompleted:e.Debug&&e.Debug.msTraceAsyncCallbackCompleted&&e.Debug.msTraceAsyncCallbackCompleted.bind(e.Debug)||t}}),define("WinJS/Promise/_StateMachine",["../Core/_Global","../Core/_BaseCoreUtils","../Core/_Base","../Core/_ErrorFromName","../Core/_Events","../Core/_Trace"],function(e,t,n,i,r,o){"use strict";function s(){}function a(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?L:F,e._value=t,e._setState(n)}function l(e,t,n,i,r,o){return{exception:e,error:t,promise:n,handler:o,id:i,parent:r}}function u(e,t,n,i){var r=n._isException,o=n._errorId;return l(r?t:null,r?null:t,e,o,n,i)}function c(e,t,n){var i=n._isException,r=n._errorId;return b(e,r,i),l(i?t:null,i?null:t,e,r,n)}function d(e,t){var n=++U;return b(e,n),l(null,t,e,n)}function h(e,t){var n=++U;return b(e,n,!0),l(t,null,e,n)}function p(e,t,n,i){var r=o._traceAsyncOperationStarting("WinJS.Promise.done");y(e,{c:t,e:n,p:i,asyncOpID:r})}function m(e,t,n,i){e._value=t,g(e,t,n,i),e._setState(H)}function f(t,n){var i=t._value,r=t._listeners;if(r){t._listeners=null;var s,a;for(s=0,a=Array.isArray(r)?r.length:1;a>s;s++){var l=1===a?r:r[s],u=l.c,c=l.promise;if(o._traceAsyncOperationCompleted(l.asyncOpID,e.Debug&&e.Debug.MS_ASYNC_OP_STATUS_SUCCESS),c){o._traceAsyncCallbackStarting(l.asyncOpID);try{c._setCompleteValue(u?u(i):i)}catch(d){c._setExceptionValue(d)}finally{o._traceAsyncCallbackCompleted()}c._state!==L&&c._listeners&&n.push(c)}else G.prototype.done.call(t,u)}}}function _(t,n){var i=t._value,r=t._listeners;if(r){t._listeners=null;var s,a;for(s=0,a=Array.isArray(r)?r.length:1;a>s;s++){var l=1===a?r:r[s],c=l.e,d=l.promise,h=e.Debug&&(i&&i.name===T?e.Debug.MS_ASYNC_OP_STATUS_CANCELED:e.Debug.MS_ASYNC_OP_STATUS_ERROR);if(o._traceAsyncOperationCompleted(l.asyncOpID,h),d){var p=!1;try{c?(o._traceAsyncCallbackStarting(l.asyncOpID),p=!0,c.handlesOnError||g(d,i,u,t,c),d._setCompleteValue(c(i))):d._setChainedErrorValue(i,t)}catch(m){d._setExceptionValue(m)}finally{p&&o._traceAsyncCallbackCompleted()}d._state!==L&&d._listeners&&n.push(d)}else J.prototype.done.call(t,null,c)}}}function g(e,t,n,i,r){if(P._listeners[k]){if(t instanceof Error&&t.message===T)return;P.dispatchEvent(k,n(e,t,i,r))}}function v(e,t){var n=e._listeners;if(n){var i,r;for(i=0,r=Array.isArray(n)?n.length:1;r>i;i++){var o=1===r?n:n[i],s=o.p;if(s)try{s(t)}catch(a){}o.c||o.e||!o.promise||o.promise._progress(t)}}}function y(e,t){var n=e._listeners;n?(n=Array.isArray(n)?n:[n],n.push(t)):n=t,e._listeners=n}function b(e,t,n){e._isException=n||!1,e._errorId=t}function C(e,t,n,i){e._value=t,g(e,t,n,i),e._setState(W)}function w(e,t){var n;n=t&&"object"==typeof t&&"function"==typeof t.then?L:z,e._value=t,e._setState(n)}function I(e,t,n,i){var r=new q(e),s=o._traceAsyncOperationStarting("WinJS.Promise.then");return y(e,{promise:r,c:t,e:n,p:i,asyncOpID:s}),r}function S(n){var i;return new Y(function(r){n?i=e.setTimeout(r,n):t._setImmediate(r)},function(){i&&e.clearTimeout(i)})}function E(e,t){var n=function(){t.cancel()},i=function(){e.cancel()};return e.then(n),t.then(i,i),t}e.Debug&&(e.Debug.setNonUserCodeExceptions=!0);var x=n.Class.mix(n.Class.define(null,{},{supportedForProcessing:!1}),r.eventMixin),P=new x;P._listeners={};var k="error",T="Canceled",M=!1,A={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};A.all=A.promise|A.thenPromise|A.errorPromise|A.exceptionPromise|A.completePromise;var O,D,L,B,R,N,F,z,H,W,U=1;O={name:"created",enter:function(e){e._setState(D)},cancel:s,done:s,then:s,_completed:s,_error:s,_notify:s,_progress:s,_setCompleteValue:s,_setErrorValue:s},D={name:"working",enter:s,cancel:function(e){e._setState(R)},done:p,then:I,_completed:a,_error:m,_notify:s,_progress:v,_setCompleteValue:w,_setErrorValue:C},L={name:"waiting",enter:function(e){var t=e._value;if(t instanceof q&&t._state!==W&&t._state!==z)y(t,{promise:e});else{var n=function(i){t._errorId?e._chainedError(i,t):(g(e,i,u,t,n),e._error(i))};n.handlesOnError=!0,t.then(e._completed.bind(e),n,e._progress.bind(e))}},cancel:function(e){e._setState(B)},done:p,then:I,_completed:a,_error:m,_notify:s,_progress:v,_setCompleteValue:w,_setErrorValue:C},B={name:"waiting_canceled",enter:function(e){e._setState(N);var t=e._value;t.cancel&&t.cancel()},cancel:s,done:p,then:I,_completed:a,_error:m,_notify:s,_progress:v,_setCompleteValue:w,_setErrorValue:C},R={name:"canceled",enter:function(e){e._setState(N),e._cancelAction()},cancel:s,done:p,then:I,_completed:a,_error:m,_notify:s,_progress:v,_setCompleteValue:w,_setErrorValue:C},N={name:"canceling",enter:function(e){var t=new Error(T);t.name=t.message,e._value=t,e._setState(H)},cancel:s,done:s,then:s,_completed:s,_error:s,_notify:s,_progress:s,_setCompleteValue:s,_setErrorValue:s},F={name:"complete_notify",enter:function(e){if(e.done=G.prototype.done,e.then=G.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.shift(),t._state._notify(t,n);e._setState(z)},cancel:s,done:null,then:null,_completed:s,_error:s,_notify:f,_progress:s,_setCompleteValue:s,_setErrorValue:s},z={name:"success",enter:function(e){e.done=G.prototype.done,e.then=G.prototype.then,e._cleanupAction()},cancel:s,done:null,then:null,_completed:s,_error:s,_notify:f,_progress:s,_setCompleteValue:s,_setErrorValue:s},H={name:"error_notify",enter:function(e){if(e.done=J.prototype.done,e.then=J.prototype.then,e._listeners)for(var t,n=[e];n.length;)t=n.shift(),t._state._notify(t,n);e._setState(W)},cancel:s,done:null,then:null,_completed:s,_error:s,_notify:_,_progress:s,_setCompleteValue:s,_setErrorValue:s},W={name:"error",enter:function(e){e.done=J.prototype.done,e.then=J.prototype.then,e._cleanupAction()},cancel:s,done:null,then:null,_completed:s,_error:s,_notify:_,_progress:s,_setCompleteValue:s,_setErrorValue:s};var j,V=n.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function(e,t,n){this._state.done(this,e,t,n)},then:function(e,t,n){return this._state.then(this,e,t,n)},_chainedError:function(e,t){var n=this._state._error(this,e,c,t);return this._run(),n},_completed:function(e){var t=this._state._completed(this,e);return this._run(),t},_error:function(e){var t=this._state._error(this,e,d);return this._run(),t},_progress:function(e){this._state._progress(this,e)},_setState:function(e){this._nextState=e},_setCompleteValue:function(e){this._state._setCompleteValue(this,e),this._run()},_setChainedErrorValue:function(e,t){var n=this._state._setErrorValue(this,e,c,t);return this._run(),n},_setExceptionValue:function(e){var t=this._state._setErrorValue(this,e,h);return this._run(),t},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1}),q=n.Class.derive(V,function(e){M&&(M===!0||M&A.thenPromise)&&(this._stack=Y._getStack()),this._creator=e,this._setState(O),this._run()},{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),J=n.Class.define(function(e){M&&(M===!0||M&A.errorPromise)&&(this._stack=Y._getStack()),this._value=e,g(this,e,d)},{cancel:function(){},done:function(e,t){var n=this._value;if(t)try{t.handlesOnError||g(null,n,u,this,t);var i=t(n);return void(i&&"object"==typeof i&&"function"==typeof i.done&&i.done())}catch(r){n=r}n instanceof Error&&n.message===T||Y._doneHandler(n)},then:function(e,t){if(!t)return this;var n,i=this._value;try{t.handlesOnError||g(null,i,u,this,t),n=new G(t(i))}catch(r){n=r===i?this:new K(r)}return n}},{supportedForProcessing:!1}),K=n.Class.derive(J,function(e){M&&(M===!0||M&A.exceptionPromise)&&(this._stack=Y._getStack()),this._value=e,g(this,e,h)},{},{supportedForProcessing:!1}),G=n.Class.define(function(e){if(M&&(M===!0||M&A.completePromise)&&(this._stack=Y._getStack()),e&&"object"==typeof e&&"function"==typeof e.then){var t=new q(null);return t._setCompleteValue(e),t}this._value=e},{cancel:function(){},done:function(e){if(e)try{var t=e(this._value);t&&"object"==typeof t&&"function"==typeof t.done&&t.done()}catch(n){Y._doneHandler(n)}},then:function(e){try{var t=e?e(this._value):this._value;return t===this._value?this:new G(t)}catch(n){return new K(n)}}},{supportedForProcessing:!1}),Y=n.Class.derive(V,function(e,t){M&&(M===!0||M&A.promise)&&(this._stack=Y._getStack()),this._oncancel=t,this._setState(O),this._run();try{var n=this._completed.bind(this),i=this._error.bind(this),r=this._progress.bind(this);e(n,i,r)}catch(o){this._setExceptionValue(o)}},{_oncancel:null,_cancelAction:function(){if(this._oncancel)try{this._oncancel()}catch(e){}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function(e,t,n){P.addEventListener(e,t,n)},any:function(e){return new Y(function(t,n){var i=Object.keys(e);0===i.length&&t();var r=0;i.forEach(function(o){Y.as(e[o]).then(function(){t({key:o,value:e[o]})},function(s){return s instanceof Error&&s.name===T?void(++r===i.length&&t(Y.cancel)):void n({key:o,value:e[o]})})})},function(){var t=Object.keys(e);t.forEach(function(t){var n=Y.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},as:function(e){return e&&"object"==typeof e&&"function"==typeof e.then?e:new G(e)},cancel:{get:function(){return j=j||new J(new i(T))}},dispatchEvent:function(e,t){return P.dispatchEvent(e,t)},is:function(e){return e&&"object"==typeof e&&"function"==typeof e.then},join:function(e){return new Y(function(t,n,i){var r=Object.keys(e),o=Array.isArray(e)?[]:{},s=Array.isArray(e)?[]:{},a=0,l=r.length,u=function(e){if(0===--l){var a=Object.keys(o).length;if(0===a)t(s);else{var u=0;r.forEach(function(e){var t=o[e];t instanceof Error&&t.name===T&&u++}),u===a?t(Y.cancel):n(o)}}else i({Key:e,Done:!0})};return r.forEach(function(t){var n=e[t];void 0===n?a++:Y.then(n,function(e){s[t]=e,u(t)},function(e){o[t]=e,u(t)})}),l-=a,0===l?void t(s):void 0},function(){Object.keys(e).forEach(function(t){var n=Y.as(e[t]);"function"==typeof n.cancel&&n.cancel()})})},removeEventListener:function(e,t,n){P.removeEventListener(e,t,n)},supportedForProcessing:!1,then:function(e,t,n,i){return Y.as(e).then(t,n,i)},thenEach:function(e,t,n,i){var r=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(o){r[o]=Y.as(e[o]).then(t,n,i)}),Y.join(r)},timeout:function(e,t){var n=S(e);return t?E(n,t):n},wrap:function(e){return new G(e)},wrapError:function(e){return new J(e)},_veryExpensiveTagWithStack:{get:function(){return M},set:function(e){M=e}},_veryExpensiveTagWithStack_tag:A,_getStack:function(){if(e.Debug&&e.Debug.debuggerEnabled)try{throw new Error}catch(t){return t.stack}},_cancelBlocker:function(e,t){if(!Y.is(e))return Y.wrap(e);var n,i,r=new Y(function(e,t){n=e,i=t},function(){n=null,i=null,t&&t()});return e.then(function(e){n&&n(e)},function(e){i&&i(e)}),r}});return Object.defineProperties(Y,r.createEventProperties(k)),Y._doneHandler=function(e){t._setImmediate(function(){throw e})},{PromiseStateMachine:V,Promise:Y,state_created:O}}),define("WinJS/Promise",["./Core/_Base","./Promise/_StateMachine"],function(e,t){"use strict";return e.Namespace.define("WinJS",{Promise:t.Promise}),t.Promise}),define("WinJS/Core/_Log",["exports","./_Global","./_Base"],function(e,t,n){"use strict";function i(e,t,n){var i=e;return"function"==typeof i&&(i=i()),(n&&a.test(n)?"":n?n+": ":"")+(t?t.replace(s,":")+": ":"")+i}function r(n,i,r){var o=e.formatLog(n,i,r);t.console&&t.console[r&&a.test(r)?r:"log"](o)}function o(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}var s=/\s+/g,a=/^(error|warn|info|log)$/,l=null;n.Namespace._moduleDefine(e,"WinJS.Utilities",{startLog:function(t){t=t||{},"string"==typeof t&&(t={tags:t});var n=t.type&&new RegExp("^("+o(t.type).replace(s," ").split(" ").join("|")+")$"),i=t.excludeTags&&new RegExp("(^|\\s)("+o(t.excludeTags).replace(s," ").split(" ").join("|")+")(\\s|$)","i"),a=t.tags&&new RegExp("(^|\\s)("+o(t.tags).replace(s," ").split(" ").join("|")+")(\\s|$)","i"),l=t.action||r;if(!(n||i||a||e.log))return void(e.log=l);var u=function(e,t,r){n&&!n.test(r)||i&&i.test(t)||a&&!a.test(t)||l(e,t,r),u.next&&u.next(e,t,r)};u.next=e.log,e.log=u},stopLog:function(){e.log=null},formatLog:i}),n.Namespace._moduleDefine(e,"WinJS",{log:{get:function(){return l},set:function(e){l=e}}})}),define("WinJS/Scheduler",["exports","./Core/_Global","./Core/_Base","./Core/_ErrorFromName","./Core/_Log","./Core/_Resources","./Core/_Trace","./Core/_WriteProfilerMark","./Promise"],function(e,t,n,i,r,o,s,a,l){"use strict";function u(e){var t={},n="_prev"+e,i="_next"+e;return t["_remove"+e]=function(){var e=this[n],t=this[i];t&&(t[n]=e),e&&(e[i]=t),this[n]=null,this[i]=null},t["_insert"+e+"Before"]=function(e){var t=this[n];return t&&(t[i]=e),e[i]=this,e[n]=t,this[n]=e,e},t["_insert"+e+"After"]=function(e){var t=this[i];return this[i]=e,e[i]=t,e[n]=this,t&&(t[n]=e),e},t}function c(e,t,n){return void 0!==n?"("+e+";"+t+";"+n+")":void 0!==t?"("+e+";"+t+")":void 0!==e?"("+e+")":""}function d(e,t,n,i){a("WinJS.Scheduler:"+e+c(n,i)+","+t)}function h(e,t,n,i,r){var o=e.name||void 0!==i||void 0!==r;a("WinJS.Scheduler:"+t+":"+e.id+(o?c(e.name,i,r):"")+","+n)}function p(){return!1}function m(e){throw"Illegal call by job("+e.id+") in state: "+this.name}function f(e){return function(t,n,i){t._setState(e,n,i)}}function _(e,t){e._setPriority(t)}function g(e,t){function n(e,t){r.log&&r.log(t+": MARKER: "+e.name,"winjs scheduler","log")}function i(e,t){r.log&&r.log(t+": JOB("+e.id+"): state: "+(e._state?e._state.name:"")+(e.name?", name: "+e.name:""),"winjs scheduler","log")}r.log&&r.log("highWaterMark: "+Pe,"winjs scheduler","log");var o=0,s=t?Ce[Ce.length-1]:Ce[0],a=s;do a instanceof he&&n(a,o),a instanceof V&&i(a,o),o++,a=t?a["_prev"+e]:a["_next"+e];while(a)}function v(){function e(e,n){t+="    "+(n?"*":" ")+"id: "+e.id+", priority: "+L(e.priority).name+(e.name?", name: "+e.name:"")+"\n"}var t="";t+="Jobs:\n";var n=L(Pe),i=0;for(Ie&&(e(Ie,!0),i++);n.priority>=be.min;)n instanceof V&&(e(n,!1),i++),n=n._nextJob;0===i&&(t+="     None\n"),t+="Drain requests:\n";for(var r=0,o=Ee.length;o>r;r++)t+="    "+(0===r?"*":" ")+"priority: "+L(Ee[r].priority).name+", name: "+Ee[r].name+"\n";return 0===Ee.length&&(t+="     None\n"),t}function y(){var e=Ce[0];do{if(e instanceof V)return!1;e=e._nextJob}while(e);return!0}function b(){return 0===Ee.length?null:Ee[0].priority}function C(e){d("drain","StartTM",e.name,L(e.priority).name)}function w(e,t){t&&d("drain-canceled","info",e.name,L(e.priority).name),d("drain","StopTM",e.name,L(e.priority).name)}function I(e,t,n){Ee.push({priority:e,complete:t,name:n}),1===Ee.length&&(C(Ee[0]),e>Pe&&(Pe=e,fe=!0))}function S(e,t){var n,i=Ee.length;for(n=0;i>n;n++)if(Ee[n].complete===e){0===n&&(w(Ee[0],t),Ee[1]&&C(Ee[1])),Ee.splice(n,1);break}}function E(){var e=Ee.shift();e&&(w(e),Ee[0]&&C(Ee[0]),e.complete())}function x(){var e=!1;if(Ee.length)for(var t=b();+t===t&&t>Pe;)me=t,E(),e=!0,t=b();return e}function P(e){return e>=be.aboveNormal+1?Me.HIGH:e>=be.belowNormal?Me.NORMAL:Me.IDLE}function k(e,t){return Ae[e]>=Ae[t]}function T(e,t){return Ae[e]>Ae[t]}function M(e){switch(e){case Me.HIGH:return!1;case Me.NORMAL:return Me.isTaskScheduledAtPriorityOrHigher(Me.HIGH);case Me.IDLE:return Me.isTaskScheduledAtPriorityOrHigher(Me.NORMAL)}}function A(e,t){var n=L(t);n.priority>Pe&&(Pe=n.priority,fe=!0),n._insertJobAfter(e)}function O(e,t){var n=L(t);n.priority>Pe&&(Pe=n.priority,fe=!0),n._nextMarker._insertJobBefore(e)}function D(e){return e=0|e,e=Math.max(e,ve),e=Math.min(e,ye)}function L(e){return e=D(e),Ce[-1*(e-ye)]}function B(e){pe=!0,d("timeslice","StartTM");var t,n,i,r=!0,o=!1,s=!1;fe=!1;try{for(var a=Oe(),l=a+xe,u=function(){return o=!1,fe?!0:M(P(Pe))?!0:Ee.length?!1:Oe()>l?(o=!0,!0):!1};Pe>=be.min&&!u()&&!s;){t=!1,n=L(Pe)._nextJob;do{if(me=n.priority,n instanceof V)i!==n.priority&&(+i===i&&d("priority","StopTM",L(i).name),d("priority","StartTM",L(n.priority).name),i=n.priority),t=!0,r=!1,Ie=n,h(Ie,"job-running","StartTM",L(me).name),n._execute(u),h(Ie,"job-running","StopTM",L(me).name),Ie=null,r=!0;else{var c=P(Pe);Pe=n.priority,t=x();var p=P(Pe);!T(c,p)||Se&&!Me.isTaskScheduledAtPriorityOrHigher(p)||(s=!0)}n=n._nextJob}while(n&&!t&&!s&&!M(P(Pe)));fe=!1}}finally{Ie=null,r||(h(n,"job-error","info"),h(n,"job-running","StopTM",L(me).name),n.cancel()),+i===i&&d("priority","StopTM",L(i).name);for(var m=!1;Pe>=be.min&&!m;){t=!1,n=L(Pe)._nextJob;do n instanceof V?m=!0:(Pe=n.priority,t=x()),n=n._nextJob;while(n&&!t&&!m)}var f;f=r?o?"timeslice exhausted":Pe<be.min?"jobs exhausted":s?"reached WWA priority boundary":"WWA host work":"job error",e&&(we=null),pe=!1,Pe>=be.min&&R(),d("yielding","info",f),d("timeslice","StopTM")}}function R(e){+e!==e&&(e=Pe);var t=P(e);if(!pe&&(!we||Se&&!k(we,t))){var n=++De,i=function(){n>Le&&(Le=De,B(!0))};Me.execAsyncAtPriority(i,t),we=t}}function N(e,t){var n=ge++;void 0===t&&(t="Drain Request "+n),e=+e===e?e:be.min,e=D(e);var i,r=new l(function(n){i=n,I(e,i,t)},function(){S(i,!0)});return pe||R(),r}function F(e){return Me.execAtPriority(e,Me.HIGH)}function z(){return new K}function H(e,t,n,i){t=t||be.normal,n=n||null;var r=++_e,o=s._traceAsyncOperationStarting("WinJS.Utilities.Scheduler.schedule: "+r+c(i));return i=i||"",new V(r,e,t,n,i,o)}function W(){if(pe)return me;switch(Me.getCurrentPriority()){case Me.HIGH:return be.high;case Me.NORMAL:return be.normal;case Me.IDLE:return be.idle}}function U(e){return function(t,n){var i;return new l(function(r){i=H(function(){r(t)},e,null,n)},function(){i.cancel()})}}n.Namespace.define("WinJS.Utilities",{_linkedListMixin:u});var j={get jobInfoIsNoLongerValid(){return"The job info object can only be used while the job is running"}},V=n.Class.define(function(e,t,n,i,r,o){this._id=e,this._work=t,this._context=i,this._name=r,this._asyncOpID=o,this._setPriority(n),this._setState(Y),h(this,"job-scheduled","info")},{completed:{get:function(){return!!this._state.completed}},id:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(e){this._name=e}},owner:{get:function(){return this._owner},set:function(e){this._owner&&this._owner._remove(this),this._owner=e,this._owner&&this._owner._add(this)}},priority:{get:function(){return this._priority},set:function(e){e=D(e),this._state.setPriority(this,e)}},cancel:function(){this._state.cancel(this)},pause:function(){this._state.pause(this)},resume:function(){this._state.resume(this)},_execute:function(e){this._state.execute(this,e)},_executeDone:function(e){return this._state.executeDone(this,e)},_blockedDone:function(e){return this._state.blockedDone(this,e)},_setPriority:function(e){+this._priority===this._priority&&this._priority!==e&&h(this,"job-priority-changed","info",L(this._priority).name,L(e).name),this._priority=e},_setState:function(e,t,n){this._state&&r.log&&r.log("Transitioning job ("+this.id+") from: "+this._state.name+" to: "+e.name,"winjs scheduler","log"),this._state=e,this._state.enter(this,t,n)}});n.Class.mix(V,u("Job"));var q={complete:1,"continue":2,block:3},J=n.Class.define(function(e,t){this._job=t,this._result=null,this._yieldPolicy=q.complete,this._shouldYield=e},{job:{get:function(){return this._throwIfDisabled(),this._job}},shouldYield:{get:function(){return this._throwIfDisabled(),this._shouldYield()}},setPromise:function(e){this._throwIfDisabled(),this._result=e,this._yieldPolicy=q.block},setWork:function(e){this._throwIfDisabled(),this._result=e,this._yieldPolicy=q["continue"]},_disablePublicApi:function(){this._publicApiDisabled=!0},_throwIfDisabled:function(){if(this._publicApiDisabled)throw new i("WinJS.Utilities.Scheduler.JobInfoIsNoLongerValid",j.jobInfoIsNoLongerValid)}}),K=n.Class.define(function(){this._jobs={}},{cancelAll:function(){var e=this._jobs,t=Object.keys(e);this._jobs={};for(var n=0,i=t.length;i>n;n++)e[t[n]].cancel()},_add:function(e){this._jobs[e.id]=e},_remove:function(e){delete this._jobs[e.id]}}),G=n.Class.define(function(e){this.name=e,this.enter=m,this.execute=m,this.executeDone=m,this.blockedDone=m,this.cancel=m,this.pause=m,this.resume=m,this.setPriority=m}),Y=new G("created"),X=new G("scheduled"),Z=new G("paused"),Q=new G("canceled"),$=new G("running"),ee=new G("running_paused"),te=new G("running_resumed"),ne=new G("running_canceled"),ie=new G("running_canceled_blocked"),re=new G("cooperative_yield"),oe=new G("cooperative_yield_paused"),se=new G("blocked"),ae=new G("blocked_waiting"),le=new G("blocked_paused"),ue=new G("blocked_paused_waiting"),ce=new G("blocked_canceled"),de=new G("complete");Y.enter=function(e){O(e,e.priority),e._setState(X)},X.enter=function(){R()},X.execute=f($),X.cancel=f(Q),X.pause=f(Z),X.resume=p,X.setPriority=function(e,t){e.priority!==t&&(e._setPriority(t),e.pause(),e.resume())},Z.enter=function(e){h(e,"job-paused","info"),e._removeJob()},Z.cancel=f(Q),Z.pause=p,Z.resume=function(e){h(e,"job-resumed","info"),O(e,e.priority),e._setState(X)},Z.setPriority=_,Q.enter=function(e){h(e,"job-canceled","info"),s._traceAsyncOperationCompleted(e._asyncOpID,t.Debug&&t.Debug.MS_ASYNC_OP_STATUS_CANCELED),e._removeJob(),e._work=null,e._context=null,e.owner=null},Q.cancel=p,Q.pause=p,Q.resume=p,Q.setPriority=p,$.enter=function(e,t){e._removeJob();var n=e.priority,i=e._work,r=e._context;e._work=null,e._context=null;var o=new J(t,e);s._traceAsyncCallbackStarting(e._asyncOpID);try{Me.execAtPriority(function(){i.call(r,o)},P(n))}finally{s._traceAsyncCallbackCompleted(),o._disablePublicApi()}e._context=r;var a=e._executeDone(o._yieldPolicy);e._setState(a,o._result,n)},$.executeDone=function(e,t){switch(t){case q.complete:return de;case q["continue"]:return re;case q.block:return se}},$.cancel=function(e){fe=!0,e._setState(ne)},$.pause=function(e){fe=!0,e._setState(ee)},$.resume=p,$.setPriority=_,ee.enter=p,ee.executeDone=function(e,t){switch(t){case q.complete:return de;case q["continue"]:return oe;case q.block:return le}},ee.cancel=f(ne),ee.pause=p,ee.resume=f(te),ee.setPriority=_,te.enter=p,te.executeDone=function(e,t){switch(t){case q.complete:return de;case q["continue"]:return re;case q.block:return se}},te.cancel=f(ne),te.pause=f(ee),te.resume=p,te.setPriority=_,ne.enter=p,ne.executeDone=function(e,t){switch(t){case q.complete:case q["continue"]:return Q;case q.block:return ie}},ne.cancel=p,ne.pause=p,ne.resume=p,ne.setPriority=p,ie.enter=function(e,t){t.cancel(),e._setState(Q)},re.enter=function(e,t,n){h(e,"job-yielded","info"),n===e.priority?A(e,e.priority):O(e,e.priority),e._work=t,e._setState(X)},oe.enter=function(e,t){h(e,"job-yielded","info"),e._work=t,e._setState(Z)},se.enter=function(e,t,n){h(e,"job-blocked","StartTM"),e._work=t,e._setState(ae),t.done(function(t){h(e,"job-blocked","StopTM");var i=e._blockedDone(t);e._setState(i,t,n)},function(t){return t&&"Canceled"===t.name||h(e,"job-error","info"),h(e,"job-blocked","StopTM"),e._setState(Q),l.wrapError(t)})},ae.enter=p,ae.blockedDone=function(e,t){return"function"==typeof t?re:de},ae.cancel=f(ce),ae.pause=f(ue),ae.resume=p,ae.setPriority=_,le.enter=function(e,t,n){h(e,"job-blocked","StartTM"),e._work=t,e._setState(ue),t.done(function(t){h(e,"job-blocked","StopTM");var i=e._blockedDone(t);e._setState(i,t,n)},function(t){return t&&"Canceled"===t.name||h(e,"job-error","info"),h(e,"job-blocked","StopTM"),e._setState(Q),l.wrapError(t)})},ue.enter=p,ue.blockedDone=function(e,t){return"function"==typeof t?oe:de},ue.cancel=f(ce),ue.pause=p,ue.resume=f(ae),ue.setPriority=_,ce.enter=function(e){e._work.cancel(),e._work=null},ce.blockedDone=function(){return Q},ce.cancel=p,ce.pause=p,ce.resume=p,ce.setPriority=p,de.completed=!0,de.enter=function(e){s._traceAsyncOperationCompleted(e._asyncOpID,t.Debug&&t.Debug.MS_ASYNC_OP_STATUS_SUCCESS),e._work=null,e._context=null,e.owner=null,h(e,"job-completed","info")},de.cancel=p,de.pause=p,de.resume=p,de.setPriority=p;var he=n.Class.define(function(e,t){this.priority=e,this.name=t},{});n.Class.mix(he,u("Job"),u("Marker"));var pe,me,fe,_e=0,ge=0,ve=-15,ye=15,be={max:15,high:13,aboveNormal:9,normal:0,belowNormal:-9,idle:-13,min:-15},Ce=[new he(15,"max"),new he(14,"14"),new he(13,"high"),new he(12,"12"),new he(11,"11"),new he(10,"10"),new he(9,"aboveNormal"),new he(8,"8"),new he(7,"7"),new he(6,"6"),new he(5,"5"),new he(4,"4"),new he(3,"3"),new he(2,"2"),new he(1,"1"),new he(0,"normal"),new he(-1,"-1"),new he(-2,"-2"),new he(-3,"-3"),new he(-4,"-4"),new he(-5,"-5"),new he(-6,"-6"),new he(-7,"-7"),new he(-8,"-8"),new he(-9,"belowNormal"),new he(-10,"-10"),new he(-11,"-11"),new he(-12,"-12"),new he(-13,"idle"),new he(-14,"-14"),new he(-15,"min"),new he(-16,"<TAIL>")],we=null,Ie=null,Se=!(!t.MSApp||!t.MSApp.execAtPriority),Ee=[],xe=30,Pe=be.min;Ce.reduce(function(e,t){return e&&(e._insertJobAfter(t),e._insertMarkerAfter(t)),t});var ke=t.setImmediate?t.setImmediate.bind(t):function(e){t.setTimeout(e,16)},Te={execAsyncAtPriority:function(e,n){n===Me.HIGH&&t.setTimeout(e,0),ke(e)},execAtPriority:function(e){return e()},getCurrentPriority:function(){return Te.NORMAL},isTaskScheduledAtPriorityOrHigher:function(){return!1},HIGH:"high",NORMAL:"normal",IDLE:"idle"},Me=Se?t.MSApp:Te,Ae={};Ae[Me.IDLE]=1,Ae[Me.NORMAL]=2,Ae[Me.HIGH]=3;var Oe=t.performance&&t.performance.now&&t.performance.now.bind(t.performance)||Date.now.bind(Date),De=0,Le=0;n.Namespace._moduleDefine(e,"WinJS.Utilities.Scheduler",{Priority:be,schedule:H,createOwnerToken:z,execHigh:F,requestDrain:N,currentPriority:{get:W},schedulePromiseHigh:U(be.high),schedulePromiseAboveNormal:U(be.aboveNormal),schedulePromiseNormal:U(be.normal),schedulePromiseBelowNormal:U(be.belowNormal),schedulePromiseIdle:U(be.idle),retrieveState:v,_JobNode:V,_JobInfo:J,_OwnerToken:K,_dumpList:g,_isEmpty:{get:y},_usingWwaScheduler:{get:function(){return Se},set:function(e){Se=e,Me=Se?t.MSApp:Te}},_MSApp:{get:function(){return Me},set:function(e){Me=e}},_TIME_SLICE:xe})}),define("WinJS/Core/_BaseUtils",["exports","./_Global","./_Base","./_BaseCoreUtils","./_ErrorFromName","./_Resources","./_Trace","../Promise","../Scheduler"],function(e,t,n,i,r,o,s,a,l){"use strict";function u(e){return e}function c(e,t,n){return e.split(".").reduce(function(e,t){return e?n(e[t]):null},t)}function d(e,n){return e?c(e,n||t,u):null}function h(e){return e.length>0&&0!==e.indexOf("-moz")&&"-"===e.charAt(0)&&(e=e.slice(1)),e.replace(/\-[a-z]/g,function(e){return e[1].toUpperCase()})}function p(e,t){return""===e?t:e+t.charAt(0).toUpperCase()+t.slice(1)}function m(e,t){return(""!==e?"-"+e.toLowerCase()+"-":"")+t}function f(){if(!t.document)return{};for(var e={},n=t.document.documentElement.style,i=["","webkit","ms","Moz"],r=["animation","transition","transform","animation-name","animation-duration","animation-delay","animation-timing-function","animation-iteration-count","animation-direction","animation-fill-mode","grid-column","grid-columns","grid-column-span","grid-row","grid-rows","grid-row-span","transform-origin","transition-property","transition-duration","transition-delay","transition-timing-function","scroll-snap-points-x","scroll-snap-points-y","scroll-chaining","scroll-limit","scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","touch-action","overflow-style","user-select"],o={},s=0,a=r.length;a>s;s++)for(var l=r[s],u=h(l),c=0,d=i.length;d>c;c++){var f=i[c],_=p(f,u);if(_ in n){var g=m(f,l);e[l]={cssName:g,scriptName:_},o[l]=f;break}}return e.animationPrefix=m(o.animation,""),e.keyframes=m(o.animation,"keyframes"),e}function _(){for(var e={},n=["","WebKit"],i=[{eventObject:"TransitionEvent",events:["transitionStart","transitionEnd"]},{eventObject:"AnimationEvent",events:["animationStart","animationEnd"]}],r=0,o=i.length;o>r;r++){for(var s=i[r],a="",l=0,u=n.length;u>l;l++){var c=n[l];if(c+s.eventObject in t){a=c.toLowerCase();break}}for(var l=0,d=s.events.length;d>l;l++){var h=s.events[l];e[h]=p(a,h),""===a&&(e[h]=e[h].toLowerCase())}}return e.manipulationStateChanged="MSManipulationEvent"in t?"ManipulationEvent":null,e}function g(e,t){function n(){return a.timeout(e).then(function(){i=null})}var i=null,r=null,o=null,s=null;return function(){
r?(o=this,s=[].slice.call(arguments,0)):i?(o=this,s=[].slice.call(arguments,0),r=i.then(function(){var e=o;o=null;var a=s;s=null,i=n(),r=null,t.apply(e,a)})):(i=n(),t.apply(this,arguments))}}var v,y={get notSupportedForProcessing(){return"Value is not supported within a declarative processing context, if you want it to be supported mark it using WinJS.Utilities.markSupportedForProcessing. The value was: '{0}'"}},b=0,C={},w=!1,I=t.navigator.platform,S="iPhone"===I||"iPad"===I||"iPod"===I;n.Namespace._moduleDefine(e,"WinJS.Utilities",{_setHasWinRT:{value:function(e){i.hasWinRT=e},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return i.hasWinRT},configurable:!1,enumerable:!0},_setIsiOS:{value:function(e){S=e},configurable:!1,writable:!1,enumerable:!1},_isiOS:{get:function(){return S},configurable:!1,enumerable:!0},_getMemberFiltered:c,getMember:d,_browserStyleEquivalents:f(),_browserEventEquivalents:_(),_getCamelCasedName:h,ready:function E(e,n){return new a(function(i,r){function o(){if(e)try{e(),i()}catch(t){r(t)}else i()}var s=E._testReadyState;s||(s=t.document?t.document.readyState:"complete"),"complete"===s||t.document&&null!==t.document.body?n?l.schedule(function(){o()},l.Priority.normal,null,"WinJS.Utilities.ready"):o():t.addEventListener("DOMContentLoaded",o,!1)})},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:i.markSupportedForProcessing,configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(e){var n=!0;switch(n=n&&e!==t,n=n&&e!==t.location,n=n&&!(e instanceof t.HTMLIFrameElement),n=n&&!("function"==typeof e&&!e.supportedForProcessing),t.frames.length){case 0:break;case 1:n=n&&e!==t.frames[0];break;default:for(var i=0,s=t.frames.length;n&&s>i;i++)n=n&&e!==t.frames[i]}if(n)return e;throw new r("WinJS.Utilities.requireSupportedForProcessing",o._formatString(y.notSupportedForProcessing,e))},configurable:!1,writable:!1,enumerable:!0},_setImmediate:i._setImmediate,_requestAnimationFrame:t.requestAnimationFrame?t.requestAnimationFrame.bind(t):function(e){var n=++b;return C[n]=e,v=v||t.setTimeout(function(){var e=C,t=Date.now();C={},v=null,Object.keys(e).forEach(function(n){e[n](t)})},16),n},_cancelAnimationFrame:t.cancelAnimationFrame?t.cancelAnimationFrame.bind(t):function(e){delete C[e]},_yieldForEvents:t.setImmediate?t.setImmediate.bind(t):function(e){t.setTimeout(e,0)},_yieldForDomModification:t.setImmediate?t.setImmediate.bind(t):function(e){t.setTimeout(e,0)},_throttledFunction:g,_shallowCopy:function(e){return this._mergeAll([e])},_merge:function(e,t){return this._mergeAll([e,t])},_mergeAll:function(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t},_getProfilerMarkIdentifier:function(e){var t="";return e.id&&(t+=" id='"+e.id+"'"),e.className&&(t+=" class='"+e.className+"'"),t},_now:function(){return t.performance&&t.performance.now&&t.performance.now()||Date.now()},_traceAsyncOperationStarting:s._traceAsyncOperationStarting,_traceAsyncOperationCompleted:s._traceAsyncOperationCompleted,_traceAsyncCallbackStarting:s._traceAsyncCallbackStarting,_traceAsyncCallbackCompleted:s._traceAsyncCallbackCompleted,_version:"4.4.0"}),n.Namespace._moduleDefine(e,"WinJS",{validation:{get:function(){return w},set:function(e){w=e}}}),n.Namespace.define("WinJS",{strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}})}),define("WinJS/Core",["./Core/_Base","./Core/_BaseCoreUtils","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Global","./Core/_Log","./Core/_Resources","./Core/_Trace","./Core/_WinRT","./Core/_WriteProfilerMark"],function(){}),define("WinJS/_Signal",["./Core/_Base","./Promise/_StateMachine"],function(e,t){"use strict";var n=e.Class.derive(t.PromiseStateMachine,function(e){this._oncancel=e,this._setState(t.state_created),this._run()},{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),i=e.Class.define(function(e){this._promise=new n(e)},{promise:{get:function(){return this._promise}},cancel:function(){this._promise.cancel()},complete:function(e){this._promise._completed(e)},error:function(e){this._promise._error(e)},progress:function(e){this._promise._progress(e)}},{supportedForProcessing:!1});return e.Namespace.define("WinJS",{_Signal:i}),i}),define("WinJS/Utilities/_Control",["exports","../Core/_Global","../Core/_Base"],function(e,t,n){"use strict";function i(e,t){r(e,t)}function r(e,t,n){if("object"==typeof t)for(var i=Object.keys(t),r=0,o=i.length;o>r;r++){var s=i[r],a=t[s];if(s.length>2){var l=s[0],u=s[1];if(!("o"!==l&&"O"!==l||"n"!==u&&"N"!==u)&&"function"==typeof a&&e.addEventListener){e.addEventListener(s.substr(2),a);continue}}n||(e[s]=a)}}t.document&&n.Namespace._moduleDefine(e,"WinJS.UI",{DOMEventMixin:n.Namespace._lazy(function(){return{_domElement:null,addEventListener:function(e,t,n){(this.element||this._domElement).addEventListener(e,t,n||!1)},dispatchEvent:function(e,n){var i=t.document.createEvent("Event");return i.initEvent(e,!1,!1),i.detail=n,"object"==typeof n&&Object.keys(n).forEach(function(e){i[e]=n[e]}),(this.element||this._domElement).dispatchEvent(i)},removeEventListener:function(e,t,n){(this.element||this._domElement).removeEventListener(e,t,n||!1)}}}),setOptions:i,_setOptions:r})}),define("WinJS/Utilities/_ElementUtilities",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_WinRT","../Promise","../Scheduler"],function(e,t,n,i,r,o,s){"use strict";function a(){return j||(j={},Object.keys(t.CSS2Properties.prototype).forEach(function(e){j[e]=""})),j}function l(e,n){return t.getComputedStyle(e,n)||a()}function u(e){for(var t=e.length,n=t-1;n>=0;n--)e[n]||(e.splice(n,1),t--);return t}function c(e){var t=e.className||"";return"string"==typeof t?t:t.baseVal||""}function d(e,t){var n=e.className||"";return"string"==typeof n?e.className=t:e.className.baseVal=t,e}function h(e,t){if(e.classList){if(t.indexOf(" ")<0)e.classList.add(t);else{var n=t.split(" ");u(n);for(var i=0,r=n.length;r>i;i++)e.classList.add(n[i])}return e}var o,s=c(e),a=s.split(" "),l=u(a);if(t.indexOf(" ")>=0){var n=t.split(" ");u(n);for(var i=0;l>i;i++){var h=n.indexOf(a[i]);h>=0&&n.splice(h,1)}n.length>0&&(o=n.join(" "))}else{for(var p=!1,i=0;l>i;i++)if(a[i]===t){p=!0;break}p||(o=t)}return o&&(l>0&&a[0].length>0?d(e,s+" "+o):d(e,o)),e}function p(e,t){if(e.classList){if(0===e.classList.length)return e;var n=t.split(" ");u(n);for(var i=0,r=n.length;r>i;i++)e.classList.remove(n[i]);return e}var n,o,s=c(e);if(t.indexOf(" ")>=0)n=t.split(" "),o=u(n);else{if(s.indexOf(t)<0)return e;n=[t],o=1}for(var a,l=s.split(" "),h=u(l),i=h-1;i>=0;i--)n.indexOf(l[i])>=0&&(l.splice(i,1),a=!0);return a&&d(e,l.join(" ")),e}function m(e,t){if(e.classList)return e.classList.toggle(t),e;for(var n=c(e),i=n.trim().split(" "),r=i.length,o=!1,s=0;r>s;s++)i[s]===t&&(o=!0);return o?d(e,i.reduce(function(e,n){return n===t?e:e&&e.length>0?e+" "+n:n},"")):r>0&&i[0].length>0?d(e,n+" "+t):d(e,n+t),e}function f(e,t,n){e.getAttribute(t)!==""+n&&e.setAttribute(t,n)}function _(e,t,n,i){var r=Math.max(t,Math.min(n,+e));return 0===r?0:r||Math.max(t,Math.min(n,i))}function g(e,t){if(!V.test(t)&&q.test(t)){var n=e.style.left;return e.style.left=t,t=e.style.pixelLeft,e.style.left=n,t}return Math.round(parseFloat(t))||0}function v(e,t){return g(e,l(e,null)[t])}function y(e){return parseFloat(e)||0}function b(e,t){return y(l(e,null)[t])}function C(e){var t=l(e);return{top:y(t.marginTop),right:y(t.marginRight),bottom:y(t.marginBottom),left:y(t.marginLeft)}}function w(e,t,n,i,r){var o=t.toLowerCase();e._eventsMap||(e._eventsMap={}),e._eventsMap[o]||(e._eventsMap[o]=[]),e._eventsMap[o].push({listener:n,useCapture:i,data:r})}function I(e,t,n,i){var r=t.toLowerCase(),o=e._eventsMap&&e._eventsMap[r];if(o)for(var s=o.length-1;s>=0;s--){var a=o[s];if(a.listener===n&&!!i==!!a.useCapture)return o.splice(s,1),a}return null}function S(e,t){var n=t.toLowerCase();return e._eventsMap&&e._eventsMap[n]&&e._eventsMap[n].slice(0)||[]}function E(e,t,n){for(;e;){for(var i=S(e,t),r=0,o=i.length;o>r;r++)i[r].listener.call(e,n);e=e.parentNode}}function x(e){return(e.relatedTarget&&"IFRAME"===e.relatedTarget.tagName||e.target&&"IFRAME"===e.target.tagName)&&(e.relatedTarget=null),e}function P(e,t,n,i){if(i)throw"This custom WinJS event only supports bubbling";w(e,t,n,i)}function k(e,t){var n=t.changedTouches,i=null;if(!n)return i;for(var r=0,o=n.length;o>r;r++){var s=n[r],a=new Z(t,{pointerType:G.MSPOINTER_TYPE_TOUCH,pointerId:s.identifier,isPrimary:0===r,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,radiusX:s.radiusX,radiusY:s.radiusY,rotationAngle:s.rotationAngle,force:s.force,_currentTouch:s}),l=e(a);i=i||l}return i}function T(e,t){return t.pointerType=G.MSPOINTER_TYPE_MOUSE,t.pointerId=-1,t.isPrimary=!0,e(t)}function M(e,t){return e(t)}function A(e,n,i,r){var o,s,a,l,u=n.toLowerCase(),c=Q[u];t.MSPointerEvent?(a=function(e){return e._normalizedType=u,l=!0,M(i,e)},e.addEventListener(c.mspointer,a,r)):(c.mouse&&(o=function(e){return e._normalizedType=u,l?void(l=!1):T(i,e)},e.addEventListener(c.mouse,o,r)),c.touch&&(s=function(e){return e._normalizedType=u,l=!0,k(i,e)},e.addEventListener(c.touch,s,r))),w(e,n,i,r,{mouseWrapper:o,touchWrapper:s,mspointerWrapper:a})}function O(e,t,n,i){var r=t.toLowerCase(),o=I(e,t,n,i);if(o){var s=Q[r];o.data.mouseWrapper&&e.removeEventListener(s.mouse,o.data.mouseWrapper,i),o.data.touchWrapper&&e.removeEventListener(s.touch,o.data.touchWrapper,i),o.data.mspointerWrapper&&e.removeEventListener(s.mspointer,o.data.mspointerWrapper,i)}}function D(){var e=t.document.createElement("div");e.style.direction="rtl",e.innerHTML="<div style='width: 100px; height: 100px; overflow: scroll; visibility:hidden'><div style='width: 10000px; height: 100px;'></div></div>",t.document.body.appendChild(e);var n=e.firstChild;n.scrollLeft>0&&(ae=!0),n.scrollLeft+=100,0===n.scrollLeft&&(le=!0),t.document.body.removeChild(e),se=!0}function L(e){var t=l(e),n=e.scrollLeft;return"rtl"===t.direction&&(se||D(),ae&&(n=e.scrollWidth-e.clientWidth-n),n=Math.abs(n)),{scrollLeft:n,scrollTop:e.scrollTop}}function B(e,t,n){if(void 0!==t){var i=l(e);"rtl"===i.direction&&(se||D(),le?t=-t:ae&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}void 0!==n&&(e.scrollTop=n)}function R(e){return L(e)}function N(e,t){t=t||{},B(e,t.scrollLeft,t.scrollTop)}function F(e){return e.uniqueID||e._uniqueID||(e._uniqueID="element__"+ ++de),e.uniqueID||e._uniqueID}function z(e){e.id||(e.id=F(e))}function H(e){var n=t.document.documentElement,i=R(n);return{left:e.clientX+("rtl"===t.document.body.dir?-i.scrollLeft:i.scrollLeft),top:e.clientY+n.scrollTop}}function W(e,t){for(var n=[],i=0,r=t.length;r>i;i++){var o=e.querySelector("."+t[i]);o&&n.push(o)}return n}if(t.document){var U=167,j=null,V=/^-?\d+\.?\d*(px)?$/i,q=/^-?\d+/i,J=t.MSGestureEvent||{MSGESTURE_FLAG_BEGIN:1,MSGESTURE_FLAG_CANCEL:4,MSGESTURE_FLAG_END:2,MSGESTURE_FLAG_INERTIA:8,MSGESTURE_FLAG_NONE:0},K=t.MSManipulationEvent||{MS_MANIPULATION_STATE_ACTIVE:1,MS_MANIPULATION_STATE_CANCELLED:6,MS_MANIPULATION_STATE_COMMITTED:7,MS_MANIPULATION_STATE_DRAGGING:5,MS_MANIPULATION_STATE_INERTIA:2,MS_MANIPULATION_STATE_PRESELECT:3,MS_MANIPULATION_STATE_SELECTING:4,MS_MANIPULATION_STATE_STOPPED:0},G=t.MSPointerEvent||{MSPOINTER_TYPE_TOUCH:"touch",MSPOINTER_TYPE_PEN:"pen",MSPOINTER_TYPE_MOUSE:"mouse"},Y="onfocusin"in t.document.documentElement,X=null;t.addEventListener(Y?"focusout":"blur",function(e){if(e.target===t){var n=X;n&&E(n,"focusout",x({type:"focusout",target:n,relatedTarget:null})),X=null}}),t.document.documentElement.addEventListener(Y?"focusin":"focus",function(e){var t=X;X=e.target,t&&E(t,"focusout",x({type:"focusout",target:t,relatedTarget:X})),X&&E(X,"focusin",x({type:"focusin",target:X,relatedTarget:t}))},!0);var Z=function(e,t){t=t||{},this.__eventObject=e;var n=this;Object.keys(t).forEach(function(e){Object.defineProperty(n,e,{value:t[e]})})};["altKey","AT_TARGET","bubbles","BUBBLING_PHASE","button","buttons","cancelable","cancelBubble","CAPTURING_PHASE","clientX","clientY","ctrlKey","currentTarget","defaultPrevented","detail","eventPhase","fromElement","getModifierState","height","hwTimestamp","initEvent","initMouseEvent","initPointerEvent","initUIEvent","isPrimary","isTrusted","layerX","layerY","metaKey","offsetX","offsetY","pageX","pageY","pointerId","pointerType","pressure","preventDefault","relatedTarget","rotation","screenX","screenY","shiftKey","srcElement","stopImmediatePropagation","stopPropagation","target","tiltX","tiltY","timeStamp","toElement","type","view","which","width","x","y","_normalizedType","_fakedBySemanticZoom"].forEach(function(e){Object.defineProperty(Z.prototype,e,{get:function(){var t=this.__eventObject[e];return"function"==typeof t?t.bind(this.__eventObject):t},configurable:!0})});var Q={pointerdown:{touch:"touchstart",mspointer:"MSPointerDown",mouse:"mousedown"},pointerup:{touch:"touchend",mspointer:"MSPointerUp",mouse:"mouseup"},pointermove:{touch:"touchmove",mspointer:"MSPointerMove",mouse:"mousemove"},pointerenter:{touch:"touchenter",mspointer:"MSPointerEnter",mouse:"mouseenter"},pointerover:{touch:null,mspointer:"MSPointerOver",mouse:"mouseover"},pointerout:{touch:"touchleave",mspointer:"MSPointerOut",mouse:"mouseout"},pointercancel:{touch:"touchcancel",mspointer:"MSPointerCancel",mouse:null}},$={focusout:{register:P,unregister:I},focusin:{register:P,unregister:I}};if(!t.PointerEvent){var ee={register:A,unregister:O};$.pointerdown=ee,$.pointerup=ee,$.pointermove=ee,$.pointerenter=ee,$.pointerover=ee,$.pointerout=ee,$.pointercancel=ee}var te=n.Class.define(function(e){this._callback=e,this._toDispose=[],this._attributeFilter=[],this._scheduled=!1,this._pendingChanges=[],this._observerCount=0,this._handleCallback=this._handleCallback.bind(this),this._targetElements=[]},{observe:function(e,t){-1===this._targetElements.indexOf(e)&&this._targetElements.push(e),this._observerCount++,t.attributes&&this._addRemovableListener(e,"DOMAttrModified",this._handleCallback),t.attributeFilter&&(this._attributeFilter=t.attributeFilter)},disconnect:function(){this._observerCount=0,this._targetElements=[],this._toDispose.forEach(function(e){e()})},_addRemovableListener:function(e,t,n){e.addEventListener(t,n),this._toDispose.push(function(){e.removeEventListener(t,n)})},_handleCallback:function(e){e.stopPropagation();var t=e.attrName;if((!this._attributeFilter.length||-1!==this._attributeFilter.indexOf(t))&&-1!==this._targetElements.indexOf(e.target)){var n=t.indexOf("aria")>=0;"tabindex"===t&&(t="tabIndex"),this._pendingChanges.push({type:"attributes",target:e.target,attributeName:t}),1!==this._observerCount||n?this._scheduled===!1&&(this._scheduled=!0,i._setImmediate(this._dispatchEvent.bind(this))):this._dispatchEvent()}},_dispatchEvent:function(){try{this._callback(this._pendingChanges)}finally{this._pendingChanges=[],this._scheduled=!1}}},{_isShim:!0}),ne=t.MutationObserver||te,ie=null,re=n.Class.define(function(){t.addEventListener("resize",this._handleResize.bind(this))},{subscribe:function(e,t){e.addEventListener(this._resizeEvent,t),h(e,this._resizeClass)},unsubscribe:function(e,t){p(e,this._resizeClass),e.removeEventListener(this._resizeEvent,t)},_handleResize:function(){for(var e=t.document.querySelectorAll("."+this._resizeClass),n=e.length,i=0;n>i;i++){var r=t.document.createEvent("Event");r.initEvent(this._resizeEvent,!1,!0),e[i].dispatchEvent(r)}},_resizeClass:{get:function(){return"win-element-resize"}},_resizeEvent:{get:function(){return"WinJSElementResize"}}}),oe=n.Class.define(function(e,t,n){n=n||{},this.registerThruWinJSCustomEvents=!!n.registerThruWinJSCustomEvents,this.objectName=e,this.object=t,this.capture={},this.bubble={}},{addEventListener:function(t,n,i,r){n=n.toLowerCase();var o=this._getHandlers(r),s=o[n];s||(s=this._getListener(n,r),s.refCount=0,o[n]=s,this.registerThruWinJSCustomEvents?e._addEventListener(this.object,n,s,r):this.object.addEventListener(n,s,r)),s.refCount++,t.addEventListener(this._getEventName(n,r),i),h(t,this._getClassName(n,r))},removeEventListener:function(t,n,i,r){n=n.toLowerCase();var o=this._getHandlers(r),s=o[n];s&&(s.refCount--,0===s.refCount&&(this.registerThruWinJSCustomEvents?e._removeEventListener(this.object,n,s,r):this.object.removeEventListener(n,s,r),delete o[n])),p(t,this._getClassName(n,r)),t.removeEventListener(this._getEventName(n,r),i)},_getHandlers:function(e){return e?this.capture:this.bubble},_getClassName:function(e,t){var n=t?"capture":"bubble";return"win-"+this.objectName.toLowerCase()+"-event-"+e+n},_getEventName:function(e,t){var n=t?"capture":"bubble";return"WinJS"+this.objectName+"Event-"+e+n},_getListener:function(e,n){var i=function(i){for(var r=t.document.querySelectorAll("."+this._getClassName(e,n)),o=r.length,s=!1,a=0;o>a;a++){var l=t.document.createEvent("Event");l.initEvent(this._getEventName(e,n),!1,!0),l.detail={originalEvent:i};var u=r[a].dispatchEvent(l);s=s||!u}return s};return i.bind(this)}}),se=!1,ae=!1,le=!1,ue=t.navigator.msManipulationViewsEnabled||t.navigator.userAgent.indexOf("MSAppHost")>=0,ce=!(!t.MSPointerEvent&&!t.TouchEvent),de=0,he=".win-selectionborder, .win-selectionbackground, .win-selectioncheckmark, .win-selectioncheckmarkbackground",pe="_msDataKey";n.Namespace._moduleDefine(e,"WinJS.Utilities",{_dataKey:pe,_supportsSnapPoints:{get:function(){return ue}},_supportsTouchDetection:{get:function(){return ce}},_uniqueID:F,_ensureId:z,_clamp:_,_getCursorPos:H,_getElementsByClasses:W,_createGestureRecognizer:function(){if(t.MSGesture)return new t.MSGesture;var e=function(){};return{addEventListener:e,removeEventListener:e,addPointer:e,stop:e}},_MSGestureEvent:J,_MSManipulationEvent:K,_elementsFromPoint:function(e,n){if(t.document.msElementsFromPoint)return t.document.msElementsFromPoint(e,n);var i=t.document.elementFromPoint(e,n);return i?[i]:null},_matchesSelector:function(e,t){var n=e.matches||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector;return n.call(e,t)},_selectionPartsSelector:he,_isSelectionRendered:function(e){return e.querySelectorAll(he).length>0},_addEventListener:function(e,t,n,r){var o=t&&t.toLowerCase(),s=$[o],a=i._browserEventEquivalents[t];s?s.register(e,t,n,r):a?e.addEventListener(a,n,r):e.addEventListener(t,n,r)},_removeEventListener:function(e,t,n,r){var o=t&&t.toLowerCase(),s=$[o],a=i._browserEventEquivalents[t];s?s.unregister(e,t,n,r):a?e.removeEventListener(a,n,r):e.removeEventListener(t,n,r)},_initEventImpl:function(e,n,i){i=i.toLowerCase();var r=Q[i];if(r)switch(e.toLowerCase()){case"pointer":t.PointerEvent||(arguments[2]=r.mspointer);break;default:arguments[2]=r[e.toLowerCase()]}n["init"+e+"Event"].apply(n,Array.prototype.slice.call(arguments,2))},_initMouseEvent:function(e){this._initEventImpl.apply(this,["Mouse",e].concat(Array.prototype.slice.call(arguments,1)))},_initPointerEvent:function(e){this._initEventImpl.apply(this,["Pointer",e].concat(Array.prototype.slice.call(arguments,1)))},_PointerEventProxy:Z,_bubbleEvent:E,_setPointerCapture:function(e,t){e.setPointerCapture&&e.setPointerCapture(t)},_releasePointerCapture:function(e,t){e.releasePointerCapture&&e.releasePointerCapture(t)},_MSPointerEvent:G,_getComputedStyle:l,_zoomToDuration:U,_zoomTo:function(e,t){this._supportsSnapPoints&&e.msZoomTo?e.msZoomTo(t):s.schedule(function(){var n=L(e),r="number"==typeof e._zoomToDestX?e._zoomToDestX:n.scrollLeft,o="number"==typeof e._zoomToDestY?e._zoomToDestY:n.scrollTop,s=l(e),a=e.scrollWidth-parseInt(s.width,10)-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10),u=e.scrollHeight-parseInt(s.height,10)-parseInt(s.paddingTop,10)-parseInt(s.paddingBottom,10);"number"!=typeof t.contentX&&(t.contentX=r),"number"!=typeof t.contentY&&(t.contentY=o);var c=_(t.contentX,0,a),d=_(t.contentY,0,u);if(c!==r||d!==o){e._zoomToId=e._zoomToId||0,e._zoomToId++,e._zoomToDestX=c,e._zoomToDestY=d;var h=e._zoomToId,p=i._now(),m=(e._zoomToDestX-n.scrollLeft)/U,f=(e._zoomToDestY-n.scrollTop)/U,g=function(){var t=i._now()-p;e._zoomToId===h&&(t>U?(B(e,e._zoomToDestX,e._zoomToDestY),e._zoomToDestX=null,e._zoomToDestY=null):(B(e,n.scrollLeft+t*m,n.scrollTop+t*f),i._requestAnimationFrame(g)))};i._requestAnimationFrame(g)}},s.Priority.high,null,"WinJS.Utilities._zoomTo")},_setActive:function(e,n){var i=!0;try{if(t.HTMLElement&&t.HTMLElement.prototype.setActive)e.setActive();else{var r,o;n&&(r=n.scrollLeft,o=n.scrollTop),e.focus(),n&&(n.scrollLeft=r,n.scrollTop=o)}}catch(s){i=!1}return i},_MutationObserver:ne,_resizeNotifier:{get:function(){return ie||(ie=new re),ie}},_GenericListener:oe,_globalListener:new oe("Global",t,{registerThruWinJSCustomEvents:!0}),_documentElementListener:new oe("DocumentElement",t.document.documentElement,{registerThruWinJSCustomEvents:!0}),_inputPaneListener:r.Windows.UI.ViewManagement.InputPane?new oe("InputPane",r.Windows.UI.ViewManagement.InputPane.getForCurrentView()):{addEventListener:function(){},removeEventListener:function(){}},_addInsertedNotifier:function(n){var r=t.document.createElement("div");return r.style[i._browserStyleEquivalents["animation-name"].scriptName]="WinJS-node-inserted",r.style[i._browserStyleEquivalents["animation-duration"].scriptName]="0.01s",r.style.position="absolute",n.appendChild(r),e._addEventListener(r,"animationStart",function(e){if("WinJS-node-inserted"===e.animationName){var e=t.document.createEvent("Event");e.initEvent("WinJSNodeInserted",!1,!0),n.dispatchEvent(e)}},!1),r},_inDom:function(n){return new o(function(i){if(t.document.body.contains(n))i();else{var r=function(){n.removeEventListener("WinJSNodeInserted",r,!1),i()};e._addInsertedNotifier(n),n.addEventListener("WinJSNodeInserted",r,!1)}})},_setFlexStyle:function(e,t){var n=e.style;"undefined"!=typeof t.grow&&(n.msFlexPositive=t.grow,n.webkitFlexGrow=t.grow,n.flexGrow=t.grow),"undefined"!=typeof t.shrink&&(n.msFlexNegative=t.shrink,n.webkitFlexShrink=t.shrink,n.flexShrink=t.shrink),"undefined"!=typeof t.basis&&(n.msFlexPreferredSize=t.basis,n.webkitFlexBasis=t.basis,n.flexBasis=t.basis)},Key:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,deleteKey:46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindows:91,rightWindows:92,menu:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NavigationView:136,NavigationMenu:137,NavigationUp:138,NavigationDown:139,NavigationLeft:140,NavigationRight:141,NavigationAccept:142,NavigationCancel:143,numLock:144,scrollLock:145,browserBack:166,browserForward:167,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,GamepadA:195,GamepadB:196,GamepadX:197,GamepadY:198,GamepadRightShoulder:199,GamepadLeftShoulder:200,GamepadLeftTrigger:201,GamepadRightTrigger:202,GamepadDPadUp:203,GamepadDPadDown:204,GamepadDPadLeft:205,GamepadDPadRight:206,GamepadMenu:207,GamepadView:208,GamepadLeftThumbstick:209,GamepadRightThumbstick:210,GamepadLeftThumbstickUp:211,GamepadLeftThumbstickDown:212,GamepadLeftThumbstickRight:213,GamepadLeftThumbstickLeft:214,GamepadRightThumbstickUp:215,GamepadRightThumbstickDown:216,GamepadRightThumbstickRight:217,GamepadRightThumbstickLeft:218,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222,IME:229},data:function(e){return e[pe]||(e[pe]={}),e[pe]},hasClass:function(e,t){if(e.classList)return e.classList.contains(t);for(var n=c(e),i=n.trim().split(" "),r=i.length,o=0;r>o;o++)if(i[o]===t)return!0;return!1},addClass:h,removeClass:p,toggleClass:m,_setAttribute:f,getRelativeLeft:function(e,t){if(!e)return 0;for(var n=e.offsetLeft,i=e.parentNode;i&&(n-=i.offsetLeft,i!==t);)i=i.parentNode;return n},getRelativeTop:function(e,t){if(!e)return 0;for(var n=e.offsetTop,i=e.parentNode;i&&(n-=i.offsetTop,i!==t);)i=i.parentNode;return n},getScrollPosition:R,setScrollPosition:N,empty:function(e){if(e.childNodes&&e.childNodes.length>0)for(var t=e.childNodes.length-1;t>=0;t--)e.removeChild(e.childNodes.item(t));return e},_isDOMElement:function(e){return e&&"object"==typeof e&&"string"==typeof e.tagName},getContentWidth:function(e){var t=v(e,"borderLeftWidth")+v(e,"borderRightWidth"),n=v(e,"paddingLeft")+v(e,"paddingRight");return e.offsetWidth-t-n},_getPreciseContentWidth:function(e){var t=b(e,"borderLeftWidth")+b(e,"borderRightWidth"),n=b(e,"paddingLeft")+b(e,"paddingRight");return e.offsetWidth-t-n},getTotalWidth:function(e){var t=v(e,"marginLeft")+v(e,"marginRight");return e.offsetWidth+t},_getPreciseTotalWidth:function(e){var t=b(e,"marginLeft")+b(e,"marginRight");return e.offsetWidth+t},getContentHeight:function(e){var t=v(e,"borderTopWidth")+v(e,"borderBottomWidth"),n=v(e,"paddingTop")+v(e,"paddingBottom");return e.offsetHeight-t-n},_getPreciseContentHeight:function(e){var t=b(e,"borderTopWidth")+b(e,"borderBottomWidth"),n=b(e,"paddingTop")+b(e,"paddingBottom");return e.offsetHeight-t-n},getTotalHeight:function(e){var t=v(e,"marginTop")+v(e,"marginBottom");return e.offsetHeight+t},_getPreciseTotalHeight:function(e){var t=b(e,"marginTop")+b(e,"marginBottom");return e.offsetHeight+t},getPosition:function(t){return e._getPositionRelativeTo(t,null)},getTabIndex:function(e){var t=/BUTTON|COMMAND|MENUITEM|OBJECT|SELECT|TEXTAREA/;if(e.disabled)return-1;var n=e.getAttribute("tabindex");if(null===n||void 0===n){var i=e.tagName;return t.test(i)||e.href&&("A"===i||"AREA"===i||"LINK"===i)||"INPUT"===i&&"hidden"!==e.type||"TH"===i&&e.sorted?0:-1}return parseInt(n,10)},convertToPixels:g,_convertToPrecisePixels:y,_getPreciseMargins:C,eventWithinElement:function(e,t){var n=t.relatedTarget;return n&&n!==e?e.contains(n):!1},_deprecated:function(e){t.console&&t.console.warn(e)},_syncRenderer:function(e,n){if(n=n||"div","function"==typeof e)return function(t,n){return n?(n.appendChild(e(t)),n):e(t)};var i;return"function"==typeof e.render?i=e:e.winControl&&"function"==typeof e.winControl.render&&(i=e.winControl),function(e,r){var o=r||t.document.createElement(n);if(i.render(e,o),r)return r;var s=o.firstElementChild;if(s&&o.dispose){var a=s.dispose;s.dispose=function(){s.dispose=a,o.appendChild(s),o.dispose()}}return s}},_getPositionRelativeTo:function(e,n){for(var i=e,r=e.offsetParent,o=e.offsetTop,s=e.offsetLeft;(e=e.parentNode)&&e!==n&&e!==t.document.body&&e!==t.document.documentElement;){o-=e.scrollTop;var a=l(e,null).direction;s-="rtl"!==a?e.scrollLeft:-L(e).scrollLeft,e===r&&(o+=e.offsetTop,s+=e.offsetLeft,r=e.offsetParent)}return{left:s,top:o,width:i.offsetWidth,height:i.offsetHeight}},_getHighAndLowTabIndices:function(e){for(var t=e.getElementsByTagName("*"),n=0,i=0,r=!1,o=0,s=t.length;s>o;o++){var a=t[o].getAttribute("tabIndex");if(null!==a&&void 0!==a){var l=parseInt(a,10);l>0&&(n>l||0===n)&&(n=l),r||(0===l?(r=!0,i=0):l>i&&(i=l))}}return{highest:i,lowest:n}},_getLowestTabIndexInList:function(e){for(var t,n=0,i=0;i<e.length;i++)t=parseInt(e[i].getAttribute("tabIndex"),10),t>0&&(n>t||!n)&&(n=t);return n},_getHighestTabIndexInList:function(e){for(var t,n=0,i=0;i<e.length;i++){if(t=parseInt(e[i].getAttribute("tabIndex"),10),0===t)return t;t>n&&(n=t)}return n},_hasCursorKeysBehaviors:function(e){return"SELECT"===e.tagName||"TEXTAREA"===e.tagName?!0:"INPUT"===e.tagName?""===e.type||"date"===e.type||"datetime"===e.type||"datetime-local"===e.type||"email"===e.type||"month"===e.type||"number"===e.type||"password"===e.type||"range"===e.type||"search"===e.type||"tel"===e.type||"text"===e.type||"time"===e.type||"url"===e.type||"week"===e.type:!1},_reparentChildren:function(e,t){for(var n=e.firstChild;n;){var i=n.nextSibling;t.appendChild(n),n=i}},_maintainFocus:function(n){var i=t.document.activeElement;n(),e._trySetActiveOnAnyElement(i)},_trySetActiveOnAnyElement:function(t,n){return e._tryFocusOnAnyElement(t,!0,n)},_tryFocusOnAnyElement:function(n,i,r){var o=t.document.activeElement;return n===o?!0:(i?e._setActive(n,r):n.focus(),o!==t.document.activeElement)},_trySetActive:function(e,t){return this._tryFocus(e,!0,t)},_tryFocus:function(n,i,r){var o=t.document.activeElement;if(n===o)return!0;var s=e.getTabIndex(n)>=0;return s?(i?e._setActive(n,r):n.focus(),o!==t.document.activeElement?!0:!1):!1},_setActiveFirstFocusableElement:function(e,t){return this._focusFirstFocusableElement(e,!0,t)},_focusFirstFocusableElement:function(e,t,n){for(var i,r=e.getElementsByTagName("*"),o=this._getLowestTabIndexInList(r),s=0;o;){for(i=0;i<r.length;i++)if(r[i].tabIndex===o){if(this._tryFocus(r[i],t,n))return!0}else o<r[i].tabIndex&&(r[i].tabIndex<s||0===s)&&(s=r[i].tabIndex);o=s,s=0}for(i=0;i<r.length;i++)if(this._tryFocus(r[i],t,n))return!0;return!1},_setActiveLastFocusableElement:function(e,t){return this._focusLastFocusableElement(e,!0,t)},_focusLastFocusableElement:function(e,t,n){var i,r=e.getElementsByTagName("*"),o=this._getHighestTabIndexInList(r),s=0;if(0===o){for(i=r.length-1;i>=0;i--)if(r[i].tabIndex===o){if(this._tryFocus(r[i],t,n))return!0}else s<r[i].tabIndex&&(s=r[i].tabIndex);o=s,s=0}for(;o;){for(i=r.length-1;i>=0;i--)if(r[i].tabIndex===o){if(this._tryFocus(r[i],t,n))return!0}else s<r[i].tabIndex&&r[i].tabIndex<o&&(s=r[i].tabIndex);o=s,s=0}for(i=r.length-2;i>0;i--)if(this._tryFocus(r[i],t,n))return!0;return!1}})}}),define("WinJS/Utilities/_Dispose",["exports","../Core/_Base","../Core/_WriteProfilerMark","./_ElementUtilities"],function(e,t,n,i){"use strict";function r(e,t){var n=!1;i.addClass(e,"win-disposable");var r=e.winControl||e;r.dispose=function(){n||(n=!0,o(e),t&&t())}}function o(e){if(e){n("WinJS.Utilities.disposeSubTree,StartTM");for(var t=e.querySelectorAll(".win-disposable"),i=0,r=t.length;r>i;){var o=t[i];o.winControl&&o.winControl.dispose&&o.winControl.dispose(),o.dispose&&o.dispose(),i+=o.querySelectorAll(".win-disposable").length+1}n("WinJS.Utilities.disposeSubTree,StopTM")}}function s(e){if(e){var t=!1;e.winControl&&e.winControl.dispose&&(e.winControl.dispose(),t=!0),e.dispose&&(e.dispose(),t=!0),t||o(e)}}t.Namespace._moduleDefine(e,"WinJS.Utilities",{markDisposable:r,disposeSubTree:o,_disposeElement:s})}),define("WinJS/ControlProcessor/_OptionsLexer",["exports","../Core/_Base"],function optionsLexerInit(exports,_Base){"use strict";_Base.Namespace._moduleDefine(exports,"WinJS.UI",{_optionsLexer:_Base.Namespace._lazy(function(){function reservedWord(e){return{type:tokenType.reservedWord,value:e,length:e.length,keyword:!0}}function reservedWordLookup(e){switch(e.charCodeAt(0)){case 98:switch(e){case"break":return reservedWord(e)}break;case 99:switch(e){case"case":case"catch":case"class":case"const":case"continue":return reservedWord(e)}break;case 100:switch(e){case"debugger":case"default":case"delete":case"do":return reservedWord(e)}break;case 101:switch(e){case"else":case"enum":case"export":case"extends":return reservedWord(e)}break;case 102:switch(e){case"false":return tokens.falseLiteral;case"finally":case"for":case"function":return reservedWord(e)}break;case 105:switch(e){case"if":case"import":case"in":case"instanceof":return reservedWord(e)}break;case 110:switch(e){case"null":return tokens.nullLiteral;case"new":return reservedWord(e)}break;case 114:switch(e){case"return":return reservedWord(e)}break;case 115:switch(e){case"super":case"switch":return reservedWord(e)}break;case 116:switch(e){case"true":return tokens.trueLiteral;case"this":return tokens.thisKeyword;case"throw":case"try":case"typeof":return reservedWord(e)}break;case 118:switch(e){case"var":case"void":return reservedWord(e)}break;case 119:switch(e){case"while":
case"with":return reservedWord(e)}}}var tokenType={leftBrace:1,rightBrace:2,leftBracket:3,rightBracket:4,separator:5,colon:6,semicolon:7,comma:8,dot:9,nullLiteral:10,trueLiteral:11,falseLiteral:12,numberLiteral:13,stringLiteral:14,identifier:15,reservedWord:16,thisKeyword:17,leftParentheses:18,rightParentheses:19,eof:20,error:21},tokens={leftBrace:{type:tokenType.leftBrace,length:1},rightBrace:{type:tokenType.rightBrace,length:1},leftBracket:{type:tokenType.leftBracket,length:1},rightBracket:{type:tokenType.rightBracket,length:1},colon:{type:tokenType.colon,length:1},semicolon:{type:tokenType.semicolon,length:1},comma:{type:tokenType.comma,length:1},dot:{type:tokenType.dot,length:1},nullLiteral:{type:tokenType.nullLiteral,length:4,value:null,keyword:!0},trueLiteral:{type:tokenType.trueLiteral,length:4,value:!0,keyword:!0},falseLiteral:{type:tokenType.falseLiteral,length:5,value:!1,keyword:!0},thisKeyword:{type:tokenType.thisKeyword,length:4,value:"this",keyword:!0},leftParentheses:{type:tokenType.leftParentheses,length:1},rightParentheses:{type:tokenType.rightParentheses,length:1},eof:{type:tokenType.eof,length:0}},lexer=function(){function isIdentifierStartCharacter(e,t,n,i){switch(e){case e>=97&&122>=e&&e:case e>=65&&90>=e&&e:case 36:case 95:return!0;case isWhitespace(e)&&e:case isLineTerminator(e)&&e:return!1;case e>127&&e:return!0;case 92:return i>n+4&&117===t.charCodeAt(n)&&isHexDigit(t.charCodeAt(n+1))&&isHexDigit(t.charCodeAt(n+2))&&isHexDigit(t.charCodeAt(n+3))&&isHexDigit(t.charCodeAt(n+4))?!0:!1;default:return!1}}function readIdentifierPart(e,t,n){for(var i=!1;n>t;){var r=e.charCodeAt(t);switch(r){case r>=97&&122>=r&&r:case r>=65&&90>=r&&r:case 36:case 95:break;case isWhitespace(r)&&r:case isLineTerminator(r)&&r:return i?-t:t;case r>127&&r:break;case r>=48&&57>=r&&r:break;case 92:if(n>t+5&&117===e.charCodeAt(t+1)&&isHexDigit(e.charCodeAt(t+2))&&isHexDigit(e.charCodeAt(t+3))&&isHexDigit(e.charCodeAt(t+4))&&isHexDigit(e.charCodeAt(t+5))){t+=5,i=!0;break}return i?-t:t;default:return i?-t:t}t++}return i?-t:t}function readIdentifierToken(e,t,n){var i=t;t=readIdentifierPart(e,t,n);var r=!1;0>t&&(t=-t,r=!0);var o=e.substr(i,t-i);r&&(o=""+JSON.parse('"'+o+'"'));var s=reservedWordLookup(o);return s?s:{type:tokenType.identifier,length:t-i,value:o}}function isHexDigit(e){switch(e){case e>=48&&57>=e&&e:case e>=97&&102>=e&&e:case e>=65&&70>=e&&e:return!0;default:return!1}}function readHexIntegerLiteral(e,t,n){for(;n>t&&isHexDigit(e.charCodeAt(t));)t++;return t}function isDecimalDigit(e){switch(e){case e>=48&&57>=e&&e:return!0;default:return!1}}function readDecimalDigits(e,t,n){for(;n>t&&isDecimalDigit(e.charCodeAt(t));)t++;return t}function readDecimalLiteral(e,t,n){if(t=readDecimalDigits(e,t,n),n>t&&46===e.charCodeAt(t)&&n>t+1&&isDecimalDigit(e.charCodeAt(t+1))&&(t=readDecimalDigits(e,t+2,n)),n>t){var i=e.charCodeAt(t);if(101===i||69===i){var r=t+1;n>r&&(i=e.charCodeAt(r),(43===i||45===i)&&r++,t=readDecimalDigits(e,r,n))}}return t}function readDecimalLiteralToken(e,t,n,i){var n=readDecimalLiteral(e,n,i),r=n-t;return{type:tokenType.numberLiteral,length:r,value:+e.substr(t,r)}}function isLineTerminator(e){switch(e){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function readStringLiteralToken(text,offset,limit){var startOffset=offset,quoteCharCode=text.charCodeAt(offset),hasEscape=!1;for(offset++;limit>offset&&!isLineTerminator(text.charCodeAt(offset));){if(limit>offset+1&&92===text.charCodeAt(offset))switch(hasEscape=!0,text.charCodeAt(offset+1)){case quoteCharCode:case 92:case 10:case 8232:case 8233:offset+=2;continue;case 13:offset+=limit>offset+2&&10===text.charCodeAt(offset+2)?3:2;continue}if(offset++,text.charCodeAt(offset-1)===quoteCharCode)break}var length=offset-startOffset;hasEscape=hasEscape||1===length||text.charCodeAt(offset-1)!==quoteCharCode;var stringValue;return stringValue=hasEscape?eval(text.substr(startOffset,length)):text.substr(startOffset+1,length-2),{type:tokenType.stringLiteral,length:length,value:stringValue}}function isWhitespace(e){switch(e){case 9:case 11:case 12:case 32:case 160:case 65279:return!0;case 5760>e&&e:return!1;case 5760:case 6158:case e>=8192&&8202>=e&&e:case 8239:case 8287:case 12288:return!0;default:return!1}}function readWhitespace(e,t,n){for(;n>t;){var i=e.charCodeAt(t);switch(i){case 9:case 11:case 12:case 32:case 160:case 65279:break;case 5760>i&&i:return t;case 5760:case 6158:case i>=8192&&8202>=i&&i:case 8239:case 8287:case 12288:break;default:return t}t++}return t}function lex(e,t,n,i){for(;i>n;){var r,o=n,s=t.charCodeAt(n++);switch(s){case isWhitespace(s)&&s:case isLineTerminator(s)&&s:n=readWhitespace(t,n,i),r={type:tokenType.separator,length:n-o};continue;case 34:case 39:r=readStringLiteralToken(t,n-1,i);break;case 40:r=tokens.leftParentheses;break;case 41:r=tokens.rightParentheses;break;case 43:case 45:if(i>n){var a=t.charCodeAt(n);if(46===a){var l=n+1;if(i>l&&isDecimalDigit(t.charCodeAt(l))){r=readDecimalLiteralToken(t,o,l,i);break}}else if(isDecimalDigit(a)){r=readDecimalLiteralToken(t,o,n,i);break}}r={type:tokenType.error,length:n-o,value:t.substring(o,n)};break;case 44:r=tokens.comma;break;case 46:r=tokens.dot,i>n&&isDecimalDigit(t.charCodeAt(n))&&(r=readDecimalLiteralToken(t,o,n,i));break;case 48:var u=i>n?t.charCodeAt(n):0;if(120===u||88===u){var c=readHexIntegerLiteral(t,n+1,i);r={type:tokenType.numberLiteral,length:c-o,value:+t.substr(o,c-o)}}else r=readDecimalLiteralToken(t,o,n,i);break;case s>=49&&57>=s&&s:r=readDecimalLiteralToken(t,o,n,i);break;case 58:r=tokens.colon;break;case 59:r=tokens.semicolon;break;case 91:r=tokens.leftBracket;break;case 93:r=tokens.rightBracket;break;case 123:r=tokens.leftBrace;break;case 125:r=tokens.rightBrace;break;default:if(isIdentifierStartCharacter(s,t,n,i)){r=readIdentifierToken(t,n-1,i);break}r={type:tokenType.error,length:n-o,value:t.substring(o,n)}}n+=r.length-1,e.push(r)}}return function(e){var t=[];return lex(t,e,0,e.length),t.push(tokens.eof),t}}();return lexer.tokenType=tokenType,lexer})})}),define("WinJS/ControlProcessor/_OptionsParser",["exports","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","./_OptionsLexer"],function(e,t,n,i,r,o){"use strict";function s(){throw"Illegal"}function a(e){for(var t=Object.keys(u.tokenType),n=0,i=t.length;i>n;n++)if(e===u.tokenType[t[n]])return t[n];return"<unknown>"}var l={get invalidOptionsRecord(){return"Invalid options record: '{0}', expected to be in the format of an object literal. {1}"},get unexpectedTokenExpectedToken(){return"Unexpected token: {0}, expected token: {1}, at offset {2}"},get unexpectedTokenExpectedTokens(){return"Unexpected token: {0}, expected one of: {1}, at offset {2}"},get unexpectedTokenGeneric(){return"Unexpected token: {0}, at offset {1}"}},u=t.Namespace.defineWithParent(null,null,{lexer:t.Namespace._lazy(function(){return o._optionsLexer}),tokenType:t.Namespace._lazy(function(){return o._optionsLexer.tokenType})}),c=n.requireSupportedForProcessing,d=t.Namespace.defineWithParent(null,null,{BaseInterpreter:t.Namespace._lazy(function(){return t.Class.define(null,{_error:function(e){throw new i("WinJS.UI.ParseError",e)},_currentOffset:function(){for(var e=this._pos,t=0,n=0;e>n;n++)t+=this._tokens[n].length;return t},_evaluateAccessExpression:function(e){switch(this._current.type){case u.tokenType.dot:switch(this._read(),this._current.type){case u.tokenType.identifier:case this._current.keyword&&this._current.type:var t=this._current.value;return this._read(),e[t];default:this._unexpectedToken(u.tokenType.identifier,u.tokenType.reservedWord)}return;case u.tokenType.leftBracket:this._read();var n=this._evaluateValue();return this._read(u.tokenType.rightBracket),e[n]}},_evaluateAccessExpressions:function(e){for(;;)switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:e=this._evaluateAccessExpression(e);break;default:return e}},_evaluateIdentifier:function(e,t){var n=this._readIdentifier();return t=e?t[n]:this._context[n]},_evaluateIdentifierExpression:function(){var e=this._evaluateIdentifier(!1);switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:return this._evaluateAccessExpressions(e);default:return e}},_initialize:function(e,t,n,i){this._originalSource=t,this._tokens=e,this._context=n,this._functionContext=i,this._pos=0,this._current=this._tokens[0]},_read:function(e){e&&this._current.type!==e&&this._unexpectedToken(e),this._current!==u.tokenType.eof&&(this._current=this._tokens[++this._pos])},_peek:function(e){return e&&this._current.type!==e?void 0:this._current!==u.tokenType.eof?this._tokens[this._pos+1]:void 0},_readAccessExpression:function(e){switch(this._current.type){case u.tokenType.dot:switch(this._read(),this._current.type){case u.tokenType.identifier:case this._current.keyword&&this._current.type:e.push(this._current.value),this._read();break;default:this._unexpectedToken(u.tokenType.identifier,u.tokenType.reservedWord)}return;case u.tokenType.leftBracket:return this._read(),e.push(this._evaluateValue()),void this._read(u.tokenType.rightBracket)}},_readAccessExpressions:function(e){for(;;)switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:this._readAccessExpression(e);break;default:return}},_readIdentifier:function(){var e=this._current.value;return this._read(u.tokenType.identifier),e},_readIdentifierExpression:function(){var e=[];switch(this._peek(u.tokenType.thisKeyword)&&0===e.length?this._read():e.push(this._readIdentifier()),this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:this._readAccessExpressions(e)}return e},_unexpectedToken:function(e){var t=this._current.type===u.tokenType.error?"'"+this._current.value+"'":a(this._current.type);if(e)if(1===arguments.length)e=a(e),this._error(r._formatString(l.unexpectedTokenExpectedToken,t,e,this._currentOffset()));else{for(var n=[],i=0,o=arguments.length;o>i;i++)n.push(a(arguments[i]));e=n.join(", "),this._error(r._formatString(l.unexpectedTokenExpectedTokens,t,e,this._currentOffset()))}else this._error(r._formatString(l.unexpectedTokenGeneric,t,this._currentOffset()))}},{supportedForProcessing:!1})}),OptionsInterpreter:t.Namespace._lazy(function(){return t.Class.derive(d.BaseInterpreter,function(e,t,n,i){this._initialize(e,t,n,i)},{_error:function(e){throw new i("WinJS.UI.ParseError",r._formatString(l.invalidOptionsRecord,this._originalSource,e))},_evaluateArrayLiteral:function(){var e=[];return this._read(u.tokenType.leftBracket),this._readArrayElements(e),this._read(u.tokenType.rightBracket),e},_evaluateObjectLiteral:function(){var e={};return this._read(u.tokenType.leftBrace),this._readObjectProperties(e),this._tryReadComma(),this._read(u.tokenType.rightBrace),e},_evaluateOptionsLiteral:function(){var e=this._evaluateValue();return this._current.type!==u.tokenType.eof&&this._unexpectedToken(u.tokenType.eof),e},_peekValue:function(){switch(this._current.type){case u.tokenType.falseLiteral:case u.tokenType.nullLiteral:case u.tokenType.stringLiteral:case u.tokenType.trueLiteral:case u.tokenType.numberLiteral:case u.tokenType.leftBrace:case u.tokenType.leftBracket:case u.tokenType.identifier:return!0;default:return!1}},_evaluateValue:function(){switch(this._current.type){case u.tokenType.falseLiteral:case u.tokenType.nullLiteral:case u.tokenType.stringLiteral:case u.tokenType.trueLiteral:case u.tokenType.numberLiteral:var e=this._current.value;return this._read(),e;case u.tokenType.leftBrace:return this._evaluateObjectLiteral();case u.tokenType.leftBracket:return this._evaluateArrayLiteral();case u.tokenType.identifier:return c(this._peek(u.tokenType.identifier).type===u.tokenType.leftParentheses?this._evaluateObjectQueryExpression():this._evaluateIdentifierExpression());default:this._unexpectedToken(u.tokenType.falseLiteral,u.tokenType.nullLiteral,u.tokenType.stringLiteral,u.tokenType.trueLiteral,u.tokenType.numberLiteral,u.tokenType.leftBrace,u.tokenType.leftBracket,u.tokenType.identifier)}},_tryReadElement:function(e){return this._peekValue()?(e.push(this._evaluateValue()),!0):!1},_tryReadComma:function(){return this._peek(u.tokenType.comma)?(this._read(),!0):!1},_tryReadElision:function(e){for(var t=!1;this._tryReadComma();)e.push(void 0),t=!0;return t},_readArrayElements:function(e){for(;!this._peek(u.tokenType.rightBracket);){var t=this._tryReadElision(e),n=this._tryReadElement(e),i=this._peek(u.tokenType.comma);if(!n||!i){if(n||t)break;this._unexpectedToken(u.tokenType.falseLiteral,u.tokenType.nullLiteral,u.tokenType.stringLiteral,u.tokenType.trueLiteral,u.tokenType.numberLiteral,u.tokenType.leftBrace,u.tokenType.leftBracket,u.tokenType.identifier);break}this._read()}},_readObjectProperties:function(e){for(;!this._peek(u.tokenType.rightBrace);){var t=this._tryReadObjectProperty(e),n=this._peek(u.tokenType.comma);if(!t||!n){if(t)break;this._unexpectedToken(u.tokenType.numberLiteral,u.tokenType.stringLiteral,u.tokenType.identifier);break}this._read()}},_tryReadObjectProperty:function(e){switch(this._current.type){case u.tokenType.numberLiteral:case u.tokenType.stringLiteral:case u.tokenType.identifier:case this._current.keyword&&this._current.type:var t=this._current.value;return this._read(),this._read(u.tokenType.colon),e[t]=this._evaluateValue(),!0;default:return!1}},_failReadObjectProperty:function(){this._unexpectedToken(u.tokenType.numberLiteral,u.tokenType.stringLiteral,u.tokenType.identifier,u.tokenType.reservedWord)},_evaluateObjectQueryExpression:function(){var e=this._current.value;this._read(u.tokenType.identifier),this._read(u.tokenType.leftParentheses);var t=this._current.value;this._read(u.tokenType.stringLiteral),this._read(u.tokenType.rightParentheses);var n=c(this._functionContext[e])(t);switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:return this._evaluateAccessExpressions(n);default:return n}},run:function(){return this._evaluateOptionsLiteral()}},{supportedForProcessing:!1})}),OptionsParser:t.Namespace._lazy(function(){return t.Class.derive(d.OptionsInterpreter,function(e,t){this._initialize(e,t)},{_evaluateAccessExpression:s,_evaluateAccessExpressions:s,_evaluateIdentifier:s,_evaluateIdentifierExpression:s,_evaluateObjectQueryExpression:s,_evaluateValue:function(){switch(this._current.type){case u.tokenType.falseLiteral:case u.tokenType.nullLiteral:case u.tokenType.stringLiteral:case u.tokenType.trueLiteral:case u.tokenType.numberLiteral:var e=this._current.value;return this._read(),e;case u.tokenType.leftBrace:return this._evaluateObjectLiteral();case u.tokenType.leftBracket:return this._evaluateArrayLiteral();case u.tokenType.identifier:return this._peek(u.tokenType.identifier).type===u.tokenType.leftParentheses?this._readObjectQueryExpression():this._readIdentifierExpression();default:this._unexpectedToken(u.tokenType.falseLiteral,u.tokenType.nullLiteral,u.tokenType.stringLiteral,u.tokenType.trueLiteral,u.tokenType.numberLiteral,u.tokenType.leftBrace,u.tokenType.leftBracket,u.tokenType.identifier)}},_readIdentifierExpression:function(){var e=d.BaseInterpreter.prototype._readIdentifierExpression.call(this);return new f(e)},_readObjectQueryExpression:function(){var e=this._current.value;this._read(u.tokenType.identifier),this._read(u.tokenType.leftParentheses);var t=this._current.value;this._read(u.tokenType.stringLiteral),this._read(u.tokenType.rightParentheses);var n=new m(e,t);switch(this._current.type){case u.tokenType.dot:case u.tokenType.leftBracket:var i=[n];return this._readAccessExpressions(i),new f(i);default:return n}}},{supportedForProcessing:!1})})}),h=function(e,t,n){var i=u.lexer(e),r=new d.OptionsInterpreter(i,e,t||{},n||{});return r.run()};Object.defineProperty(h,"_BaseInterpreter",{get:function(){return d.BaseInterpreter}});var p=function(e){var t=u.lexer(e),n=new d.OptionsParser(t,e);return n.run()},m=t.Class.define(function(e,t){this.target=e,this.arg0Value=t});m.supportedForProcessing=!1;var f=t.Class.define(function(e){this.parts=e});f.supportedForProcessing=!1,t.Namespace._moduleDefine(e,"WinJS.UI",{optionsParser:h,_optionsParser:p,_CallExpression:m,_IdentifierExpression:f})}),define("WinJS/ControlProcessor",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_Log","./Core/_Resources","./Core/_WriteProfilerMark","./ControlProcessor/_OptionsParser","./Promise","./Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a,l,u){"use strict";function c(e){var n=function(n){for(var i,r=e;r;){if(r.msParentSelectorScope){var o=r.parentNode;if(o&&(i=u._matchesSelector(o,n)?o:o.querySelector(n)))break}r=r.parentNode}return i||t.document.querySelector(n)};return v(n)}function d(e,n){return new l(function(i,s){try{var l,u=e.getAttribute("data-win-options");u&&(l=a.optionsParser(u,t,{select:c(e)}));var d,h=1;n.length>2&&h++;var p=function(){h--,0===h&&(e.winControl=e.winControl||d,i(d))};d=new n(e,l,p),p()}catch(m){r.log&&r.log(o._formatString(g.errorActivatingControl,m&&m.message),"winjs controls","error"),s(m)}})}function h(e,n){return new l(function(i,r){s("WinJS.UI:processAll,StartTM"),e=e||t.document.body;var o=0,a="[data-win-control]",l=e.querySelectorAll(a),u=[];!n&&p(e)&&u.push(e);for(var c=0,h=l.length;h>c;c++)u.push(l[c]);if(0===u.length)return s("WinJS.UI:processAll,StopTM"),void i(e);for(var m=function(){o-=1,0>o&&(s("WinJS.UI:processAll,StopTM"),i(e))},_=new Array(u.length),c=0,h=u.length;h>c;c++){var g,v=u[c],b=v.winControl;b?g=b.constructor:_[c]=g=p(v),g&&g.isDeclarativeControlContainer&&(c+=v.querySelectorAll(a).length)}s("WinJS.UI:processAllActivateControls,StartTM");for(var c=0,h=u.length;h>c;c++){var C=_[c],v=u[c];if(C&&!v.winControl&&(o++,d(v,C).then(m,function(e){s("WinJS.UI:processAll,StopTM"),r(e)}),C.isDeclarativeControlContainer&&"function"==typeof C.isDeclarativeControlContainer)){var w=y(C.isDeclarativeControlContainer);w(v.winControl,f)}}s("WinJS.UI:processAllActivateControls,StopTM"),m()})}function p(e){if(e.getAttribute){var n=e.getAttribute("data-win-control");if(n)return i._getMemberFiltered(n.trim(),t,y)}}function m(e,t){return c(t)(e)}function f(e,t){return b?h(e,t):i.ready().then(function(){return b=!0,h(e,t)})}function _(e){if(e&&e.winControl)return l.as(e.winControl);var t=p(e);return t?d(e,t):l.as()}if(t.document){var g={get errorActivatingControl(){return"Error activating control: {0}"}},v=i.markSupportedForProcessing,y=i.requireSupportedForProcessing,b=!1;n.Namespace._moduleDefine(e,"WinJS.UI",{scopedSelect:m,processAll:f,process:_})}}),define("WinJS/Utilities/_ElementListUtilities",["exports","../Core/_Global","../Core/_Base","../ControlProcessor","../Promise","../Utilities/_Control","../Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s){"use strict";t.document&&n.Namespace._moduleDefine(e,"WinJS.Utilities",{QueryCollection:n.Class.derive(Array,function(e){e&&this.include(e)},{forEach:function(e,t){return Array.prototype.forEach.apply(this,[e,t]),this},get:function(e){return this[e]},setAttribute:function(e,t){return this.forEach(function(n){n.setAttribute(e,t)}),this},getAttribute:function(e){return this.length>0?this[0].getAttribute(e):void 0},addClass:function(e){return this.forEach(function(t){s.addClass(t,e)}),this},hasClass:function(e){return this.length>0?s.hasClass(this[0],e):!1},removeClass:function(e){return this.forEach(function(t){s.removeClass(t,e)}),this},toggleClass:function(e){return this.forEach(function(t){s.toggleClass(t,e)}),this},listen:function(e,t,n){return this.forEach(function(i){i.addEventListener(e,t,n)}),this},removeEventListener:function(e,t,n){return this.forEach(function(i){i.removeEventListener(e,t,n)}),this},setStyle:function(e,t){return this.forEach(function(n){n.style[e]=t}),this},clearStyle:function(e){return this.forEach(function(t){t.style[e]=""}),this},query:function(t){var n=new e.QueryCollection;return this.forEach(function(e){n.include(e.querySelectorAll(t))}),n},include:function(e){if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.push(e[t]);else e.DOCUMENT_FRAGMENT_NODE&&e.nodeType===e.DOCUMENT_FRAGMENT_NODE?this.include(e.childNodes):this.push(e)},control:function(e,t){return e&&"function"==typeof e?this.forEach(function(n){n.winControl=new e(n,t)}):(t=e,this.forEach(function(e){i.process(e).done(function(e){e&&o.setOptions(e,t)})})),this},template:function(t,n,i){t instanceof e.QueryCollection&&(t=t[0]);var o=t.winControl;null!==n&&void 0!==n&&n.forEach||(n=[n]),i=i||function(){};var s=this,a=[];return n.forEach(function(e){s.forEach(function(t){a.push(o.render(e,t))})}),i(r.join(a)),this}},{supportedForProcessing:!1}),query:function(n,i){return new e.QueryCollection((i||t.document).querySelectorAll(n))},id:function(n){var i=t.document.getElementById(n);return new e.QueryCollection(i?[i]:[])},children:function(t){return new e.QueryCollection(t.children)}})}),define("WinJS/Utilities/_Hoverable",["exports","../Core/_Global"],function(e,t){"use strict";if(t.document&&(t.document.documentElement.classList.add("win-hoverable"),e.isHoverable=!0,!t.MSPointerEvent)){var n=function(){t.document.removeEventListener("touchstart",n),t.document.documentElement.classList.remove("win-hoverable"),e.isHoverable=!1};t.document.addEventListener("touchstart",n)}}),define("WinJS/Utilities/_ParallelWorkQueue",["exports","../Core/_Base","../Promise","../Scheduler"],function(e,t,n,i){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_ParallelWorkQueue:t.Namespace._lazy(function(){return t.Class.define(function(e){function t(){u--,c||i.schedule(r,i.Priority.normal,null,"WinJS._ParallelWorkQueue.runNext")}function r(){for(c++;e>u;u++){var n,i;do n=l.shift(),i=n&&a[n];while(n&&!i);if(!i)break;delete a[n];try{i().then(t,t)}catch(r){t()}}c--}function o(e,t,i){var o,u="w"+s++;return new n(function(n,s,c){var d=function(){return o=e().then(n,s,c)};d.data=t,a[u]=d,i?l.unshift(u):l.push(u),r()},function(){delete a[u],o&&o.cancel()})}var s=0,a={},l=[];e=e||3;var u=0,c=0;this.sort=function(e){l.sort(function(t,n){return t=a[t],n=a[n],void 0===t&&void 0===n?0:void 0===t?1:void 0===n?-1:e(t.data,n.data)})},this.queue=o},{},{supportedForProcessing:!1})})})}),define("WinJS/Utilities/_VersionManager",["exports","../Core/_Base","../_Signal"],function(e,t,n){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_VersionManager:t.Namespace._lazy(function(){return t.Class.define(function(){this._unlocked=new n,this._unlocked.complete()},{_cancelCount:0,_notificationCount:0,_updateCount:0,_version:0,locked:{get:function(){return 0!==this._notificationCount||0!==this._updateCount}},noOutstandingNotifications:{get:function(){return 0===this._notificationCount}},version:{get:function(){return this._version}},unlocked:{get:function(){return this._unlocked.promise}},_dispose:function(){this._unlocked&&(this._unlocked.cancel(),this._unlocked=null)},beginUpdating:function(){this._checkLocked(),this._updateCount++},endUpdating:function(){this._updateCount--,this._checkUnlocked()},beginNotifications:function(){this._checkLocked(),this._notificationCount++},endNotifications:function(){this._notificationCount--,this._checkUnlocked()},_checkLocked:function(){this.locked||(this._dispose(),this._unlocked=new n)},_checkUnlocked:function(){this.locked||this._unlocked.complete()},receivedNotification:function(){if(this._version++,this._cancel){var e=this._cancel;this._cancel=null,e.forEach(function(e){e&&e.cancel()})}},cancelOnNotification:function(e){return this._cancel||(this._cancel=[],this._cancelCount=0),this._cancel[this._cancelCount++]=e,this._cancelCount-1},clearCancelOnNotification:function(e){this._cancel&&delete this._cancel[e]}},{supportedForProcessing:!1})})})}),define("WinJS/Utilities/_ItemsManager",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../_Signal","../Scheduler","../Utilities/_ElementUtilities","./_ParallelWorkQueue","./_VersionManager"],function(e,t,n,i,r,o,s,a,l,u,c,d,h){"use strict";function p(e){return y(function(t,n){return t.then(function(t){return t?e(t,n):null})})}function m(e,t){var n=!1,i=!1;return e.isOnScreen().then(function(e){n=e}),t.isOnScreen().then(function(e){i=e}),(n?0:1)-(i?0:1)}function f(e){if(!/^blob:/i.test(e)&&(P[e]=!0,k.push(e),k.length>M)){var t=k;P={},k=[];for(var n=0,i=t.length-1;i>=0&&T>n;i--){var r=t[i];P[r]||(P[r]=!0,n++)}}}function _(e,n,i){var r=x++;return w=w||new d._ParallelWorkQueue(6),w.queue(function(){return new a(function(i,o){u.schedule(function(r){n||(n=t.document.createElement("img"));var s=P[e];s?(f(e),n.src=e,i(n)):r.setPromise(new a(function(r){var s=t.document.createElement("img"),a=function(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1),n.src=e;var t=new Date;t-S>E&&(S=t,w.sort(m))},l=function(){r(c)},u=function(){r(d)},c=function(){f(e),a(),i(n)},d=function(){a(),o(n)};s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),s.src=e}))},u.Priority.normal,null,"WinJS.UI._ImageLoader._image"+r)})},i)}function g(e){return P[e]}function v(){return t.document.createElement("div")}var y=i.markSupportedForProcessing,b=c._uniqueID,C=p(function(e){if(c._isDOMElement(e.data))return e.data;var n=e.data;void 0===n?n="undefined":null===n?n="null":"object"==typeof n&&(n=JSON.stringify(n));var i=t.document.createElement("span");return i.textContent=n.toString(),i});n.Namespace._moduleDefine(e,"WinJS.UI",{_normalizeRendererReturn:function(e){if(e){if("object"==typeof e&&e.element){var t=a.as(e.element);return t.then(function(t){return{element:t,renderComplete:a.as(e.renderComplete)}})}var t=a.as(e);return t.then(function(e){return{element:e,renderComplete:a.as()}})}return{element:null,renderComplete:a.as()}},simpleItemRenderer:p,_trivialHtmlRenderer:C});var w,I={get listDataSourceIsInvalid(){return"Invalid argument: dataSource must be an object."},get itemRendererIsInvalid(){return"Invalid argument: itemRenderer must be a function."},get itemIsInvalid(){return"Invalid argument: item must be a DOM element that was returned by the Items Manager, and has not been replaced or released."}},S=new Date,E=64,x=0,P={},k=[],T=250,M=1e3;n.Namespace._moduleDefine(e,"WinJS.UI",{_seenUrl:f,_getSeenUrls:function(){return P},_getSeenUrlsMRU:function(){return k},_seenUrlsMaxSize:T,_seenUrlsMRUMaxSize:M}),n.Namespace._moduleDefine(e,"WinJS.UI",{_createItemsManager:n.Namespace._lazy(function(){var t=n.Class.define(function(e){this._itemsManager=e},{beginNotifications:function(){this._itemsManager._versionManager.beginNotifications(),this._itemsManager._beginNotifications()},inserted:function(e,t,n){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._inserted(e,t,n)},changed:function(e,t){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._changed(e,t)},moved:function(e,t,n){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._moved(e,t,n)},removed:function(e,t){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._removed(e,t)},countChanged:function(e,t){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._countChanged(e,t)},indexChanged:function(e,t,n){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._indexChanged(e,t,n)},affectedRange:function(e){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._affectedRange(e)},endNotifications:function(){this._itemsManager._versionManager.endNotifications(),this._itemsManager._endNotifications()},reload:function(){this._itemsManager._versionManager.receivedNotification(),this._itemsManager._reload()}},{supportedForProcessing:!1}),i=n.Class.define(function(e,n,i,o){if(!e)throw new r("WinJS.UI.ItemsManager.ListDataSourceIsInvalid",I.listDataSourceIsInvalid);if(!n)throw new r("WinJS.UI.ItemsManager.ItemRendererIsInvalid",I.itemRendererIsInvalid);this.$pipeline_callbacksMap={},this._listDataSource=e,this.dataSource=this._listDataSource,this._elementNotificationHandler=i,this._listBinding=this._listDataSource.createListBinding(new t(this)),o&&(o.ownerElement&&(this._ownerElement=o.ownerElement),this._profilerId=o.profilerId,this._versionManager=o.versionManager||new h._VersionManager),this._indexInView=o&&o.indexInView,this._itemRenderer=n,this._viewCallsReady=o&&o.viewCallsReady,this._elementMap={},this._handleMap={},this._jobOwner=u.createOwnerToken(),this._notificationsSent=!1,this._listBinding.last&&(this.lastItem=function(){return this._elementForItem(this._listBinding.last())})},{_itemFromItemPromise:function(e){return this._waitForElement(this._elementForItem(e))},_itemFromItemPromiseThrottled:function(e){return this._waitForElement(this._elementForItem(e,!0))},_itemAtIndex:function(e){var t=this._itemPromiseAtIndex(e);this._itemFromItemPromise(t).then(null,function(e){return t.cancel(),a.wrapError(e)})},_itemPromiseAtIndex:function(e){return this._listBinding.fromIndex(e)},_waitForElement:function(e){var t=this;return new a(function(n){if(e)if(t.isPlaceholder(e)){var i=b(e),r=t.$pipeline_callbacksMap[i];r?r.push(n):t.$pipeline_callbacksMap[i]=[n]}else n(e);else n(e)})},_updateElement:function(e,t){var n=b(t),i=this.$pipeline_callbacksMap[n];i&&(delete this.$pipeline_callbacksMap[n],i.forEach(function(t){t(e)}))},_firstItem:function(){return this._waitForElement(this._elementForItem(this._listBinding.first()))},_lastItem:function(){return this._waitForElement(this._elementForItem(this._listBinding.last()))},_previousItem:function(e){return this._listBinding.jumpToItem(this._itemFromElement(e)),this._waitForElement(this._elementForItem(this._listBinding.previous()))},_nextItem:function(e){return this._listBinding.jumpToItem(this._itemFromElement(e)),this._waitForElement(this._elementForItem(this._listBinding.next()))},_itemFromPromise:function(e){return this._waitForElement(this._elementForItem(e))},isPlaceholder:function(e){return!!this._recordFromElement(e).elementIsPlaceholder},itemObject:function(e){return this._itemFromElement(e)},release:function(){this._listBinding.release(),this._elementNotificationHandler=null,this._listBinding=null,this._jobOwner.cancelAll(),this._released=!0},releaseItemPromise:function(e){var t=e.handle,n=this._handleMap[t];n?this._releaseRecord(n):e.cancel()},releaseItem:function(e){var t=this._elementMap[b(e)];this._releaseRecord(t)},_releaseRecord:function(e){e&&(e.renderPromise&&e.renderPromise.cancel(),e.itemPromise&&e.itemPromise.cancel(),e.imagePromises&&e.imagePromises.forEach(function(e){e.cancel()}),e.itemReadyPromise&&e.itemReadyPromise.cancel(),e.renderComplete&&e.renderComplete.cancel(),this._removeEntryFromElementMap(e.element),this._removeEntryFromHandleMap(e.itemPromise.handle,e),e.item&&this._listBinding.releaseItem(e.item))},refresh:function(){return this._listDataSource.invalidateAll()},_handlerToNotifyCaresAboutItemAvailable:function(){return!(!this._elementNotificationHandler||!this._elementNotificationHandler.itemAvailable)},_handlerToNotify:function(){return this._notificationsSent||(this._notificationsSent=!0,this._elementNotificationHandler&&this._elementNotificationHandler.beginNotifications&&this._elementNotificationHandler.beginNotifications()),this._elementNotificationHandler},_defineIndexProperty:function(e,t,n){n.indexObserved=!1,Object.defineProperty(e,"index",{get:function(){return n.indexObserved=!0,t.index}})},_renderPlaceholder:function(e){var t={},n=v(t);return e.elementIsPlaceholder=!0,n},_renderItem:function(t,n,i){function r(){t.then(function(e){o._writeProfilerMark(h+",StartTM"),c.complete(e),o._writeProfilerMark(h+",StopTM")})}var o=this,s=o._indexInView||function(){return!0},c=new l,d=new l,h="_renderItem("+n.item.index+"):itemPromise",p=!0,m=!1;t.then(function(e){m=!0,p&&c.complete(e)}),p=!1;var f=c.promise.then(function(e){if(e){var t=Object.create(e);return o._defineIndexProperty(t,e,n),t.ready=d.promise,t.isOnScreen=function(){return a.wrap(s(e.index))},t.loadImage=function(e,i){var r=_(e,i,t);return n.imagePromises?n.imagePromises.push(r):n.imagePromises=[r],
r},t.isImageCached=g,t}return a.cancel});m||(i?(n.stage0=t,n.startStage1=function(){n.startStage1=null,r()}):r()),f.handle=t.handle,n.itemPromise=f,n.itemReadyPromise=d.promise,n.readyComplete=!1;var v="_renderItem("+n.item.index+(m?"):syncItemPromise":"):placeholder"),y="_renderItem("+n.item.index+"):itemReady";this._writeProfilerMark(v+",StartTM");var b=a.as(o._itemRenderer(f,n.element)).then(e._normalizeRendererReturn).then(function(e){return o._released?a.cancel:(f.then(function(e){if(n.pendingReady=function(){n.pendingReady&&(n.pendingReady=null,n.readyComplete=!0,o._writeProfilerMark(y+",StartTM"),d.complete(e),o._writeProfilerMark(y+",StopTM"))},!o._viewCallsReady){var t=u.schedule(n.pendingReady,u.Priority.normal,n,"WinJS.UI._ItemsManager._pendingReady");t.owner=o._jobOwner}}),e)});return this._writeProfilerMark(v+",StopTM"),b},_replaceElement:function(e,t){this._removeEntryFromElementMap(e.element),e.element=t,this._addEntryToElementMap(t,e)},_changeElement:function(e,t,n){e.renderPromise=null;var i=e.element,r=e.item;e.newItem&&(e.item=e.newItem,e.newItem=null),this._replaceElement(e,t),e.item&&e.elementIsPlaceholder&&!n?(e.elementDelayed=null,e.elementIsPlaceholder=!1,this._updateElement(e.element,i),this._handlerToNotifyCaresAboutItemAvailable()&&this._handlerToNotify().itemAvailable(e.element,i)):this._handlerToNotify().changed(t,i,r)},_elementForItem:function(e,t){var n,i=e.handle,r=this._recordFromHandle(i,!0);if(!i)return null;if(r)n=r.element;else{r={item:e,itemPromise:e},this._addEntryToHandleMap(i,r);var o=this,s=!1,a=!1,l=o._renderItem(e,r,t).then(function(t){var i=t.element;r.renderComplete=t.renderComplete,e.then(function(e){r.item=e,e||(s=!0,n=null)}),a=!0,r.renderPromise=null,i&&(n?o._presentElements(r,i):n=i)});s||(a||(r.renderPromise=l),n||(n=this._renderPlaceholder(r)),r.element=n,this._addEntryToElementMap(n,r),e.retain())}return n},_addEntryToElementMap:function(e,t){this._elementMap[b(e)]=t},_removeEntryFromElementMap:function(e){delete this._elementMap[b(e)]},_recordFromElement:function(e){var t=this._elementMap[b(e)];if(!t)throw this._writeProfilerMark("_recordFromElement:ItemIsInvalidError,info"),new r("WinJS.UI.ItemsManager.ItemIsInvalid",I.itemIsInvalid);return t},_addEntryToHandleMap:function(e,t){this._handleMap[e]=t},_removeEntryFromHandleMap:function(e){delete this._handleMap[e]},_handleInHandleMap:function(e){return!!this._handleMap[e]},_recordFromHandle:function(e,t){var n=this._handleMap[e];if(!n&&!t)throw new r("WinJS.UI.ItemsManager.ItemIsInvalid",I.itemIsInvalid);return n},_foreachRecord:function(e){var t=this._handleMap;for(var n in t){var i=t[n];e(i)}},_itemFromElement:function(e){return this._recordFromElement(e).item},_elementFromHandle:function(e){if(e){var t=this._recordFromHandle(e,!0);if(t&&t.element)return t.element}return null},_inserted:function(e,t,n){this._handlerToNotify().inserted(e,t,n)},_changed:function(e,t){if(this._handleInHandleMap(t.handle)){var n=this._recordFromHandle(t.handle);n.renderPromise&&n.renderPromise.cancel(),n.itemPromise&&n.itemPromise.cancel(),n.imagePromises&&n.imagePromises.forEach(function(e){e.cancel()}),n.itemReadyPromise&&n.itemReadyPromise.cancel(),n.renderComplete&&n.renderComplete.cancel(),n.newItem=e;var i=this,r=a.as(e);r.handle=n.itemPromise.handle,n.renderPromise=this._renderItem(r,n).then(function(e){n.renderComplete=e.renderComplete,i._changeElement(n,e.element,!1),i._presentElements(n)})}},_moved:function(e,t,n){var i=this._elementFromHandle(e.handle),r=this._elementFromHandle(t),o=this._elementFromHandle(n);this._handlerToNotify().moved(i,r,o,e),this._presentAllElements()},_removed:function(e,t){if(this._handleInHandleMap(e)){var n=this._elementFromHandle(e);this._handlerToNotify().removed(n,t,e),this.releaseItem(n),this._presentAllElements()}else this._handlerToNotify().removed(null,t,e)},_countChanged:function(e,t){this._elementNotificationHandler&&this._elementNotificationHandler.countChanged&&this._handlerToNotify().countChanged(e,t)},_indexChanged:function(e,t,n){var i;if(this._handleInHandleMap(e)){var r=this._recordFromHandle(e);if(r.indexObserved)if(r.elementIsPlaceholder)this._changeElement(r,this._renderPlaceholder(r),!0);else if(r.item.index!==t){r.renderPromise&&r.renderPromise.cancel(),r.renderComplete&&r.renderComplete.cancel();var o=r.newItem||r.item;o.index=t;var s=a.as(o);s.handle=r.itemPromise.handle;var l=this;r.renderPromise=this._renderItem(s,r).then(function(e){r.renderComplete=e.renderComplete,l._changeElement(r,e.element,!1),l._presentElements(r)})}i=r.element}this._elementNotificationHandler&&this._elementNotificationHandler.indexChanged&&this._handlerToNotify().indexChanged(i,t,n)},_affectedRange:function(e){this._elementNotificationHandler&&this._elementNotificationHandler.updateAffectedRange&&this._handlerToNotify().updateAffectedRange(e)},_beginNotifications:function(){this._externalBegin=!0,this._handlerToNotify()},_endNotifications:function(){this._notificationsSent&&(this._notificationsSent=!1,this._externalBegin=!1,this._elementNotificationHandler&&this._elementNotificationHandler.endNotifications&&this._elementNotificationHandler.endNotifications())},_reload:function(){this._elementNotificationHandler&&this._elementNotificationHandler.reload&&this._elementNotificationHandler.reload()},_postEndNotifications:function(){if(this._notificationsSent&&!this._externalBegin&&!this._endNotificationsPosted){this._endNotificationsPosted=!0;var e=this;u.schedule(function(){e._endNotificationsPosted=!1,e._endNotifications()},u.Priority.high,null,"WinJS.UI._ItemsManager._postEndNotifications")}},_presentElement:function(e){var t=e.element;this._replaceElement(e,e.elementDelayed),e.elementDelayed=null,e.elementIsPlaceholder=!1,this._updateElement(e.element,t),this._handlerToNotifyCaresAboutItemAvailable()&&this._handlerToNotify().itemAvailable(e.element,t)},_presentElements:function(e,t){t&&(e.elementDelayed=t),this._listBinding.jumpToItem(e.item),e.elementDelayed&&this._presentElement(e),this._postEndNotifications()},_presentAllElements:function(){var e=this;this._foreachRecord(function(t){t.elementDelayed&&e._presentElement(t)})},_writeProfilerMark:function(e){var t="WinJS.UI._ItemsManager:"+(this._profilerId?this._profilerId+":":":")+e;s(t)}},{supportedForProcessing:!1});return function(e,t,n,r){return new i(e,t,n,r)}})})}),define("WinJS/Utilities/_TabContainer",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","./_ElementUtilities"],function(e,t,n,i,r){"use strict";function o(e,n,i,r){var o=t.document.createEvent("UIEvent");return o.initUIEvent(n,!1,!!r,t,i?1:0),!e.dispatchEvent(o)}function s(e){var n=r._getComputedStyle(e);if("none"===n.display||"hidden"===n.visibility)return t.NodeFilter.FILTER_REJECT;if(e._tabContainer)return t.NodeFilter.FILTER_ACCEPT;if(e.parentNode&&e.parentNode._tabContainer){var i=e.parentNode._tabContainer.childFocus;return i&&e.contains(i)?u(e)>=0?t.NodeFilter.FILTER_ACCEPT:t.NodeFilter.FILTER_SKIP:t.NodeFilter.FILTER_REJECT}var o=u(e);return o>=0?t.NodeFilter.FILTER_ACCEPT:t.NodeFilter.FILTER_SKIP}function a(e){function t(){if(e.currentNode._tabContainer)r=r.concat(a(e));else if(u(e.currentNode)>=0&&r.push(e.currentNode),e.firstChild()){do t();while(e.nextSibling());e.parentNode()}}var n=e.currentNode,i=n._tabContainer.childFocus,r=[];return i?(e.currentNode=i,t(),e.currentNode=n,r):[]}function l(e,n){function i(){var e=t.document.createElement("DIV");return e.tabIndex=n?n:0,e.setAttribute("aria-hidden",!0),e}var r=e.parentNode,s=i();r.insertBefore(s,e);var a=i();r.insertBefore(a,e.nextSibling),s.addEventListener("focus",function(){o(e,"onTabEnter",!0)},!0),a.addEventListener("focus",function(){o(e,"onTabEnter",!1)},!0),this._catcherBegin=s,this._catcherEnd=a;var l=1;this.addRef=function(){l++},this.release=function(){return 0===--l&&(s.parentElement&&r.removeChild(s),a.parentElement&&r.removeChild(a)),l},this.updateTabIndex=function(e){s.tabIndex=e,a.tabIndex=e}}if(t.document){var u=r.getTabIndex,c={attach:function(e,t){return e["win-trackTabHelperObject"]?e["win-trackTabHelperObject"].addRef():e["win-trackTabHelperObject"]=new l(e,t),e["win-trackTabHelperObject"]},detach:function(e){e["win-trackTabHelperObject"].release()||delete e["win-trackTabHelperObject"]}};n.Namespace._moduleDefine(e,"WinJS.UI",{TrackTabBehavior:c,TabContainer:n.Class.define(function(e){this._element=e,this._tabIndex=0,e._tabContainer=this,null===e.getAttribute("tabindex")&&(e.tabIndex=-1);var t=this;e.addEventListener("onTabEnter",function(n){var i=o(t._element,"onTabEntered",n.detail,!0);i||(t.childFocus?t.childFocus.focus():e.focus())}),e.addEventListener("keydown",function(e){var n=e.target;if(e.keyCode===r.Key.tab){var s=!e.shiftKey,a=t._hasMoreElementsInTabOrder(n,s);if(!a){var l=o(t._element,"onTabExiting",s,!0);if(l)return e.stopPropagation(),void e.preventDefault();for(var u=t._element.querySelectorAll("a[href],area[href],button,command,input,link,menuitem,object,select,textarea,th[sorted],[tabindex]"),c=u.length,d=[],h=0;c>h;h++){var p=u[h];d.push(p.tabIndex),p.tabIndex=-1}t._elementTabHelper[s?"_catcherEnd":"_catcherBegin"].tabIndex=-1;var m=function(){n.removeEventListener("blur",m,!1);for(var e=0;c>e;e++)-1!==d[e]&&(u[e].tabIndex=d[e]);t._elementTabHelper._catcherBegin.tabIndex=t._tabIndex,t._elementTabHelper._catcherEnd.tabIndex=t._tabIndex};n.addEventListener("blur",m,!1),i._yieldForEvents(function(){o(t._element,"onTabExit",s)})}}}),this._elementTabHelper=c.attach(e,this._tabIndex),this._elementTabHelper._catcherBegin.tabIndex=0,this._elementTabHelper._catcherEnd.tabIndex=0},{dispose:function(){c.detach(this._element,this._tabIndex)},childFocus:{set:function(e){e!==this._focusElement&&(e&&e.parentNode?this._focusElement=e:this._focusElement=null)},get:function(){return this._focusElement}},tabIndex:{set:function(e){this._tabIndex=e,this._elementTabHelper.updateTabIndex(e)},get:function(){return this._tabIndex}},_element:null,_skipper:function(e){e.stopPropagation(),e.preventDefault()},_hasMoreElementsInTabOrder:function(e,n){if(!this.childFocus)return!1;for(var i=t.document.createTreeWalker(this._element,t.NodeFilter.SHOW_ELEMENT,s,!1),r=a(i),o=0;o<r.length;o++)if(r[o]===e)return n?o<r.length-1:o>0;return!1},_focusElement:null},{supportedForProcessing:!1})})}}),define("WinJS/Utilities/_KeyboardBehavior",["exports","../Core/_Global","../Core/_Base","./_Control","./_ElementUtilities","./_TabContainer"],function(e,t,n,i,r,o){"use strict";if(t.document){var s={touch:"touch",pen:"pen",mouse:"mouse",keyboard:"keyboard"},a=s.mouse,l={2:s.touch,3:s.pen,4:s.mouse,touch:s.touch,pen:s.pen,mouse:s.mouse};r._addEventListener(t,"pointerdown",function(e){a=l[e.pointerType]||s.mouse},!0),t.addEventListener("keydown",function(){a=s.keyboard},!0),n.Namespace._moduleDefine(e,"WinJS.UI",{_keyboardSeenLast:{get:function(){return a===s.keyboard},set:function(e){a=e?s.keyboard:s.mouse}},_lastInputType:{get:function(){return a},set:function(e){s[e]&&(a=e)}},_InputTypes:s,_WinKeyboard:function(t){r._addEventListener(t,"pointerdown",function(e){r.removeClass(e.target,"win-keyboard")},!0),t.addEventListener("keydown",function(e){r.addClass(e.target,"win-keyboard")},!0),r._addEventListener(t,"focusin",function(t){e._keyboardSeenLast&&r.addClass(t.target,"win-keyboard")},!1),r._addEventListener(t,"focusout",function(e){r.removeClass(e.target,"win-keyboard")},!1)},_KeyboardBehavior:n.Namespace._lazy(function(){var e=r.Key,s=n.Class.define(function(e,n){e=e||t.document.createElement("DIV"),n=n||{},e._keyboardBehavior=this,this._element=e,this._fixedDirection=s.FixedDirection.width,this._fixedSize=1,this._currentIndex=0,i.setOptions(this,n),this._tabContainer=new o.TabContainer(this.scroller||this._element),this._tabContainer.tabIndex=0,this._element.children.length>0&&(this._tabContainer.childFocus=this._getFocusInto(this._element.children[0])),this._element.addEventListener("keydown",this._keyDownHandler.bind(this)),r._addEventListener(this._element,"pointerdown",this._MSPointerDownHandler.bind(this))},{element:{get:function(){return this._element}},fixedDirection:{get:function(){return this._fixedDirection},set:function(e){this._fixedDirection=e}},fixedSize:{get:function(){return this._fixedSize},set:function(e){+e===e&&(e=Math.max(1,e),this._fixedSize=e)}},currentIndex:{get:function(){return this._element.children.length>0?this._currentIndex:-1},set:function(e){if(+e===e){var t=this._element.children.length;e=Math.max(0,Math.min(t-1,e)),this._currentIndex=e,this._tabContainer.childFocus=this._getFocusInto(this._element.children[e])}}},getAdjacent:{get:function(){return this._getAdjacent},set:function(e){this._getAdjacent=e}},scroller:{get:function(){return this._scroller},set:function(e){this._scroller=e}},_keyDownHandler:function(t){if(!t.altKey){if(r._matchesSelector(t.target,".win-interactive, .win-interactive *"))return;var n=this.currentIndex,i=this._element.children.length-1,o="rtl"===r._getComputedStyle(this._element).direction,a=o?e.rightArrow:e.leftArrow,l=o?e.leftArrow:e.rightArrow,u=this.getAdjacent&&this.getAdjacent(n,t.keyCode);if(+u===u)n=u;else{var c=n%this.fixedSize;t.keyCode===a?this.fixedDirection===s.FixedDirection.width?0!==c&&n--:n>=this.fixedSize&&(n-=this.fixedSize):t.keyCode===l?this.fixedDirection===s.FixedDirection.width?c!==this.fixedSize-1&&n++:n+this.fixedSize-c<=i&&(n+=this.fixedSize):t.keyCode===e.upArrow?this.fixedDirection===s.FixedDirection.height?0!==c&&n--:n>=this.fixedSize&&(n-=this.fixedSize):t.keyCode===e.downArrow?this.fixedDirection===s.FixedDirection.height?c!==this.fixedSize-1&&n++:n+this.fixedSize-c<=i&&(n+=this.fixedSize):t.keyCode===e.home?n=0:t.keyCode===e.end&&(n=this._element.children.length-1)}n=Math.max(0,Math.min(this._element.children.length-1,n)),n!==this.currentIndex&&(this._focus(n,t.keyCode),(t.keyCode===a||t.keyCode===l||t.keyCode===e.upArrow||t.keyCode===e.downArrow)&&t.stopPropagation(),t.preventDefault())}},_getFocusInto:function(e,t){return e&&e.winControl&&e.winControl._getFocusInto?e.winControl._getFocusInto(t):e},_focus:function(e,t){e=+e===e?e:this.currentIndex;var n=this._element.children[e];n&&(n=this._getFocusInto(n,t),this.currentIndex=e,r._setActive(n,this.scroller))},_MSPointerDownHandler:function(e){var t=e.target;if(t!==this.element){for(;t.parentNode!==this.element;)t=t.parentNode;for(var n=-1;t;)n++,t=t.previousElementSibling;this.currentIndex=n}}},{FixedDirection:{height:"height",width:"width"}});return s})})}}),define("WinJS/Utilities/_SafeHtml",["exports","../Core/_WinJS","../Core/_Global","../Core/_Base","../Core/_ErrorFromName","../Core/_Resources"],function(e,t,n,i,r,o){"use strict";var s,a,l,u,c,d,h={get nonStaticHTML(){return"Unable to add dynamic content. A script attempted to inject dynamic content, or elements previously modified dynamically, that might be unsafe. For example, using the innerHTML property or the document.write method to add a script element will generate this exception. If the content is safe and from a trusted source, use a method to explicitly manipulate elements and attributes, such as createElement, or use setInnerHTMLUnsafe (or other unsafe method)."}};s=a=function(e,t){e.innerHTML=t},l=u=function(e,t){e.outerHTML=t},c=d=function(e,t,n){e.insertAdjacentHTML(t,n)};var p=n.MSApp;if(p&&p.execUnsafeLocalFunction)a=function(e,n){p.execUnsafeLocalFunction(function(){try{t._execUnsafe=!0,e.innerHTML=n}finally{t._execUnsafe=!1}})},u=function(e,n){p.execUnsafeLocalFunction(function(){try{t._execUnsafe=!0,e.outerHTML=n}finally{t._execUnsafe=!1}})},d=function(e,n,i){p.execUnsafeLocalFunction(function(){try{t._execUnsafe=!0,e.insertAdjacentHTML(n,i)}finally{t._execUnsafe=!1}})};else if(n.msIsStaticHTML){var m=function(e){if(!n.msIsStaticHTML(e))throw new r("WinJS.Utitilies.NonStaticHTML",h.nonStaticHTML)};s=function(e,t){m(t),e.innerHTML=t},l=function(e,t){m(t),e.outerHTML=t},c=function(e,t,n){m(n),e.insertAdjacentHTML(t,n)}}i.Namespace._moduleDefine(e,"WinJS.Utilities",{setInnerHTML:s,setInnerHTMLUnsafe:a,setOuterHTML:l,setOuterHTMLUnsafe:u,insertAdjacentHTML:c,insertAdjacentHTMLUnsafe:d})}),define("WinJS/Utilities/_Select",["exports","../Core/_Base","./_SafeHtml"],function(e,t,n){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{_Select:t.Namespace._lazy(function(){function e(e){return e.replace(a,function(e){return l[e]||""})}function i(e){return e.replace(u,"")}function r(e){return this[e]}function o(){return this.length}function s(e){return e.getValue||(e.getValue=r),e.getLength||(e.getLength=o),e}var a=/[&<>'"]/g,l={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},u=/[\u200e\u200f]/g;return t.Class.define(function(e,t){this._dataSource=s(t.dataSource),this._index=t.index||0,this._domElement=e,this._domElement.tabIndex=0,t.disabled&&this.setDisabled(t.disabled);var n=this;this._domElement.addEventListener("change",function(){n._index=n._domElement.selectedIndex},!1),this._createSelectElement()},{_index:0,_dataSource:null,dataSource:{get:function(){return this._dataSource},set:function(e){this._dataSource=s(e),this._domElement&&this._createSelectElement()}},setDisabled:function(e){e?this._domElement.setAttribute("disabled","disabled"):this._domElement.removeAttribute("disabled")},_createSelectElement:function(){for(var t=this._dataSource.getLength(),r="",o=0;t>o;o++){var s=""+this._dataSource.getValue(o),a=e(s),l=i(a);r+="<option value='"+l+"'>"+a+"</option>"}n.setInnerHTMLUnsafe(this._domElement,r),this._domElement.selectedIndex=this._index},index:{get:function(){return Math.max(0,Math.min(this._index,this._dataSource.getLength()-1))},set:function(e){if(this._index!==e){this._index=e;var t=this._domElement;t&&t.selectedIndex!==e&&(t.selectedIndex=e)}}},value:{get:function(){return this._dataSource.getValue(this.index)}}})})})}),define("WinJS/Utilities/_Telemetry",["exports"],function(e){"use strict";e.send=function(e,t){}}),define("WinJS/Utilities/_UI",["exports","../Core/_BaseCoreUtils","../Core/_Base"],function(e,t,n){"use strict";n.Namespace._moduleDefine(e,"WinJS.UI",{eventHandler:function(e){return t.markSupportedForProcessing(e)},Orientation:{horizontal:"horizontal",vertical:"vertical"},CountResult:{unknown:"unknown"},CountError:{noResponse:"noResponse"},DataSourceStatus:{ready:"ready",waiting:"waiting",failure:"failure"},FetchError:{noResponse:"noResponse",doesNotExist:"doesNotExist"},EditError:{noResponse:"noResponse",canceled:"canceled",notPermitted:"notPermitted",noLongerMeaningful:"noLongerMeaningful"},ObjectType:{item:"item",groupHeader:"groupHeader",header:"header",footer:"footer"},SelectionMode:{none:"none",single:"single",multi:"multi"},TapBehavior:{directSelect:"directSelect",toggleSelect:"toggleSelect",invokeOnly:"invokeOnly",none:"none"},SwipeBehavior:{select:"select",none:"none"},GroupHeaderTapBehavior:{invoke:"invoke",none:"none"}})}),define("WinJS/Utilities/_Xhr",["../Core/_Global","../Core/_Base","../Promise","../Scheduler"],function(e,t,n,i){"use strict";function r(e,t,n){i.schedule(function(){e(t)},n,null,"WinJS.xhr")}function o(){}function s(t){var s;return new n(function(n,l,u){var c=i.currentPriority;s=new e.XMLHttpRequest;var d=!1,h=a.exec(t.url.toLowerCase());h?"file"===h[1]&&(d=!0):"file:"===e.location.protocol&&(d=!0),s.onreadystatechange=function(){return s._canceled?void(s.onreadystatechange=o):void(4===s.readyState?(s.status>=200&&s.status<300||d&&0===s.status?r(n,s,c):r(l,s,c),s.onreadystatechange=o):r(u,s,c))},s.open(t.type||"GET",t.url,!0,t.user,t.password),s.responseType=t.responseType||"",Object.keys(t.headers||{}).forEach(function(e){s.setRequestHeader(e,t.headers[e])}),t.customRequestInitializer&&t.customRequestInitializer(s),void 0===t.data?s.send():s.send(t.data)},function(){s.onreadystatechange=o,s._canceled=!0,s.abort()})}var a=/^(\w+)\:\/\//;return t.Namespace.define("WinJS",{xhr:s}),s}),define("WinJS/Utilities",["./Utilities/_Control","./Utilities/_Dispose","./Utilities/_ElementListUtilities","./Utilities/_ElementUtilities","./Utilities/_Hoverable","./Utilities/_ItemsManager","./Utilities/_KeyboardBehavior","./Utilities/_ParallelWorkQueue","./Utilities/_SafeHtml","./Utilities/_Select","./Utilities/_TabContainer","./Utilities/_Telemetry","./Utilities/_UI","./Utilities/_VersionManager","./Utilities/_Xhr"],function(){}),define("WinJS/XYFocus",["require","exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Utilities/_ElementUtilities","./Core/_Events","./ControlProcessor/_OptionsParser"],function(e,t,n,i,r,o,s,a){"use strict";function l(e,t){var n=d(e,t);return n?n.target:null}function u(e,t){var i=l(e,t);if(i){var r=n.document.activeElement;if(m(i,-1))return R.dispatchEvent(P.focusChanged,{previousFocusElement:r,keyCode:-1}),i}return null}function c(e,i,r,s){function a(e,t){var n=h();e===x.left||e===x.right?(n.top=Math.max(t.targetRect.top,t.referenceRect.top,O?O.top:Number.MIN_VALUE),n.bottom=Math.min(t.targetRect.bottom,t.referenceRect.bottom,O?O.bottom:Number.MAX_VALUE),n.bottom<=n.top&&(n.top=t.targetRect.top,n.bottom=t.targetRect.bottom),n.height=n.bottom-n.top,n.width=Number.MAX_VALUE,n.left=Number.MIN_VALUE,n.right=Number.MAX_VALUE):(n.left=Math.max(t.targetRect.left,t.referenceRect.left,O?O.left:Number.MIN_VALUE),n.right=Math.min(t.targetRect.right,t.referenceRect.right,O?O.right:Number.MAX_VALUE),n.right<=n.left&&(n.left=t.targetRect.left,n.right=t.targetRect.right),n.width=n.right-n.left,n.height=Number.MAX_VALUE,n.top=Number.MIN_VALUE,n.bottom=Number.MAX_VALUE),O=n}if(r||n.document.activeElement!==M)O=null,M=null,A=null;else if(M&&A){var l=p(M.getBoundingClientRect());(l.left!==A.left||l.top!==A.top)&&(O=null,M=null,A=null)}var u=n.document.activeElement,c=d(e,{focusRoot:t.focusRoot,historyRect:O,referenceElement:M,referenceRect:r});if(c&&m(c.target,i)){if(a(e,c),M=c.target,A=c.targetRect,o.hasClass(c.target,S.toggleMode)&&o.removeClass(c.target,S.toggleModeActive),"IFRAME"===c.target.tagName){var f=c.target;if(L.isXYFocusEnabled(f)){var _=p({left:c.referenceRect.left-c.targetRect.left,top:c.referenceRect.top-c.targetRect.top,width:c.referenceRect.width,height:c.referenceRect.height}),g={};g[E.messageDataProperty]={type:E.dFocusEnter,direction:e,referenceRect:_},f.contentWindow.postMessage(g,"*")}}return R.dispatchEvent(P.focusChanged,{previousFocusElement:u,keyCode:i}),!0}if(!s&&top!==window){var _=r;_||(_=n.document.activeElement?p(n.document.activeElement.getBoundingClientRect()):h());var g={};return g[E.messageDataProperty]={type:E.dFocusExit,direction:e,referenceRect:_},n.parent.postMessage(g,"*"),!0}return!1}function d(e,i){function r(e,t,n,i){if(e>=i||n>=t)return 0;var r=Math.min(t,i)-Math.max(e,n),o=Math.min(i-n,t-e);return 0===o?0:r/o}function o(e,t,n,i,o){var s,a,l=0,u=0,c=0;switch(e){case x.left:if(o.left>=i.left)break;s=r(i.top,i.bottom,o.top,o.bottom),a=i.left-o.right,s>0?c=r(n.top,n.bottom,o.top,o.bottom):u=i.bottom<=o.top?o.top-i.bottom:i.top-o.bottom;break;case x.right:if(o.right<=i.right)break;s=r(i.top,i.bottom,o.top,o.bottom),a=o.left-i.right,s>0?c=r(n.top,n.bottom,o.top,o.bottom):u=i.bottom<=o.top?o.top-i.bottom:i.top-o.bottom;break;case x.up:if(o.top>=i.top)break;s=r(i.left,i.right,o.left,o.right),a=i.top-o.bottom,s>0?c=r(n.left,n.right,o.left,o.right):u=i.right<=o.left?o.left-i.right:i.left-o.right;break;case x.down:if(o.bottom<=i.bottom)break;s=r(i.left,i.right,o.left,o.right),a=o.top-i.bottom,s>0?c=r(n.left,n.right,o.left,o.right):u=i.right<=o.left?o.left-i.right:i.left-o.right}return a>=0&&(a=t-a,u=t-u,a>=0&&u>=0&&(a+=a*s,l=a*T.primaryAxisDistanceWeight+u*T.secondaryAxisDistanceWeight+c*T.percentInHistoryShadowWeight)),l}function s(e,t){var i,r;return(!e&&!t||e&&!e.parentNode)&&n.document.activeElement!==n.document.body&&(e=n.document.activeElement),e?(i=e,r=p(i.getBoundingClientRect())):r=t?p(t):h(),{element:i,rect:r}}i=i||{},i.focusRoot=i.focusRoot||t.focusRoot||n.document.body,i.historyRect=i.historyRect||h();var l=Math.max(n.screen.availHeight,n.screen.availWidth),u=s(i.referenceElement,i.referenceRect);if(u.element){var c=u.element.getAttribute(I.focusOverride)||u.element.getAttribute(I.focusOverrideLegacy);if(c){var d=a.optionsParser(c),m=d[e]||d[e[0].toUpperCase()+e.substr(1)];if(m){for(var _,v=u.element;!_&&v;)_=v.querySelector(m),v=v.parentElement;if(_)return _===n.document.activeElement?null:{target:_,targetRect:p(_.getBoundingClientRect()),referenceRect:u.rect,usedOverride:!0}}}}for(var y={element:null,rect:null,score:0},b=i.focusRoot.querySelectorAll("*"),C=0,w=b.length;w>C;C++){var S=b[C];if(u.element!==S&&f(S)&&!g(S)){var E=p(S.getBoundingClientRect());if(0!==E.width&&0!==E.height){var P=o(e,l,i.historyRect,u.rect,E);P>y.score&&(y.element=S,y.rect=E,y.score=P)}}}return y.element?{target:y.element,targetRect:y.rect,referenceRect:u.rect,usedOverride:!1}:null}function h(){return{top:-1,bottom:-1,right:-1,left:-1,height:0,width:0}}function p(e){return{top:Math.floor(e.top),bottom:Math.floor(e.top+e.height),right:Math.floor(e.left+e.width),left:Math.floor(e.left),height:Math.floor(e.height),width:Math.floor(e.width)}}function m(e,t){var i=R.dispatchEvent(P.focusChanging,{nextFocusElement:e,keyCode:t});return i||e.focus(),n.document.activeElement===e}function f(e){var t=e.tagName;if(!e.hasAttribute("tabindex")&&-1===k.indexOf(t)&&!o.hasClass(e,S.focusable))return!1;if("IFRAME"===t&&!L.isXYFocusEnabled(e))return!1;if("DIV"===t&&e.winControl&&e.winControl.disabled)return!1;var n=o._getComputedStyle(e);return"-1"===e.getAttribute("tabIndex")||"none"===n.display||"hidden"===n.visibility||e.disabled?!1:!0}function _(e){for(var t=e.parentElement;t&&!v(t);)t=t.parentElement;return t}function g(e){var t=_(e);return t&&!o.hasClass(t,S.toggleModeActive)}function v(e){if(o.hasClass(e,S.toggleMode))return!0;if("INPUT"===e.tagName){var t=e.type.toLowerCase();if("date"===t||"datetime"===t||"datetime-local"===t||"email"===t||"month"===t||"number"===t||"password"===t||"range"===t||"search"===t||"tel"===t||"text"===t||"time"===t||"url"===t||"week"===t)return!0}else if("TEXTAREA"===e.tagName)return!0;return!1}function y(e){var t=!1,n=!1,i=!1;e&&(t=o._matchesSelector(e,"."+S.suspended+", ."+S.suspended+" *"),n=v(e),i=o.hasClass(e,S.toggleModeActive));var r=D.RestState;return t?r=D.SuspendedState:n&&(r=i?D.ToggleModeActiveState:D.ToggleModeRestState),r}function b(e){if(!e.defaultPrevented){var n=y(document.activeElement),i="";if(-1!==t.keyCodeMap.up.indexOf(e.keyCode)?i="up":-1!==t.keyCodeMap.down.indexOf(e.keyCode)?i="down":-1!==t.keyCodeMap.left.indexOf(e.keyCode)?i="left":-1!==t.keyCodeMap.right.indexOf(e.keyCode)&&(i="right"),i){var r=n.xyFocus(i,e.keyCode);r&&e.preventDefault()}}}function C(e){if(!e.defaultPrevented){var n=document.activeElement,i=!1,r=y(document.activeElement);-1!==t.keyCodeMap.accept.indexOf(e.keyCode)?i=r.accept(n):-1!==t.keyCodeMap.cancel.indexOf(e.keyCode)&&(i=r.cancel(n)),i&&e.preventDefault()}}var w=o.Key,I={focusOverride:"data-win-xyfocus",focusOverrideLegacy:"data-win-focus"},S={focusable:"win-focusable",suspended:"win-xyfocus-suspended",toggleMode:"win-xyfocus-togglemode",toggleModeActive:"win-xyfocus-togglemode-active",xboxPlatform:"win-xbox"},E={messageDataProperty:"msWinJSXYFocusControlMessage",register:"register",unregister:"unregister",dFocusEnter:"dFocusEnter",dFocusExit:"dFocusExit"},x={left:"left",right:"right",up:"up",down:"down"},P={focusChanging:"focuschanging",focusChanged:"focuschanged"},k=["A","BUTTON","IFRAME","INPUT","SELECT","TEXTAREA"],T={primaryAxisDistanceWeight:30,secondaryAxisDistanceWeight:20,percentInHistoryShadowWeight:1e5};t.keyCodeMap={left:[],right:[],up:[],down:[],accept:[],cancel:[]},t.focusRoot,t.findNextFocusElement=l,t.moveFocus=u;var M,A,O,D;!function(e){function t(e){return e&&e.click&&e.click(),!1}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return!1}var i=function(){function e(){}return e.accept=t,e.cancel=n,e.xyFocus=c,e}();e.RestState=i;var r=function(){function e(){}return e.accept=n,e.cancel=n,e.xyFocus=n,e}();e.SuspendedState=r;var s=function(){function e(){}return e.accept=function(e){return o.addClass(e,S.toggleModeActive),!0},e.cancel=n,e.xyFocus=c,e}();e.ToggleModeRestState=s;var a=function(){function e(){}return e.cancel=function(e){return e&&o.removeClass(e,S.toggleModeActive),!0},e.accept=t,e.xyFocus=n,e}();e.ToggleModeActiveState=a}(D||(D={}));var L;if(function(e){function t(){return a(function(){return!1}),l.length}function i(e){var t=n.document.querySelectorAll("IFRAME"),i=Array.prototype.filter.call(t,function(t){return t.contentWindow===e});return i.length?i[0]:null}function r(e){var t=!1;return a(function(n){n===e&&(t=!0)}),t}function o(e){l.push(e)}function s(e){var t=-1;a(function(n,i){n===e&&(t=i)}),-1!==t&&l.splice(t,1)}function a(e){for(var t=l.length-1;t>=0;t--)try{var n=l[t];n.contentWindow?e(n,t):l.splice(t,1)}catch(i){l.splice(t,1)}}var l=[];e.count=t,e.getIFrameFromWindow=i,e.isXYFocusEnabled=r,e.registerIFrame=o,e.unregisterIFrame=s}(L||(L={})),n.document){t.keyCodeMap.left.push(w.GamepadLeftThumbstickLeft,w.GamepadDPadLeft,w.NavigationLeft),t.keyCodeMap.right.push(w.GamepadLeftThumbstickRight,w.GamepadDPadRight,w.NavigationRight),t.keyCodeMap.up.push(w.GamepadLeftThumbstickUp,w.GamepadDPadUp,w.NavigationUp),t.keyCodeMap.down.push(w.GamepadLeftThumbstickDown,w.GamepadDPadDown,w.NavigationDown),t.keyCodeMap.accept.push(w.GamepadA,w.NavigationAccept),t.keyCodeMap.cancel.push(w.GamepadB,w.NavigationCancel),n.addEventListener("message",function(e){var t=null;try{if(t=e.source,!t)return}catch(e){return}if(e.data&&e.data[E.messageDataProperty]){var i=e.data[E.messageDataProperty];switch(i.type){case E.register:var r=L.getIFrameFromWindow(t);r&&L.registerIFrame(r);break;case E.unregister:var r=L.getIFrameFromWindow(t);r&&L.unregisterIFrame(r);break;case E.dFocusEnter:var o=c(i.direction,-1,i.referenceRect,!0);o||(f(n.document.body)?n.document.body.focus():c(i.direction,-1));break;case E.dFocusExit:var r=L.getIFrameFromWindow(t);if(n.document.activeElement!==r)break;var s=i.referenceRect,a=r.getBoundingClientRect();s.left+=a.left,s.top+=a.top,"number"==typeof s.right&&(s.right+=a.left),"number"==typeof s.bottom&&(s.bottom+=a.top),c(i.direction,-1,s)}}}),r.ready().then(function(){if(o.hasWinRT&&n.Windows&&n.Windows.Xbox&&o.addClass(n.document.body,S.xboxPlatform),n.document.addEventListener("keydown",C,!0),n.document.addEventListener("keydown",b),n.top!==n.window){var e={};e[E.messageDataProperty]={type:E.register,version:1},n.parent.postMessage(e,"*")}});var B={focusRoot:{get:function(){return t.focusRoot},set:function(e){t.focusRoot=e}},findNextFocusElement:l,keyCodeMap:t.keyCodeMap,moveFocus:u,onfocuschanged:s._createEventProperty(P.focusChanged),onfocuschanging:s._createEventProperty(P.focusChanging),_xyFocus:c,_iframeHelper:L};B=r._merge(B,s.eventMixin),B._listeners={};var R=B;i.Namespace.define("WinJS.UI.XYFocus",B)}}),define("WinJS/Fragments",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./Core/_WriteProfilerMark","./Promise","./Utilities/_ElementUtilities","./Utilities/_SafeHtml","./Utilities/_Xhr"],function(e,t,n,i,r,o,s,a,l,u,c,d){"use strict";function h(e,n,i,r){var o=e.src,s=!o;if(s&&(o=n+"script["+i+"]"),o=o.toLowerCase(),!(o in T)){var a=null;T[o]=!0;var u=t.document.createElement("script");if(e.language&&u.setAttribute("language","javascript"),u.setAttribute("type",e.type),u.setAttribute("async","false"),e.id&&u.setAttribute("id",e.id),s){var c=e.text;a=r.then(function(){u.text=c}).then(null,function(){})}else a=new l(function(t){u.onload=u.onerror=function(){t()},u.setAttribute("src",e.src)});return k.appendChild(u),{promise:a,inline:s}}}function p(e,t,n){var i=(t+"script["+n+"]").toLowerCase();i in M||(M[i]=!0,k.appendChild(e.cloneNode(!0)))}function m(e){var t=e.href.toLowerCase();if(!(t in A)){A[t]=!0;var n=e.cloneNode(!1);n.href=e.href,k.appendChild(n)}}function f(e,n){if("string"==typeof e)return g(e,n);var i={docfrag:u.data(e).docFragment};if(!i.docfrag){
for(var r=t.document.createDocumentFragment();e.childNodes.length>0;)r.appendChild(e.childNodes[0]);i.docfrag=u.data(e).docFragment=r,e.setAttribute("data-win-hasfragment","")}return n&&S(e),l.as(i)}function _(e,t){return E(e,t).then(function(){return e.document?v(t,e):e}).then(function(){return e.document&&delete e.document,e})}function g(e,t){var n=e.toLowerCase(),i=D[n];if(i)return t&&delete D[n],i.promise?i.promise:l.as(i);i={},t||(D[n]=i);var r=i.promise=_(i,e);return i.promise.then(function(){delete i.promise}),r}function v(e,n){var i=n.document,r=i.body,o=[];P(i.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),m),P(i.getElementsByTagName("style"),function(t,n){p(t,e,n)});var s=l.as();P(i.getElementsByTagName("script"),function(t,n){var i=h(t,e,n,s);i&&(i.inline||(s=i.promise),o.push(i.promise))}),P(r.getElementsByTagName("img"),function(e){e.src=e.src}),P(r.getElementsByTagName("a"),function(e){if(""!==e.href){var t=e.getAttribute("href");t&&"#"!==t[0]&&(e.href=e.href)}});for(var a=r.getElementsByTagName("script");a.length>0;){var u=a[0];u.parentNode.removeChild(u)}return l.join(o).then(function(){for(var e=t.document.createDocumentFragment(),r=t.document.importNode(i.body,!0);r.childNodes.length>0;)e.appendChild(r.childNodes[0]);return n.docfrag=e,n})}function y(){O||(O=!0,P(k.querySelectorAll("script"),function(e){T[e.src.toLowerCase()]=!0}),P(k.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),function(e){A[e.href.toLowerCase()]=!0}))}function b(e,t){return C(e,t,!0)}function C(e,n,i){var o=(e instanceof t.HTMLElement?r._getProfilerMarkIdentifier(e):" href='"+e+"'")+"["+ ++L+"]";return B("WinJS.UI.Fragments:render"+o+",StartTM"),y(),f(e,!i).then(function(e){var t=e.docfrag;i&&(t=t.cloneNode(!0));for(var r=t.firstChild;r;)1===r.nodeType&&(r.msParentSelectorScope=!0),r=r.nextSibling;var s;return n?(n.appendChild(t),s=n):s=t,B("WinJS.UI.Fragments:render"+o+",StopTM"),s})}function w(e,t){return C(e,t,!1)}function I(e){return y(),f(e).then(function(e){return e.docfrag})}function S(e){e?"string"==typeof e?delete D[e.toLowerCase()]:(delete u.data(e).docFragment,e.removeAttribute("data-win-hasfragment")):D={}}function E(e,n){var i=t.document.implementation.createHTMLDocument("frag"),r=i.createElement("base");i.head.appendChild(r);var o=i.createElement("a");return i.body.appendChild(o),r.href=t.document.location.href,o.setAttribute("href",n),r.href=o.href,e.document=i,R(n).then(function(e){c.setInnerHTMLUnsafe(i.documentElement,e),i.head.appendChild(r)})}function x(e){return d({url:e}).then(function(e){return e.responseText})}if(t.document){var P=function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)},k=t.document.head||t.document.getElementsByTagName("head")[0],T={},M={},A={},O=!1,D={},L=1,B=a,R=x;i.Namespace._moduleDefine(e,"WinJS.UI.Fragments",{renderCopy:b,render:w,cache:I,clearCache:S,_cacheStore:{get:function(){return D}},_getFragmentContents:{get:function(){return R},set:function(e){R=e}},_writeProfilerMark:{get:function(){return B},set:function(e){B=e}}})}}),define("WinJS/Application/_State",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise"],function(e,t,n,i,r,o){"use strict";function s(){var t,r,o,s=i.Class.define(function(e){this.folder=e,this._path=e.path,e.tryGetItemAsync&&(this._tryGetItemAsync=e.tryGetItemAsync.bind(e))},{_tryGetItemAsync:function(e){return this.folder.getFileAsync(e).then(null,function(){return!1})},exists:function(e){return this._tryGetItemAsync(e).then(function(e){return e?!0:!1})},remove:function(e){return this._tryGetItemAsync(e).then(function(e){return e?e.deleteAsync():!1}).then(null,function(){return!1})},writeText:function(e,t){var i=n.Windows.Storage,r=this;return r.folder.createFileAsync(e,i.CreationCollisionOption.openIfExists).then(function(e){return i.FileIO.writeTextAsync(e,t)})},readText:function(e,t){var i=n.Windows.Storage;return this._tryGetItemAsync(e).then(function(e){return e?i.FileIO.readTextAsync(e):t}).then(null,function(){return t})}},{supportedForProcessing:!1});i.Namespace._moduleDefine(e,"WinJS.Application",{local:{get:function(){return t||(t=new s(n.Windows.Storage.ApplicationData.current.localFolder)),t}},temp:{get:function(){return r||(r=new s(n.Windows.Storage.ApplicationData.current.temporaryFolder)),r}},roaming:{get:function(){return o||(o=new s(n.Windows.Storage.ApplicationData.current.roamingFolder)),o}}})}function a(){var t=i.Class.define(function(){this.storage={}},{exists:function(e){return o.as(void 0!==this.storage[e])},remove:function(e){return delete this.storage[e],o.as()},writeText:function(e,t){return this.storage[e]=t,o.as(t.length)},readText:function(e,t){var n=this.storage[e];return o.as("string"==typeof n?n:t)}},{supportedForProcessing:!1});i.Namespace._moduleDefine(e,"WinJS.Application",{local:new t,temp:new t,roaming:new t})}n.Windows.Storage.FileIO&&n.Windows.Storage.ApplicationData&&n.Windows.Storage.CreationCollisionOption?s():a();var l={};i.Namespace._moduleDefine(e,"WinJS.Application",{sessionState:{get:function(){return l},set:function(e){l=e}},_loadState:function(t){return 3===t.previousExecutionState?e.local.readText("_sessionState.json","{}").then(function(t){var n=JSON.parse(t);n&&Object.keys(n).length>0&&(e._sessionStateLoaded=!0),e.sessionState=n}).then(null,function(){e.sessionState={}}):o.as()},_oncheckpoint:function(n,i){if(!(t.MSApp&&t.MSApp.getViewOpener&&t.MSApp.getViewOpener())){var r=e.sessionState;if(r&&Object.keys(r).length>0||e._sessionStateLoaded){var o;try{o=JSON.stringify(r)}catch(s){o="",i.queueEvent({type:"error",detail:s})}n.setPromise(e.local.writeText("_sessionState.json",o).then(null,function(e){i.queueEvent({type:"error",detail:e})}))}}}})}),define("WinJS/Navigation",["exports","./Core/_Base","./Core/_Events","./Core/_WriteProfilerMark","./Promise"],function(e,t,n,i,r){"use strict";var o="navigated",s="navigating",a="beforenavigate",l=t.Class.mix(t.Class.define(null,{},{supportedForProcessing:!1}),n.eventMixin),u=new l,c={backStack:[],current:{location:"",initialPlaceholder:!0},forwardStack:[]},d=n._createEventProperty,h=function(e){return i("WinJS.Navigation:navigation,StartTM"),r.as().then(function(){var t=r.as(),n=u.dispatchEvent(a,{setPromise:function(e){t=t.then(function(){return e})},location:e.location,state:e.state});return t.then(function(e){return n||e})})},p=function(e){return r.as().then(function(){var t=r.as();return u.dispatchEvent(s,{setPromise:function(e){t=t.then(function(){return e})},location:c.current.location,state:c.current.state,delta:e}),t})},m=function(e,t){i("WinJS.Navigation:navigation,StopTM");var n=r.as(),s={value:e,location:c.current.location,state:c.current.state,setPromise:function(e){n=n.then(function(){return e})}};return!e&&t&&(s.error=t),u.dispatchEvent(o,s),n},f=function(e,t,n,i){return e=Math.min(e,t.length),e>0?h(t[t.length-e]).then(function(r){if(r)return!1;for(n.push(c.current);e-1>0;)e--,n.push(t.pop());return c.current=t.pop(),p(i).then(m,function(e){throw m(void 0,e||!0),e}).then(function(){return!0})}):r.wrap(!1)};t.Namespace._moduleDefine(e,"WinJS.Navigation",{canGoForward:{get:function(){return c.forwardStack.length>0}},canGoBack:{get:function(){return c.backStack.length>0}},location:{get:function(){return c.current.location}},state:{get:function(){return c.current.state},set:function(e){c.current.state=e}},history:{get:function(){return c},set:function(e){c=e,c.backStack=c.backStack||[],c.forwardStack=c.forwardStack||[],c.current=c.current||{location:"",initialPlaceholder:!0},c.current.location=c.current.location||""}},forward:function(e){return e=e||1,f(e,c.forwardStack,c.backStack,e)},back:function(e){return e=e||1,f(e,c.backStack,c.forwardStack,-e)},navigate:function(e,t){var n={location:e,state:t};return h(n).then(function(e){return e?!1:(c.current.initialPlaceholder||c.backStack.push(c.current),c.forwardStack=[],c.current=n,p().then(m,function(e){throw m(void 0,e||!0),e}).then(function(){return!0}))})},addEventListener:function(e,t,n){u.addEventListener(e,t,n)},removeEventListener:function(e,t,n){u.removeEventListener(e,t,n)},onnavigated:d(o),onnavigating:d(s),onbeforenavigate:d(a)})}),define("WinJS/Application",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_Events","./Core/_Log","./Core/_WriteProfilerMark","./Application/_State","./Navigation","./Promise","./_Signal","./Scheduler","./Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a,l,u,c,d,h){"use strict";function p(e){var n;try{var i=[];n=JSON.stringify(e,function(e,n){return n===t?"[window]":n instanceof t.HTMLElement?"[HTMLElement]":"function"==typeof n?"[function]":"object"==typeof n?null===n?n:-1===i.indexOf(n)?(i.push(n),n):"[circular]":n})}catch(r){n=JSON.stringify("[object]")}return n}function m(n){if(o.log&&o.log(p(n),"winjs","error"),t.document&&e._terminateApp){var i=n.detail,r=i&&(i.number||i.exception&&(i.exception.number||i.exception.code)||i.error&&i.error.number||i.errorCode||0),s={description:p(i),stack:i&&(i.stack||i.exception&&(i.exception.stack||i.exception.message)||i.error&&i.error.stack||null),errorNumber:r,number:r};e._terminateApp(s,n)}}function f(e,n){t.MSApp&&t.MSApp.terminateApp(e)}function _(e){var t="def"+he++;return{deferral:de[t]=e.getDeferral(),id:t}}function g(e,t){t&&(e=de[t],delete de[t]),e&&e.complete()}function v(){de&&(Object.keys(de).forEach(function(e){de[e].complete()}),de={})}function y(e){function t(t){return s("WinJS.Application:Event_"+e.type+",StopTM"),e._deferral&&g(e._deferral,e._deferralID),t}s("WinJS.Application:Event_"+e.type+",StartTM");var n=u.as();e.setPromise=function(e){n=n.then(function(){return e})},e._stoppedImmediatePropagation=!1,e.stopImmediatePropagation=function(){e._stoppedImmediatePropagation=!0},e.detail=e.detail||{},"object"==typeof e.detail&&(e.detail.setPromise=e.setPromise);try{if(ue._listeners){var i=!1;if(a=ue._listeners[e.type])for(var r=0,o=a.length;o>r&&!e._stoppedImmediatePropagation;r++)i=a[r].listener(e)||i}var a=fe[e.type];a&&a.forEach(function(t){t(e,i)})}catch(l){e.type===K?m(e):S({type:K,detail:l})}return n.then(t,function(e){return e=t(e),e&&"Canceled"===e.name?void 0:u.wrapError(e)})}function b(){return ie||(ie=new c,ie.promise.done(function(){ie=null},function(){ie=null})),ie}function C(e){function t(e){S({type:K,detail:e})}return 0===e.length?b().promise:y(e.shift()).then(null,t)}function w(e){function t(){return w}var n=e.job._queue;0===n.length&&te.length>0&&(n=e.job._queue=E()),e.setPromise(C(n).then(t,t))}function I(){function e(){i=!0}for(var t,n=[],i=!0;i;)0===n.length&&te.length>0&&(n=E()),i=!1,t=C(n),t.done(e,e);ne=d.schedule(function(e){function n(){return w}e.setPromise(t.then(n,n))},d.Priority.high,null,"WinJS.Application._pumpEventQueue"),ne._queue=n}function S(e){s("WinJS.Application:Event_"+e.type+" queued,Info"),te.push(e),re&&ie&&ie.complete(w)}function E(){var e=te;return te=[],e}function x(e){var t=_(e.activatedOperation);a._loadState(e).then(function(){S({type:V,detail:e,_deferral:t.deferral,_deferralID:t.id})})}function P(e){var t=_(e.suspendingOperation);S({type:U,_deferral:t.deferral,_deferralID:t.id})}function k(){if(S({type:q}),!t.document||!n.Windows.UI.WebUI.WebUIApplication){var e={arguments:"",kind:"Windows.Launch",previousExecutionState:0};a._loadState(e).then(function(){S({type:V,detail:e})})}}function T(){v(),S({type:j})}function M(t){var n={};for(var i in t)n[i]=t[i];var r,o=!0,s=e._terminateApp;try{e._terminateApp=function(e,t){o=!1,r=e,s!==f&&s(e,t)},y({type:K,detail:{error:n,errorLine:t.lineno,errorCharacter:t.colno,errorUrl:t.filename,errorMessage:t.message}})}finally{e._terminateApp=s}return o}function A(e){var t=e.detail,n=t.id;if(t.parent)return void(t.handler&&W&&delete W[n]);if(t.exception instanceof Error){var i={stack:t.exception.stack,message:t.exception.message};t.exception=i}var r=!W;W=W||[],W[n]=t,r&&d.schedule(function(){var e=W;W=null,e.forEach(function(e){S({type:K,detail:e})})},d.Priority.high,null,"WinJS.Application._queuePromiseErrors")}function O(e){var t={e:e,applicationcommands:void 0};ue.dispatchEvent(G,t)}function D(e){var t={type:Y};Object.defineProperty(t,"_winRTBackPressedEvent",{value:e,enumerable:!1}),y(t)}function L(){y({type:X})}function B(e){y({type:Q,kind:e.kind})}function R(e){y({type:$,kind:e.kind})}function N(e){y({type:ee,kind:e.kind})}function F(){var e=n.Windows.UI.Core.SystemNavigationManager;return ae&&e?e.getForCurrentView():null}function z(){if(!oe){if(oe=!0,t.addEventListener("beforeunload",T,!1),t.document){if(t.addEventListener("error",M,!1),n.Windows.UI.WebUI.WebUIApplication){var e=n.Windows.UI.WebUI.WebUIApplication;e.addEventListener("activated",x,!1),e.addEventListener("suspending",P,!1)}if(n.Windows.UI.ApplicationSettings.SettingsPane){var i=n.Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();i.addEventListener("commandsrequested",O)}var r=F();if(r?r.addEventListener("backrequested",D):n.Windows.Phone.UI.Input.HardwareButtons&&n.Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",D),n.Windows.UI.Input.EdgeGesture){var o=n.Windows.UI.Input.EdgeGesture.getForCurrentView();o.addEventListener("starting",B),o.addEventListener("completed",R),o.addEventListener("canceled",N)}}u.addEventListener("error",A)}}function H(){if(oe){if(oe=!1,t.removeEventListener("beforeunload",T,!1),t.document){if(n.Windows.UI.WebUI.WebUIApplication){t.removeEventListener("error",M,!1);var e=n.Windows.UI.WebUI.WebUIApplication;e.removeEventListener("activated",x,!1),e.removeEventListener("suspending",P,!1)}if(n.Windows.UI.ApplicationSettings.SettingsPane){var i=n.Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();i.removeEventListener("commandsrequested",O)}var r=F();if(r?r.removeEventListener("backrequested",D):n.Windows.Phone.UI.Input.HardwareButtons&&n.Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",D),n.Windows.UI.Input.EdgeGesture){var o=n.Windows.UI.Input.EdgeGesture.getForCurrentView();o.removeEventListener("starting",B),o.removeEventListener("completed",R),o.removeEventListener("canceled",N)}}u.removeEventListener("error",A)}}t.Debug&&(t.Debug.setNonUserCodeExceptions=!0);var W,U="checkpoint",j="unload",V="activated",q="loaded",J="ready",K="error",G="settings",Y="backclick",X="beforerequestingfocusonkeyboardinput",Z="requestingfocusonkeyboardinput",Q="edgystarting",$="edgycompleted",ee="edgycanceled",te=[],ne=null,ie=null,re=!1,oe=!1,se=t.Symbol,ae=!!se&&"symbol"==typeof se.iterator,le=i.Class.mix(i.Class.define(null,{},{supportedForProcessing:!1}),r.eventMixin),ue=new le,ce=r._createEventProperty,de={},he=0,pe={_registered:!1,updateRegistration:function(){var e=ue._listeners&&ue._listeners[Z]||[];!pe._registered&&e.length>0&&(pe._updateKeydownCaptureListeners(t.top,!0),pe._registered=!0),pe._registered&&0===e.length&&(pe._updateKeydownCaptureListeners(t.top,!1),pe._registered=!1)},_keydownCaptureHandler:function(e){pe._registered&&pe._shouldKeyTriggerTypeToSearch(e)&&L()},_frameLoadCaptureHandler:function(e){pe._registered&&pe._updateKeydownCaptureListeners(e.target.contentWindow,!0)},_updateKeydownCaptureListeners:function(e,t){if(e){try{t?e.document.addEventListener("keydown",pe._keydownCaptureHandler,!0):e.document.removeEventListener("keydown",pe._keydownCaptureHandler,!0)}catch(n){}if(e.frames)for(var i=0,r=e.frames.length;r>i;i++){var o=e.frames[i];pe._updateKeydownCaptureListeners(o,t);try{t?o.frameElement&&o.frameElement.addEventListener("load",pe._frameLoadCaptureHandler,!0):o.frameElement&&o.frameElement.removeEventListener("load",pe._frameLoadCaptureHandler,!0)}catch(n){}}}},_shouldKeyTriggerTypeToSearch:function(e){var t=!1;if(!e.metaKey&&(!e.ctrlKey&&!e.altKey||e.getModifierState&&e.getModifierState("AltGraph")))switch(e.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 186:case 187:case 188:case 189:case 190:case 191:case 192:case 219:case 220:case 221:case 222:case 223:case 226:case 229:case 231:t=!0}return t}},me=f,fe={activated:[function(){S({type:J})}],checkpoint:[function(t){a._oncheckpoint(t,e)}],error:[function(e,t){t||m(e)}],backclick:[function(e,t){t?e._winRTBackPressedEvent.handled=!0:l.canGoBack&&(l.back(),e._winRTBackPressedEvent.handled=!0)}],beforerequestingfocusonkeyboardinput:[function(e,t){t||y({type:Z})}]};t.document&&t.document.addEventListener("DOMContentLoaded",k,!1);var _e=i.Namespace._moduleDefine(e,"WinJS.Application",{stop:function(){_e.onactivated=null,_e.oncheckpoint=null,_e.onerror=null,_e.onloaded=null,_e.onready=null,_e.onsettings=null,_e.onunload=null,_e.onbackclick=null,ue=new le,a.sessionState={},re=!1,E(),ne&&ne.cancel(),ne=null,ie=null,H(),pe.updateRegistration(),v()},addEventListener:function(e,t,n){ue.addEventListener(e,t,n),e===Z&&pe.updateRegistration()},removeEventListener:function(e,t,n){ue.removeEventListener(e,t,n),e===Z&&pe.updateRegistration()},checkpoint:function(){S({type:U})},start:function(){z(),re=!0,I()},queueEvent:S,_dispatchEvent:y,_terminateApp:{get:function(){return me},set:function(e){me=e}},_applicationListener:i.Namespace._lazy(function(){return new h._GenericListener("Application",_e)}),oncheckpoint:ce(U),onunload:ce(j),onactivated:ce(V),onloaded:ce(q),onready:ce(J),onsettings:ce(G),onerror:ce(K),onbackclick:ce(Y)})}),define("WinJS/Animations/_Constants",["exports","../Core/_Base"],function(e,t){"use strict";t.Namespace._moduleDefine(e,"WinJS.UI",{PageNavigationAnimation:{turnstile:"turnstile",slide:"slide",enterPage:"enterPage",continuum:"continuum"}})}),define("WinJS/Animations/_TransitionAnimation",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Promise","../Scheduler","../Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a){"use strict";function l(e){return Array.isArray(e)||e instanceof t.NodeList||e instanceof t.HTMLCollection?e:e?[e]:[]}function u(){return++P,"WinJSUIAnimation"+P}function c(e){return"WinJSUIAnimation"===e.substring(0,16)}function d(e){a._getComputedStyle(e,null).opacity}function h(t,n){return function(i){var r={};for(var o in i){var s=i[o];"function"==typeof s&&(s=s(t,n)),r[o]=s}return r.exactTiming||(r.delay+=e._libraryDelay),r}}function p(e,t){var n=e+"|"+t,i=k[n];i&&i(T)}function m(e,t,n){k[e+"|"+t]=n}function f(e,t){delete k[e+"|"+t]}function _(e,t,n,i,r){var o=r.styleCaches[t]||new A(t,r,n);o.cref+=i.length,i.forEach(function(e){p(t,e.property)}),(r.isTransition||i.some(function(e){return o.removed[e[r.nameField]]}))&&(d(e),o.removed={});var s=i.map(function(e){return e[r.nameField]+" "+r.props.map(function(t){return(t[1]?e[t[1]]:"")+t[2]}).join(" ")}).join(", "),a=i.map(function(e){return e[r.nameField]}).join(", ");return""!==o.names&&(s=o.names+", "+s,a=o.names+", "+a),n[r.shorthandProp]=s,o.names=a,o}function g(e,t){t?e():s.schedule(function(){e()},s.Priority.normal,null,"WinJS.UI._Animation._completeAnimationPromise")}function v(e,n,i,s,l){if(i.length>0){var u=e.style,c=a._uniqueID(e);if(S||(S=t.document.createElement("DIV").style),i=i.map(h(n,e)),i.forEach(function(e){var t=r._getCamelCasedName(e.property);e.hasOwnProperty("from")&&(u[t]=e.from),S[t]=e.to,e.to=S[t],e.propertyScriptName=t}),l){var d=_(e,c,u,i,O),p=e.disabled?t.document:e;i.forEach(function(n){var i;s.push(new o(function(o){i=function(i){s&&(p.removeEventListener(r._browserEventEquivalents.transitionEnd,s,!1),f(c,n.property),d.removeName(u,n.propertyScriptName,i?e:null,n.skipStylesReset),t.clearTimeout(l),s=null),g(o,i===M)};var s=function(t){t.target===e&&t.propertyName===n.property&&i()};m(c,n.property,i),p.addEventListener(r._browserEventEquivalents.transitionEnd,s,!1);var a=0;u[n.propertyScriptName]!==n.to&&(u[n.propertyScriptName]=n.to,a=50);var l=t.setTimeout(function(){l=t.setTimeout(i,n.delay+n.duration)},a)},function(){i(M)}))})}else i.forEach(function(e){u[e.propertyScriptName]=e.to})}}function y(e,n,i,s,l){if(l&&i.length>0){var c=e.style,d=a._uniqueID(e);i=i.map(h(n,e));var p,v=e.disabled?t.document:e;i.forEach(function(e){if(e.keyframe)e.keyframe=x.animationPrefix+e.keyframe;else{p||(p=t.document.createElement("STYLE"),t.document.documentElement.appendChild(p)),e.keyframe=u();var n="@"+x.keyframes+" "+e.keyframe+" { from {"+e.property+":"+e.from+";} to {"+e.property+":"+e.to+";}}";p.sheet.insertRule(n,0)}});var y=_(e,d,c,i,D),b=[],C=[];i.forEach(function(n){var i;C.push(new o(function(o){i=function(e){s&&(v.removeEventListener(r._browserEventEquivalents.animationEnd,s,!1),t.clearTimeout(a),s=null),g(o,e===M)};var s=function(t){t.target===e&&t.animationName===n.keyframe&&i()};m(d,n.property,i),b.push({id:d,property:n.property,style:c,keyframe:n.keyframe});var a=t.setTimeout(function(){a=t.setTimeout(i,n.delay+n.duration)},50);v.addEventListener(r._browserEventEquivalents.animationEnd,s,!1)},function(){i(M)}))}),p&&t.setTimeout(function(){var e=p.parentElement;e&&e.removeChild(p)},50);var w=function(){for(var e=0;e<b.length;e++){var t=b[e];f(t.id,t.property),y.removeName(t.style,t.keyframe)}};s.push(o.join(C).then(w,w))}}function b(){E||(E=n.Windows.UI.ViewManagement.UISettings?new n.Windows.UI.ViewManagement.UISettings:{animationsEnabled:!0})}function C(t,n,i){try{for(var r=e.isAnimationEnabled(),a=l(t),u=l(n),c=[],d=0;d<a.length;d++)if(Array.isArray(a[d]))for(var h=0;h<a[d].length;h++)i(a[d][h],d,u,c,r);else i(a[d],d,u,c,r);return c.length?o.join(c):s.schedulePromiseNormal(null,"WinJS.UI._Animation._completeActionPromise").then(null,function(){})}catch(p){return o.wrapError(p)}}function w(e){return Array.isArray(e)?e.map(function(e){return w(e)}):e?(e.delay=R(e.delay),e.duration=R(e.duration),e):void 0}function I(e){return 1===N?e:w(e)}if(t.document){var S,E,x=r._browserStyleEquivalents,P=0,k=[],T=1,M=2,A=i.Class.define(function(e,t,n){this.cref=0,this.id=e,this.desc=t,this.removed={},this.prevStyles=t.props.map(function(e){return n[e[0]]}),this.prevNames=this.names=n[t.nameProp],t.styleCaches[e]=this},{destroy:function(e,t){var n=this.desc;delete n.styleCaches[this.id],t||(""===this.prevNames&&this.prevStyles.every(function(e){return""===e})?e[n.shorthandProp]="":(n.props.forEach(function(t,n){e[t[0]]=this.prevStyles[n]},this),e[n.nameProp]=this.prevNames))},removeName:function(e,t,n,i){var r=this.names,o=r.split(", "),s=o.lastIndexOf(t);s>=0&&(o.splice(s,1),this.names=r=o.join(", "),""===r&&this.desc.isTransition&&(r="none")),--this.cref?(e[this.desc.nameProp]=r,c(t)||(this.removed[t]=!0)):(n&&"none"===r&&(e[this.desc.nameProp]=r,d(n)),this.destroy(e,i))}}),O={shorthandProp:x.transition.scriptName,nameProp:x["transition-property"].scriptName,nameField:"property",props:[[x["transition-duration"].scriptName,"duration","ms"],[x["transition-timing-function"].scriptName,"timing",""],[x["transition-delay"].scriptName,"delay","ms"]],isTransition:!0,styleCaches:[]},D={shorthandProp:x.animation.scriptName,nameProp:x["animation-name"].scriptName,nameField:"keyframe",props:[[x["animation-duration"].scriptName,"duration","ms"],[x["animation-timing-function"].scriptName,"timing",""],[x["animation-delay"].scriptName,"delay","ms"],[x["animation-iteration-count"].scriptName,"","1"],[x["animation-direction"].scriptName,"","normal"],[x["animation-fill-mode"].scriptName,"","both"]],isTransition:!1,styleCaches:[]},L=0,B=function(){return b(),L+E.animationsEnabled>0},R=function(e){return e*N},N=1,F=0;i.Namespace._moduleDefine(e,"WinJS.UI",{disableAnimations:function(){L--},enableAnimations:function(){L++},isAnimationEnabled:{get:function(){return B},set:function(e){B=e}},_libraryDelay:{get:function(){return F},set:function(e){F=e}},executeAnimation:function(e,t){return C(e,I(t),y)},executeTransition:function(e,t){return C(e,I(t),v)},_animationTimeAdjustment:{get:function(){return R},set:function(e){R=e}}}),i.Namespace._moduleDefine(e,"WinJS.Utilities",{_fastAnimations:{get:function(){return.05===N},set:function(e){N=e?.05:1}},_slowAnimations:{get:function(){return 3===N},set:function(e){N=e?3:1}},_animationFactor:{get:function(){return N},set:function(e){N=e}}})}}),define("WinJS/Animations",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_WriteProfilerMark","./Utilities/_ElementUtilities","./Animations/_Constants","./Animations/_TransitionAnimation","./Promise"],function(e,t,n,i,r,o,s,a,l){"use strict";function u(e,t,n){return e.keyframe?e.keyframe:!n||e.left!==t.left||e.top!==t.top||e.rtlflip&&!t.rtlflip?null:e.rtlflip?d(n):n}function c(e,t){return t&&e.rtlflip?d(t):t}function d(e){var t=e+"-rtl";return function(n,i){return"ltr"===o._getComputedStyle(i).direction?e:t}}function h(e){return Array.isArray(e)||e instanceof t.NodeList||e instanceof t.HTMLCollection?e:e?[e]:[]}function p(e){for(var t=[],n=0;n<e.length;n++){var i={top:e[n].offsetTop,left:e[n].offsetLeft},r=o._getComputedStyle(e[n],null)[T.scriptName].split(",");6===r.length&&(i.left+=parseFloat(r[4]),i.top+=parseFloat(r[5])),t.push(i)}return t}function m(e,t,n,i){return function(r){for(var o=e,s=0;r>s;s++)t*=n,o+=t;return i&&(o=Math.min(o,i)),o}}function f(e,t){for(var n=0;n<t.length;n++)t[n].top-=e[n].offsetTop,t[n].left-=e[n].offsetLeft}function _(e,t,n){f(e,t);for(var i=0;i<e.length;i++)(0!==t[i].top||0!==t[i].left)&&(e[i].style[T.scriptName]="translate("+t[i].left+"px, "+t[i].top+"px)");return a.executeTransition(e,n)}function g(e,t,n,i,r,o,s,l){function u(e,t,n){if(e){var i={left:t+"px",top:"0px"},r={left:n+"px",top:"0px"};if(+e.length===e.length)for(var o=0,s=e.length;s>o;o++)c.push(e[o]),d.push(i),h.push(r);else c.push(e),d.push(i),h.push(r)}}var c=[],d=[],h=[],p=200,m=0!==t?0>t?-p:p:0,f=0!==n?0>n?-p:p:0;return u(r,t,n),u(o,m,f),u(s,2*m,2*f),u(l,3*m,3*f),d=new A(d),h=new A(h),a.executeTransition(c,[{property:T.cssName,delay:0,duration:350,timing:e,from:b(d),to:b(h)},{property:"opacity",delay:0,duration:350,timing:i?"steps(1, start)":"steps(1, end)",from:i?0:1,to:i?1:0}])}function v(e,t,n){function r(){y(e)}e=h(e),t=h(t);for(var s=0,l=e.length;l>s;s++){var u="rtl"===o._getComputedStyle(e[s]).direction;e[s].style[i._browserStyleEquivalents["transform-origin"].scriptName]=t[Math.min(t.length-1,s)][u?"rtl":"ltr"]}return a.executeTransition(e,n).then(r,r)}function y(e){for(var t=0,n=e.length;n>t;t++)e[t].style[i._browserStyleEquivalents["transform-origin"].scriptName]="",e[t].style[T.scriptName]="",e[t].style.opacity=""}function b(e,t){return t=t||"",function(n,i){var r=e.getOffset(n),s=r.left;return r.rtlflip&&"rtl"===o._getComputedStyle(i).direction&&(s=s.toString(),s="-"===s.charAt(0)?s.substring(1):"-"+s),t+"translate("+s+", "+r.top+")"}}function C(e,t){return t=t||"",function(n){var i=e[n];return"translate("+i.left+"px, "+i.top+"px) "+t}}function w(e,t){return function(n){var i=e[n];return 0===i.left&&0===i.top?t:null}}function I(e,t,n,i){var r=h(t),o=h(n),s=p(o);return new e(r,o,s,i)}function S(e){for(var n=[],i=0,r=e.length;r>i;i++){var o=e[i].getBoundingClientRect(),s=-(40+o.left),a=40+(t.innerWidth-o.right),l=t.innerHeight/2-o.top;n.push({ltr:s+"px "+l+"px",rtl:a+"px "+l+"px"})}return n}function E(e){r("WinJS.UI.Animation:"+e)}function x(e,n){var r=n.duration*a._animationFactor,o=i._browserStyleEquivalents.transition.scriptName;e.style[o]=r+"ms "+T.cssName+" "+n.timing,e.style[T.scriptName]=n.to;var s;return new l(function(n){var a=function(t){t.target===e&&t.propertyName===T.cssName&&s()},l=!1;s=function(){l||(t.clearTimeout(u),e.removeEventListener(i._browserEventEquivalents.transitionEnd,a),e.style[o]="",l=!0),n()};var u=t.setTimeout(function(){u=t.setTimeout(s,r)},50);e.addEventListener(i._browserEventEquivalents.transitionEnd,a)},function(){s()})}function P(){return{defaultResizeGrowTransition:{duration:350,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)"},defaultResizeShrinkTransition:{duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)"}}}function k(e,t,n){var r=P()[n.to>n.from?"defaultResizeGrowTransition":"defaultResizeShrinkTransition"];n=i._merge(n,{duration:void 0===n.duration?r.duration:n.duration,timing:void 0===n.timing?r.timing:n.timing});var s=n.actualSize-n.from,a=n.actualSize-n.to;n.anchorTrailingEdge||(s=-s,a=-a);var l="width"===n.dimension?"translateX":"translateY",u={duration:n.duration,timing:n.timing};e.style[T.scriptName]=l+"("+s+"px)",t.style[T.scriptName]=l+"("+-s+"px)",o._getComputedStyle(e).opacity,o._getComputedStyle(t).opacity;var c=i._merge(u,{to:l+"("+a+"px)"}),d=i._merge(u,{to:l+"("+-a+"px)"});return[{element:e,transition:c},{element:t,transition:d}]}var T=i._browserStyleEquivalents.transform,M=[{top:"0px",left:"11px",rtlflip:!0}],A=n.Class.define(function(e,t,n){n=n||M,Array.isArray(e)&&e.length>0?(this.offsetArray=e,1===e.length&&(this.keyframe=u(e[0],n[0],t))):e&&e.hasOwnProperty("top")&&e.hasOwnProperty("left")?(this.offsetArray=[e],this.keyframe=u(e,n[0],t)):(this.offsetArray=n,this.keyframe=c(n[0],t))},{getOffset:function(e){return e>=this.offsetArray.length&&(e=this.offsetArray.length-1),this.offsetArray[e]}},{supportedForProcessing:!1}),O=n.Class.define(function(e,t,n){this.revealedArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){E("expandAnimation,StartTM");var e=a.executeAnimation(this.revealedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?200:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}),t=_(this.affectedArray,this.offsetArray,{property:T.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return l.join([e,t]).then(function(){E("expandAnimation,StopTM")})}},{supportedForProcessing:!1}),D=n.Class.define(function(e,t,n){this.hiddenArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){E("collapseAnimation,StartTM");var e=a.executeAnimation(this.hiddenArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0}),t=_(this.affectedArray,this.offsetArray,{property:T.cssName,delay:this.hiddenArray.length>0?167:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return l.join([e,t]).then(function(){E("collapseAnimation,StopTM")})}},{supportedForProcessing:!1}),L=n.Class.define(function(e,t,n){this.elementArray=t,this.offsetArray=n},{execute:function(){return E("repositionAnimation,StartTM"),_(this.elementArray,this.offsetArray,{property:T.cssName,delay:m(0,33,1,250),duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){E("repositionAnimation,StopTM")})}},{supportedForProcessing:!1}),B=n.Class.define(function(e,t,n){this.addedArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){E("addToListAnimation,StartTM");var e=this.affectedArray.length>0?240:0,t=a.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:T.cssName,delay:e,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:e,duration:120,timing:"linear",from:0,to:1}]),n=_(this.affectedArray,this.offsetArray,{property:T.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return l.join([t,n]).then(function(){E("addToListAnimation,StopTM")})}},{supportedForProcessing:!1}),R=n.Class.define(function(e,t,n){this.deletedArray=e,this.remainingArray=t,this.offsetArray=n},{execute:function(){E("deleteFromListAnimation,StartTM");var e=a.executeAnimation(this.deletedArray,[{keyframe:"WinJS-scale-down",property:T.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:"none",to:"scale(0.85)"},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]),t=_(this.remainingArray,this.offsetArray,{property:T.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",
to:""});return l.join([e,t]).then(function(){E("deleteFromListAnimation,StopTM")})}},{supportedForProcessing:!1}),N=n.Class.define(function(e,t,n,i){this.addedArray=e,this.affectedArray=t,this.offsetArray=n;var r=h(i);this.deletedArray=r,this.deletedOffsetArray=p(r)},{execute:function(){E("_updateListAnimation,StartTM"),f(this.deletedArray,this.deletedOffsetArray);var e=0,t=a.executeAnimation(this.deletedArray,[{keyframe:w(this.deletedOffsetArray,"WinJS-scale-down"),property:T.cssName,delay:0,duration:120,timing:"cubic-bezier(0.11, 0.5, 0.24, .96)",from:C(this.deletedOffsetArray),to:C(this.deletedOffsetArray,"scale(0.85)")},{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:120,timing:"linear",from:1,to:0}]);this.deletedArray.length>0&&(e+=60);var n=_(this.affectedArray,this.offsetArray,{property:T.cssName,delay:e,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});this.affectedArray.length>0?e+=240:e&&(e+=60);var i=a.executeAnimation(this.addedArray,[{keyframe:"WinJS-scale-up",property:T.cssName,delay:e,duration:120,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"scale(0.85)",to:"none"},{keyframe:"WinJS-opacity-in",property:"opacity",delay:e,duration:120,timing:"linear",from:0,to:1}]);return l.join([t,n,i]).then(function(){E("_updateListAnimation,StopTM")})}},{supportedForProcessing:!1}),F=n.Class.define(function(e,t,n){this.addedArray=e,this.affectedArray=t,this.offsetArray=n},{execute:function(){E("addToSearchListAnimation,StartTM");var e=a.executeAnimation(this.addedArray,{keyframe:"WinJS-opacity-in",property:"opacity",delay:this.affectedArray.length>0?240:0,duration:117,timing:"linear",from:0,to:1}),t=_(this.affectedArray,this.offsetArray,{property:T.cssName,delay:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return l.join([e,t]).then(function(){E("addToSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),z=n.Class.define(function(e,t,n){this.deletedArray=e,this.remainingArray=t,this.offsetArray=n},{execute:function(){E("deleteFromSearchListAnimation,StartTM");var e=a.executeAnimation(this.deletedArray,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:93,timing:"linear",from:1,to:0}),t=_(this.remainingArray,this.offsetArray,{property:T.cssName,delay:this.deletedArray.length>0?60:0,duration:400,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return l.join([e,t]).then(function(){E("deleteFromSearchListAnimation,StopTM")})}},{supportedForProcessing:!1}),H=n.Class.define(function(e,t,n){this.elementArray=t,this.offsetArray=n},{execute:function(){return E("peekAnimation,StartTM"),_(this.elementArray,this.offsetArray,{property:T.cssName,delay:0,duration:2e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){E("peekAnimation,StopTM")})}},{supportedForProcessing:!1});n.Namespace._moduleDefine(e,"WinJS.UI.Animation",{createExpandAnimation:function(e,t){return I(O,e,t)},createCollapseAnimation:function(e,t){return I(D,e,t)},createRepositionAnimation:function(e){return I(L,null,e)},fadeIn:function(e){return E("fadeIn,StartTM"),a.executeTransition(e,{property:"opacity",delay:0,duration:250,timing:"linear",from:0,to:1}).then(function(){E("fadeIn,StopTM")})},fadeOut:function(e){return E("fadeOut,StartTM"),a.executeTransition(e,{property:"opacity",delay:0,duration:167,timing:"linear",to:0}).then(function(){E("fadeOut,StopTM")})},createAddToListAnimation:function(e,t){return I(B,e,t)},createDeleteFromListAnimation:function(e,t){return I(R,e,t)},_createUpdateListAnimation:function(e,t,n){return I(N,e,n,t)},createAddToSearchListAnimation:function(e,t){return I(F,e,t)},createDeleteFromSearchListAnimation:function(e,t){return I(z,e,t)},showEdgeUI:function(e,t,n){E("showEdgeUI,StartTM");var i=n&&"transition"===n.mechanism,r=new A(t,"WinJS-showEdgeUI",[{top:"-70px",left:"0px"}]);return a[i?"executeTransition":"executeAnimation"](e,{keyframe:r.keyframe,property:T.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:i?b(r):r.keyframe||b(r),to:"none"}).then(function(){E("showEdgeUI,StopTM")})},showPanel:function(e,t){E("showPanel,StartTM");var n=new A(t,"WinJS-showPanel",[{top:"0px",left:"364px",rtlflip:!0}]);return a.executeAnimation(e,{keyframe:n.keyframe,property:T.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||b(n),to:"none"}).then(function(){E("showPanel,StopTM")})},hideEdgeUI:function(e,t,n){E("hideEdgeUI,StartTM");var i=n&&"transition"===n.mechanism,r=new A(t,"WinJS-hideEdgeUI",[{top:"-70px",left:"0px"}]);return a[i?"executeTransition":"executeAnimation"](e,{keyframe:r.keyframe,property:T.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:i?b(r):r.keyframe||b(r)}).then(function(){E("hideEdgeUI,StopTM")})},hidePanel:function(e,t){E("hidePanel,StartTM");var n=new A(t,"WinJS-hidePanel",[{top:"0px",left:"364px",rtlflip:!0}]);return a.executeAnimation(e,{keyframe:n.keyframe,property:T.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:"none",to:n.keyframe||b(n)}).then(function(){E("hidePanel,StopTM")})},showPopup:function(e,t){E("showPopup,StartTM");var n=new A(t,"WinJS-showPopup",[{top:"50px",left:"0px"}]);return a.executeAnimation(e,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:83,duration:83,timing:"linear",from:0,to:1},{keyframe:n.keyframe,property:T.cssName,delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||b(n),to:"none"}]).then(function(){E("showPopup,StopTM")})},hidePopup:function(e){return E("hidePopup,StartTM"),a.executeAnimation(e,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:83,timing:"linear",from:1,to:0}).then(function(){E("hidePopup,StopTM")})},pointerDown:function(e){return E("pointerDown,StartTM"),a.executeTransition(e,{property:T.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.975, 0.975)"}).then(function(){E("pointerDown,StopTM")})},pointerUp:function(e){return E("pointerUp,StartTM"),a.executeTransition(e,{property:T.cssName,delay:0,duration:167,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}).then(function(){E("pointerUp,StopTM")})},dragSourceStart:function(e,t){E("dragSourceStart,StartTM");var n=a.executeTransition(e,[{property:T.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(1.05)"},{property:"opacity",delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:.65}]),i=a.executeTransition(t,{property:T.cssName,delay:0,duration:240,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"});return l.join([n,i]).then(function(){E("dragSourceStart,StopTM")})},dragSourceEnd:function(e,t,n){E("dragSourceEnd,StartTM");var i=new A(t,"WinJS-dragSourceEnd"),r=a.executeTransition(e,[{property:T.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:1}]),o=a.executeAnimation(e,{keyframe:i.keyframe,property:T.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:i.keyframe||b(i,"scale(1.05) "),to:"none"}),s=a.executeTransition(n,{property:T.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""});return l.join([r,o,s]).then(function(){E("dragSourceEnd,StopTM")})},enterContent:function(e,t,n){E("enterContent,StartTM");var i,r=new A(t,"WinJS-enterContent",[{top:"28px",left:"0px",rtlflip:!1}]);if(n&&"transition"===n.mechanism)i=a.executeTransition(e,[{property:T.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:b(r),to:"none"},{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1}]);else{var o=a.executeAnimation(e,{keyframe:r.keyframe,property:T.cssName,delay:0,duration:550,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:r.keyframe||b(r),to:"none"}),s=a.executeTransition(e,{property:"opacity",delay:0,duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});i=l.join([o,s])}return i.then(function(){E("enterContent,StopTM")})},exitContent:function(e,t){E("exitContent,StartTM");var n=new A(t,"WinJS-exit",[{top:"0px",left:"0px"}]),i=a.executeAnimation(e,t&&{keyframe:n.keyframe,property:T.cssName,delay:0,duration:117,timing:"linear",from:"none",to:n.keyframe||b(n)}),r=a.executeTransition(e,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return l.join([i,r]).then(function(){E("exitContent,StopTM")})},dragBetweenEnter:function(e,t){E("dragBetweenEnter,StartTM");var n=new A(t,null,[{top:"-40px",left:"0px"},{top:"40px",left:"0px"}]);return a.executeTransition(e,{property:T.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:b(n,"scale(0.95) ")}).then(function(){E("dragBetweenEnter,StopTM")})},dragBetweenLeave:function(e){return E("dragBetweenLeave,StartTM"),a.executeTransition(e,{property:T.cssName,delay:0,duration:200,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:"scale(0.95)"}).then(function(){E("dragBetweenLeave,StopTM")})},swipeSelect:function(e,t){E("swipeSelect,StartTM");var n=a.executeTransition(e,{property:T.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),i=a.executeAnimation(t,{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return l.join([n,i]).then(function(){E("swipeSelect,StopTM")})},swipeDeselect:function(e,t){E("swipeDeselect,StartTM");var n=a.executeTransition(e,{property:T.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:""}),i=a.executeAnimation(t,{keyframe:"WinJS-opacity-out",property:"opacity",delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:1,to:0});return l.join([n,i]).then(function(){E("swipeDeselect,StopTM")})},swipeReveal:function(e,t){E("swipeReveal,StartTM");var n=new A(t,null,[{top:"25px",left:"0px"}]);return a.executeTransition(e,{property:T.cssName,delay:0,duration:300,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",to:b(n)}).then(function(){E("swipeReveal,StopTM")})},enterPage:function(e,t){E("enterPage,StartTM");var n=new A(t,"WinJS-enterPage",[{top:"28px",left:"0px",rtlflip:!1}]),i=a.executeAnimation(e,{keyframe:n.keyframe,property:T.cssName,delay:m(0,83,1,333),duration:1e3,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||b(n),to:"none"}),r=a.executeTransition(e,{property:"opacity",delay:m(0,83,1,333),duration:170,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1});return l.join([i,r]).then(function(){E("enterPage,StopTM")})},exitPage:function(e,t){E("exitPage,StartTM");var n=new A(t,"WinJS-exit",[{top:"0px",left:"0px"}]),i=a.executeAnimation(e,t&&{keyframe:n.keyframe,property:T.cssName,delay:0,duration:117,timing:"linear",from:"none",to:n.keyframe||b(n)}),r=a.executeTransition(e,{property:"opacity",delay:0,duration:117,timing:"linear",to:0});return l.join([i,r]).then(function(){E("exitPage,StopTM")})},crossFade:function(e,t){E("crossFade,StartTM");var n=a.executeTransition(e,{property:"opacity",delay:0,duration:167,timing:"linear",to:1}),i=a.executeTransition(t,{property:"opacity",delay:0,duration:167,timing:"linear",to:0});return l.join([n,i]).then(function(){E("crossFade,StopTM")})},createPeekAnimation:function(e){return I(H,null,e)},updateBadge:function(e,t){E("updateBadge,StartTM");var n=new A(t,"WinJS-updateBadge",[{top:"24px",left:"0px"}]);return a.executeAnimation(e,[{keyframe:"WinJS-opacity-in",property:"opacity",delay:0,duration:367,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:0,to:1},{keyframe:n.keyframe,property:T.cssName,delay:0,duration:1333,timing:"cubic-bezier(0.1, 0.9, 0.2, 1)",from:n.keyframe||b(n),to:"none"}]).then(function(){E("updateBadge,StopTM")})},turnstileForwardIn:function(e){E("turnstileForwardIn,StartTM"),e=h(e);var t=S(e);return v(e,t,[{property:T.cssName,delay:m(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(80deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:m(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){E("turnstileForwardIn,StopTM")})},turnstileForwardOut:function(e){E("turnstileForwardOut,StartTM"),e=h(e);var t=S(e);return v(e,t,[{property:T.cssName,delay:m(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(600px) rotateY(0deg)",to:"perspective(600px) rotateY(-50deg)"},{property:"opacity",delay:m(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){E("turnstileForwardOut,StopTM")})},turnstileBackwardIn:function(e){E("turnstileBackwardIn,StartTM"),e=h(e);var t=S(e);return v(e,t,[{property:T.cssName,delay:m(0,50,1,1e3),duration:300,timing:"cubic-bezier(0.01,0.975,0.4775,0.9775)",from:"perspective(600px) rotateY(-50deg)",to:"perspective(600px) rotateY(0deg)"},{property:"opacity",delay:m(0,50,1,1e3),duration:300,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){E("turnstileBackwardIn,StopTM")})},turnstileBackwardOut:function(e){E("turnstileBackwardOut,StartTM"),e=h(e);var t=S(e);return v(e,t,[{property:T.cssName,delay:m(0,50,1,1e3),duration:128,timing:"cubic-bezier(0.4925,0.01,0.7675,-0.01)",from:"perspective(800px) rotateY(0deg)",to:"perspective(800px) rotateY(80deg)"},{property:"opacity",delay:m(0,50,1,1e3),duration:128,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){E("turnstileBackwardOut,StopTM")})},slideDown:function(e){return E("slideDown,StartTM"),v(e,{ltr:"",rtl:""},[{property:T.cssName,delay:0,duration:250,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"translate(0px, 0px)",to:"translate(0px, 200px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){E("slideDown,StopTM")})},slideUp:function(e){return E("slideUp,StartTM"),v(e,{ltr:"",rtl:""},[{property:T.cssName,delay:0,duration:350,timing:"cubic-bezier(0.17,0.79,0.215,1.0025)",from:"translate(0px, 200px)",to:"translate(0px, 0px)"},{property:"opacity",delay:m(0,34,1,1e3),duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]).then(function(){E("slideUp,StopTM")})},slideRightIn:function(e,n,i,r){return E("slideRightIn,StartTM"),g("cubic-bezier(0.17,0.79,0.215,1.0025)",-t.innerWidth,0,!0,e,n,i,r).then(function(){E("slideRightIn,StopTM")})},slideRightOut:function(e,n,i,r){return E("slideRightOut,StartTM"),g("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,t.innerWidth,!1,e,n,i,r).then(function(){E("slideRightOut,StopTM")})},slideLeftIn:function(e,n,i,r){return E("slideLeftIn,StartTM"),g("cubic-bezier(0.17,0.79,0.215,1.0025)",t.innerWidth,0,!0,e,n,i,r).then(function(){E("slideLeftIn,StopTM")})},slideLeftOut:function(e,n,i,r){return E("slideLeftOut,StartTM"),g("cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",0,-t.innerWidth,!1,e,n,i,r).then(function(){E("slideLeftOut,StopTM")})},continuumForwardIn:function(e,t,n){return E("continuumForwardIn,StartTM"),l.join([a.executeTransition(e,[{property:T.cssName,delay:0,duration:350,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(0.5, 0.5)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),a.executeTransition(t,[{property:T.cssName,delay:0,duration:350,timing:"cubic-bezier(0.24,1.15,0.11,1.1575)",from:"translate(0px, 225px)",to:"translate(0px, 0px)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),v(n,{ltr:"0px 50%",rtl:"100% 50%"},[{property:T.cssName,delay:0,duration:350,timing:"cubic-bezier(0,0.62,0.8225,0.9625)",from:"rotateX(80deg) scale(1.5, 1.5)",to:"rotateX(0deg) scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:350,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){E("continuumForwardIn,StopTM")})},continuumForwardOut:function(e,t){return E("continuumForwardOut,StartTM"),l.join([a.executeTransition(e,[{property:T.cssName,delay:0,duration:120,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(1.1, 1.1)"},{property:"opacity",delay:0,duration:120,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]),v(t,{ltr:"0px 100%",rtl:"100% 100%"},[{property:T.cssName,delay:0,duration:152,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"rotateX(0deg) scale(1.0, 1.0) translate(0px, 0px)",to:"rotateX(80deg) scale(1.5, 1.5) translate(0px, 150px)"},{property:"opacity",delay:0,duration:152,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}])]).then(function(){E("continuumForwardOut,StopTM")})},continuumBackwardIn:function(e,t){return E("continuumBackwardIn,StartTM"),l.join([a.executeTransition(e,[{property:T.cssName,delay:0,duration:200,timing:"cubic-bezier(0.33, 0.18, 0.11, 1)",from:"scale(1.25, 1.25)",to:"scale(1.0, 1.0)"},{property:"opacity",delay:0,duration:200,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}]),v(t,{ltr:"0px 50%",rtl:"100% 50%"},[{property:T.cssName,delay:0,duration:250,timing:"cubic-bezier(0.2975, 0.7325, 0.4725, 0.99)",from:"rotateX(80deg) translate(0px, -100px)",to:"rotateX(0deg) translate(0px, 0px)"},{property:"opacity",delay:0,duration:250,timing:"cubic-bezier(0, 2, 0, 2)",from:0,to:1}])]).then(function(){E("continuumBackwardIn,StopTM")})},continuumBackwardOut:function(e){return E("continuumBackwardOut,StartTM"),a.executeTransition(e,[{property:T.cssName,delay:0,duration:167,timing:"cubic-bezier(0.3825,0.0025,0.8775,-0.1075)",from:"scale(1.0, 1.0)",to:"scale(0.5, 0.5)"},{property:"opacity",delay:0,duration:167,timing:"cubic-bezier(1,-0.42,0.995,-0.425)",from:1,to:0}]).then(function(){E("continuumBackwardOut,StopTM")})},drillInIncoming:function(e){return E("drillInIncoming,StartTM"),a.executeTransition(e,[{property:T.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(0.84)",to:"scale(1.0)"},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:0,to:1}]).then(function(){E("drillInIncoming,StopTM")})},drillInOutgoing:function(e){return E("drillInOutgoing,StartTM"),a.executeTransition(e,[{property:T.cssName,delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(1.0)",to:"scale(1.29)"},{property:"opacity",delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:1,to:0}]).then(function(){E("drillInOutgoing,StopTM")})},drillOutIncoming:function(e){return E("drillOutIncoming,StartTM"),a.executeTransition(e,[{property:T.cssName,delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(1.29)",to:"scale(1.0)"},{property:"opacity",delay:0,duration:500,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:0,to:1}]).then(function(){E("drillOutIncoming,StopTM")})},drillOutOutgoing:function(e){return E("drillOutOutgoing,StartTM"),a.executeTransition(e,[{property:T.cssName,delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:"scale(1.0)",to:"scale(0.84)"},{property:"opacity",delay:0,duration:233,timing:"cubic-bezier(0.1,0.9,0.2,1)",from:1,to:0}]).then(function(){E("drillOutOutgoing,StopTM")})},createPageNavigationAnimations:function(t,n,i){function r(){return l.wrap()}return{exit:r,entrance:e.enterPage}},_resizeTransition:function(e,t,n){if(n.to!==n.from&&a.isAnimationEnabled()){for(var i=k(e,t,n),r=[],o=0,s=i.length;s>o;o++)r.push(x(i[o].element,i[o].transition));return l.join(r)}return l.as()},_commandingSurfaceOpenAnimation:function(e){if(!a.isAnimationEnabled())return l.as();var t=e.actionAreaClipper,n=e.actionArea,r=e.overflowAreaClipper,s=e.overflowArea,u=e.oldHeight,c=e.newHeight,d=e.overflowAreaHeight,h=e.menuPositionedAbove,p=c-u,m=[],f=P().defaultResizeGrowTransition;if(h){n.style[T.scriptName]="translateY("+p+"px)",o._getComputedStyle(n).opacity;var _=i._merge(f,{to:"translateY(0px)"});m.push({element:n,transition:_})}else m=k(t,n,{from:u,to:c,actualSize:c,dimension:"height",anchorTrailingEdge:!1});r.style[T.scriptName]="translateY("+(h?p:-p)+"px)",s.style[T.scriptName]="translateY("+(h?d:-d)+"px)",o._getComputedStyle(r).opacity,o._getComputedStyle(s).opacity;for(var g=[],v=0,y=m.length;y>v;v++)g.push(x(m[v].element,m[v].transition));var b=i._merge(f,{to:"translateY(0px)"});return g.push(x(r,b)),g.push(x(s,b)),l.join(g)},_commandingSurfaceCloseAnimation:function(e){if(!a.isAnimationEnabled())return l.as();var t=e.actionAreaClipper,n=e.actionArea,r=e.overflowAreaClipper,s=e.overflowArea,u=e.oldHeight,c=e.newHeight,d=e.overflowAreaHeight,h=e.menuPositionedAbove,p=c-u,m=[],f=P().defaultResizeShrinkTransition;if(h){n.style[T.scriptName]="translateY(0px)",o._getComputedStyle(n).opacity;var _=i._merge(f,{to:"translateY("+-p+"px)"});m.push({element:n,transition:_})}else m=k(t,n,{from:u,to:c,actualSize:u,dimension:"height",anchorTrailingEdge:!1});r.style[T.scriptName]="translateY(0px)",s.style[T.scriptName]="translateY(0px)",o._getComputedStyle(r).opacity,o._getComputedStyle(s).opacity;for(var g=[],v=0,y=m.length;y>v;v++)g.push(x(m[v].element,m[v].transition));var b=i._merge(f,{to:"translateY("+(h?-p:p)+"px)"}),C=i._merge(f,{to:"translateY("+(h?d:-d)+"px)"});return g.push(x(r,b)),g.push(x(s,C)),l.join(g)}})}),define("WinJS/Binding/_BindingParser",["exports","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../ControlProcessor/_OptionsLexer","../ControlProcessor/_OptionsParser"],function(e,t,n,i,r,o,s,a,l){"use strict";function u(e,t){s("WinJS.Binding:bindingParser,StartTM");var n=h.lexer(e),i=new m.BindingInterpreter(n,e,t||{}),r=i.run();return s("WinJS.Binding:bindingParser,StopTM"),r}function c(e){s("WinJS.Binding:bindingParser,StartTM");var t=h.lexer(e),n=new m.BindingParser(t,e),i=n.run();return s("WinJS.Binding:bindingParser,StopTM"),i}var d={get invalidBinding(){return"Invalid binding:'{0}'. Expected to be '<destProp>:<sourceProp>;'. {1}"},get bindingInitializerNotFound(){return"Initializer not found:'{0}'"}},h=t.Namespace.defineWithParent(null,null,{lexer:t.Namespace._lazy(function(){return a._optionsLexer}),tokenType:t.Namespace._lazy(function(){return a._optionsLexer.tokenType})}),p=n.requireSupportedForProcessing,m=t.Namespace.defineWithParent(null,null,{BindingInterpreter:t.Namespace._lazy(function(){return t.Class.derive(l.optionsParser._BaseInterpreter,function(e,t,n){this._initialize(e,t,n)},{_error:function(e){throw new i("WinJS.Binding.ParseError",o._formatString(d.invalidBinding,this._originalSource,e))},_evaluateInitializerName:function(){if(this._current.type===h.tokenType.identifier){var e=this._evaluateIdentifierExpression();return r.log&&!e&&r.log(o._formatString(d.bindingInitializerNotFound,this._originalSource),"winjs binding","error"),p(e)}},_evaluateValue:function(){switch(this._current.type){case h.tokenType.stringLiteral:case h.tokenType.numberLiteral:var e=this._current.value;return this._read(),e;default:return void this._unexpectedToken(h.tokenType.stringLiteral,h.tokenType.numberLiteral)}},_readBindDeclarations:function(){for(var e=[];;)switch(this._current.type){case h.tokenType.identifier:case h.tokenType.thisKeyword:e.push(this._readBindDeclaration());break;case h.tokenType.semicolon:this._read();break;case h.tokenType.eof:return e;default:return void this._unexpectedToken(h.tokenType.identifier,h.tokenType.semicolon,h.tokenType.eof)}},_readBindDeclaration:function(){var e=this._readDestinationPropertyName();this._read(h.tokenType.colon);var t=this._readSourcePropertyName(),n=this._evaluateInitializerName();return{destination:e,source:t,initializer:n}},_readDestinationPropertyName:function(){return this._readIdentifierExpression()},_readSourcePropertyName:function(){return this._readIdentifierExpression()},run:function(){return this._readBindDeclarations()}},{supportedForProcessing:!1})}),BindingParser:t.Namespace._lazy(function(){return t.Class.derive(m.BindingInterpreter,function(e,t){this._initialize(e,t,{})},{_readInitializerName:function(){return this._current.type===h.tokenType.identifier?this._readIdentifierExpression():void 0},_readBindDeclaration:function(){var e=this._readDestinationPropertyName();this._read(h.tokenType.colon);var t=this._readSourcePropertyName(),n=this._readInitializerName();return{destination:e,source:t,initializer:n}}},{supportedForProcessing:!1})})});t.Namespace._moduleDefine(e,"WinJS.Binding",{_bindingParser:u,_bindingParser2:c})}),define("WinJS/Binding/_DomWeakRefTable",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Scheduler"],function(e,t,n,i,r,o){"use strict";function s(){0===p&&(h=0);var e,t,n=Object.keys(f),i=Date.now()-m;for(e=0,t=n.length;t>e;e++){var r=n[e];f[r].time<i&&delete f[r]}l()}function a(){t.Debug&&t.Debug.debuggerEnabled&&_||h||(0===p?(o.schedule(s,o.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),h=1):h=t.setInterval(s,p))}function l(){t.Debug&&t.Debug.debuggerEnabled&&_||(0===p?h||0!==Object.keys(f).length&&(o.schedule(s,o.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),h=1):h&&0===Object.keys(f).length&&(t.clearInterval(h),h=0))}function u(e,t){return f[t]={element:e,time:Date.now()},a(),t}function c(e){if(g){var n=f[e];return n?n.element:t.document.getElementById(e)}var i=t.document.getElementById(e);if(i)delete f[e],l();else{var n=f[e];n&&(n.time=Date.now(),i=n.element)}return i}if(n.Windows.Foundation.Uri&&n.msSetWeakWinRTProperty&&n.msGetWeakWinRTProperty){var d=new n.Windows.Foundation.Uri("about://blank");return void i.Namespace._moduleDefine(e,"WinJS.Utilities",{_createWeakRef:function(e,t){return n.msSetWeakWinRTProperty(d,t,e),t},_getWeakRefElement:function(e){return n.msGetWeakWinRTProperty(d,e)}})}var h,p=500,m=1e3,f={},_=!0,g=!1;i.Namespace._moduleDefine(e,"WinJS.Utilities",{_DOMWeakRefTable_noTimeoutUnderDebugger:{get:function(){return _},set:function(e){_=e}},_DOMWeakRefTable_sweepPeriod:{get:function(){return p},set:function(e){p=e}},_DOMWeakRefTable_timeout:{get:function(){return m},set:function(e){m=e}},_DOMWeakRefTable_tableSize:{get:function(){return Object.keys(f).length}},_DOMWeakRefTable_fastLoadPath:{get:function(){return g},set:function(e){g=e}},_createWeakRef:u,_getWeakRefElement:c})}),define("WinJS/Binding/_Data",["exports","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Promise","../Scheduler","./_DomWeakRefTable"],function(e,t,n,i,r,o,s,a,l,u){"use strict";var c={get exceptionFromBindingInitializer(){return"Exception thrown from binding initializer: {0}"},get propertyIsUndefined(){return"{0} is undefined"},get unsupportedDataTypeForBinding(){return"Unsupported data type"}},d={_listeners:null,_pendingNotifications:null,_notifyId:0,_getObservable:function(){return this},_cancel:function(e){var t=this._pendingNotifications,n=!1;if(t)for(var i=Object.keys(t),r=i.length-1;r>=0;r--){var o=t[i[r]];o.target===e&&(o.promise&&(o.promise.cancel(),o.promise=null),delete t[i[r]],n=!0)}return n},notify:function(e,t,n){var i=this._listeners&&this._listeners[e];if(i){var r=this;r._cancel(e),r._pendingNotifications=r._pendingNotifications||{};var u=r._notifyId++,d=r._pendingNotifications[u]={target:e},h=function(){delete r._pendingNotifications[u]};return d.promise=l.schedulePromiseNormal(null,"WinJS.Binding.observableMixin.notify").then(function(){for(var e=0,r=i.length;r>e&&d.promise;e++)try{i[e](t,n)}catch(a){o.log&&o.log(s._formatString(c.exceptionFromBindingInitializer,a.toString()),"winjs binding","error")}return h(),t}),d.promise}return a.as()},bind:function(e,t){this._listeners=this._listeners||{};for(var n=this._listeners[e]=this._listeners[e]||[],i=!1,r=0,o=n.length;o>r;r++)if(n[r]===t){i=!0;break}return i||(n.push(t),t(w(this[e]))),this},unbind:function(e,t){if(this._listeners=this._listeners||{},e&&t){var n=this._listeners[e];if(n){for(var i,r=0,o=n.length;o>r;r++)n[r]!==t&&(i=i||[]).push(n[r]);this._listeners[e]=i}}else if(e)this._cancel(e),delete this._listeners[e];else{var s=this;if(s._pendingNotifications){var a=s._pendingNotifications;s._pendingNotifications={},Object.keys(a).forEach(function(e){var t=a[e];t.promise&&t.promise.cancel()})}this._listeners={}}return this}},h={_backingData:null,_initObservable:function(e){this._backingData=e||{}},getProperty:function(e){var t=this._backingData[e];return o.log&&void 0===t&&o.log(s._formatString(c.propertyIsUndefined,e),"winjs binding","warn"),C(t)},setProperty:function(e,t){return this.updateProperty(e,t),this},addProperty:function(e,t){return this[e]||Object.defineProperty(this,e,{get:function(){return this.getProperty(e)},set:function(t){this.setProperty(e,t)},enumerable:!0,configurable:!0}),this.setProperty(e,t)},updateProperty:function(e,t){var n=this._backingData[e],i=w(t);return n!==i&&(this._backingData[e]=i,this._backingData[e]===i)?this.notify(e,i,n):a.as()},removeProperty:function(e){var t,n=this._backingData[e];try{delete this._backingData[e]}catch(i){}try{delete this[e]}catch(i){}return this.notify(e,t,n),this}};Object.keys(d).forEach(function(e){h[e]=d[e]});var p=function(e,t){return g(e,t)},m=0,f=function(){return"bindHandler"+m++},_=function(e,n){if(!t.msGetWeakWinRTProperty)return e;var i=f();return u._getWeakRefElement(n)[i]=e,function(e,t){var r=u._getWeakRefElement(n);r&&r[i](e,t)}},g=function(e,t,n){function i(){a&&a.forEach(function(e){e.source.unbind(e.prop,e.listener)}),a=null}function r(e){s[e]&&(s[e].complexBind.cancel(),delete s[e])}if(e=C(e),!e)return{cancel:function(){},empty:!0};var o;n||(n=f(),o={},u._createWeakRef(o,n));var s={},a=null;return Object.keys(t).forEach(function(i){var l=t[i];if(l instanceof Function)l=_(l,n),l.bindState=o,a=a||[],a.push({source:e,prop:i,listener:l}),e.bind(i,l);else{var u=function(e){r(i);var t=g(C(e),l,n);if(t.empty){var o=function(e){Object.keys(e).forEach(function(t){var n=e[t];n instanceof Function?n(void 0,void 0):o(n)})};o(l)}s[i]={source:e,complexBind:t}};u=_(u,n),u.bindState=o,a=a||[],a.push({source:e,prop:i,listener:u}),e.bind(i,u)}}),{cancel:function(){i(),Object.keys(s).forEach(function(e){r(e)})}}},v=n.Class.mix(function(e){this._initObservable(e),Object.defineProperties(this,y(e))},h),y=function(e){function t(e){n[e]={get:function(){return this.getProperty(e)},set:function(t){this.setProperty(e,t)},enumerable:!0,configurable:!0}}for(var n={};e&&e!==Object.prototype;)Object.keys(e).forEach(t),e=Object.getPrototypeOf(e);return n},b=function(e){if(!(!e||"object"!=typeof e||e instanceof Date||Array.isArray(e)))return n.Class.mix(function(t){this._initObservable(t||Object.create(e))},h,y(e));if(i.validation)throw new r("WinJS.Binding.UnsupportedDataType",s._formatString(c.unsupportedDataTypeForBinding))},C=function(e){if(!e)return e;var t=typeof e;if("object"!==t||e instanceof Date||Array.isArray(e))return e;if(e._getObservable)return e._getObservable();var n=new v(e);return n.backingData=e,Object.defineProperty(e,"_getObservable",{value:function(){return n},enumerable:!1,writable:!1}),n},w=function(e){return e&&e.backingData?e.backingData:e};n.Namespace._moduleDefine(e,"WinJS.Binding",{mixin:{value:h,enumerable:!0,writable:!0,configurable:!0},dynamicObservableMixin:{value:h,enumerable:!0,writable:!0,configurable:!0},observableMixin:{value:d,enumerable:!0,writable:!0,configurable:!0},expandProperties:y,define:b,as:C,unwrap:w,bind:p})}),define("WinJS/Binding/_Declarative",["exports","../Core/_Global","../Core/_WinRT","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Promise","../Utilities/_ElementUtilities","./_BindingParser","./_Data","./_DomWeakRefTable"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p){"use strict";function m(e,t){var n=e._autoDispose;n&&n.push(t)}function f(e){e._autoDispose=(e._autoDispose||[]).filter(function(e){return e()})}function _(e,t){return e?e.winBindingToken===t?e:void(s.log&&s.log(a._formatString(z.duplicateBindingDetected,e.id),"winjs binding","error")):e}function g(e){if(e.winBindingToken)return e.winBindingToken;var t="_win_bind"+N++;return Object.defineProperty(e,"winBindingToken",{configurable:!1,writable:!1,enumerable:!1,value:t}),t}function v(e,t,n,i,r,o,s){var a=e.initializer;if(a&&(a=a.winControl||a["data-win-control"]||a),
a instanceof Function){var l=a(i,e.source,r,e.destination);return s&&(l&&l.cancel?s.bindings.push(function(){l.cancel()}):s.nocache=!0),l}a&&a.render&&(o.count++,s&&(s.nocache=!0),W(a.render).call(a,x(i,e.source),r).then(function(){o.checkComplete()}))}function y(e,t,n,i,r,o){var l,u=!0,c=!1;f(i);var d=function(){if(!c){var n=_(p._getWeakRefElement(e),t);return n||(s.log&&s.log(a._formatString(z.elementNotFound,e),"winjs binding","info"),l&&l.cancel()),n}},h=function(e){var t=d();t&&P(t,r.destination,e),u&&(n.checkComplete(),u=!1)};if(m(i,d),l=D(i,r.source,h)){var g=l.cancel;l.cancel=function(){return c=!0,g.call(l)},o&&o.bindings.push(function(){l.cancel()})}return l}function b(e,n,i,r,o,s,a){var l;return r!==t&&(r=h.as(r)),r._getObservable&&(l=r._getObservable()),l?(s.count++,y(n,i,s,l,e,a)):void P(o,e.destination,x(r,e.source))}function C(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n],l=i.destination;if(1===l.length&&"id"===l[0]){if(r.validation)throw new o("WinJS.Binding.IdBindingNotSupported",a._formatString(z.idBindingNotSupported,t));s.log&&s.log(a._formatString(z.idBindingNotSupported,t),"winjs binding","error"),e.splice(n,1)}}return e}function w(e,n){if(n){var i,r=n.expressions[e];return r||(i=C(d._bindingParser(e,t),e),n.expressions[e]=i),i||(i=r),i}return C(d._bindingParser(e,t),e)}function I(e,n,i,r,o,s){l("WinJS.Binding:processAll,StartTM");var a,u={count:0,checkComplete:function(){this.count--,0===this.count&&(l("WinJS.Binding:processAll,StopTM"),s())}},d=e||t.document.body,h="[data-win-bind],[data-win-control]",m=d.querySelectorAll(h);i||!d.getAttribute("data-win-bind")&&!d.winControl||(a=d),u.count++;var f=n||t;p._DOMWeakRefTable_fastLoadPath=!0;try{var _=c.data(d);_.winBindings=_.winBindings||[];for(var y=a?-1:0,C=m.length;C>y;y++){var I=0>y?a:m[y];if(I.winControl&&I.winControl.constructor&&I.winControl.constructor.isDeclarativeControlContainer){y+=I.querySelectorAll(h).length;var E=I.winControl.constructor.isDeclarativeControlContainer;"function"==typeof E&&(E=W(E))(I.winControl,function(e){return S(e,n,!1,r,o)})}if(I.hasAttribute("data-win-bind")){var x=I.getAttribute("data-win-bind"),P=w(x,r);if(!P.implemented){for(var k=0,T=P.length;T>k;k++){var M=P[k];M.initializer=M.initializer||o,M.initializer?M.implementation=v:M.implementation=b}P.implemented=!0}u.count++;var A=g(I),O=F?A:I.id;O||(I.id=O=A),p._createWeakRef(I,O);var D=c.data(I);D.winBindings=null;var L;r&&r.elements&&(L=r.elements[O],L||(r.elements[O]=L={bindings:[]}));for(var B=0,R=P.length;R>B;B++){var N=P[B],z=N.implementation(N,O,A,f,I,u,L);z&&(D.winBindings=D.winBindings||[],D.winBindings.push(z),_.winBindings.push(z))}u.count--}}}finally{p._DOMWeakRefTable_fastLoadPath=!1}u.checkComplete()}function S(e,t,n,i,r){return new u(function(o,s,a){I(e,t,n,i,r,o,s,a)}).then(null,function(e){return s.log&&s.log(a._formatString(z.errorInitializingBindings,e&&e.message),"winjs binding","error"),u.wrapError(e)})}function E(e){var n=function(n,i,r,o,l){var u=g(r),c=F?u:r.id;c||(r.id=c=u),p._createWeakRef(r,c);var d;if(n!==t&&(n=h.as(n)),n._getObservable&&(d=n._getObservable()),d){var m=D(h.as(n),i,function(t){var n=_(p._getWeakRefElement(c),u);n?P(n,o,e(W(t))):m&&(s.log&&s.log(a._formatString(z.elementNotFound,c),"winjs binding","info"),m.cancel())});return m}var f=x(n,i);f!==l&&P(r,o,e(f))};return H(n)}function x(e,n){if(e!==t&&(e=W(e)),n)for(var i=0,r=n.length;r>i&&null!==e&&void 0!==e;i++)e=W(e[n[i]]);return e}function P(e,n,i){W(i),e=W(e);for(var r=0,o=n.length-1;o>r;r++){if(e=W(e[n[r]]),!e)return void(s.log&&s.log(a._formatString(z.propertyDoesNotExist,n[r],n.join(".")),"winjs binding","error"));if(e instanceof t.Node)return void(s.log&&s.log(a._formatString(z.nestedDOMElementBindingNotSupported,n[r],n.join(".")),"winjs binding","error"))}if(0===n.length)return void(s.log&&s.log(z.cannotBindToThis,"winjs binding","error"));var l=n[n.length-1];s.log&&void 0===e[l]&&s.log(a._formatString(z.creatingNewProperty,l,n.join(".")),"winjs binding","warn"),e[l]=i}function k(e,t,n){return e=W(e),t&&1===t.length&&t[0]?void e.setAttribute(t[0],n):void(s.log&&s.log(z.attributeBindingSingleProperty,"winjs binding","error"))}function T(e,n,i,r,o){var l=g(i),u=F?l:i.id;u||(i.id=u=l),p._createWeakRef(i,u);var c;if(e!==t&&(e=h.as(e)),e._getObservable&&(c=e._getObservable()),c){var d=0,m=D(c,n,function(e){if(1!==++d||e!==o){var t=_(p._getWeakRefElement(u),l);t?k(t,r,W(e)):m&&(s.log&&s.log(a._formatString(z.elementNotFound,u),"winjs binding","info"),m.cancel())}});return m}var f=x(e,n);f!==o&&k(i,r,f)}function M(e,t,n,i){return k(n,i,x(e,t))}function A(e,t,n){n=W(n);var i=x(e,t);Array.isArray(i)?i.forEach(function(e){c.addClass(n,e)}):i&&c.addClass(n,i)}function O(e,t,n,i,r){return U(e,t,n,i,r)}function D(e,t,n){if(t.length>1){for(var i={},r=i,o=0,s=t.length-1;s>o;o++)r=r[t[o]]={};return r[t[t.length-1]]=n,h.bind(e,i,!0)}return 1===t.length?(e.bind(t[0],n,!0),{cancel:function(){e.unbind(t[0],n),this.cancel=L}}):void n(e)}function L(){}function B(e,t,n,i){return P(n,i,x(e,t)),{cancel:L}}function R(e){return H(e)}var N=1e3*Math.random()>>0,F=n.msSetWeakWinRTProperty&&n.msGetWeakWinRTProperty,z={get attributeBindingSingleProperty(){return'Attribute binding requires a single destination attribute name, often in the form "this[\'aria-label\']" or "width".'},get cannotBindToThis(){return"Can't bind to 'this'."},get creatingNewProperty(){return"Creating new property {0}. Full path:{1}"},get duplicateBindingDetected(){return"Binding against element with id {0} failed because a duplicate id was detected."},get elementNotFound(){return"Element not found:{0}"},get errorInitializingBindings(){return"Error initializing bindings: {0}"},get propertyDoesNotExist(){return"{0} doesn't exist. Full path:{1}"},get idBindingNotSupported(){return"Declarative binding to ID field is not supported. Initializer: {0}"},get nestedDOMElementBindingNotSupported(){return"Binding through a property {0} of type HTMLElement is not supported, Full path:{1}."}},H=r.markSupportedForProcessing,W=r.requireSupportedForProcessing,U=E(function(e){return e});i.Namespace._moduleDefine(e,"WinJS.Binding",{processAll:S,oneTime:R(B),defaultBind:R(O),converter:E,initializer:R,getValue:x,setAttribute:R(T),setAttributeOneTime:R(M),addClassOneTime:R(A)})}),define("WinJS/Binding",["./Binding/_BindingParser","./Binding/_Data","./Binding/_Declarative","./Binding/_DomWeakRefTable"],function(){}),define("WinJS/BindingTemplate/_DataTemplateCompiler",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_ErrorFromName","../Core/_Log","../Core/_Resources","../Core/_WriteProfilerMark","../Binding/_BindingParser","../Binding/_Declarative","../ControlProcessor","../ControlProcessor/_OptionsParser","../Fragments","../Promise","../_Signal","../Utilities/_Dispose","../Utilities/_SafeHtml","../Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,m,f,_,g){"use strict";if(t.document){var v={get attributeBindingSingleProperty(){return'Attribute binding requires a single destination attribute name, often in the form "this[\'aria-label\']" or "width".'},get cannotBindToThis(){return"Can't bind to 'this'."},get idBindingNotSupported(){return"Declarative binding to ID field is not supported. Initializer: {0}"}};n.Namespace._moduleDefine(e,"WinJS.Binding",{_TemplateCompiler:n.Namespace._lazy(function(){function e(e,t,n){var i=g.data(e).bindTokens;i&&i.forEach(function(e){e&&e.cancel&&e.cancel()}),t&&t.cancel(),n&&n.cancel()}function y(e,t){return function(n){return u.processAll(n,e,!1,null,t)}}function b(e){return e=Z(e),e instanceof t.Node?null:e}function C(e,t){var n=-1!==e.indexOf("\n"),i=arguments,o=e.replace(pe,function(o,s,a,l,u,c,d){if(u||c)throw new r("Format:MalformedInputString","Did you forget to escape a: "+(u||c)+" at: "+d);if(s)return"{";if(a)return"}";var h,p=+l;if(h=p===+p?i[p+1]:t[l],void 0===h)throw new r("Format:MissingPart","Missing part '"+l+"'");if(n){for(var m=d;m>0&&" "===e[--m];);m>=0&&"\n"===e[m]&&(h=w(d-m-1,h))}return h});return o}function w(e,t){for(var n="",i=0;e>i;i++)n+=" ";return t.split("\n").map(function(e,t){return t?n+e:e}).join("\n")}function I(e){return e.trim()}function S(e){return e.join(";\n")}function E(e){return e.join(", ")||"empty"}function x(e){return e.map(function(e){return e.match(ue)?"."+e:+e===e?C("[{0}]",e):C("[{0}]",k(e))}).join("")}function P(e,t,n,i){var t=t.map(function(e){return e.match(ue)?"."+e:(+e===e&&(e=+e),O(k(e)))}).map(function(e){return C("{filter}({temp} = {temp}{part})",{filter:i,temp:n,part:e})});return t.unshift(A(M(n,e))),t.push(n),A(t.join(" && "))}function k(e){return JSON.stringify(e)}function T(e){return e?"new Array("+ +e+")":"[]"}function M(e,t){return""+e+" = "+t}function A(e){return"("+e+")"}function O(e){return"["+e+"]"}function D(e){return e.match(ue)?e:+e===e?+e:k(e)}function L(e){return e=""+e,e.replace(de,function(e){return he[e]||" "})}function B(e,t,n){return n?new String(""+e+t+"_"+n):new String(""+e+t)}function R(e){return e.replace(/\\n/g,"\\n\\\n")}function N(e){return Object.keys(e)}function F(e){return Object.keys(e).map(function(t){return e[t]})}function z(e,t){return H([e,t])}function H(e){for(var t={},n=0,i=e.length;i>n;n++)for(var r=e[n],o=Object.keys(r),s=0,a=o.length;a>s;s++){var l=o[s];t[l]=r[l]}return t}function W(e){return e.reduce(function(e,t){return e?Z(e[t]):null},t)}function U(e,t,n,i){var r=e.children;if(r){var o=Object.keys(r);t&&n&&n(e,t,o.length);for(var s=0,a=o.length;a>s;s++){var l=o[s],u=r[l];U(u,l,n,i)}t&&i&&i(e,t,Object.keys(r).length)}else t&&n&&n(e,t,0),t&&i&&i(e,t,0)}function j(e){return e.replace(/^\s*$/gm,"").replace(/^(.*[^\s])( *)$/gm,function(e,t){return t})}var V=p._cancelBlocker,q=u.defaultBind,J=u.oneTime,K=u.setAttribute,G=u.setAttributeOneTime,Y=u.addClassOneTime,X=p.as,Z=i.requireSupportedForProcessing,Q=_.insertAdjacentHTMLUnsafe,$=g.data,ee=f.markDisposable,te=c.processAll,ne=u.processAll,ie=d._optionsParser,re=d._CallExpression,oe=d._IdentifierExpression,se=l._bindingParser2,ae=c.scopedSelect,le=a,ue=/^[A-Za-z]\w*$/,ce=/[^A-Za-z\w$]/g,de=/[&<>'"]/g,he={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},pe=/({{)|(}})|{(\w+)}|({)|(})/g,me=/^\s*;\s*$/,fe=/[A-Z]/g,_e=n.Class.define(function(e,t,n,i,r){var o=this;this.compiler=e,this.kind=n,this.base=new String(t),this.tree={children:{},parent:this.base,reference:function(){return o.base}},this.accessExpression=i,this.filter=r||""},{createPathExpression:function(e,t){if(e.length){var n=this,i=e.reduce(function(e,t){return e.children=e.children||{},e.children[t]=e.children[t]||{parent:e},e.children[t]},this.tree);return i.name=i.name||n.compiler.defineInstance(n.kind,t||"",function(){return n.accessExpression(i.parent.name?i.parent.name:i.parent.reference(),e.slice(-1)[0],i.parent.parent===n.base,n.filter,!0)}),i.name}return this.base},lower:function(){var e=this,t=[],n=function(t,n,i){return e.accessExpression(t.parent.name?t.parent.name:t.parent.reference(),n,t.parent.parent===e.base,e.filter,i)};U(this.tree,"",function(i,r,o){t.push(r),o>1?(i.name=i.name||e.compiler.defineInstance(e.kind,t.join("_"),n.bind(null,i,r,!0)),i.reference=function(){return i.name}):1===o&&(i.reference=n.bind(null,i,r))},function(){t.pop()})},deadNodeElimination:function(){U(this.tree,"",null,function(e,t,n){(!e.name||e.name.dead)&&0===n&&e.parent&&e.parent.children&&delete e.parent.children[t]})},definitions:function(){var e=[];return U(this.tree,"",function(t){t.name&&e.push(t)}),e.map(function(e){return e.name.definition()})}}),ge={capture:"capture",temporary:"temporary",variable:"variable",data:"data",global:"global"},ve={capture:"c",temporary:"t",variable:"iv",data:"d",global:"g"},ye={imported:"import",variable:"variable"},be={imported:"i",variable:"sv"},Ce={tree:"tree",text:"text",initializer:"initializer",template:"template",error:"error"},we={attribute:"attribute",booleanAttribute:"booleanAttribute",inlineStyle:"inlineStyle",textContent:"textContent"},Ie="imports",Se={initial:0,analyze:1,optimze:2,lower:3,compile:4,link:5,done:6},Ee=n.Class.define(function(e,n){if(this._stage=Se.initial,this._staticVariables={},this._staticVariablesCount=0,this._instanceVariables={},this._instanceVariablesCount={},this._debugBreak=n.debugBreakOnRender,this._defaultInitializer=Z(n.defaultInitializer||q),this._optimizeTextBindings=!n.disableTextBindingOptimization,this._templateElement=e,this._templateContent=t.document.createElement(e.tagName),this._extractChild=n.extractChild||!1,this._controls=null,this._bindings=null,this._bindTokens=null,this._textBindingPrefix=null,this._textBindingId=0,this._suffix=[],this._htmlProcessors=[],this._profilerMarkIdentifier=n.profilerMarkIdentifier,this._captureCSE=new _e(this,"container",ge.capture,this.generateElementCaptureAccess.bind(this)),this._dataCSE=new _e(this,"data",ge.data,this.generateNormalAccess.bind(this),this.importFunctionSafe("dataSecurityCheck",Z)),this._globalCSE=new _e(this,this.importFunctionSafe("global",t),ge.global,this.generateNormalAccess.bind(this),this.importFunctionSafe("globalSecurityCheck",Z)),h.renderCopy(this._templateElement,this._templateContent),this._extractChild)for(;this._templateContent.childElementCount>1;)this._templateContent.removeChild(this._templateContent.lastElementChild)},{addClassOneTimeTextBinding:function(e){var t=this,n=this.createTextBindingHole(e.elementCapture.element.tagName,"class",++this._textBindingId);e.textBindingId=n,e.kind=Ce.text,e.elementCapture.element.classList.add(n),e.elementCapture.refCount--,e.definition=function(){return t.formatCode("{htmlEscape}({value})",{htmlEscape:t._staticVariables.htmlEscape,value:e.value()})}},addClassOneTimeTreeBinding:function(e){var t=this;e.pathExpression=this.bindingExpression(e),e.value=function(){return e.pathExpression},e.kind=Ce.tree,e.definition=function(){return t.formatCode("{element}.classList.add({value})",{element:e.elementCapture,value:e.value()})}},analyze:function(){if(this._stage>Se.analyze)throw"Illegal: once we have moved past analyze we cannot revist it";this._stage=Se.analyze,this._controls=this.gatherControls(),this._bindings=this.gatherBindings(),this._children=this.gatherChildren(),this.cleanControlAndBindingAttributes(),this.async&&this.createAsyncParts(),this.nullableIdentifierAccessTemporary=this.defineInstance(ge.temporary);var e=this._templateContent.innerHTML;this._html=function(){return R(k(e))},this._html.text=e},bindingExpression:function(e){return this._dataCSE.createPathExpression(e.source,e.source.join("_"))},capture:function(e){var t=e._capture;if(t)return t.refCount++,t;for(var n=[e],i=e.parentNode,r=e.tagName;i!==this._templateContent;)r=i.tagName+"_"+r,n.unshift(i),i=i.parentNode;for(var o=0,s=n.length;s>o;o++){var a=n[o];n[o]=Array.prototype.indexOf.call(i.children,a),i=a}return t=this._captureCSE.createPathExpression(n,r.toLowerCase()),t.element=e,t.element._capture=t,t.refCount=1,t},cleanControlAndBindingAttributes:function(){for(var e="[data-win-bind],[data-win-control]",t=this._templateContent.querySelectorAll(e),n=0,i=t.length;i>n;n++){var r=t[n];r.isDeclarativeControlContainer&&(n+=r.querySelectorAll("[data-win-bind],[data-win-control]").length),r.removeAttribute("data-win-bind"),r.removeAttribute("data-win-control"),r.removeAttribute("data-win-options")}},compile:function(e,t,n){if(this._stage>Se.compile)throw"Illegal: once we have moved past compile we cannot revist it";this._stage=Se.compile;var i=this;this._returnedElement=this._extractChild?"container.firstElementChild":"container";var r,o,s=this._controls.map(function(e){var t;t=e.async?"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options}, controlDone)":"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options})";var n=i.formatCode(t,{target:e.elementCapture,SafeConstructor:e.SafeConstructor,options:i.generateOptionsLiteral(e.optionsParsed,e.elementCapture)});if(e.isDeclarativeControlContainer&&"function"==typeof e.isDeclarativeControlContainer.imported){var r=[n];return r.push(i.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedControlProcessing})",{target:e.elementCapture,isDeclarativeControlContainer:e.isDeclarativeControlContainer,delayedControlProcessing:i._staticVariables.ui_processAll})),r.push(i.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedBindingProcessing}(data, {templateDefaultInitializer}))",{target:e.elementCapture,isDeclarativeControlContainer:e.isDeclarativeControlContainer,delayedBindingProcessing:i._staticVariables.delayedBindingProcessing,templateDefaultInitializer:i._staticVariables.templateDefaultInitializer||k(null)})),r.join(";\n")}return n}),a=this._bindings.map(function(e){switch(e.kind){case Ce.template:return i.formatCode("({nestedTemplates}[{nestedTemplate}] = {template}.render({path}, {dest}))",{nestedTemplates:i._nestedTemplates,nestedTemplate:k(e.nestedTemplate),template:e.template,path:e.pathExpression,dest:e.elementCapture});case Ce.initializer:var t;return t=e.initialValue?"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}, {initialValue}))":"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}))",i.formatCode(t,{bindTokens:i._bindTokens,bindToken:k(e.bindToken),initializer:e.initializer,sourceProperties:k(e.source),destProperties:k(e.destination),dest:e.elementCapture,initialValue:e.initialValue});case Ce.tree:return e.definition();case Ce.text:break;case Ce.error:break;default:throw"NYI"}});n?(r=a.filter(function(e,t){return!i._bindings[t].delayable}),o=a.filter(function(e,t){return i._bindings[t].delayable})):(r=a,o=[]);var l=F(this._instanceVariables),u=l.filter(function(e){return e.kind===ge.variable}).map(function(e){return e.definition()}),c=this._captureCSE.definitions(),d=this._globalCSE.definitions(),h=this._dataCSE.definitions(),p=this._children.map(function(e){return i.formatCodeN("{0}.msParentSelectorScope = true",e)}),m=this._suffix.map(function(e){return e()}),f="";n&&o.length&&(f=i.formatCode(Le,{delayed_binding_processing:S(o)}));var _=i.formatCode(e,H([this._staticVariables,t||{},{profilerMarkIdentifierStart:k("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StartTM"),profilerMarkIdentifierStop:k("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StopTM"),html:this._html(),tagName:k(this._templateElement.tagName),instance_variable_declarations:E(l),global_definitions:S(d),data_definitions:S(h),instance_variable_definitions:S(u),capture_definitions:S(c),set_msParentSelectorScope:S(p),debug_break:this.generateDebugBreak(),control_processing:S(s),control_counter:this._controlCounter,binding_processing:S(r),renderComplete:f,suffix_statements:S(m),nestedTemplates:this._nestedTemplates,returnedElement:this._returnedElement}]));return this.prettify(_)},createAsyncParts:function(){this._nestedTemplates=this._nestedTemplates||this.defineInstance(ge.variable,"nestedTemplates",function(){return T(0)}),this._controlCounter=this._controlCounter||this.defineInstance(ge.variable,"controlCounter",function(){return k(1)})},createTextBindingHole:function(e,t,n){if(!this._textBindingPrefix){for(var i="";-1!==this._html.text.indexOf("textbinding"+i);)i=i||0,i++;this._textBindingPrefix="textbinding"+i,this._textBindingRegex=new RegExp("(#?"+this._textBindingPrefix+"_\\d+)")}var r=this._textBindingPrefix+"_"+n;return"IMG"===e&&"src"===t&&(r="#"+r),r},deadCodeElimination:function(){var e=this;Object.keys(this._instanceVariables).forEach(function(t){var n=e._instanceVariables[t];n.kind===ge.capture&&(e._templateContent.contains(n.element)||(n.dead=!0),0===n.refCount&&(n.dead=!0),n.dead&&(n.definition=function(){},n.name=null,delete e._instanceVariables[t]))}),this._controls=this._controls.filter(function(e){return!e.elementCapture.dead}),this._bindings=this._bindings.filter(function(e){return!e.elementCapture.dead}),this._captureCSE.deadNodeElimination()},defineInstance:function(e,t,n){if(this._stage>=Se.compile)throw"Illegal: define instance variable after compilation stage has started";var i=this._instanceVariablesCount[e]||0,r=t?t.replace(ce,"_"):"",o=B(ve[e],i,r);return o.definition=function(){return M(o,n())},o.kind=e,this._instanceVariables[o]=o,this._instanceVariablesCount[e]=i+1,o},defineStatic:function(e,t,n){if(this._stage>=Se.link)throw"Illegal: define static variable after link stage has started";if(t){var i=this._staticVariables[t];if(i)return i}var r=t?t.replace(ce,"_"):"",o=B(be[e],this._staticVariablesCount,r);return o.definition=function(){return M(o,n())},o.kind=e,this._staticVariables[t||o]=o,this._staticVariablesCount++,o},done:function(){if(this._stage>Se.done)throw"Illegal: once we have moved past done we cannot revist it";this._stage=Se.done},emitScopedSelect:function(e,t){return this.formatCode("{scopedSelect}({selector}, {element})",{scopedSelect:this._staticVariables.scopedSelect,selector:k(e),element:t})},emitOptionsNode:function(e,t,n){var i=this;if(e)switch(typeof e){case"object":if(Array.isArray(e)){t.push("[");for(var r=0,o=e.length;o>r;r++)this.emitOptionsNode(e[r],t,n),t.push(",");t.push("]")}else if(e instanceof re)t.push("select"===e.target?this.emitScopedSelect(e.arg0Value,n):k(null));else if(e instanceof oe&&e.parts[0]instanceof re){var s=e.parts[0];t.push(P("select"===s.target?this.emitScopedSelect(s.arg0Value,n):k(null),e.parts.slice(1),this.nullableIdentifierAccessTemporary,this.importFunctionSafe("requireSupportedForProcessing",Z)))}else e instanceof oe?t.push(e.pathExpression):(t.push("{"),Object.keys(e).forEach(function(r){t.push(D(r)),t.push(":"),i.emitOptionsNode(e[r],t,n),t.push(",")}),t.push("}"));break;default:t.push(k(e))}else t.push(k(null))},findGlobalIdentifierExpressions:function(e,t){t=t||[];var n=this;return Object.keys(e).forEach(function(i){var r=e[i];"object"==typeof r&&(r instanceof oe?r.parts[0]instanceof re||t.push(r):n.findGlobalIdentifierExpressions(r,t))}),t},formatCodeN:function(){if(this._stage<Se.compile)throw"Illegal: format code at before compilation stage has started";return C.apply(null,arguments)},formatCode:function(e,t){if(this._stage<Se.compile)throw"Illegal: format code at before compilation stage has started";return C(e,t)},gatherBindings:function(){for(var e=-1,n=this,i=-1,r=[],o="[data-win-bind],[data-win-control]",s=this._templateContent.querySelectorAll(o),a=0,l=s.length;l>a;a++){var u=s[a];if(u.isDeclarativeControlContainer&&(a+=u.querySelectorAll(o).length),u.hasAttribute("data-win-bind")){var c=u.getAttribute("data-win-bind"),d=se(c,t);d.forEach(function(t){if(t.initializer){var r=t.initializer.join("."),o=W(t.initializer);o.render?(Z(o.render),t.template=n.importFunctionSafe(r,o),t.pathExpression=n.bindingExpression(t),t.nestedTemplate=++i,t.kind=Ce.template):o.winControl&&o.winControl.render?(Z(o.winControl.render),t.template=n.importFunctionSafe(r,o.winControl),t.pathExpression=n.bindingExpression(t),t.nestedTemplate=++i,t.kind=Ce.template):(t.initializer=n.importFunction(r,o),t.bindToken=++e,t.kind=Ce.initializer)}else t.initializer=n.importFunctionSafe("templateDefaultInitializer",n._defaultInitializer),t.bindToken=++e,t.kind=Ce.initializer;t.elementCapture=n.capture(u),t.bindingText=c}),r.push.apply(r,d)}}var h=i+1;h>0&&(this.async=!0,this._nestedTemplates=this.defineInstance(ge.variable,"nestedTemplates",function(){return T(h)}));var p=e+1;return p>0&&(this._bindTokens=this.defineInstance(ge.variable,"bindTokens",function(){return T(p)}),this._suffix.push(function(){return n.formatCode("{utilities_data}(returnedElement).bindTokens = {bindTokens}",{utilities_data:n._staticVariables.utilities_data,bindTokens:n._bindTokens})})),r},gatherChildren:function(){var e=this;return Array.prototype.map.call(this._templateContent.children,function(t){return e.capture(t)})},gatherControls:function(){for(var e=this,n=0,r=[],o="[data-win-control]",s=this._templateContent.querySelectorAll(o),a=0,l=s.length;l>a;a++){var u=s[a],c=u.getAttribute("data-win-control"),d=i._getMemberFiltered(c.trim(),t,Z);if(d){var h=u.getAttribute("data-win-options")||k({}),p=d.length>2;p&&(n++,this.async=!0);var m=d.isDeclarativeControlContainer;m&&("function"==typeof m&&(m=this.importFunction(c+"_isDeclarativeControlContainer",m)),u.isDeclarativeControlContainer=m,a+=u.querySelectorAll(o).length);var f={elementCapture:this.capture(u),name:c,SafeConstructor:this.importFunctionSafe(c,d),async:p,optionsText:k(h),optionsParsed:ie(h),isDeclarativeControlContainer:m};r.push(f);var _=this.findGlobalIdentifierExpressions(f.optionsParsed);_.forEach(function(t){t.pathExpression=e.globalExpression(t.parts)})}}return n>0&&(this._controlCounter=this.defineInstance(ge.variable,"controlCounter",function(){return k(n+1)})),r},generateElementCaptureAccess:function(e,t,n){if(n){var i=""+t=="0"?"":" + "+t;return this.formatCodeN("{0}.children[startIndex{1}]",e,i)}return this.formatCodeN("{0}.children[{1}]",e,t)},generateNormalAccess:function(e,t,n,i,r){if(e.indexOf(this.nullableIdentifierAccessTemporary)>=0){var o;return o=r?"{left} && {filter}({temp}{right})":"{left} && ({temp} = {filter}({temp}{right}))",this.formatCode(o,{temp:this.nullableIdentifierAccessTemporary,left:e,right:x([t]),filter:i})}var o;return o=r?"({temp} = {left}) && {filter}({temp}{right})":"({temp} = {left}) && ({temp} = {filter}({temp}{right}))",this.formatCode(o,{temp:this.nullableIdentifierAccessTemporary,left:e,right:x([t]),filter:i})},generateOptionsLiteral:function(e,t){var n=[];return this.emitOptionsNode(e,n,t),n.join(" ")},generateDebugBreak:function(){if(this._debugBreak){var e=this.defineStatic(ye.variable,"debugCounter",function(){return k(0)});return this.formatCodeN("if (++{0} === 1) {{ debugger; }}",e)}return""},globalExpression:function(e){return this._globalCSE.createPathExpression(e,e.join("_"))},importFunction:function(e,t){return this.importFunctionSafe(e,Z(t))},importFunctionSafe:function(e,t){var n=this,i=this.defineStatic(ye.imported,e,function(){return n.formatCodeN("({0}{1})",Ie,x([e]))});if(i.imported&&i.imported!==t)throw"Duplicate import: '"+e+"'";return i.imported=t,i},importAll:function(e){return Object.keys(e).forEach(function(t){Z(e[t])}),this.importAllSafe(e)},importAllSafe:function(e){var t=this,n=Object.keys(e).reduce(function(n,i){return n[i]=t.importFunctionSafe(i,e[i]),n},{});return n},link:function(e){if(this._stage>Se.link)throw"Illegal: once we have moved past link we cannot revist it";this._stage=Se.link;var t=this,n=N(this._staticVariables).filter(function(e){return t._staticVariables[e].kind===ye.imported}).reduce(function(e,n){return e[n]=t._staticVariables[n].imported,e},{}),i=F(this._staticVariables);return new Function(Ie,this.formatCode(Re,{static_variable_declarations:E(i),static_variable_definitions:S(i.map(function(e){return e.definition()})),body:e.trim()}))(n)},lower:function(){if(this._stage>Se.lower)throw"Illegal: once we have moved past lower we cannot revist it";this._stage=Se.lower,this._captureCSE.lower(),this._dataCSE.lower(),this._globalCSE.lower()},markBindingAsError:function(e){e&&(e.kind=Ce.error,this.markBindingAsError(e.original))},oneTimeTextBinding:function(e){var t=this,n=this.oneTimeTextBindingAnalyze(e);if(n){var i;e.original&&(i=e.original.initialValue);var r=this.createTextBindingHole(e.elementCapture.element.tagName,n.attribute,++this._textBindingId);switch(e.textBindingId=r,e.kind=Ce.text,e.elementCapture.refCount--,e.definition=function(){var n;return n=i?"{htmlEscape}({initialValue})":"{htmlEscape}({getter})",t.formatCode(n,{htmlEscape:t._staticVariables.htmlEscape,getter:e.value(),initialValue:i})},n.kind){case we.attribute:e.elementCapture.element.setAttribute(n.attribute,r);break;case we.booleanAttribute:e.elementCapture.element.setAttribute(n.attribute,r),e.definition=function(){var r;return r=i?'({initialValue} ? {attribute} : "")':'({value} ? {attribute} : "")',t.formatCode(r,{value:e.value(),attribute:k(n.attribute),initialValue:i})},this._htmlProcessors.push(function(e){return e.replace(new RegExp(n.attribute+'="'+r+'"',"i"),r)});break;case we.textContent:e.elementCapture.element.textContent=r;break;case we.inlineStyle:var o=e.elementCapture.element;if(!o.msReplaceStyle){o.msReplaceStyle=o.getAttribute("style")||"",""!==o.msReplaceStyle&&";"!==o.msReplaceStyle[o.msReplaceStyle.length-1]&&(o.msReplaceStyle=o.msReplaceStyle+";"),o.setAttribute("style","msReplaceStyle:'"+r+"'");var s=o.getAttribute("style");this._htmlProcessors.push(function(e){return e.replace(s,o.msReplaceStyle)})}o.msReplaceStyle=o.msReplaceStyle+n.property+":"+r+";";break;default:throw"NYI"}}},oneTimeTextBindingAnalyze:function(e){var t=e.elementCapture.element,n=t.tagName,i=e.destination[0];switch(n){case"A":switch(i){case"href":return{kind:we.attribute,attribute:i}}break;case"IMG":switch(i){case"alt":case"src":case"width":case"height":return{kind:we.attribute,attribute:i}}break;case"SELECT":switch(i){case"disabled":case"multiple":case"required":return{kind:we.booleanAttribute,attribute:i};case"size":return{kind:we.attribute,attribute:i}}break;case"OPTION":switch(i){case"label":case"value":return{kind:we.attribute,attribute:i};case"disabled":case"selected":return{kind:we.booleanAttribute,attribute:i}}break;case"INPUT":switch(i){case"checked":switch(t.type){case"checkbox":case"radio":return{kind:we.booleanAttribute,attribute:i}}break;case"disabled":return{kind:we.booleanAttribute,attribute:i};case"max":case"maxLength":case"min":case"step":case"value":return{kind:we.attribute,attribute:i};case"size":switch(t.type){case"text":case"search":case"tel":case"url":case"email":case"password":return{kind:we.attribute,attribute:i}}break;case"readOnly":switch(t.type){case"hidden":case"range":case"color":case"checkbox":case"radio":case"file":case"button":break;default:return{kind:we.booleanAttribute,attribute:i}}}break;case"BUTTON":switch(i){case"disabled":return{kind:we.booleanAttribute,attribute:i};case"value":return{kind:we.attribute,attribute:i}}break;case"TEXTAREA":switch(i){case"disabled":case"readOnly":case"required":return{kind:we.booleanAttribute,attribute:i};case"cols":case"maxLength":case"placeholder":case"rows":case"wrap":return{kind:we.attribute,attribute:i}}}switch(i){case"className":return{kind:we.attribute,attribute:"class"};case"dir":case"lang":case"name":case"title":case"tabIndex":return{kind:we.attribute,attribute:i};case"style":if(e.destination.length>1){var r=e.destination[1];if("cssText"===r)return;var o="string"==typeof t.style[r];if(o)return("m"===r[0]&&"s"===r[1]||"webkit"===r.substring(0,6))&&(r="-"+r),r=r.replace(fe,function(e){return"-"+e.toLowerCase()}),{kind:we.inlineStyle,property:r,attribute:"style"}}break;case"innerText":case"textContent":return{kind:we.textContent,attribute:"textContent"}}},oneTimeTreeBinding:function(e){if(1===e.destination.length&&"id"===e.destination[0]){if(i.validation)throw new r("WinJS.Binding.IdBindingNotSupported",s._formatString(v.idBindingNotSupported,e.bindingText));return o.log&&o.log(s._formatString(v.idBindingNotSupported,e.bindingText),"winjs binding","error"),void this.markBindingAsError(e)}if(0===e.destination.length)return o.log&&o.log(v.cannotBindToThis,"winjs binding","error"),void this.markBindingAsError(e);var t,n=this;e.pathExpression=this.bindingExpression(e),e.value=function(){return e.pathExpression},e.original&&(t=e.pathExpression,e.original.initialValue=t),e.kind=Ce.tree,e.definition=function(){var i;return i=t?"({targetPath} || {{}}){prop} = {initialValue}":"({targetPath} || {{}}){prop} = {sourcePath}",n.formatCode(i,{targetPath:P(e.elementCapture,e.destination.slice(0,-1),n.nullableIdentifierAccessTemporary,n.importFunctionSafe("targetSecurityCheck",b)),prop:x(e.destination.slice(-1)),sourcePath:e.value(),initialValue:t})}},optimize:function(){if(this._stage>Se.optimze)throw"Illegal: once we have moved past link we cannot revist it";this._stage=Se.optimze;for(var e=0;e<this._bindings.length;e++){var t=this._bindings[e];
if(!t.template)switch(t.initializer.imported){case q:var n=z(t,{kind:Ce.tree,initializer:this.importFunctionSafe("init_oneTime",J),original:t});n.elementCapture.refCount++,this.oneTimeTreeBinding(n),this._bindings.splice(e,0,n),t.delayable=!0,e++;break;case K:var n=z(t,{kind:Ce.tree,initializer:this.importFunctionSafe("init_setAttributeOneTime",G),original:t});n.elementCapture.refCount++,this.setAttributeOneTimeTreeBinding(n),this._bindings.splice(e,0,n),t.delayable=!0,e++;break;case J:this.oneTimeTreeBinding(t);break;case G:this.setAttributeOneTimeTreeBinding(t);break;case Y:this.addClassOneTimeTreeBinding(t);break;default:t.initializer&&(t.delayable=!!t.initializer.imported.delayable)}}if(this._optimizeTextBindings){for(var i={},e=0;e<this._bindings.length;e++){var t=this._bindings[e];if(!t.template&&t.kind!==Ce.error){switch(t.initializer.imported){case J:this.oneTimeTextBinding(t);break;case G:this.setAttributeOneTimeTextBinding(t);break;case Y:this.addClassOneTimeTextBinding(t)}t.textBindingId&&(i[t.textBindingId]=t)}}if(Object.keys(i).length){var r=this._templateContent.innerHTML;r=this._htmlProcessors.reduce(function(e,t){return t(e)},r);for(var o=r.split(this._textBindingRegex),e=1;e<o.length;e+=2){var t=i[o[e]];o[e]=t.definition}this._html=function(){var e=o.map(function(e){return"string"==typeof e?k(e):e()}).join(" + ");return R(e)}}}},prettify:function(e){var t=e.split("\n");return t.filter(function(e){return!me.test(e)}).join("\n")},setAttributeOneTimeTextBinding:function(e){var t,n=this,i=e.destination[0],r=this.createTextBindingHole(e.elementCapture.element.tagName,i,++this._textBindingId);e.original&&(t=e.original.initialValue),e.textBindingId=r,e.kind=Ce.text,e.elementCapture.element.setAttribute(i,r),e.elementCapture.refCount--,e.definition=function(){var i;return i=t?"{htmlEscape}({initialValue})":"{htmlEscape}({value})",n.formatCode(i,{htmlEscape:n._staticVariables.htmlEscape,initialValue:t,value:e.value()})}},setAttributeOneTimeTreeBinding:function(e){if(1===e.destination.length&&"id"===e.destination[0]){if(i.validation)throw new r("WinJS.Binding.IdBindingNotSupported",s._formatString(v.idBindingNotSupported,e.bindingText));return o.log&&o.log(s._formatString(v.idBindingNotSupported,e.bindingText),"winjs binding","error"),void this.markBindingAsError(e)}if(1!==e.destination.length||!e.destination[0])return o.log&&o.log(v.attributeBindingSingleProperty,"winjs binding","error"),void this.markBindingAsError(e);var t,n=this;e.pathExpression=this.bindingExpression(e),e.value=function(){return e.pathExpression},e.original&&(t=this.defineInstance(ge.variable,"",e.value),e.original.initialValue=t),e.kind=Ce.tree,e.definition=function(){var i;return i=t?'{element}.setAttribute({attribute}, "" + {initialValue})':'{element}.setAttribute({attribute}, "" + {value})',n.formatCode(i,{element:e.elementCapture,attribute:k(e.destination[0]),initialValue:t,value:e.value()})}}},{_TreeCSE:_e,compile:function(n,i,r){if(!(i instanceof t.HTMLElement))throw"Illegal";le("WinJS.Binding.Template:compile"+r.profilerMarkIdentifier+",StartTM");var o=new Ee(i,r);o.analyze();var s=o.importAllSafe({Signal:m,global:t,document:t.document,cancelBlocker:V,promise_as:X,disposeInstance:e,markDisposable:ee,ui_processAll:te,binding_processAll:ne,insertAdjacentHTMLUnsafe:Q,promise:p,utilities_data:$,requireSupportedForProcessing:Z,htmlEscape:L,scopedSelect:ae,delayedBindingProcessing:y,writeProfilerMark:le});o.optimize(),o.deadCodeElimination(),o.lower();var a,l;switch(r.target){case"render":a=o.async?Ae:Me,l=!1;break;case"renderItem":a=o.async?Be:De,l=!0}var u=o.compile(a,s,l),c=o.link(u);return o.done(),le("WinJS.Binding.Template:compile"+r.profilerMarkIdentifier+",StopTM"),c}}),xe=j('container.classList.add("win-template");                                                              \nvar html = {html};                                                                                      \n{insertAdjacentHTMLUnsafe}(container, "beforeend", html);                                             \nreturnedElement = {returnedElement};                                                                    \n                                                                                                        \n// Capture Definitions                                                                                  \n{capture_definitions};                                                                                  \n{set_msParentSelectorScope};                                                                            \n                                                                                                        \n'),Pe=j("// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \n// Binding Processing                                                                                   \n{binding_processing};                                                                                   \n                                                                                                        \nvar result = {promise_as}(returnedElement);                                                             \n"),ke=j('var controlSignal = new {Signal}();                                                                     \nvar controlDone = function () {{ if (--{control_counter} === 0) {{ controlSignal.complete(); }} }};     \ncontrolDone();                                                                                          \n                                                                                                        \n// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \nvar result = controlSignal.promise.then(function () {{                                                  \n    // Binding Processing                                                                               \n    {binding_processing};                                                                               \n    return {promise}.join({nestedTemplates});                                                           \n}}).then(function () {{                                                                                 \n    return returnedElement;                                                                             \n}}).then(null, function (e) {{                                                                          \n    if (typeof e === "object" && e.name === "Canceled") {{ returnedElement.dispose(); }}            \n    return {promise}.wrapError(e);                                                                      \n}});                                                                                                    \n'),Te=j("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result); }});       \n{suffix_statements};                                                                                    \n"),Me=j('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data); }});                   \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+I(w(4,xe))+"                                           \n                                                                                                        \n    "+I(w(4,Pe))+"                                      \n    "+I(w(4,Te))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),Ae=j('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data, container); }});        \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+I(w(4,xe))+"                                           \n                                                                                                        \n    "+I(w(4,ke))+"                                 \n    "+I(w(4,Te))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),Oe=j("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result, renderComplete); }});\n{suffix_statements};                                                                                    \n"),De=j('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+I(w(8,xe))+"                                       \n                                                                                                        \n        "+I(w(8,Pe))+"                                  \n        "+I(w(8,Oe))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),Le=j("renderComplete = element.then(function () {{                                                            \n    return itemPromise;                                                                                 \n}}).then(function (item) {{                                                                             \n    return item.ready || item;                                                                          \n}}).then(function (item) {{                                                                             \n    {delayed_binding_processing};                                                                       \n    return element;                                                                                     \n}});                                                                                                    \n"),Be=j('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+I(w(8,xe))+"                                       \n                                                                                                        \n        "+I(w(8,ke))+"                             \n        "+I(w(8,Oe))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),Re=j('"use strict";                                                                                         \n                                                                                                        \n// statics                                                                                              \nvar {static_variable_declarations};                                                                     \n{static_variable_definitions};                                                                          \n                                                                                                        \n// generated template rendering function                                                                \nreturn {body};                                                                                          \n');return Ee})})}}),define("WinJS/BindingTemplate",["exports","./Core/_Global","./Core/_WinRT","./Core/_Base","./Core/_BaseUtils","./Core/_Log","./Core/_WriteProfilerMark","./Binding/_Declarative","./BindingTemplate/_DataTemplateCompiler","./ControlProcessor","./Fragments","./Promise","./Utilities/_Dispose","./Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a,l,u,c,d,h,p){"use strict";if(t.document){var m=d._cancelBlocker;i.Namespace._moduleDefine(e,"WinJS.Binding",{Template:i.Namespace._lazy(function(){function e(e,n,i){function r(){return p.removeClass(l,"win-loading"),s("WinJS.Binding:templateRender"+e._profilerMarkIdentifier+",StopTM"),g||l}s("WinJS.Binding:templateRender"+e._profilerMarkIdentifier+",StartTM"),1===++e._counter&&(e.debugBreakOnRender||f._debugBreakOnRender);var o=d.wrap(),l=i||t.document.createElement(e.element.tagName);p.addClass(l,"win-template"),p.addClass(l,"win-loading");var _,g,v=e,y=l.children.length,b=function(){var e=p.data(l).winBindings;e&&e.forEach(function(e){e.cancel()}),o.cancel()};e.extractChild?_=c.renderCopy(v.href||v.element,t.document.createElement(v.element.tagName)).then(function(e){var t=e.firstElementChild;return g=t,h.markDisposable(t,b),l.appendChild(t),t}):(h.markDisposable(l,b),_=c.renderCopy(v.href||v.element,l));var C=_.then(function(){function e(){return t(u.processAll).then(function(){return m(n)}).then(function(e){return t(a.processAll,e,!g&&!y,v.bindingCache)}).then(null,function(e){return"object"==typeof e&&"Canceled"===e.name&&(g||l).dispose(),d.wrapError(e)})}var t;if(0===y)t=function(e,t,n,i){return e(g||l,t,n,i)};else{var i=l.children;if(i.length===y+1)t=function(e,t,n,r){return e(i[y],t,n,r)};else{for(var r=[],s=y,c=i.length;c>s;s++)r.push(i[s]);t=function(e,t,n,i){var o=[];return r.forEach(function(r){o.push(e(r,t,n,i))}),d.join(o)}}}for(var h=l.firstElementChild;h;)h.msParentSelectorScope=!0,h=h.nextElementSibling;var p=v.processTimeout;return p?(0>p&&(p=0),d.timeout(p).then(function(){return o=e()})):o=e()}).then(r,function(e){return r(),d.wrapError(e)});return{element:_,renderComplete:C}}var f=i.Class.define(function(e,n){this._element=e||t.document.createElement("div"),this._element.winControl=this,this._profilerMarkIdentifier=r._getProfilerMarkIdentifier(this._element),s("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StartTM");var i=this;this._element.renderItem=function(e,t){return i._renderItemImpl(e,t)},n=n||{},this.href=n.href,this.enableRecycling=!!n.enableRecycling,this.processTimeout=n.processTimeout||0,this.bindingInitializer=n.bindingInitializer,this.debugBreakOnRender=n.debugBreakOnRender,this.disableOptimizedProcessing=n.disableOptimizedProcessing,this.extractChild=n.extractChild,this._counter=0,this._compile=!!n._compile,this.href||(this.element.style.display="none"),this.bindingCache={expressions:{}},s("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StopTM")},{_shouldCompile:{get:function(){var e=!0;return e=e&&!f._interpretAll,e=e&&!this.disableOptimizedProcessing,e&&(e=e&&0===this.processTimeout,e=e&&(!this.href||this.href instanceof t.HTMLElement),e||o.log&&o.log("Cannot compile templates which use processTimeout or href properties","winjs binding","warn")),e}},bindingInitializer:{get:function(){return this._bindingInitializer},set:function(e){this._bindingInitializer=e,this._reset()}},debugBreakOnRender:{get:function(){return this._debugBreakOnRender},set:function(e){this._debugBreakOnRender=!!e,this._reset()}},disableOptimizedProcessing:{get:function(){return this._disableOptimizedProcessing},set:function(e){this._disableOptimizedProcessing=!!e,this._reset()}},element:{get:function(){return this._element}},extractChild:{get:function(){return this._extractChild},set:function(e){this._extractChild=!!e,this._reset()}},processTimeout:{get:function(){return this._processTimeout||0},set:function(e){this._processTimeout=e,this._reset()}},render:r.markSupportedForProcessing(function(e,t){return this._renderImpl(e,t)}),_renderImpl:function(t,n){if(this._shouldCompile)try{return this._renderImpl=this._compileTemplate({target:"render"}),this._renderImpl(t,n)}catch(i){return d.wrapError(i)}var r=e(this,t,n);return r.element.then(function(){return r.renderComplete})},_renderInterpreted:function(t,n){return e(this,t,n)},renderItem:function(e,t){return this._renderItemImpl(e,t)},_renderItemImpl:function(t,n){if(this._shouldCompile)try{return this._renderItemImpl=this._compileTemplate({target:"renderItem"}),this._renderItemImpl(t)}catch(i){return{element:d.wrapError(i),renderComplete:d.wrapError(i)}}var r=this;if(this.enableRecycling&&!this.bindingCache.elements&&(this.bindingCache.elements={}),this.enableRecycling&&n&&n.msOriginalTemplate===this){var o=this.bindingCache.elements[n.id],s=!0;if(o&&(o.bindings.forEach(function(e){e()}),o.bindings=[],s=!o.nocache),s)return{element:n,renderComplete:t.then(function(e){return a.processAll(n,e.data,!0,r.bindingCache)})}}var l=e(this,t.then(function(e){return e.data}));return l.element=l.element.then(function(e){return e.msOriginalTemplate=r,e}),l},_compileTemplate:function(e){var t=this,i=l._TemplateCompiler.compile(this,this.href||this.element,{debugBreakOnRender:this.debugBreakOnRender||f._debugBreakOnRender,defaultInitializer:this.bindingInitializer||e.defaultInitializer,disableTextBindingOptimization:e.disableTextBindingOptimization||!1,target:e.target,extractChild:this.extractChild,profilerMarkIdentifier:this._profilerMarkIdentifier}),r=e.resetOnFragmentChange||n.Windows.ApplicationModel.DesignMode.designModeEnabled;if(r){var o=new p._MutationObserver(function(){t._reset(),o.disconnect()});o.observe(p.data(this.element).docFragment,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}return i},_reset:function(){delete this._renderImpl,delete this._renderItemImpl}},{isDeclarativeControlContainer:{value:!0,writable:!1,configurable:!1},render:{value:function(e,t,n){return new f(null,{href:e
}).render(t,n)}}});return f})})}}),define("WinJS/BindingList/_BindingListDataSource",["exports","../Core/_WinRT","../Core/_Base","../Core/_ErrorFromName","../Binding/_DomWeakRefTable","../Promise","../Scheduler","../Utilities/_UI"],function(e,t,n,i,r,o,s,a){"use strict";n.Namespace._moduleDefine(e,"WinJS.Binding",{_BindingListDataSource:n.Namespace._lazy(function(){function e(e,t){for(var n=e.length;n-1>t;){var i=e.getItem(++t);if(i)return i.key}return null}function l(e,t){for(;t>0;){var n=e.getItem(--t);if(n)return n.key}return null}function u(e,t){Object.keys(t).forEach(function(n){e.addEventListener(n,t[n])})}function c(e,t){Object.keys(t).forEach(function(n){e.removeEventListener(n,t[n])})}function d(e,t){return t?new P(e,t):new x}function h(e,t,n){return t?new k(e,t,n):new x}function p(e,t,n){return t&&e._annotateWithIndex(t,n)}function m(e,t){return this._list.unshift(t),this.itemFromIndex(0)}function f(e,t,n){var i=this._list.indexOfKey(n);return-1===i?S.noLongerMeaningful:(this._list.splice(i,0,t),this.itemFromIndex(i))}function _(e,t,n){var i=this._list.indexOfKey(n);return-1===i?S.noLongerMeaningful:(i+=1,this._list.splice(i,0,t),this.itemFromIndex(i))}function g(e,t){return this._list.push(t),this.itemFromIndex(this._list.length-1)}function v(e,t){var n=this._list.indexOfKey(e);return-1===n?S.noLongerMeaningful:(this._list.setAt(n,t),this.itemFromIndex(n))}function y(e){var t=this._list.indexOfKey(e);if(-1===t)return S.noLongerMeaningful;var n=0;return this._list.move(t,n),this.itemFromIndex(n)}function b(e,t){var n=this._list.indexOfKey(e),i=this._list.indexOfKey(t);return-1===n||-1===i?S.noLongerMeaningful:(i=i>n?i-1:i,this._list.move(n,i),this.itemFromIndex(i))}function C(e,t){var n=this._list.indexOfKey(e),i=this._list.indexOfKey(t);return-1===n||-1===i?S.noLongerMeaningful:(i=i>=n?i:i+1,this._list.move(n,i),this.itemFromIndex(i))}function w(e){var t=this._list.indexOfKey(e);if(-1===t)return S.noLongerMeaningful;var n=this._list.length-1;return this._list.move(t,n),this.itemFromIndex(n)}function I(e){var t=this._list.indexOfKey(e);return-1===t?S.noLongerMeaningful:(this._list.splice(t,1),o.wrap())}var S={get noLongerMeaningful(){return o.wrapError(new i(a.EditError.noLongerMeaningful))}},E=o.wrap().constructor,x=n.Class.derive(E,function(){this._value=null},{release:function(){},retain:function(){return this}},{supportedForProcessing:!1}),P=n.Class.derive(E,function(e,t){this._value=t,this._listBinding=e},{handle:{get:function(){return this._value.key}},index:{get:function(){return this._value.index}},release:function(){this._listBinding._release(this._value,this._listBinding._list.indexOfKey(this._value.key))},retain:function(){return this._listBinding._addRef(this._value,this._listBinding._list.indexOfKey(this._value.key)),this}},{supportedForProcessing:!1}),k=n.Class.derive(o,function(e,t,n){var i=this;this._item=t,this._listBinding=e,o.call(this,function(r){s.schedule(function(){return e._released?void i.cancel():void r(t)},s.Priority.normal,null,"WinJS.Binding.List."+n)})},{handle:{get:function(){return this._item.key}},index:{get:function(){return this._item.index}},release:function(){this._listBinding._release(this._item,this._listBinding._list.indexOfKey(this._item.key))},retain:function(){return this._listBinding._addRef(this._item,this._listBinding._list.indexOfKey(this._item.key)),this}},{supportedForProcessing:!1}),T=n.Class.define(function(e,n,i,o){this._dataSource=e,this._list=n,this._editsCount=0,this._notificationHandler=i,this._pos=-1,this._retained=[],this._retained.length=n.length,this._retainedKeys={},this._affectedRange=null;var s=null;if(t.msSetWeakWinRTProperty&&t.msGetWeakWinRTProperty||(s=this),i){var a=function(e,t){var n=r._getWeakRefElement(o)||s;return n?(n["_"+e](t),!0):!1};this._handlers={itemchanged:function l(e){a("itemchanged",e)||n.removeEventListener("itemchanged",l)},iteminserted:function c(e){a("iteminserted",e)||n.removeEventListener("iteminserted",c)},itemmoved:function d(e){a("itemmoved",e)||n.removeEventListener("itemmoved",d)},itemremoved:function h(e){a("itemremoved",e)||n.removeEventListener("itemremoved",h)},reload:function p(){a("reload")||n.removeEventListener("reload",p)}},u(this._list,this._handlers)}},{_itemchanged:function(e){var t=e.detail.key,n=e.detail.index;this._updateAffectedRange(n,"changed");var i=e.detail.newItem,r=this._retained[n];if(r){var o=this._notificationHandler;if(r.index!==n){var s=r.index;r.index=n,o&&o.indexChanged&&o.indexChanged(i.key,n,s)}i=p(this._list,i,n),i._retainedCount=r._retainedCount,this._retained[n]=i,this._retainedKeys[t]=i,this._beginEdits(this._list.length),o&&o.changed&&o.changed(i,r),this._endEdits()}else this._beginEdits(this._list.length),this._endEdits()},_iteminserted:function(t){var n=t.detail.index;this._updateAffectedRange(n,"inserted"),this._beginEdits(this._list.length-1),n<=this._pos&&(this._pos=Math.min(this._pos+1,this._list.length));var i=this._retained;if(i.splice(n,0,0),delete i[n],this._shouldNotify(n)||1===this._list.length){var r=this._notificationHandler;r&&r.inserted&&r.inserted(d(this,p(this._list,this._list.getItem(n),n)),l(this._list,n),e(this._list,n))}this._endEdits()},_itemmoved:function(e){var t=e.detail.oldIndex,n=e.detail.newIndex;this._updateAffectedRange(t,"moved"),this._updateAffectedRange(n,"moved"),this._beginEdits(this._list.length),(t<this._pos||n<=this._pos)&&(n>this._pos?this._pos=Math.max(-1,this._pos-1):t>this._pos&&(this._pos=Math.min(this._pos+1,this._list.length)));var i=this._retained,r=i.splice(t,1)[0];i.splice(n,0,r),r||(delete i[n],r=p(this._list,this._list.getItem(n),n)),r._moved=!0,this._addRef(r,n),this._endEdits()},_itemremoved:function(e){var t=e.detail.key,n=e.detail.index;this._updateAffectedRange(n,"removed"),this._beginEdits(this._list.length+1),n<this._pos&&(this._pos=Math.max(-1,this._pos-1));var i=this._retained,r=this._retainedKeys,o=n in i;i.splice(n,1),delete r[t];var s=this._notificationHandler;o&&s&&s.removed&&s.removed(t,!1),this._endEdits()},_reload:function(){this._retained=[],this._retainedKeys={};var e=this._notificationHandler;e&&e.reload&&e.reload()},_addRef:function(e,t){t in this._retained?this._retained[t]._retainedCount++:(this._retained[t]=e,this._retainedKeys[e.key]=e,e._retainedCount=1)},_release:function(e,t){var n=this._retained[t];n&&(1===n._retainedCount?(delete this._retained[t],delete this._retainedKeys[n.key]):n._retainedCount--)},_shouldNotify:function(e){var t=this._retained;return e in t||e+1 in t||e-1 in t},_updateAffectedRange:function(e,t){if(this._notificationHandler.affectedRange){var n=e,i="removed"!==t?e+1:e;if(this._affectedRange){switch(t){case"inserted":e<=this._affectedRange.end&&++this._affectedRange.end;break;case"removed":e<this._affectedRange.end&&--this._affectedRange.end;break;case"moved":case"changed":}this._affectedRange.start=Math.min(this._affectedRange.start,n),this._affectedRange.end=Math.max(this._affectedRange.end,i)}else this._affectedRange={start:n,end:i}}},_notifyAffectedRange:function(){this._affectedRange&&(this._notificationHandler&&this._notificationHandler.affectedRange&&this._notificationHandler.affectedRange(this._affectedRange),this._affectedRange=null)},_notifyCountChanged:function(){var e=this._countAtBeginEdits,t=this._list.length;if(e!==t){var n=this._notificationHandler;n&&n.countChanged&&n.countChanged(t,e)}},_notifyIndicesChanged:function(){for(var e=this._retained,t=0,n=e.length;n>t;t++){var i=e[t];if(i&&i.index!==t){var r=t,o=i.index;i.index=r;var s=this._notificationHandler;s&&s.indexChanged&&s.indexChanged(i.key,r,o)}}},_notifyMoved:function(){for(var t=this._retained,n=0,i=t.length;i>n;n++){var r=t[n];if(r&&r._moved&&(r._moved=!1,this._release(r,n),this._shouldNotify(n))){var o=this._notificationHandler;o&&o.moved&&o.moved(d(this,r),l(this._list,n),e(this._list,n))}}},_beginEdits:function(e,t){this._editsCount++;var n=this._notificationHandler;if(1===this._editsCount&&n){if(!t){this._editsCount++;var i=this;s.schedule(function(){i._endEdits()},s.Priority.high,null,"WinJS.Binding.List._endEdits")}n.beginNotifications&&n.beginNotifications(),this._countAtBeginEdits=e}},_endEdits:function(){this._editsCount--;var e=this._notificationHandler;0===this._editsCount&&e&&(this._notifyIndicesChanged(),this._notifyMoved(),this._notifyCountChanged(),this._notifyAffectedRange(),e.endNotifications&&e.endNotifications())},jumpToItem:function(e){var t=this._list.indexOfKey(e.handle);return-1===t?o.wrap(null):(this._pos=t,this.current())},current:function(){return this.fromIndex(this._pos)},previous:function(){return this._pos=Math.max(-1,this._pos-1),this._fromIndex(this._pos,!0,"previous")},next:function(){return this._pos=Math.min(this._pos+1,this._list.length),this._fromIndex(this._pos,!0,"next")},releaseItem:function(e){e.release?e.release():this._release(e,this._list.indexOfKey(e.key))},release:function(){this._notificationHandler&&c(this._list,this._handlers),this._notificationHandler=null,this._dataSource._releaseBinding(this),this._released=!0},first:function(){return this.fromIndex(0)},last:function(){return this.fromIndex(this._list.length-1)},fromKey:function(e){var t,n=this._retainedKeys;return t=e in n?n[e]:p(this._list,this._list.getItemFromKey(e),this._list.indexOfKey(e)),d(this,t)},fromIndex:function(e){return this._fromIndex(e,!1,"fromIndex")},_fromIndex:function(e,t,n){var i,r=this._retained;return i=e in r?r[e]:p(this._list,this._list.getItem(e),e),t?h(this,i,n):d(this,i)}},{supportedForProcessing:!1}),M=0,A=n.Class.define(function(e){this._usingWeakRef=t.msSetWeakWinRTProperty&&t.msGetWeakWinRTProperty,this._bindings={},this._list=e,e.unshift&&(this.insertAtStart=m),e.push&&(this.insertAtEnd=g),e.setAt&&(this.change=v),e.splice&&(this.insertAfter=_,this.insertBefore=f,this.remove=I),e.move&&(this.moveAfter=C,this.moveBefore=b,this.moveToEnd=w,this.moveToStart=y)},{_releaseBinding:function(e){delete this._bindings[e._id]},addEventListener:function(){},removeEventListener:function(){},createListBinding:function(e){var t="ds_"+ ++M,n=new T(this,this._list,e,t);return n._id=t,this._usingWeakRef?(r._createWeakRef(n,t),this._bindings[t]=t):this._bindings[t]=n,n},getCount:function(){return o.wrap(this._list.length)},itemFromKey:function(e){var t=this._list,n=p(t,t.getItemFromKey(e),-1);return Object.defineProperty(n,"index",{get:function(){return t.indexOfKey(e)},enumerable:!1,configurable:!0}),o.wrap(n)},itemFromIndex:function(e){return o.wrap(p(this._list,this._list.getItem(e),e))},list:{get:function(){return this._list}},beginEdits:function(){var e=this._list.length;this._forEachBinding(function(t){t._beginEdits(e,!0)})},endEdits:function(){this._forEachBinding(function(e){e._endEdits()})},_forEachBinding:function(e){if(this._usingWeakRef){var t=[];Object.keys(this._bindings).forEach(function(n){var i=r._getWeakRefElement(n);i?e(i):t.push(n)});for(var n=0,i=t.length;i>n;n++)delete this._bindings[t[n]]}else{var o=this;Object.keys(this._bindings).forEach(function(t){e(o._bindings[t])})}},invalidateAll:function(){return o.wrap()},moveAfter:void 0,moveBefore:void 0,moveToEnd:void 0,moveToStart:void 0},{supportedForProcessing:!1});return A})})}),define("WinJS/BindingList",["exports","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Events","./Core/_Resources","./Binding/_Data","./BindingList/_BindingListDataSource"],function(e,t,n,i,r,o,s,a){"use strict";function l(e){return Array.prototype.slice.call(e,0)}function u(e){return{handle:e.handle,key:e.key,data:e.data,groupKey:e.groupKey,groupSize:e.groupSize,firstItemKey:e.firstItemKey,firstItemIndexHint:e.firstItemIndexHint}}function c(e){return void 0===e?void 0:+e}function d(e,t){function n(t,n){for(;n>t;t++)e[t]=o[t]}function i(e,t){if(!(2>t-e)){var o=Math.floor((t+e)/2);i(e,o),i(o,t),r(e,o,t),n(e,t)}}function r(n,i,r){for(var s=n,a=i,l=n;r>l;l++)i>s&&(a>=r||t(e[s],e[a])<=0)?(o[l]=e[s],s++):(o[l]=e[a],a++)}var o=new Array(e.length);return i(0,e.length),e}var h={get sparseArrayNotSupported(){return"Sparse arrays are not supported with proxy: true"},get illegalListLength(){return"List length must be assigned a finite positive number"}},p=r._createEventProperty,m={},f=t.Namespace.defineWithParent(null,null,{ListBase:t.Namespace._lazy(function(){var e=t.Class.define(null,{_annotateWithIndex:function(e,t){var n=u(e);return n.index=t,n},onitemchanged:p("itemchanged"),oniteminserted:p("iteminserted"),onitemmoved:p("itemmoved"),onitemmutated:p("itemmutated"),onitemremoved:p("itemremoved"),onreload:p("reload"),_notifyItemChanged:function(e,t,n,i,r,o){this._listeners&&this._listeners.itemchanged&&this.dispatchEvent("itemchanged",{key:e,index:t,oldValue:n,newValue:i,oldItem:r,newItem:o})},_notifyItemInserted:function(e,t,n){this._listeners&&this._listeners.iteminserted&&this.dispatchEvent("iteminserted",{key:e,index:t,value:n});var i=this.length;i!==this._lastNotifyLength&&(this.notify("length",i,this._lastNotifyLength),this._lastNotifyLength=i)},_notifyItemMoved:function(e,t,n,i){this._listeners&&this._listeners.itemmoved&&this.dispatchEvent("itemmoved",{key:e,oldIndex:t,newIndex:n,value:i})},_notifyItemMutated:function(e,t,n){this._listeners&&this._listeners.itemmutated&&this.dispatchEvent("itemmutated",{key:e,value:t,item:n})},_notifyItemRemoved:function(e,t,n,i){this._listeners&&this._listeners.itemremoved&&this.dispatchEvent("itemremoved",{key:e,index:t,value:n,item:i});var r=this.length;r!==this._lastNotifyLength&&(this.notify("length",r,this._lastNotifyLength),this._lastNotifyLength=r)},_notifyReload:function(){if(this._listeners&&this._listeners.reload&&this.dispatchEvent("reload"),e!==this._lastNotifyLength){var e=this.length;this.notify("length",e,this._lastNotifyLength),this._lastNotifyLength=e}},_normalizeIndex:function(e){return e=c(e),0>e?this.length+e:e},_notifyMutatedFromKey:function(e){var t=this.getItemFromKey(e);this._notifyItemMutated(e,t.data,t)},notifyReload:function(){this._notifyReload()},getAt:function(e){e=c(e);var t=this.getItem(e);return t&&t.data},_getArray:function(){for(var e=new Array(this.length),t=0,n=this.length;n>t;t++){var i=this.getItem(t);i&&(e[t]=i.data)}return e},_getFromKey:function(e){var t=this.getItemFromKey(e);return t&&t.data},_getKey:function(e){e=c(e);var t=this.getItem(e);return t&&t.key},concat:function(){var e=this._getArray();return e.concat.apply(e,arguments)},join:function(e){return this._getArray().join(e||",")},slice:function(e,t){return this._getArray().slice(e,t)},indexOf:function(e,t){t=c(t),t=Math.max(0,this._normalizeIndex(t)||0);for(var n=t,i=this.length;i>n;n++){var r=this.getItem(n);if(r&&r.data===e)return n}return-1},lastIndexOf:function(e,t){t=c(t);var n=this.length;t=Math.min(this._normalizeIndex(void 0!==t?t:n),n-1);var i;for(i=t;i>=0;i--){var r=this.getItem(i);if(r&&r.data===e)return i}return-1},every:function(e,t){return this._getArray().every(e,t)},filter:function(e,t){return this._getArray().filter(e,t)},forEach:function(e,t){this._getArray().forEach(e,t)},map:function(e,t){return this._getArray().map(e,t)},some:function(e,t){return this._getArray().some(e,t)},reduce:function(e,t){return arguments.length>1?this._getArray().reduce(e,t):this._getArray().reduce(e)},reduceRight:function(e,t){return arguments.length>1?this._getArray().reduceRight(e,t):this._getArray().reduceRight(e)},createFiltered:function(e){return new f.FilteredListProjection(this,e)},createGrouped:function(e,t,n){return new f.GroupedSortedListProjection(this,e,t,n)},createSorted:function(e){return new f.SortedListProjection(this,e)},dataSource:{get:function(){return this._dataSource=this._dataSource||new a._BindingListDataSource(this)}}},{supportedForProcessing:!1});return t.Class.mix(e,s.observableMixin),t.Class.mix(e,r.eventMixin),e}),ListBaseWithMutators:t.Namespace._lazy(function(){return t.Class.derive(f.ListBase,null,{pop:function(){return this.splice(-1,1)[0]},push:function(e){if(1===arguments.length)return this.splice(this.length,0,e),this.length;var t=l(arguments);return t.splice(0,0,this.length,0),this.splice.apply(this,t),this.length},shift:function(){return this.splice(0,1)[0]},unshift:function(e){if(1===arguments.length)this.splice(0,0,e);else{var t=l(arguments);t.splice(0,0,0,0),this.splice.apply(this,t)}return this.length}},{supportedForProcessing:!1})}),ListProjection:t.Namespace._lazy(function(){return t.Class.derive(f.ListBaseWithMutators,null,{_list:null,_myListeners:null,_addListListener:function(e,t){var n={name:e,handler:t.bind(this)};this._myListeners=this._myListeners||[],this._myListeners.push(n),this._list.addEventListener(e,n.handler)},dispose:function(){var t=this._list,n=this._myListeners;this._myListeners=[];for(var i=0,r=n.length;r>i;i++){var o=n[i];t.removeEventListener(o.name,o.handler)}this._list=new e.List,this._listReload()},getItemFromKey:function(e){return this._list.getItemFromKey(e)},move:function(e,t){e=c(e),t=c(t),e===t||0>e||0>t||e>=this.length||t>=this.length||(e=this._list.indexOfKey(this._getKey(e)),t=this._list.indexOfKey(this._getKey(t)),this._list.move(e,t))},_notifyMutatedFromKey:function(e){this._list._notifyMutatedFromKey(e)},splice:function(e,t,n){e=c(e),e=Math.max(0,this._normalizeIndex(e));var i=l(arguments);return e===this.length?(i[0]=this._list.length,this._list.splice.apply(this._list,i)):(i[0]=this._getKey(e),this._spliceFromKey.apply(this,i))},_setAtKey:function(e,t){this._list._setAtKey(e,t)}},{supportedForProcessing:!1})}),FilteredListProjection:t.Namespace._lazy(function(){return t.Class.derive(f.ListProjection,function(e,t){this._list=e,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._filter=t,this._initFilteredKeys()},{_filter:null,_filteredKeys:null,_initFilteredKeys:function(){for(var e=this._filter,t=this._list,n=[],i=0,r=t.length;r>i;i++){var o=t.getItem(i);o&&e(o.data)&&n.push(o.key)}this._filteredKeys=n},_findInsertionPosition:function(e,t){for(var n,i=this._filter;--t>=0;){var r=this._list.getItem(t);if(r&&i(r.data)){n=r.key;break}}var o=this._filteredKeys,s=n?o.indexOf(n)+1:0;return s},_listItemChanged:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.oldValue,r=e.detail.newValue,o=e.detail.oldItem,s=e.detail.newItem,a=this._filter,l=a(i),u=a(r);if(l&&u){var c=this._filteredKeys,d=c.indexOf(t);this._notifyItemChanged(t,d,i,r,o,s)}else l&&!u?this._listItemRemoved({detail:{key:t,index:n,value:i,item:o}}):!l&&u&&this._listItemInserted({detail:{key:t,index:n,value:r}})},_listItemInserted:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.value,r=this._filter;if(r(i)){var o=this._findInsertionPosition(t,n),s=this._filteredKeys;s.splice(o,0,t),this._notifyItemInserted(t,o,i)}},_listItemMoved:function(e){var t=e.detail.key,n=e.detail.newIndex,i=e.detail.value,r=this._filteredKeys,o=r.indexOf(t);if(-1!==o){r.splice(o,1);var s=this._findInsertionPosition(t,n);r.splice(s,0,t),this._notifyItemMoved(t,o,s,i)}},_listItemMutated:function(e){var t=e.detail.key,n=e.detail.value,i=e.detail.item,r=this._filter,o=this._filteredKeys,s=o.indexOf(t),a=-1!==s,l=r(n);a&&l?this._notifyItemMutated(t,n,i):a&&!l?(o.splice(s,1),this._notifyItemRemoved(t,s,n,i)):!a&&l&&this._listItemInserted({detail:{key:t,index:this._list.indexOfKey(t),value:n}})},_listItemRemoved:function(e){var t=e.detail.key,n=e.detail.value,i=e.detail.item,r=this._filteredKeys,o=r.indexOf(t);-1!==o&&(r.splice(o,1),this._notifyItemRemoved(t,o,n,i))},_listReload:function(){this._initFilteredKeys(),this._notifyReload()},length:{get:function(){return this._filteredKeys.length},set:function(e){if(!("number"==typeof e&&e>=0))throw new i("WinJS.Binding.List.IllegalLength",h.illegalListLength);var t=this.length;t>e&&this.splice(e,t-e)}},getItem:function(e){return e=c(e),this.getItemFromKey(this._filteredKeys[e])},indexOfKey:function(e){return this._filteredKeys.indexOf(e)},notifyMutated:function(e){return e=c(e),this._notifyMutatedFromKey(this._filteredKeys[e])},setAt:function(e,t){e=c(e),this._setAtKey(this._filteredKeys[e],t)},_spliceFromKey:function(e,t){if(arguments.length>2){var n=l(arguments);n[1]=0,this._list._spliceFromKey.apply(this._list,n)}var i=[];if(t){for(var r=[],o=this._filteredKeys,s=o.indexOf(e),a=s,u=o.length;u>a&&t>a-s;a++){var e=o[a];r.push(e)}var c=this;r.forEach(function(e){i.push(c._list._spliceFromKey(e,1)[0])})}return i}},{supportedForProcessing:!1})}),SortedListProjection:t.Namespace._lazy(function(){return t.Class.derive(f.ListProjection,function(e,t){this._list=e,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=t,this._initSortedKeys()},{_sortFunction:null,_sortedKeys:null,_initSortedKeys:function(){for(var e=this._list,t=[],n=0,i=e.length;i>n;n++){var r=e.getItem(n);r&&(t[n]=r.key)}var o=this._sortFunction,s=d(t,function(t,n){return t=e.getItemFromKey(t).data,n=e.getItemFromKey(n).data,o(t,n)});this._sortedKeys=s},_findInsertionPos:function(e,t,n,i,r){for(var o=this._sortFunction,s=this._sortedKeys,a=Math.max(0,i||-1),l=Math.min(s.length,r||Number.MAX_VALUE),u=a;l>=a;){u=(a+l)/2>>>0;var c=s[u];if(!c)break;var d=this.getItemFromKey(c),h=o(d.data,n);if(0>h)a=u+1;else{if(0===h)return this._findStableInsertionPos(e,t,a,l,u,n);l=u-1}}return a},_findBeginningOfGroup:function(e,t,n,i,r){for(var o=0,s=e;s>=o;){e=(o+s)/2>>>0;var a=i[e],l=n.getItemFromKey(a),u=t(l.data,r);0>u?o=e+1:s=e-1}return o},_findEndOfGroup:function(e,t,n,i,r){for(var o=e,s=i.length;s>=o;){e=(o+s)/2>>>0;var a=i[e];if(!a)return i.length;var l=n.getItemFromKey(a),u=t(l.data,r);0>=u?o=e+1:s=e-1}return o},_findStableInsertionPos:function(e,t,n,i,r,o){var s=this._list,a=s.length,l=this._sortFunction,u=this._sortedKeys;if(a/2>t){for(var c=t-1;c>=0;c--){var d=s.getItem(c);if(0===l(d.data,o))return a-n>i?u.indexOf(d.key,n)+1:u.lastIndexOf(d.key,i)+1}return this._findBeginningOfGroup(r,l,s,u,o)}for(var c=t+1;a>c;c++){var d=s.getItem(c);if(0===l(d.data,o))return a-n>i?u.indexOf(d.key,n):u.lastIndexOf(d.key,i)}return this._findEndOfGroup(r,l,s,u,o)},_listItemChanged:function(e){var t=e.detail.key,n=e.detail.newValue,i=e.detail.oldValue,r=this._sortFunction;if(0===r(i,n)){var o=this.indexOfKey(t);this._notifyItemChanged(t,o,i,n,e.detail.oldItem,e.detail.newItem)}else this._listItemRemoved({detail:{key:t,index:e.detail.index,value:e.detail.oldValue,item:e.detail.oldItem}}),this._listItemInserted({detail:{key:t,index:e.detail.index,value:e.detail.newValue}})},_listItemInserted:function(e,t,n){var i=e.detail.key,r=e.detail.index,o=e.detail.value,s=this._findInsertionPos(i,r,o,t,n);this._sortedKeys.splice(s,0,i),this._notifyItemInserted(i,s,o)},_listItemMoved:function(e,t,n){var i=e.detail.key,r=e.detail.newIndex,o=e.detail.value,s=this._sortedKeys,a=s.indexOf(i,t);s.splice(a,1);var l=this._findInsertionPos(i,r,o,t,n);s.splice(l,0,i),l!==a&&this._notifyItemMoved(i,a,l,o)},_listItemMutated:function(e){var t=e.detail.key,n=e.detail.value,i=e.detail.item,r=this._list.indexOfKey(t),o=this._sortedKeys.indexOf(t);this._sortedKeys.splice(o,1);var s=this._findInsertionPos(t,r,n);return this._sortedKeys.splice(o,0,t),o===s?void this._notifyItemMutated(t,n,i):(this._listItemRemoved({detail:{key:t,index:r,value:n,item:i}}),void this._listItemInserted({detail:{key:t,index:r,value:n}}))},_listItemRemoved:function(e,t){var n=e.detail.key,i=e.detail.value,r=e.detail.item,o=this._sortedKeys,s=o.indexOf(n,t);o.splice(s,1),this._notifyItemRemoved(n,s,i,r)},_listReload:function(){this._initSortedKeys(),this._notifyReload()},length:{get:function(){return this._sortedKeys.length},set:function(e){if(!("number"==typeof e&&e>=0))throw new i("WinJS.Binding.List.IllegalLength",h.illegalListLength);var t=this.length;t>e&&this.splice(e,t-e)}},getItem:function(e){return e=c(e),this.getItemFromKey(this._sortedKeys[e])},indexOfKey:function(e){return this._sortedKeys.indexOf(e)},notifyMutated:function(e){e=c(e),this._notifyMutatedFromKey(this._sortedKeys[e])},setAt:function(e,t){e=c(e),this._setAtKey(this._sortedKeys[e],t)},_spliceFromKey:function(e,t){if(arguments.length>2){var n=l(arguments);n[1]=0,this._list._spliceFromKey.apply(this._list,n)}var i=[];if(t){for(var r=[],o=this._sortedKeys,s=o.indexOf(e),a=s,u=o.length;u>a&&t>a-s;a++)r.push(o[a]);var c=this;r.forEach(function(e){i.push(c._list._spliceFromKey(e,1)[0])})}return i}},{supportedForProcessing:!1})}),GroupedSortedListProjection:t.Namespace._lazy(function(){return t.Class.derive(f.SortedListProjection,function(e,t,n,i){this._list=e,this._addListListener("itemchanged",this._listGroupedItemChanged),this._addListListener("iteminserted",this._listGroupedItemInserted),this._addListListener("itemmoved",this._listGroupedItemMoved),this._addListListener("itemmutated",this._listGroupedItemMutated),this._addListListener("itemremoved",this._listGroupedItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=function(e,n){return e=t(e),n=t(n),i?i(e,n):n>e?-1:e===n?0:1},this._groupKeyOf=t,this._groupDataOf=n,this._initSortedKeys(),this._initGroupedItems()},{_groupKeyOf:null,_groupDataOf:null,_groupedItems:null,_initGroupedItems:function(){for(var e={},t=this._list,n=this._groupKeyOf,i=0,r=t.length;r>i;i++){var o=u(t.getItem(i));o.groupKey=n(o.data),e[o.key]=o}this._groupedItems=e},_groupsProjection:null,_listGroupedItemChanged:function(e){var t=e.detail.key,n=e.detail.oldValue,i=e.detail.newValue,r=this._groupedItems,o=r[t],s=u(o);s.data=i,s.groupKey=this._groupKeyOf(i),r[t]=s;var a;o.groupKey===s.groupKey?(a=this.indexOfKey(t),this._notifyItemChanged(t,a,n,i,o,s)):(a=e.detail.index,this._listItemChanged({detail:{key:t,index:a,oldValue:n,newValue:i,oldItem:o,newItem:s}}))},_listGroupedItemInserted:function(e){var t=e.detail.key,n=e.detail.value,i=this._groupKeyOf(n);this._groupedItems[t]={handle:t,key:t,data:n,groupKey:i};var r,o;if(this._groupsProjection){var s=this._groupsProjection._groupItems[i];s&&(r=s.firstItemIndexHint,o=r+s.groupSize)}this._listItemInserted(e,r,o)},_listGroupedItemMoved:function(e){var t,n,i=this._groupedItems[e.detail.key].groupKey;if(this._groupsProjection){var r=this._groupsProjection._groupItems[i];t=r.firstItemIndexHint,n=t+r.groupSize}this._listItemMoved(e,t,n)},_listGroupedItemMutated:function(e){var t=e.detail.key,n=e.detail.value,i=this._groupedItems,r=i[t],o=this._groupKeyOf(n);if(r.groupKey===o)this._notifyItemMutated(t,n,r);else{var s=u(r);s.groupKey=o,i[t]=s;var a=this._list.indexOfKey(t);this._listItemRemoved({detail:{key:t,index:a,value:n,item:r}}),this._listItemInserted({detail:{key:t,index:a,value:n}})}},_listGroupedItemRemoved:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.value,r=this._groupedItems,o=r[t];delete r[t];var s,a;if(this._groupsProjection){var l=this._groupsProjection._groupItems[o.groupKey];s=l.firstItemIndexHint,a=s+l.groupSize}this._listItemRemoved({detail:{key:t,index:n,value:i,item:o}},s,a)},_listReload:function(){this._initGroupedItems(),f.SortedListProjection.prototype._listReload.call(this)},groups:{get:function(){return null===this._groupsProjection&&(this._groupsProjection=new f.GroupsListProjection(this,this._groupKeyOf,this._groupDataOf)),this._groupsProjection}},getItemFromKey:function(e){return this._groupedItems[e]}},{supportedForProcessing:!1})}),GroupsListProjection:t.Namespace._lazy(function(){return t.Class.derive(f.ListBase,function(e,t,n){this._list=e,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._groupKeyOf=t,this._groupDataOf=n,this._initGroupKeysAndItems()},{_list:null,_addListListener:function(e,t){this._list.addEventListener(e,t.bind(this))},_groupDataOf:null,_groupKeyOf:null,_groupOf:function(e){return this.getItemFromKey(this._groupKeyOf(e.data))},_groupKeys:null,_groupItems:null,_initGroupKeysAndItems:function(){for(var e,t=this._groupDataOf,n=this._list,i={},r=[],o=null,s=null,a=0,l=n.length;l>a;a++){var u=n.getItem(a),c=u.groupKey;c!==o?(s&&(s.groupSize=e),e=1,o=c,s={handle:c,key:c,data:t(u.data),firstItemKey:u.key,firstItemIndexHint:a},i[c]=s,r.push(c)):e++}s&&(s.groupSize=e),this._groupKeys=r,this._groupItems=i},_listItemChanged:function(e){var t=e.detail.key,n=e.detail.index,i=e.detail.newValue,r=this._list,o=r.getItemFromKey(t).groupKey,s=this._groupItems,a=s[o];if(a.firstItemIndexHint===n){var l=u(a);l.data=this._groupDataOf(i),l.firstItemKey=t,s[o]=l,this._notifyItemChanged(o,this._groupKeys.indexOf(o),a.data,l.data,a,l)}},_listItemInserted:function(e){var t,n,i,r,o,s=e.detail.key,a=e.detail.index,l=e.detail.value,c=this._list,d=c.getItemFromKey(s).groupKey,h=this._groupItems,p=this._groupKeys,m=h[d];if(m)n=m,i=u(n),i.groupSize++,n.firstItemIndexHint===a&&(i.groupData=this._groupDataOf(l),i.firstItemKey=s,i.firstItemIndexHint=a),h[d]=i,t=p.indexOf(d),this._notifyItemChanged(d,t,n.data,i.data,n,i);else{for(r=0,o=p.length;o>r&&(m=h[p[r]],!(m.firstItemIndexHint>=a));r++);t=r,m={handle:d,key:d,data:this._groupDataOf(l),groupSize:1,firstItemKey:s,firstItemIndexHint:a},p.splice(t,0,d),h[d]=m,this._notifyItemInserted(d,t,m.data)}for(r=t+1,o=p.length;o>r;r++)n=h[p[r]],i=u(n),i.firstItemIndexHint++,h[i.key]=i,this._notifyItemChanged(i.key,r,n.data,i.data,n,i)},_listItemMoved:function(e){var t=e.detail.key,n=e.detail.oldIndex,i=e.detail.newIndex,r=this._list,o=r.getItemFromKey(t).groupKey,s=this._groupItems,a=s[o];if(a.firstItemIndexHint===i||a.firstItemIndexHint===n){var l=r.getItem(a.firstItemIndexHint),c=u(a);c.data=this._groupDataOf(l.data),c.firstItemKey=l.key,s[o]=c,this._notifyItemChanged(o,this._groupKeys.indexOf(o),a.data,c.data,a,c)}},_listItemRemoved:function(e){var t,n,i=e.detail.index,r=e.detail.item,o=this._groupItems,s=this._groupKeys,a=r.groupKey,l=o[a],c=s.indexOf(a);if(1===l.groupSize)s.splice(c,1),delete o[a],this._notifyItemRemoved(a,c,l.data,l),c--;else{if(t=l,n=u(t),n.groupSize--,t.firstItemIndexHint===i){var d=this._list.getItem(i);n.data=this._groupDataOf(d.data),n.firstItemKey=d.key}o[a]=n,this._notifyItemChanged(a,c,t.data,n.data,t,n)}for(var h=c+1,p=s.length;p>h;h++)t=o[s[h]],n=u(t),n.firstItemIndexHint--,o[n.key]=n,this._notifyItemChanged(n.key,h,t.data,n.data,t,n)},_listReload:function(){this._initGroupKeysAndItems(),this._notifyReload()},length:{get:function(){return this._groupKeys.length}},getItem:function(e){return e=c(e),this._groupItems[this._groupKeys[e]]},getItemFromKey:function(e){return this._groupItems[e]},indexOfKey:function(e){return this._groupKeys.indexOf(e)}},{supportedForProcessing:!1})})});t.Namespace._moduleDefine(e,"WinJS.Binding",{List:t.Namespace._lazy(function(){return t.Class.derive(f.ListBaseWithMutators,function(e,t){if(this._currentKey=0,this._keys=null,this._keyMap={},t=t||m,this._proxy=t.proxy,this._binding=t.binding,this._proxy){if(Object.keys(e).length!==e.length)throw new i("WinJS.Binding.List.NotSupported",h.sparseArrayNotSupported);this._data=e,this._currentKey=e.length}else if(e){for(var n=this._keyMap,r=0,o=0,a=e.length;a>o;o++)if(o in e){var l=e[o];this._binding&&(l=s.as(l));var u=r.toString();r++,n[u]={handle:u,key:u,data:l}}r!==o&&this._initializeKeys(),this._currentKey=r}},{_currentKey:0,_keys:null,_keyMap:null,_modifyingData:0,_initializeKeys:function(){if(!this._keys){var e=[];if(this._data){for(var t=this._keyMap,n=this._data,i=0,r=n.length;r>i;i++)if(i in n){var o=i.toString();if(e[i]=o,!(o in t)){var a=n[i];this._binding&&(a=s.as(a)),
t[o]={handle:o,key:o,data:a}}}}else Object.keys(this._keyMap).forEach(function(t){e[t>>>0]=t});this._keys=e}},_lazyPopulateEntry:function(e){if(this._data&&e in this._data){var t=this._data[e];this._binding&&(t=s.as(t));var n=e.toString(),i={handle:n,key:n,data:t};return this._keyMap[i.key]=i,i}},_assignKey:function(){return(++this._currentKey).toString()},length:{get:function(){return this._data?this._data.length:this._keys?this._keys.length:this._currentKey},set:function(e){if(!("number"==typeof e&&e>=0))throw new i("WinJS.Binding.List.IllegalLength",h.illegalListLength);this._initializeKeys();var t=this.length;if(t>e?this.splice(e,t-e):e=t,this._data){this._modifyingData++;try{this._data.length=e}finally{this._modifyingData--}}this._keys&&(this._keys.length=e)}},getItem:function(e){var t,n;return e=c(e),this._keys?(n=this._keys[e],t=n&&this._keyMap[n]):(n=e.toString(),t=this._keyMap[n]||this._lazyPopulateEntry(e)),t},getItemFromKey:function(e){var t;return t=this._keys||!this._data?this._keyMap[e]:this.getItem(e>>>0)},indexOfKey:function(e){var t=-1;if(this._keys)t=this._keys.indexOf(e);else{var n=e>>>0;n<this._currentKey&&(t=n)}return t},move:function(e,t){if(e=c(e),t=c(t),this._initializeKeys(),!(e===t||0>e||0>t||e>=this.length||t>=this.length)){if(this._data){this._modifyingData++;try{var n=this._data.splice(e,1)[0];this._data.splice(t,0,n)}finally{this._modifyingData--}}var i=this._keys.splice(e,1)[0];this._keys.splice(t,0,i),this._notifyItemMoved(i,e,t,this.getItemFromKey(i).data)}},notifyMutated:function(e){e=c(e);var t=this._keys?this._keys[e]:e.toString();this._notifyMutatedFromKey(t)},setAt:function(e,t){e=c(e),this._initializeKeys();var n=this.length;if(e===n)this.push(t);else if(n>e){if(this._data){this._modifyingData++;try{this._data[e]=t}finally{this._modifyingData--}}if(this._binding&&(t=s.as(t)),e in this._keys){var i=this._keys[e],r=this._keyMap[i],o=u(r);o.data=t,this._keyMap[i]=o,this._notifyItemChanged(i,e,r.data,t,r,o)}}},_setAtKey:function(e,t){this.setAt(this.indexOfKey(e),t)},reverse:function(){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.reverse()}finally{this._modifyingData--}}return this._keys.reverse(),this._notifyReload(),this},sort:function(e){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.sort(e)}finally{this._modifyingData--}}var t=this;return this._keys.sort(function(n,i){return n=t._keyMap[n],i=t._keyMap[i],e?e(n.data,i.data):(n=(n&&n.data||"").toString(),i=(n&&i.data||"").toString(),i>n?-1:n===i?0:1)}),this._notifyReload(),this},pop:function(){if(0!==this.length){this._initializeKeys();var e=this._keys.pop(),t=this._keyMap[e],n=t&&t.data;if(this._data){this._modifyingData++;try{this._data.pop()}finally{this._modifyingData--}}return delete this._keyMap[e],this._notifyItemRemoved(e,this._keys.length,n,t),n}},push:function(){this._initializeKeys();for(var e=arguments.length,t=0;e>t;t++){var n=arguments[t];this._binding&&(n=s.as(n));var i=this._assignKey();if(this._keys.push(i),this._data){this._modifyingData++;try{this._data.push(arguments[t])}finally{this._modifyingData--}}this._keyMap[i]={handle:i,key:i,data:n},this._notifyItemInserted(i,this._keys.length-1,n)}return this.length},shift:function(){if(0!==this.length){this._initializeKeys();var e=this._keys.shift(),t=this._keyMap[e],n=t&&t.data;if(this._data){this._modifyingData++;try{this._data.shift()}finally{this._modifyingData--}}return delete this._keyMap[e],this._notifyItemRemoved(e,0,n,t),n}},unshift:function(){this._initializeKeys();for(var e=arguments.length,t=e-1;t>=0;t--){var n=arguments[t];this._binding&&(n=s.as(n));var i=this._assignKey();if(this._keys.unshift(i),this._data){this._modifyingData++;try{this._data.unshift(arguments[t])}finally{this._modifyingData--}}this._keyMap[i]={handle:i,key:i,data:n},this._notifyItemInserted(i,0,n)}return this.length},splice:function(e,t,n){e=c(e),this._initializeKeys(),e=Math.max(0,this._normalizeIndex(e)),t=Math.max(0,Math.min(t||0,this.length-e));for(var i=[];t;){var r=this._keys[e],o=this._keyMap[r],a=o&&o.data;if(i.push(a),this._keys.splice(e,1),this._data){this._modifyingData++;try{this._data.splice(e,1)}finally{this._modifyingData--}}delete this._keyMap[r],this._notifyItemRemoved(r,e,a,o),--t}if(arguments.length>2)for(var l=2,u=arguments.length;u>l;l++){var d=arguments[l];this._binding&&(d=s.as(d));var h=Math.min(e+l-2,this.length),p=this._assignKey();if(this._keys.splice(h,0,p),this._data){this._modifyingData++;try{this._data.splice(h,0,arguments[l])}finally{this._modifyingData--}}this._keyMap[p]={handle:p,key:p,data:d},this._notifyItemInserted(p,h,d)}return i},_spliceFromKey:function(e){this._initializeKeys();var t=l(arguments);return t[0]=this._keys.indexOf(e),this.splice.apply(this,t)}},{supportedForProcessing:!1})})})}),define("WinJS/Res",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./Core/_ErrorFromName","./Core/_Resources","./ControlProcessor/_OptionsParser","./Promise"],function(e,t,n,i,r,o,s,a){"use strict";function l(e,n){e=e||t.document.body;var n=n||0;if(4>n){if(0===n&&e.getAttribute){var o=e.getAttribute("data-win-res");if(o){var l=s.optionsParser(o);d(e,e,l,n)}}var u="[data-win-res],[data-win-control]",c=e.querySelectorAll(u);if(0===c.length)return a.as(e);for(var p=0,f=c.length;f>p;p++){var _=c[p];if(_.winControl&&_.winControl.constructor&&_.winControl.constructor.isDeclarativeControlContainer){var g=_.winControl.constructor.isDeclarativeControlContainer;"function"==typeof g&&(g=m(g),g(_.winControl,h),p+=_.querySelectorAll(u).length)}if(_.hasAttribute("data-win-res")){var l=s.optionsParser(_.getAttribute("data-win-res"));d(_,_,l,n)}}}else if(i.validation)throw new r("WinJS.Res.NestingExceeded","NestingExceeded");return a.as(e)}function u(e,t){for(var n=Object.keys(t),r=0,s=n.length;s>r;r++){var a=n[r],l=t[a],u=o.getString(l);u&&u.empty?i.validation&&c(l):(e.setAttribute(a,u.value),void 0!==u.lang&&void 0!==e.lang&&e.lang!==u.lang&&(e.lang=u.lang))}}function c(e){throw new r("WinJS.Res.NotFound",o._formatString("NotFound: {0}",e))}function d(e,t,n,r){var s=Object.keys(n);t=m(t);for(var a=0,h=s.length;h>a;a++){var p=s[a],f=n[p];if("string"==typeof f){var _=o.getString(f);_&&_.empty?i.validation&&c(f):(t[p]=_.value,void 0!==_.lang&&void 0!==e.lang&&e.lang!==_.lang&&(e.lang=_.lang),"innerHTML"===p&&l(t,r+1))}else e===t&&"attributes"===p?u(e,f):d(e,t[p],f,r)}}function h(e){if(!p)return i.ready().then(function(){return p=!0,l(e)});try{return l(e)}catch(t){return a.wrapError(t)}}var p=!1,m=i.requireSupportedForProcessing;n.Namespace._moduleDefine(e,"WinJS.Resources",{processAll:h})}),define("WinJS/Pages/_BasePage",["exports","../Core/_Global","../Core/_Base","../Core/_BaseUtils","../Core/_WriteProfilerMark","../Promise","../Utilities/_Control","../Utilities/_Dispose","../Utilities/_ElementUtilities"],function(e,t,n,i,r,o,s,a,l){"use strict";function u(e){var n=t.document.createElement("a");return n.href=e,n.href}function c(e){return t.document.location.href.toLowerCase()===e.toLowerCase()}function d(e,a){var d=h(e);return e=u(e),d||(d=n.Class.define(function(n,s,a,u){var d=this;this._disposed=!1,this.element=n=n||t.document.createElement("div"),l.addClass(n,"win-disposable"),n.msSourceLocation=e,this.uri=e,this.selfhost=c(e),n.winControl=this,l.addClass(n,"pagecontrol");var h=" uri='"+e+"'"+i._getProfilerMarkIdentifier(this.element);r("WinJS.UI.Pages:createPage"+h+",StartTM");var p=o.wrap().then(function(){return d.load(e)}),m=p.then(function(e){return o.join({loadResult:e,initResult:d.init(n,s)})}).then(function(e){return d.render(n,s,e.loadResult)});this.elementReady=m.then(function(){return n}),this.renderComplete=m.then(function(){return d.process(n,s)}).then(function(){return d.processed(n,s)}).then(function(){return d});var f=function(){a&&a(d),r("WinJS.UI.Pages:createPage"+h+",StopTM")};this.renderComplete.then(f,f),this.readyComplete=this.renderComplete.then(function(){return u}).then(function(){return d.ready(n,s),d}).then(null,function(e){return d.error(e)})},f),d=n.Class.mix(d,s.DOMEventMixin),m[e.toLowerCase()]=d),a&&(d=n.Class.mix(d,a)),d.selfhost=c(e),d}function h(e){return e=u(e),m[e.toLowerCase()]}function p(e){e=u(e),delete m[e.toLowerCase()]}if(t.document){var m={},f={dispose:function(){this._disposed||(this._disposed=!0,a.disposeSubTree(this.element),this.element=null)},load:function(e){},init:function(e,t){},process:function(e,t){},processed:function(e,t){},render:function(e,t,n){},ready:function(e,t){},error:function(e){return o.wrapError(e)}};n.Namespace._moduleDefine(e,null,{abs:u,define:d,get:h,remove:p,viewMap:m})}}),define("WinJS/Pages",["exports","./Core/_Global","./Core/_Base","./Core/_BaseUtils","./ControlProcessor","./Fragments","./Pages/_BasePage","./Promise"],function(e,t,n,i,r,o,s,a){"use strict";function l(e,r){var o=s.get(e);return o||(o=s.define(e,h)),r&&(o=n.Class.mix(o,r)),o.selfhost&&i.ready(function(){d(s.abs(e),t.document.body)},!0),o}function u(e){var t=s.get(e);return t||(t=l(e)),t}function c(e){o.clearCache(s.abs(e)),s.remove(e)}function d(e,t,n,i){var r=u(e),o=new r(t,n,null,i);return o.renderComplete.then(null,function(e){return a.wrapError({error:e,page:o})})}if(t.document){var h={load:function(e){return this.selfhost?void 0:o.renderCopy(s.abs(e))},process:function(e,t){return r.processAll(e)},render:function(e,t,n){return this.selfhost||e.appendChild(n),e}};n.Namespace._moduleDefine(e,"WinJS.UI.Pages",{define:l,get:u,_remove:c,render:d,_viewMap:s.viewMap})}}),define("WinJS/Controls/HtmlControl",["exports","../Core/_Global","../Core/_Base","../Pages"],function(e,t,n,i){"use strict";t.document&&n.Namespace._moduleDefine(e,"WinJS.UI",{HtmlControl:n.Class.define(function(e,t,n){i.render(t.uri,e,t).then(n,function(){n()})})})}),define("base",["WinJS/Core/_WinJS","WinJS/Core","WinJS/Promise","WinJS/_Signal","WinJS/Scheduler","WinJS/Utilities","WinJS/XYFocus","WinJS/Fragments","WinJS/Application","WinJS/Navigation","WinJS/Animations","WinJS/Binding","WinJS/BindingTemplate","WinJS/BindingList","WinJS/Res","WinJS/Pages","WinJS/ControlProcessor","WinJS/Controls/HtmlControl"],function(e){"use strict";return e.Namespace.define("WinJS.Utilities",{_require:require,_define:define}),e}),require(["WinJS/Core/_WinJS","base"],function(e){globalObject.WinJS=e,module.exports=e}),globalObject.WinJS})}()}).call(exports,function(){return this}())}]);